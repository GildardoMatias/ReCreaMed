{"version":3,"sources":["resources.jsx","assets/Logo.png","session/login.jsx","session/register.jsx","loading.jsx","doctorViews/citas/cita.create.jsx","doctorViews/citas/citas.jsx","assets/diagnosticos2.js","doctorViews/expedientes/nuevaNota.jsx","doctorViews/expedientes/detalleRecetaForPrint.jsx","doctorViews/expedientes/detalleReceta.jsx","doctorViews/expedientes/lastCita.jsx","doctorViews/expedientes/soap.jsx","doctorViews/expedientes/detalleNota.jsx","doctorViews/expedientes/detalleHistoria.jsx","doctorViews/expedientes/expedientes.jsx","doctorViews/perfil/perfilEdit.jsx","doctorViews/perfil/service.add.jsx","doctorViews/perfil/configuration.jsx","doctorViews/perfil/perfil.jsx","assets/Icon.png","doctorViews/home/home.jsx","doctorViews/pacientes/detalles.paciente.jsx","doctorViews/pacientes/register.patient.jsx","doctorViews/pacientes/main.pacientes.jsx","escalas/escalasCreateGeneralLink.jsx","escalas/depresion/depresion_1/depresionResults.jsx","escalas/depresion/depresion_2/depresion2_results.jsx","escalas/depresion/depresionMenu.jsx","escalas/ketamina/ketaminaResults.jsx","escalas/estres_post_traumatico/post_traumatico/p_t_results.jsx","escalas/estres_post_traumatico/p_t_mexicana/p_t_mexicana_results.jsx","escalas/estres_post_traumatico/postTraumaticoMenu.jsx","escalas/dolor/dolorResults.jsx","escalas/escalasMenu.jsx","doctorViews/balances/create-balance.jsx","doctorViews/balances/ticket-for-print.jsx","doctorViews/balances/balances.jsx","doctorViews/stripe/stripe.jsx","doctorViews/cortes/corteForPrint.jsx","doctorViews/cortes/details.corte.jsx","doctorViews/cortes/main.cortes.jsx","doctorViews/doctorApp.js","recepcionViews/pacientesDash/register.patient.jsx","recepcionViews/pacientesDash/dash.patients.jsx","recepcionViews/pacientesDash/move.patients.jsx","recepcionViews/pacientesDash/detalles.paciente.jsx","recepcionViews/pacientesDash/side.patients.jsx","recepcionViews/pacientesDash/main.patients.jsx","recepcionViews/citas/create-cita-for-medic.jsx","recepcionViews/citas/hospital-tab.citas.jsx","recepcionViews/citas/main.citas.jsx","recepcionViews/expedientes/createExpedient.jsx","recepcionViews/expedientes/nuevaNota.jsx","assets/logos/william_h.jpg","recepcionViews/expedientes/detalleRecetaForPrint.jsx","recepcionViews/expedientes/detalleReceta.jsx","recepcionViews/expedientes/detalleNota.jsx","recepcionViews/expedientes/detalleHistoria.jsx","recepcionViews/expedientes/expedientes.jsx","recepcionViews/perfilEdit.jsx","recepcionViews/perfil.jsx","recepcionViews/home/home.jsx","recepcionViews/historial.jsx","recepcionViews/pacientes/register.user.jsx","recepcionViews/pacientes/dash.patients.hospital-tab.jsx","recepcionViews/pacientes/dash.patients.main.jsx","recepcionViews/pacientes/main.pacientes.jsx","recepcionViews/ingresos/create-ingreso.jsx","recepcionViews/ingresos/ticket-for-print.jsx","recepcionViews/ingresos/ingresos.jsx","escalas/ketamina/ketamina_catalog.jsx","escalas/ketamina/ketaminaEncuesta.jsx","escalas/depresion/depresion_1/depresion_catalog.jsx","escalas/depresion/depresion_1/depresionEncuesta.jsx","escalas/depresion/depresion_2/depresion2_catalog.jsx","escalas/depresion/depresion_2/depresion2_encuesta.jsx","escalas/dolor/dolor_catalog.jsx","escalas/dolor/dolorEncuesta.jsx","escalas/estres_post_traumatico/post_traumatico/p_t_catalog.jsx","escalas/estres_post_traumatico/post_traumatico/p_t_encuesta.jsx","escalas/estres_post_traumatico/p_t_clinico/p_t_clinico_catalog.jsx","escalas/estres_post_traumatico/p_t_clinico/p_t_clinico_encuesta.jsx","escalas/estres_post_traumatico/p_t_mexicana/p_t_mexicana_catalog.jsx","escalas/estres_post_traumatico/p_t_mexicana/p_t_mexicana_encuesta.jsx","session/public_escalas_routes.jsx","recepcionViews/horarios/horarios.jsx","recepcionViews/recepcionApp.js","patientViews/misCitas.jsx","patientViews/recetas.jsx","patientViews/perfilEdit.jsx","patientViews/perfil.jsx","patientViews/home/home.jsx","patientViews/patientApp.js","admHospitalViews/citas/create-cita-for-medic.jsx","admHospitalViews/citas/hospital-tab.citas.jsx","admHospitalViews/citas/main.citas.jsx","admHospitalViews/patients/register.user.jsx","admHospitalViews/patients/dash.patients.hospital-tab.jsx","admHospitalViews/patients/dash.patients.main.jsx","admHospitalViews/patients/main.users.jsx","admHospitalViews/doctors/register.doctor.jsx","admHospitalViews/doctors/dash.doctors.hospitalTab.jsx","admHospitalViews/doctors/dash.doctors.main.jsx","admHospitalViews/doctors/main.doctors.jsx","admHospitalViews/sucursal.jsx","admHospitalViews/perfil/perfil.edit.jsx","admHospitalViews/perfil/perfil.administrador.jsx","admHospitalViews/ingresos/create-ingreso.jsx","admHospitalViews/ingresos/ticket-for-print.jsx","admHospitalViews/ingresos/ingresos.jsx","admHospitalViews/cortes/details.corte.jsx","admHospitalViews/cortes/main.cortes.jsx","admHospitalViews/receptionists/register.receptionist.jsx","admHospitalViews/receptionists/dash.receptionists.hospitalTab.jsx","admHospitalViews/receptionists/dash.receptionists.main.jsx","admHospitalViews/receptionists/horarios.receptionists.jsx","admHospitalViews/receptionists/main.receptionists.jsx","admHospitalViews/adminHospitalApp.js","superAdminViews/patients/register.patient.jsx","superAdminViews/patients/dash.patients.jsx","superAdminViews/patients/main.patients.jsx","superAdminViews/doctors/register.doctor.jsx","superAdminViews/doctors/dash.doctors.jsx","superAdminViews/doctors/side.doctors.jsx","superAdminViews/doctors/main.doctors.jsx","superAdminViews/hospitals/register.hospital.jsx","superAdminViews/hospitals/dash.hospitals.jsx","superAdminViews/hospitals/side.hospitals.jsx","superAdminViews/hospitals/main.hospitals.jsx","superAdminViews/admins/register.admin.jsx","superAdminViews/admins/dash.admins.jsx","superAdminViews/admins/side.admins.jsx","superAdminViews/admins/main.admins.jsx","superAdminViews/receptionists/register.receptionist.jsx","superAdminViews/receptionists/dash.receptionists.jsx","superAdminViews/receptionists/side.receptionists.jsx","superAdminViews/receptionists/main.receptionists.jsx","superAdminViews/superAdminApp.js","App.js","index.js"],"names":["API","S_API","IMAGE_API","logout","localStorage","getItem","sendSchedule","removeItem","window","location","href","_id","usuario","scheduleBody","fecha_hora_entrada","fecha_hora_salida","Date","notas","sendDataBody","then","JSON","parse","getData","endpoint","fetch","mode","response","json","data","deleteData","method","headers","res","console","log","message","info","catch","error","updateData","values","body","stringify","success","Footer","style","display","alignItems","justifyContent","height","backgroundColor","color","marginLeft","estados","myHospitals","horarios","map","item","ids_hospitales","Login","lg","span","offset","md","sm","xs","hoverable","justify","src","logo","alt","width","name","className","initialValues","remember","onFinish","setItem","user","rol","token","err","alert","Item","rules","required","prefix","UserOutlined","placeholder","Password","LockOutlined","valuePropName","noStyle","block","type","htmlType","Option","Select","formItemLayout","labelCol","wrapperCol","tailFormItemLayout","Register","Form","useForm","form","useState","sucursales","setSucursales","sucursalesLoading","setSucursalesLoading","useEffect","getHospitalesData","prefixSelector","value","avatar","estatus","confirm","agreement","sucursal","horario","scrollToFirstError","label","hasFeedback","dependencies","getFieldValue","validator","_","Promise","reject","Error","resolve","addonBefore","List","fields","add","remove","key","restField","marginBottom","align","s","nombre","MinusCircleOutlined","onClick","icon","PlusOutlined","Loading","margin","padding","textAlign","background","borderRadius","CreateCitaForm","props","configuracion","costo_cita","forEach","h","misPacientes","setMisPacientes","setIsOnline","setHospital","usesCostoBase","setUsesCostoBase","costo","setCosto","getPacientesOfDoctor","rs","p","createBalance","_cita","_fecha_hora","balanceBody","tipo","medico","cita","monto","forma_de_pago","fecha_hora","estado","tratamiento","finally","getCitasData","setIsModalOpen","setEditingCita","id_nueva_cita","onFinishFailed","errorInfo","autoComplete","isOnline","duracion","options","onChange","checked","showTime","format","use12Hours","tratamientos_ofrecidos","t","CreateCita","handCreateleCancel","title","open","isOpenModal","onOk","onCancel","destroyOnClose","footer","isCreateModalOpen","localizer","dayjsLocalizer","dayjs","Citas","citasData","setCitasData","loading","setLoading","editingCita","isModalOpen","handleCancel","citaForEdit","setCitaForEdit","setFecha_hora","setIsCreateModalOpen","start","endDate","setTime","getTime","end","id","selectEvent","e","hospital","sucursa","paciente","scrollToTime","now","defaultDate","selectable","events","startAccessor","endAccessor","messages","next","previous","today","month","week","day","defaultView","onDoubleClickEvent","onSelectEvent","onSelecting","onSelectSlot","action","description","onConfirm","okText","cancelText","danger","toLocaleDateString","toLocaleTimeString","comentarios","diagnosticos","F00","F01","F02","F03","F04","F05","F06","F07","F09","F40","F41","F42","F43","F45","F48","F50","F51","F52","F53","F54","F55","F59","F60","F70","F71","F72","F73","F78","F79","F80","F81","F82","F83","F84","F88","F89","F90","F91","F92","F93","F94","F95","F98","F99","X60","X61","X62","X63","X64","X65","X66","X67","X68","X69","X70","X71","X72","X73","X74","X75","X76","X77","X78","X79","X80","X81","X82","X83","X84","Y46","Y47","Y49","Y50","Y51","Y57","OptGroup","Dragger","Upload","TextArea","Input","handleChange","NuevaNota","estudiosFiles","setEstudiosFiles","nota","id_medico","id_usuario","recetas","estudios","newNota","prevExpNotas","push","id_nota","id_expediente","dragDropProps","multiple","status","file","fileList","onDrop","dataTransfer","files","InboxOutlined","setIsModalVisible","marginTop","rows","showSearch","Object","keys","k","sk","RecetaDocument","styles","StyleSheet","create","page","flexDirection","sectionFull","marginHorizontal","flexGrow","section","image","desc","fontSize","footText","prescription","Receta","size","orientation","logoHospital","borderBottomColor","borderBottomWidth","especialidad","universidades","u","length","carrera","universidad","toUpperCase","cedula","toLocaleString","lineHeight","receta","prescripcion","email","telefono","Logo","DetalleReceta","recetaData","setRecetaData","recetaLoading","setRecetaLoading","recetaForEdit","setRecetaForEdit","isModalVisible","isEditingModalVisible","setIsEditingModalVisible","isPrintingModalVisible","setIsPrintingModalVisible","handleEditCancel","handlePrintCancel","setIsLogoSelected","setLogoHospital","nombreHospital","setNombreHospital","isLogoSelected","getRecetasData","finifhGet","newReceta","id_receta","editReceta","r","printReceta","shape","ghost","whiteSpace","FormOutlined","PrinterOutlined","bordered","Grid","Paragraph","Typography","LastCita","setCita","lastBalance","setLastBalance","updateLastBalance","newMonto","newLastBalance","ultimaCita","eventos","fechaActual","eventosPasados","filter","evento","sort","a","b","fechaA","getLastCta","last","bl","LastBalance","columnGap","DollarOutlined","editable","CalendarOutlined","marginRight","ClockCircleOutlined","substring","Collapse","Panel","DetalleNota","notaData","setNotaData","notaLoading","setnotaLoading","notaForEdit","setNotaForEdit","isEditModalVisible","setIsEditModalVisible","editarNota","n","editingEntradas","setEditingEntradas","id_paciente","getNotasData","finishGet","nt","i","EstudioGridStyle","createNota","newNotaBody","edad","talla","imc","peso","temperatura","presion_arterial","frecuencia_cardiaca","frecuencia_respiratoria","Observaciones","updateNota","originalNota","field","newString","onEntryFinishFailed","items","children","gutter","ns","diagnostico","newValue","vals","entradas","onEntryFinish","SaveOutlined","CloseOutlined","createdAt","descripcion","ExperimentOutlined","DownloadOutlined","float","EditOutlined","reverse","DetalleHistoria","historiaData","setHistoriaData","setHistoriaLoading","editing","setEditing","historia","getHistoriaData","gridStyle","updateHistoria","HistoriaDetails","historial","disabled","position","bottom","right","Expedientes","expedientesData","setExpedientesData","expedientesLoading","setExpedientesLoading","setHistoria","setNotas","getExpedientesData","addHistoria","createPAtientData","usr","postBody","id_historia","PerfilEdit","perfil","setAvatar","AddService","isOpen","handleClose","service","profileData","getProfileData","setinitialService","newData","onFinishEdit","foundIndex","findIndex","svc","maxWidth","Configuration","correo","setProfileData","editingCostoCita","setEditingCostoCita","setisModalOpen","servicioForEdit","setServicioForEdit","confirmDelete","val","splice","columns","dataIndex","render","record","handleEditService","CostoCitaForm","onFinishEditPrice","newConfig","assign","alignContent","dataSource","Perfil","isLoading","setIsLoading","editPerfil","MiniCard","borderBottom","DetailsProfile","Component","DetallesPaciente","bodyStyle","alignSelf","MailOutlined","MobileOutlined","responsable","sexo","ocupacion","estado_civil","fuma","alcohol","drogas","cuales_drogas","enfermedades_familiares","enfermedades_medicas","textOverflow","overflow","RegisterForm","setAdding","password","certificacion","medicos_asignados","res_name","res_phone","url","user_id","finishUpdate","getPacientesData","overflowY","UploadOutlined","whitespace","min","max","defaultChecked","errors","index","validateTrigger","ErrorList","MainPacientes","pacientesData","setPacientesData","isRegisterModalOpen","setIsRegisterModalOpen","isEditModalOpen","setIsEditModalOpen","activePatient","setActivePatient","dropdownStyle","optionFilterProp","found","find","onSearch","filterOption","input","option","toLowerCase","includes","EscalasCreateGeneralLink","selectedPatient","setSelectedPatient","link","setLink","medicosData","setMedicosData","setMedico","imageRef","useRef","myDoctors","doctorsData","doctorsFound","id_hospital","doctor","handleDownload","toPng","current","dataUrl","document","createElement","download","click","handleCopy","toBlob","blob","navigator","clipboard","write","ClipboardItem","paddingTop","l","writeText","target","rel","ref","DepresionResults","encuestasData","setEncuestasData","countersData","setCountersData","getDoctorsData","getEncuestasData","getCounters","allEncuestas","results","pac","aprs","enc","latest","at","Depresion2Results","setLoadingCounters","respuestas_depresion2_gpc","hrsd","madrs","phq","DepresionMenu","KetaminaResults","ketaminaData","setKetaminaData","getAllEscalas","medicos","promises","all","resultados","ingresos","flat","sorter","fecha","respuestas_ketamina","desrealizacion_0","desrealizacion_1","despersonalizacion_0","despersonalizacion_1","amnesia_0","amnesia_1","direction","percent","ketamina","ketaminaiv","ketaminaivb","Aumento_de_la_Presión_Arterial","Debilidad_o_Mareos_ligeros","Dolor_de_cabeza","Mareos","Nauseas","Sentimientos_de_Ansiedad","scroll","x","PostTraumaticoResults","setColumns","addColumns","respuestas_ept1_davidson","PostTraumaticoMexicanaResults","respuestas_ept_3mx","PostTraumaticoMenu","DolorResults","respuestas_dolor","escalasMenuItems","Escalas","defaultActiveKey","tabPosition","CreateBalance","setBalanceForEdit","balanceForEdit","getBalancesData","titleContainer","reportTitle","fontFamily","textTransform","subtitle","text","sellerBuyerInfo","infoTitle","infoText","table","borderStyle","borderWidth","borderColor","tableRow","tableColHeader","paddingBottom","tableCol","tableCellHeader","total","paddingRight","header","company","Ticket","seller","buyer","concepto","toFixed","reduce","acc","Text","Balances","balancesData","setBalancesData","ingresoForEdit","setIngresoForEdit","isIngresoModalOpen","setIsIngresoModalOpen","showIngresoModal","egresoForEdit","setEgresoForEdit","isEgresoModalOpen","setIsEgresoModalOpen","ingresoForPrint","setIngresoForPrint","isTicketModalOpen","setIsTicketModalOpen","abono","factura","CheckCircleTwoTone","loadStripe","CorteDocument","totales","ingresosTotales","totalPendiente","totalPagados","totalPendientes","totalCobros","Detalles","isPrinting","setIsPrinting","setTotales","handleOk","corte","totalIngresos","listOfDeudors","c","deudasTotales","cobrosTotales","pagados","pendientes","MatchPatient","patient","exportToExcel","ws","XLSX","utils","json_to_sheet","wb","Sheets","SheetNames","excelBuffer","bookType","Blob","FileSaver","Cortes","cortesData","setCortesData","corteForDetails","setCorteForDetails","getCortesData","fecha_inicio","fecha_cierre","placement","newCorte","comentario","Navigator","Navbar","bg","variant","expand","Container","Brand","Toggle","Nav","Link","DoctorApp","path","suffixSelector","residence","addonAfter","Dash","MovePatients","getMedicosData","userMedicos","Header","Layout","Content","Sider","SideMenu","handleClick","state","collapsed","onCollapse","setState","toggle","minHeight","theme","collapsible","this","defaultSelectedKeys","to","UserAddOutlined","SwapOutlined","paddingLeft","MenuOutlined","cursor","exact","component","Patients","setMedicos","servicios","setServicios","errorMessage","setErrorMessage","enableCreateCita","setEnableCreateCita","costoBaseCita","setCostoBaseCita","handlePatientChange","handleMedicochange","_concepto","m","servicio","selected","labelInValue","enableCreate","HospitalTab","dl","med","findPatientsOfMyMedicos","CreateExpedient","historiasData","sethistoriasData","historiasLoading","sethistoriasLoading","notasData","setNotasData","notasLoading","setNotasLoading","recetasData","setRecetasData","recetasLoading","setRecetasLoading","visible","defaultValue","TabPane","Tabs","NotaGridStyle","border","onTabClick","tab","getElementById","html2canvas","canvas","imgData","toDataURL","pdf","jsPDF","addImage","save","setProfileForEdit","Historial","id_sucursales","findMyDoctors","arr","reload","errorFields","setValue","setPaciente","editingProfile","setEditingProfile","searchText","setSearchText","onFilter","newPatients","deleteUser","pacientesDataFiltered","DetalleUsuario","SearchOutlined","pagination","Users","isCreating","getIngresos","ingreso","userName","citaName","Ingresos","ingresosData","setIngresosData","handleEditIngreso","moment","utc","defaultSortOrder","pagado","gap","catalogo_efectos","desrealizacion","despersonalizacion","amnesia","KetaminaEncuesta","encuestaNotExists","setEncuestaNotExists","checking","setChecking","pacienteData","setPacienteData","medicoData","setMedicoData","checkEncuesta","idpaciente","idmedico","marks","layout","nk","replace","uuid","efk","checkedChildren","unCheckedChildren","pr","Group","dots","depresion_catalog","disminucion_apetito","aumento_apetito","perdida_peso","aumento_peso","depresion_catalog2","DepresionEncuesta","pesoEnabled","setPesoEnabled","apetitoEnabled","setApetitoEnabled","_score","high1_4","high6_9","score","pregunta","respuestas","Card","depresion2_catalog","catalog2","catalog3","preg10","Depresion2Encuesta","primeros","segundos","terceros","dolor_catalog","initialDolorValues","obj","DolorEncuesta","checkedValues","post_catalog","PostTraumaticoEncuesta","newArr","str","Number","compact","p_t_clinico_catalog","criterio","PTClinicoEncuesta","Radios","letra","numero","catalog_ept_mexicana","PTMexicanaEncuesta","KetaminaPublic","useParams","DepresionQidsPublic","DepresionEspanolPublic","HeadachePublic","PostTraumaticoPublic","PostTraumaticoClinicoPublic","PostTraumaticoMX","age","address","Horarios","RecepcionApp","MisCitas","isDetailVisible","setIsDetailVisible","dateCellRender","hoy","listStyleType","monthCellRender","num","getMonthData","dateString","id_reunion","Recetas","showModal","updatedAt","__v","municipio","colonia","calle","codigopostal","PatientApp","tipo_pago","setEnableCreate","id_hospiatl","maxLength","minLength","fetchData","setDoctorsData","doctoresData","TeamOutlined","Doctors","Sucursal","PerfilAdministrador","receptorsrData","setReceptorsData","getReceptorsData","myReceptors","setReceptionist","shedule","setShedule","scheduleColumns","filteredReceptors","receptor","Receptionists","AdminHospitalApp","formItemLayoutWithOutLabel","medicosDataLoading","setMedicosDataLoading","setILoading","patientForEdit","setPatientForEdit","editPatient","lenght","setDoctoresData","doctorForEdit","setDoctorForEdit","getDoctoresData","editDoctor","rd","d","HomeOutlined","profilePic","setProfilePic","beforeUpload","isPNGorJPG","LIST_IGNORE","setModalVisible","delete","warning","hospitalesData","setHospitalesData","hospitalForEdit","setHospitalForEdit","editHospital","cancel","filters","extra","BankOutlined","AppstoreAddOutlined","Hospitales","getAdminsData","Admins","SuperAdminApp","userType","App","ReactDOM","StrictMode"],"mappings":"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SAAY,6FACxB,WAAc,CACV,uDACA,yDACA,gFAGR,CACI,EAAK,GAAI,SAAY,wCACrB,WAAc,CACV,qDACA,2HACA,kCAMCG,GAAW,CACpB,CACIziB,EAAG,EAAGqiB,SAAU,wBAChBhgB,YAAa,yPACbigB,WAAY,CACR,kBACA,KACA,sDACA,KACA,6DACA,KACA,8DAGR,CACItiB,EAAG,EAAGqiB,SAAU,wCAChBhgB,YAAa,+VACbigB,WAAY,CACR,wDACA,KACA,2DACA,KACA,sEACA,oEACA,KACA,gEAGR,CACItiB,EAAG,EAAGqiB,SAAU,wBAChBhgB,YAAa,+PACbigB,WAAY,CACR,kDACA,KACA,mEACA,KACA,uIACA,KACA,sDAGR,CACItiB,EAAG,EACHqiB,SAAU,uBAAqBhgB,YAAa,iJAC5CigB,WAAY,CACR,yBACA,KACA,mGACA,KACA,2DACA,KACA,oCAGR,CACItiB,EAAG,EACHqiB,SAAU,sBAAuBhgB,YAAa,0NAC9CigB,WAAY,CACR,gCACA,KACA,kCACA,KACA,0CACA,KACA,+CAGR,CACItiB,EAAG,EACHqiB,SAAU,oCACVhgB,YAAa,8MACbigB,WAAY,CACR,0CACA,KACA,4DACA,KACA,oEACA,mDACA,KACA,mFAGR,CACItiB,EAAG,EAAGqiB,SAAU,aAAchgB,YAAa,4GAC3CigB,WAAY,CACR,yDACA,KACA,2CACA,KACA,oEACA,gCACA,KACA,qDAGR,CACItiB,EAAG,EAAGqiB,SAAU,6BAA8BhgB,YAAa,mOAC3DigB,WAAY,CACR,2DACA,KACA,8EACA,KACA,wEACA,oCACA,KACA,sMAGR,CACItiB,EAAG,EAAGqiB,SAAU,6BAA8BhgB,YAAa,2GAC3DigB,WAAY,CACR,iCACA,KACA,+DACA,KACA,iEACA,iEACA,qBACA,KACA,sHAGR,CACItiB,EAAG,GAAIqiB,SAAU,4BAA6BhgB,YAAa,iPAC3DigB,WAAY,CACR,oDACA,KACA,8DACA,KACA,gEACA,uIACA,KACA,kHAKCI,GAAW,CACpB,4DACA,qDACA,4EACA,6CACA,uCACA,2HACA,uGACA,iKAC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","file":"static/js/main.f9ef323f.chunk.js","sourcesContent":["import { message } from 'antd'\r\nexport const API = \"https://api.recreamed.com/api/\"\r\nexport const S_API = \"https://api.recreamed.com/session/\"\r\nexport const IMAGE_API = \"https://api.recreamed.com/images/\"\r\n\r\nexport const logout = async () => {\r\n    // Send exit time to set schedule\r\n    const userType = localStorage.getItem('userType')\r\n    if (userType === 'Recepcion') await sendSchedule()\r\n\r\n    localStorage.removeItem('sessionToken');\r\n    localStorage.removeItem('userType');\r\n    localStorage.removeItem('userData');\r\n    window.location.href = '/';\r\n}\r\n\r\nconst sendSchedule = async () => {\r\n    const { _id } = usuario;\r\n    const scheduleBody = {\r\n        usuario: _id,\r\n        fecha_hora_entrada: localStorage.getItem(\"fecha_hora_entrada\"),\r\n        fecha_hora_salida: new Date(),\r\n        notas: ''\r\n    }\r\n    await sendDataBody('asistencias/add', scheduleBody).then(() => localStorage.removeItem('fecha_hora_entrada'))\r\n}\r\n\r\nexport const usuario = JSON.parse(localStorage.getItem('userData'));\r\n\r\nexport async function getData(endpoint) {\r\n    return await fetch(API + endpoint, { mode: 'cors' })\r\n        .then(response => response.json())\r\n        .then(data => { return data })\r\n}\r\n\r\nexport async function sendData(endpoint) {\r\n\r\n    return await fetch(API + endpoint, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' }\r\n    }).then(res => res.json())\r\n        .then((response) => {\r\n            return response;\r\n        })\r\n        .catch(error => console.error('Error:', error))\r\n};\r\n\r\nexport async function deleteData(endpoint) {\r\n\r\n    return await fetch(API + endpoint, {\r\n        method: 'DELETE',\r\n        headers: { 'Content-Type': 'application/json' }\r\n    }).then(res => res.json())\r\n        .then(response => {\r\n            console.log('Success:', response);\r\n            message.info(response.message)\r\n        })\r\n        .catch(error => console.error('Error:', error))\r\n};\r\n\r\nexport async function updateData(endpoint, values) {\r\n\r\n    return await fetch(API + endpoint, {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(values)\r\n    }).then(res => res.json())\r\n        .then(response => {\r\n            console.log('Success:', response);\r\n            message.success(response.message || response.error);\r\n        })\r\n        .catch(error => console.error('Error:', error))\r\n};\r\nexport async function sendDataBody(endpoint, values) {\r\n\r\n    return await fetch(API + endpoint, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(values)\r\n    }).then(res => res.json())\r\n        .then(response => {\r\n            return response\r\n        })\r\n        .catch(error => console.error('Error:', error))\r\n};\r\n\r\nexport const Footer = () =>\r\n    <div style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        height: 88,\r\n        backgroundColor: '#3c75ef',\r\n    }}>\r\n\r\n        <p style={{ color: 'white' }}>\r\n            Desarrollado por <strong> <a href=\"https://www.realidadcreativa.com\" style={{ marginLeft: 6, color: 'white' }}>realidadcreativa.com</a></strong> | © Realidad Creativa - 2023\r\n        </p>\r\n\r\n    </div>\r\n\r\nexport const estados = [\"Aguascalientes\", \"Baja California\", \"Baja California Sur\", \"Campeche\", \"CDMX\", \"Chiapas\", \"Chihuahua\", \"Coahuila\", \"Colima\", \"Durango\", \"Estado de Mexico\", \"Guanajuato\", \"Guerrero\", \"Hidalgo\", \"Jalisco\", \"México\", \"Michoacán\", \"Morelos\", \"Nayarit\", \"Nuevo León\", \"Oaxaca\", \"Puebla\", \"Querétaro\", \"Quintana Roo\", \"San Luis Potosí\", \"Sinaloa\", \"Sonora\", \"Tabasco\", \"Tamaulipas\", \"Tlaxcala\", \"Veracruz\", \"Yucatán\", \"Zacatecas\"];\r\n\r\n// Only use for Doctors, Administrators and receptionists\r\nexport const myHorarios = usuario && usuario.horarios && usuario.horarios.map(function (item) {\r\n    return item;\r\n})\r\nexport const myHospitals = usuario && usuario.horarios && usuario.horarios.map(function (item) {\r\n    return item['sucursal'];\r\n})\r\nexport const ids_hospitales = usuario && usuario.horarios && usuario.horarios.map(function (item) {\r\n    return item['sucursal']['_id'];\r\n})\r\n","export default __webpack_public_path__ + \"static/media/Logo.bcbe104c.png\";","import { Form, Input, Button, Checkbox, Row, Col, Card, message } from 'antd';\r\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\r\nimport { S_API } from '../resources'\r\nimport logo from '../assets/Logo.png';\r\n\r\nexport function Login() {\r\n\r\n  const onFinish = (values) => {\r\n    delete values.remember;\r\n    console.log('Received values of form: ', values);\r\n\r\n    // Inicio de sesion\r\n    fetch(S_API + 'login', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(values)\r\n    })\r\n      .then((data) => { console.log(\"data\", data); return data.json() })\r\n      .then(res => {\r\n        console.log(\"resp\", res);\r\n        if (res.message === \"Bienvenido\") {\r\n          localStorage.setItem(\"userType\", res.user.rol);\r\n          localStorage.setItem('sessionToken', res.data.token);\r\n          localStorage.setItem('userData', JSON.stringify(res.user));\r\n\r\n          if (res.user.rol === 'Recepcion') // Save login time to schedule\r\n            localStorage.setItem('fecha_hora_entrada', new Date());\r\n\r\n          window.location.href = '/';\r\n        } else (message.info(res.error || res.message))\r\n      })\r\n      .catch(err => window.alert(\"Error: \", err))\r\n\r\n  };\r\n\r\n  return (\r\n    <Row>\r\n      <Col lg={{ span: 8, offset: 8 }} md={{ span: 10, offset: 7 }} sm={{ span: 16, offset: 4 }} xs={{ span: 16, offset: 4 }}>\r\n        <br />\r\n        <br />\r\n        <Card hoverable>\r\n          <br />\r\n          <Row justify=\"center\"> <img src={logo} alt=\"Logo\" width={160} /></Row>\r\n          <br />\r\n          <Row justify=\"center\">\r\n            <h3>Inicio de Sesion</h3>\r\n          </Row>\r\n          <br />\r\n          <br />\r\n          <Form\r\n            name=\"normal_login\"\r\n            className=\"login-form\"\r\n            initialValues={{\r\n              remember: true,\r\n            }}\r\n            onFinish={onFinish}\r\n          >\r\n            <Form.Item\r\n              name=\"email\"\r\n              rules={[\r\n                {\r\n                  required: true,\r\n                  message: 'Por favor ingresa el correo de tu cuenta!',\r\n                },\r\n              ]}\r\n            >\r\n              <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Usuario\" />\r\n            </Form.Item>\r\n            <Form.Item\r\n              name=\"password\"\r\n              rules={[\r\n                {\r\n                  required: true,\r\n                  message: 'Por favor ingresa tu contraseña!',\r\n                },\r\n              ]}\r\n            >\r\n              <Input.Password\r\n                prefix={<LockOutlined className=\"site-form-item-icon\" />} placeholder=\"Contraseña\" />\r\n            </Form.Item>\r\n            <Form.Item>\r\n              <Form.Item name=\"remember\" valuePropName=\"checked\" noStyle>\r\n                <Checkbox>Mantener la sesion</Checkbox>\r\n              </Form.Item>\r\n\r\n              <a className=\"login-form-forgot\" href=\"\">\r\n                Recuperar contraseña\r\n              </a>\r\n            </Form.Item>\r\n\r\n            <Form.Item>\r\n              <Button block type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n                Iniciar Sesion\r\n              </Button>\r\n            </Form.Item>\r\n            <Form.Item>\r\n              <Row justify=\"center\"> O <a href=\"register\" style={{ marginLeft: 4 }}>Registrarse</a></Row>\r\n\r\n            </Form.Item>\r\n          </Form>\r\n        </Card>\r\n      </Col>\r\n    </Row>\r\n\r\n  );\r\n};","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Card,\r\n  Form,\r\n  Input,\r\n  Select,\r\n  Row,\r\n  Col,\r\n  Checkbox,\r\n  Button,\r\n  message,\r\n  Space\r\n} from 'antd';\r\nimport { MinusCircleOutlined, PlusOutlined } from '@ant-design/icons';\r\nimport { S_API, API } from '../resources'\r\nimport logo from '../assets/Logo.png';\r\nimport './login.css';\r\n\r\nconst { Option } = Select;\r\n\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    xs: {\r\n      span: 24,\r\n    },\r\n    sm: {\r\n      span: 8,\r\n    },\r\n  },\r\n  wrapperCol: {\r\n    xs: {\r\n      span: 24,\r\n    },\r\n    sm: {\r\n      span: 16,\r\n    },\r\n  },\r\n};\r\nconst tailFormItemLayout = {\r\n  wrapperCol: {\r\n    xs: {\r\n      span: 24,\r\n      offset: 0,\r\n    },\r\n    sm: {\r\n      span: 16,\r\n      offset: 8,\r\n    },\r\n  },\r\n};\r\n\r\nexport function Register() {\r\n  const [form] = Form.useForm();\r\n  const [sucursales, setSucursales] = useState([]);\r\n  const [sucursalesLoading, setSucursalesLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    getHospitalesData()\r\n\r\n  }, [])\r\n\r\n\r\n  const getHospitalesData = () => {\r\n    fetch(API + 'sucursales')\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        console.log(data);\r\n        setSucursales(data);\r\n        setSucursalesLoading(false);\r\n      });\r\n  }\r\n\r\n  const onFinish = (values) => {\r\n    values.rol = 'Medico';\r\n    values.avatar = 'https://';\r\n    values.estatus = '1';\r\n    delete values.confirm;\r\n    delete values.prefix;\r\n    delete values.agreement;\r\n\r\n    console.log(values)\r\n    fetch(S_API + 'register', {\r\n      method: 'POST',\r\n      body: JSON.stringify(values),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log('Success:', response);\r\n        response.message ? message.success(response.message) : message.error(response.error);\r\n        if (response.message && response.message === 'Usuario creado correctamente') window.location.href = '/'\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  };\r\n\r\n  const prefixSelector = (\r\n    <Form.Item name=\"prefix\" noStyle>\r\n      <Select\r\n        style={{\r\n          width: 70,\r\n        }}\r\n      >\r\n        <Option value=\"+52\">+52</Option>\r\n      </Select>\r\n    </Form.Item>\r\n  );\r\n\r\n  return (\r\n    <Row>\r\n      <Col span={12} offset={6}>\r\n        <br />\r\n        <br />\r\n        <Card hoverable>\r\n          <Row justify=\"center\"> <img src={logo} alt=\"Logo\" width={160} /></Row>\r\n          <br />\r\n          <br />\r\n          <Row justify=\"center\">\r\n            <h3>Registro de Medico</h3>\r\n          </Row>\r\n          <br />\r\n          <br />\r\n          <Form\r\n            {...formItemLayout}\r\n            form={form}\r\n            name=\"register\"\r\n            onFinish={onFinish}\r\n            initialValues={{\r\n              horarios: [{ sucursal: '', horario: '' }],\r\n              prefix: '+52',\r\n            }}\r\n            scrollToFirstError\r\n          >\r\n\r\n            <Form.Item name=\"name\" label=\"Nombre\" rules={[{ required: true, message: 'Ingresa Nombre y apellidos' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            {/* <Form.Item name=\"rol\" label=\"Rol\" rules={[{ required: true, message: 'Elije el rol', },]}>\r\n              <Select placeholder=\"Elije el tipo de rol\">\r\n                <Option value=\"Administrador\">Administrador de Hospital</Option>\r\n                <Option value=\"Recepcion\">Recepcion</Option>\r\n                <Option value=\"Medico\">Medico</Option>\r\n                <Option value=\"Paciente\" disabled>Paciente</Option>\r\n              </Select>\r\n            </Form.Item> */}\r\n\r\n            <Form.Item name=\"email\" label=\"Correo\" rules={[{ type: 'email', message: 'The input is not valid E-mail!' }, { required: true, message: 'Please input your E-mail!' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"password\" label=\"Contraseña\" rules={[{ required: true, message: 'Por favor ingrese su contraseña!', },]} hasFeedback >\r\n              <Input.Password />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"confirm\" label=\"Confirmar contraseña\" dependencies={['password']} hasFeedback\r\n              rules={[\r\n                {\r\n                  required: true,\r\n                  message: 'Please confirm your password!',\r\n                },\r\n                ({ getFieldValue }) => ({\r\n                  validator(_, value) {\r\n                    if (!value || getFieldValue('password') === value) {\r\n                      return Promise.resolve();\r\n                    }\r\n                    return Promise.reject(new Error('Las contraseñas deben coincidir!'));\r\n                  },\r\n                }),\r\n              ]}\r\n            >\r\n              <Input.Password />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"telefono\" label=\"Telefono\" rules={[{ required: true, message: 'Please input your phone number!', },]}>\r\n              <Input addonBefore={prefixSelector} style={{ width: '100%', }} />\r\n            </Form.Item>\r\n\r\n            <Form.Item label=\"horarios\" rules={[{ required: false, message: 'Ingresa al menos un horario', },]}>\r\n              <Form.List name=\"horarios\" label=\"horarios list\"\r\n              // rules={[\r\n              //   {\r\n              //     validator: async (_, horarios) => {\r\n              //       if (!horarios || horarios.length < 1) {\r\n              //         message.error('Debes Ingresar al menos un horario')\r\n              //         return Promise.reject(new Error('Debe haber al menos un horario'));\r\n              //       }\r\n              //     },\r\n              //   },\r\n              // ]}\r\n              >\r\n                {(fields, { add, remove }) => (\r\n                  <>\r\n                    {fields.map(({ key, name, ...restField }) => (\r\n                      <Space key={key} style={{ display: 'flex', marginBottom: 8 }} align=\"baseline\">\r\n                        <Form.Item\r\n                          {...restField}\r\n                          name={[name, 'sucursal']}\r\n                          rules={[{ required: true, message: 'Elije Sucursal' }]}\r\n                        >\r\n                          <Select placeholder=\"Elije Sucursal\" style={{ width: '180px' }} >\r\n                            {sucursalesLoading ? \"Cargando\" :\r\n                              sucursales.map(s => <Option value={s._id}>{s.nombre}</Option>)\r\n                            }\r\n                          </Select>\r\n                        </Form.Item>\r\n                        <Form.Item\r\n                          {...restField}\r\n                          name={[name, 'horario']}\r\n                          rules={[{ required: false, message: 'Missing last name' }]}\r\n                        >\r\n                          <Input placeholder=\"Horario\" />\r\n                        </Form.Item>\r\n                        <MinusCircleOutlined onClick={() => remove(name)} />\r\n                      </Space>\r\n                    ))}\r\n                    <Form.Item>\r\n                      <Button type=\"dashed\" onClick={() => add()} block icon={<PlusOutlined />}>\r\n                        Agregar Horario\r\n                      </Button>\r\n                    </Form.Item>\r\n                  </>\r\n                )}\r\n              </Form.List>\r\n            </Form.Item>\r\n\r\n\r\n\r\n            <Form.Item name=\"cedula\" label=\"Cedula\" rules={[{ required: false, message: 'Ingresa cedula' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            {/* <Form.Item name=\"calle\" label=\"Calle\" rules={[{ required: true, message: 'Ingresa calle', whitespace: true }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"numexterior\" label=\"Num Exterior\" rules={[{ required: true, message: 'Ingresa numero exterior' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"numinterior\" label=\"Num Interior\" rules={[{ required: true, message: 'Ingresa numinterior' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item label=\"Colonia\" name=\"colonia\" rules={[{ required: true, message: 'Please input your colobnia!' }]}            >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"estado\" label=\"Estado\" rules={[{ required: true, message: 'Apellido materno', },]}>\r\n              <Select placeholder=\"Elije tu estado\">\r\n                {estados.map(e => <Option value={e}>{e}</Option>)}\r\n              </Select>\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"municipio\" label=\"Municipio\" rules={[{ required: true, message: 'Ingresa tu municipio' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"codigopostal\" label=\"Codigo Postal\" rules={[{ required: true, message: 'Ingresa codigopostal', },]}>\r\n              <InputNumber addonAfter={suffixSelector} style={{ width: '100%', }} />\r\n            </Form.Item> */}\r\n\r\n            <Form.Item name=\"certificacion\" label=\"Certificacion\" rules={[{ required: false, message: 'Ingresa tu certificacion' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"universidad\" label=\"Universidad\" rules={[{ required: false, message: 'Ingresa tu universidad' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item\r\n              name=\"agreement\"\r\n              valuePropName=\"checked\"\r\n              rules={[\r\n                {\r\n                  validator: (_, value) =>\r\n                    value ? Promise.resolve() : Promise.reject(new Error('Tienes que aceptar los terminos y condiciones para registrarte')),\r\n                },\r\n              ]}\r\n              {...tailFormItemLayout}\r\n            >\r\n              <Checkbox>\r\n                He leído y acepto los <a href=\"https://recreamed.com\">terminos y condiciones</a>\r\n              </Checkbox>\r\n            </Form.Item>\r\n\r\n            <Form.Item {...tailFormItemLayout}>\r\n              <Button type=\"primary\" htmlType=\"submit\">\r\n                Registrar\r\n              </Button>\r\n            </Form.Item>\r\n          </Form>\r\n        </Card>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}; ","import React from 'react'\r\nimport { Spin } from 'antd';\r\n\r\nexport default function Loading() {\r\n    return (\r\n        <div style={{\r\n            margin: '20px 0',\r\n            marginBottom: '20px',\r\n            padding: '30px 50px',\r\n            textAlign: 'center',\r\n            background: 'rgba(0, 0, 0, 0.05)',\r\n            borderRadius: '4px',\r\n        }}>\r\n            <Spin />\r\n        </div >\r\n    )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Modal, Form, Select, Input, Button, message, Switch, DatePicker, InputNumber } from 'antd'\r\nimport { getData, myHospitals, sendDataBody, updateData, usuario } from '../../resources';\r\nimport { UploadOutlined, PlusOutlined, MinusCircleOutlined } from '@ant-design/icons'\r\n\r\n\r\nexport function CreateCitaForm(props) {\r\n\r\n    const { configuracion : { costo_cita = 0 } } = usuario;\r\n    // const = configuracion;\r\n\r\n    myHospitals.forEach(h => { h.value = h._id; h.label = h.nombre; });\r\n\r\n    const [medicosData, setMedicosData] = useState([])\r\n    // Select patient for cerate cita\r\n    const [misPacientes, setMisPacientes] = useState([])\r\n\r\n\r\n    // Body of cita\r\n    const [isOnline, setIsOnline] = useState(false)\r\n    const [hospital, setHospital] = useState(null)\r\n    const [usesCostoBase, setUsesCostoBase] = useState(false)\r\n\r\n    const [costo, setCosto] = useState(0)\r\n\r\n    useEffect(() => {\r\n        getPacientesOfDoctor()\r\n    }, [])\r\n\r\n\r\n    // Get patients of specific doctor to populate the select\r\n    const getPacientesOfDoctor = () => { //Para el caso que la sesion sea de Medico\r\n        getData(`mispacientes/${usuario._id}`).then(rs => {\r\n            rs.forEach(p => { p.label = p.name; p.value = p._id })\r\n            setMisPacientes(rs);\r\n        })\r\n    }\r\n    // Form Methods\r\n    const onFinish = (values) => {\r\n        // let monto;\r\n        // if (values.tratamiento === 'Sin servicio') values.tratamiento = 0;\r\n        values.medico = usuario._id;\r\n\r\n        // const { configuracion } = usuario;\r\n        // const { costo_cita } = configuracion;\r\n        // const monto = costo_cita ? costo_cita + values.tratamiento : values.tratamiento\r\n\r\n        delete values.tratamiento;\r\n        // delete values.descuento;\r\n        console.log(values)\r\n\r\n        // Handle if its updating or creating cita\r\n        if (props.cita) {\r\n            updateData(`citas/update/${props.cita._id}`, values).then((response) => {\r\n                console.log(response)\r\n            }).finally(() => { props.getCitasData(); props.setIsModalOpen(false); props.setEditingCita(false) })\r\n        } else {\r\n            sendDataBody('citas/add', values).then((response) => {\r\n                message.success(response.message || response.error);\r\n                response.message && response.message === 'Cita creada correctamente' ? createBalance(response.id_nueva_cita, values.fecha_hora) : message.error('No se pudo crear registro de ingreso')\r\n                console.log(response)\r\n            }).finally(() => { props.getCitasData(); props.setIsModalOpen(false) })\r\n        }\r\n\r\n\r\n    };\r\n    // Create the respective balance for cita\r\n    const createBalance = (_cita, _fecha_hora) => {\r\n        const balanceBody = {\r\n            tipo: 'ingreso',\r\n            medico: usuario._id,\r\n            cita: _cita,\r\n            monto: usesCostoBase ? (costo + costo_cita) : costo,\r\n            forma_de_pago: 'efectivo',\r\n            fecha_hora: _fecha_hora,\r\n            estado: 'pendiente'\r\n        }\r\n        console.log('Balance ready to send: ', balanceBody)\r\n        sendDataBody('balances/add', balanceBody).then((rs) => { message.success(rs.message || rs.error); console.log(rs) })\r\n    }\r\n\r\n    const onFinishFailed = (errorInfo) => {\r\n        console.log('Failed:', errorInfo);\r\n    };\r\n\r\n    const handleHospitalChange = (value) => { console.log('Selected Hospital: ', value); setHospital(value) };\r\n    const handlePacienteChange = (value) => { console.log('Selected Hospital: ', value); };\r\n\r\n    // Select tratamiento\r\n    const handleChange = (value) => {\r\n        // const { configuracion } = usuario;\r\n        // const { costo_cita } = configuracion;\r\n\r\n        // const monto = costo_cita + value;\r\n        setCosto(value)\r\n        console.log(`selected ${value}`);\r\n    };\r\n    const onSwitch = (checked) => {\r\n        console.log(`switch to ${checked}`);\r\n        setIsOnline(checked)\r\n    };\r\n    const onSwitchCosoBase = (checked) => {\r\n        // if(checked)se\r\n        console.log(`switch to ${checked}`);\r\n        setUsesCostoBase(checked)\r\n    };\r\n\r\n    const timeOptions = [\r\n        { label: 'Media Hora', value: 30 },\r\n        { label: 'Una Hora', value: 60 },\r\n        { label: 'Una Hora y Media', value: 90 },\r\n        { label: 'Dos Horas', value: 120 },\r\n        { label: 'Dos Horas Y Media', value: 150 },\r\n        { label: 'Tres Horas', value: 180 },\r\n    ]\r\n\r\n    return <Form name=\"nueva_cita_admin\" labelCol={{ span: 8 }} wrapperCol={{ span: 14 }} onFinish={onFinish} onFinishFailed={onFinishFailed} autoComplete=\"off\"\r\n        initialValues={props.cita ? props.cita : { isOnline: false, tratamiento: 'Sin servicio', fecha_hora: props.fecha_hora, duracion: 60 }}\r\n    >\r\n\r\n\r\n        <Form.Item label=\"Hospital\" name=\"sucursal\" rules={[{ required: true, message: 'Selecciona Sucursal' }]} >\r\n            <Select options={myHospitals} onChange={handleHospitalChange} />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Paciente\" name=\"usuario\" rules={[{ required: true, message: 'Selecciona Usuario' }]} >\r\n            <Select options={misPacientes} onChange={handlePacienteChange} />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"VideoLlamada\" name=\"isOnline\" >\r\n            <Switch onChange={onSwitch} />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Comentarios\" name=\"comentarios\" rules={[{ required: false, message: 'Ingresa RFC' }]} >\r\n            <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Fecha y Hora\" name=\"fecha_hora\" rules={[{ required: false, message: 'Selecciona Fecha y Hora' }]} >\r\n            <DatePicker showTime format=\"DD/MM/YYYY HH:mm\" use12Hours={true} style={{ width: '100%' }} />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Duracion\" name=\"duracion\" rules={[{ required: true, message: 'Selecciona la duracion de la cita' }]} >\r\n            <Select options={timeOptions} />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Servicio\" name=\"tratamiento\" rules={[{ required: false, message: 'Selecciona un servicio' }]} >\r\n            <Select\r\n                onChange={handleChange}\r\n                options={\r\n                    usuario.configuracion.tratamientos_ofrecidos.map((t) => { return { value: t.costo, label: `${t.tratamiento} $${t.costo}` } })\r\n                }\r\n            />\r\n        </Form.Item>\r\n\r\n\r\n\r\n\r\n        <Form.Item label={`costo de la cita $${costo_cita}`} >\r\n            <Switch onChange={onSwitchCosoBase} />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n            wrapperCol={{\r\n                offset: 8,\r\n                span: 16,\r\n            }}\r\n        >\r\n            <div className='fila'>\r\n                <h6>Costo Total: ${usesCostoBase ? (costo + costo_cita) : costo} </h6>\r\n            </div>\r\n        </Form.Item>\r\n\r\n        {\r\n            // Only if updating cita\r\n            props.cita && <Form.Item\r\n                wrapperCol={{\r\n                    offset: 8,\r\n                    span: 16,\r\n                }}\r\n            >\r\n                <Button type=\"primary\" htmlType=\"submit\" form='nueva_cita_admin'>\r\n                    Guardar\r\n                </Button>\r\n            </Form.Item>\r\n        }\r\n\r\n    </Form >\r\n}\r\nexport default function CreateCita(props) {\r\n\r\n    // Handle Modal Visibility\r\n    const handCreateleOk = () => { props.setIsModalOpen(false) }\r\n    const handCreateleCancel = () => { props.setIsModalOpen(false) }\r\n    return (\r\n        <Modal title={props.cita ? \"Editar Cita\" : \"Nueva Cita\"} open={props.isOpenModal} onOk={handCreateleOk} onCancel={handCreateleCancel} destroyOnClose width={600}\r\n            footer={[\r\n                <Button onClick={handCreateleCancel}>Cancelar</Button>,\r\n                <Button type=\"primary\" htmlType=\"submit\" form='nueva_cita_admin'>\r\n                    Guardar\r\n                </Button>\r\n            ]}\r\n        >\r\n\r\n            <CreateCitaForm setIsModalOpen={props.setIsModalOpen} isOpenModal={props.isCreateModalOpen} fecha_hora={props.fecha_hora} getCitasData={props.getCitasData} />\r\n        </Modal>\r\n    )\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { Calendar, dayjsLocalizer } from 'react-big-calendar';\r\nimport { getData, usuario, deleteData } from '../../resources';\r\nimport Loading from '../../loading'\r\nimport CreateCita, { CreateCitaForm } from './cita.create'\r\nimport { Button, Modal, Popconfirm } from 'antd'\r\nimport dayjs from 'dayjs';\r\n\r\nconst localizer = dayjsLocalizer(dayjs)\r\nconst today = new Date();\r\n\r\n// To set rage for calendar\r\n// start time 8:00am\r\n// const min = new Date(\r\n//     today.getFullYear(),\r\n//     today.getMonth(),\r\n//     today.getDate(),\r\n//     8\r\n// )\r\n\r\n// end time 5:00pm\r\n// const max = new Date(\r\n//     today.getFullYear(),\r\n//     today.getMonth(),\r\n//     today.getDate(),\r\n//     21\r\n// )\r\n\r\n\r\nexport default function Citas() {\r\n    const [citasData, setCitasData] = useState([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [editingCita, setEditingCita] = useState(false)\r\n\r\n    // Modal for details\r\n    const [isModalOpen, setIsModalOpen] = useState(false)\r\n    const showModal = () => { setIsModalOpen(true) }\r\n    const handleOk = () => { setIsModalOpen(false); setEditingCita(false); setEditingCita(false) }\r\n    const handleCancel = () => { setIsModalOpen(false); setEditingCita(false); setEditingCita(false) }\r\n    // Modal for edit and create\r\n    const [citaForEdit, setCitaForEdit] = useState(null)\r\n    const [fecha_hora, setFecha_hora] = useState(null)\r\n    const [isCreateModalOpen, setIsCreateModalOpen] = useState(false)\r\n\r\n\r\n    useEffect(() => { return getCitasData() }, [])\r\n\r\n    const getCitasData = () => {\r\n        getData(`citas/medico/${usuario._id}`).then((rs) => {\r\n            rs.forEach(cita => {\r\n                cita.start = new Date(Date.parse(cita.fecha_hora));\r\n                const endDate = new Date(cita.fecha_hora);\r\n                endDate.setTime(endDate.getTime() + 1 * (cita.duracion ?? 60) * 60 * 1000)\r\n                cita.end = new Date(Date.parse(endDate));\r\n                cita.title = cita.usuario.name;\r\n                cita.id = cita._id;\r\n                cita.key = cita._id;\r\n            });\r\n            console.log('getCitasData medico', rs)\r\n            setCitasData(rs)\r\n        }\r\n        ).finally(() => setLoading(false))\r\n    }\r\n\r\n    // Select cita to show details and to confirm\r\n    const selectEvent = async (e) => {\r\n        if (!e.hospital) e.hospital = e.sucursal._id; // For Edit\r\n        if (e.sucursa && e.sucursal._id) e.sucursal = e.sucursal._id; // For Edit\r\n        if (!e.paciente) e.paciente = e.usuario; // For details\r\n        if (e.usuario && e.usuario._id) e.usuario = e.usuario._id; // For Editing\r\n        e.fecha_hora = dayjs(e.fecha_hora) //For edit\r\n        await setCitaForEdit(e)\r\n        showModal()\r\n    }\r\n\r\n    // Select time hour, where cita will be created \r\n    const handleSlotSelection = ({ start, end, action }) => {\r\n        setFecha_hora(dayjs(start))\r\n        setIsCreateModalOpen(true)\r\n        return { style: { backgroundColor: 'red' } };\r\n    };\r\n\r\n    // Confirm servicio\r\n    // const confirmService = () => {\r\n    //     console.log('To confirm service', citaForEdit)\r\n    //     updateData(`balances/update/cita/${citaForEdit._id}`, { estado: 'pagado' })\r\n    // }\r\n\r\n    // Delete button\r\n    const confirm = (e) => {\r\n        deleteData(`citas/remove/${citaForEdit._id}`).then((rs) => { console.log(rs); getCitasData(); handleCancel() })\r\n        deleteData(`balances/remove/cita/${citaForEdit._id}`)\r\n\r\n    };\r\n\r\n    const cancel = (e) => { console.log(e) }\r\n\r\n    if (loading) return <Loading />;\r\n\r\n    return <div className='mainContainer'>\r\n        <Calendar\r\n            // min={min}\r\n            // max={max}\r\n            scrollToTime={new Date(Date.now())}\r\n            defaultDate={new Date(Date.now())}\r\n            selectable='true'\r\n            localizer={localizer}\r\n            events={citasData}\r\n            startAccessor=\"start\"\r\n            endAccessor=\"end\"\r\n            style={{ height: 500 }}\r\n            messages={{\r\n                next: \"Sig\",\r\n                previous: \"Ant\",\r\n                today: \"Hoy\",\r\n                month: \"Mes\",\r\n                week: \"Semana\",\r\n                day: \"Día\"\r\n            }}\r\n            defaultView=\"week\"\r\n            onDoubleClickEvent={(e) => console.log(e)}\r\n            onSelectEvent={selectEvent} // details cita\r\n            onSelecting={(e) => console.log(e)}\r\n            onSelectSlot={handleSlotSelection} // create cita\r\n        />\r\n\r\n\r\n        <Modal title=\"Detalles Cita\" open={isModalOpen} onOk={handleOk} onCancel={handleCancel} destroyOnClose\r\n            footer={[\r\n                <Popconfirm\r\n                    title=\"Eliminar Cita\"\r\n                    description=\"Seguro que quiere eliminar la cita?\"\r\n                    onConfirm={confirm}\r\n                    onCancel={cancel}\r\n                    okText=\"Si\"\r\n                    cancelText=\"No\"\r\n                >\r\n                    <Button danger>Eliminar</Button>\r\n                </Popconfirm>,\r\n                <Button onClick={() => setEditingCita(!editingCita)}>{editingCita ? \"Cancelar\" : \"Modificar\"}</Button>,\r\n                <Button onClick={handleCancel}>Cerrar</Button>\r\n            ]}>\r\n            {editingCita ?\r\n                <CreateCitaForm cita={citaForEdit} setIsModalOpen={setIsModalOpen} getCitasData={getCitasData} setEditingCita={setEditingCita} />\r\n                : <div>{citaForEdit && <div>\r\n                    <p><strong>Paciente </strong>{citaForEdit.paciente ? citaForEdit.paciente.name : 'Sin paciente'}</p>\r\n                    <p><strong>Fecha </strong>{new Date(citaForEdit.fecha_hora).toLocaleDateString()}</p>\r\n                    <p><strong>Hora </strong>{new Date(citaForEdit.fecha_hora).toLocaleTimeString()}</p>\r\n                    <p><strong>Comentarios </strong>{citaForEdit.comentarios}</p>\r\n                    {/* <Button type='primary' onClick={confirmService}>Confirmar Servicio</Button>, */}\r\n                </div>\r\n                }\r\n                </div>\r\n            }\r\n        </Modal>\r\n\r\n        <CreateCita setIsModalOpen={setIsCreateModalOpen} isOpenModal={isCreateModalOpen} fecha_hora={fecha_hora} getCitasData={getCitasData} />\r\n\r\n    </div>\r\n\r\n}\r\n","export const diagnosticos = {\r\n\r\n    \"Trastornos mentales orgánicos, incluyendo los sintomáticos\": {\r\n        F00: \"Demencia en la enfermedad de Alzheimer\",\r\n        F01: \"Demencia vascular\",\r\n        F02: \"Demencia en enfermedades clasificadas en otro lugar\",\r\n        F03: \"Demencia sin especificación\",\r\n        F04: \"Síndrome amnésico orgánico no inducido por alcohol u otras sustancias psicótropas\",\r\n        F05: \"Delirium no inducido por alcohol u otras sustancias psicótropas\",\r\n        F06: \"Otros trastornos mentales debidos a lesión o disfunción cerebral o enfermedad somática\",\r\n        F07: \"Trastornos de la personalidad y del comportamiento debidos a enfermedad, lesión o disfunción cerebral\",\r\n        F09: \"Trastorno mental orgánico o sintomático sin especificación\"\r\n    },\r\n\r\n    \"Trastornos mentales y del comportamiento debidos al consumo de sustancias psicótropas\": {\r\n        \"F10\": \"Trastornos mentales y del comportamiento debidos al consumo de alcohol\",\r\n        \"F11\": \"Trastornos mentales y del comportamiento debidos al consumo de opioides \",\r\n        \"F12\": \"Trastornos mentales y del comportamiento debidos al consumo de cannabinoides \",\r\n        \"F13\": \"Trastornos mentales y del comportamiento debidos al consumo de sedantes o hipnóticos\",\r\n        \"F14\": \"Trastornos mentales y del comportamiento debidos al consumo de cocaína\",\r\n        \"F15\": \"Trastornos mentales y del comportamiento debidos al consumo de otros estimulantes (incluida cafeína)\",\r\n        \"F16\": \"Trastornos mentales y del comportamiento debidos al consumo de alucinógenos\",\r\n        \"F17\": \"Trastornos mentales y del comportamiento debidos al consumo de tabaco\",\r\n        \"F18\": \"Trastornos mentales y del comportamiento debidos al consumo de disolventes volátiles\",\r\n        \"F19\": \"Trastornos mentales y del comportamiento debidos al consumo de múltiples drogas o de otras sustancias psicotrópicas\"\r\n    },\r\n    \"Esquizofrenia, trastorno esquizotípico y trastorno de ideas delirantes\": {\r\n        \"F20\": \"Esquizofrenia\",\r\n        \"F21\": \"Trastorno esquizotípico\",\r\n        \"F22\": \"Trastorno de ideas delirantes persistentes\",\r\n        \"F23\": \"Trastornos psicóticos agudos y transitorios\",\r\n        \"F24\": \"Trastorno de ideas delirantes inducidas\",\r\n        \"F25\": \"Trastornos esquizoafectivos\",\r\n        \"F28\": \"Otros trastornos psicóticos no orgánicos \",\r\n        \"F29\": \"Psicosis no orgánica sin especificación\"\r\n    },\r\n    \"F40-F48 Trastornos neuróticos, secundarios a situaciones estresantes y somatomorfos\": {\r\n        F40: \"Trastorno de ansiedad fóbica\",\r\n        \"F40.0\": \"Agorafobia\",\r\n        \"F40.1\": \"Fobias sociales\",\r\n        \"F40.2\": \"Fobias específicas\",\r\n        F41: \"Otros trastornos de ansiedad\",\r\n        \"F41.0\": \"Trastorno de pánico\",\r\n        \"F41.1\": \"Trastorno de ansiedad generalizada\",\r\n        \"F41.2\": \"Trastorno mixto ansioso-depresivo\",\r\n        F42: \"Trastorno obsesivo-compulsivo\",\r\n        F43: \"Reacción a estrés agudo\",\r\n        \"F43.1\": \"Trastornos estrés postraumático\",\r\n        \"F43.2\": \"Trastornos de adaptación\",\r\n        \"F43.8\": \"Otras reacciones a estrés grave\",\r\n        \"F43.9\": \"Reacción a estrés grave sin especificación\",\r\n        \"F44\": \"Trastornos disociativos (de conversión\",\r\n        F45: \"Trastornos somatomorfos\",\r\n        F48: \"Otros trastornos neuróticos\"\r\n    },\r\n    \"F50-F59 Trastornos del comportamiento asociados a disfunciones fisiológicas y a factores somáticos\": {\r\n        F50: \"Trastornos de la conducta alimentaria \",\r\n        \"F50.0\": \"Anorexia nerviosa\",\r\n        \"F50.1\": \"Anorexia nerviosa atípica\",\r\n        \"F50.2\": \"Bulimia nerviosa\",\r\n        \"F50.3\": \"Bulimia nerviosa atípica\",\r\n        F51: \"Trastornos no orgánicos del sueño\",\r\n        \"F51.0\": \"Insomnio no orgánico\",\r\n        \"F51.1\": \"Hipersomnia no orgánica\",\r\n        \"F51.2\": \"Trastorno no orgánico del ciclo sueño-vigilia\",\r\n        \"F51.3\": \"Sonambulismo\",\r\n        \"F51.4\": \"Terrores nocturnos\",\r\n        \"F51.5\": \"Pesadillas \",\r\n        F52: \"Disfunción sexual no orgánica\",\r\n        F53: \"Trastornos mentales y del comportamiento en el puerperio no clasificadas en otro lugar\",\r\n        F54: \" Factores psicológicos y del comportamiento en trastornos o enfermedades clasificadas en otro lugar\",\r\n        F55: \"Abuso de sustancias que no producen dependencia\",\r\n        F59: \"Trastornos del comportamiento asociados a disfunciones fisiológicas y a factores somáticos sin especificación\"\r\n    },\r\n    \"F60-F69 Trastornos de la personalidad y del comportamiento del adulto\": {\r\n        F60: \"Trastornos específicos de la personalidad\",\r\n        \"F60.0\": \"Trastorno paranoide de la personalidad\",\r\n        \"F60.1\": \"Trastorno esquizoide de la personalidad\",\r\n        \"F60.2\": \"Trastorno disocial de la personalidad\",\r\n        \"F60.3\": \"Trastorno de inestabilidad emocional de la personalidad\",\r\n        \"F60.4\": \"Trastorno histriónico de la personalidad\",\r\n        \"F60.5\": \"Trastorno anancástico de la personalidad\",\r\n        \"F60.6\": \"Trastorno ansioso de la personalidad\",\r\n        \"F60.7\": \"Trastorno dependiente de la personalidad\",\r\n        \"F60.8\": \"Otros trastornos específicos de la personalidad\",\r\n        \"F60.9\": \"Trastornos de la personalidad sin especificación \"\r\n    },\r\n    \"F61 Trastornos mixtos y otros trastornos de la personalidad\": {\r\n        \"F61.0\": \"Trastornos mixtos de la personalidad\"\r\n    },\r\n\r\n    \"F62 Transformación persistente de la personalidad no atribuible a lesión o enfermedad cerebral \": {\r\n        \"F62.0\": \"Transformación persistente de la personalidad no atribuible a lesión o enfermedad cerebral \"\r\n    },\r\n\r\n    \"F63 Trastorno de los hábitos y del control de los impulsos\": {\r\n        \"F63.0\": \"Trastorno de los hábitos y del control de los impulsos\"\r\n    },\r\n\r\n    \"F64 Trastorno de identidad sexual\": {\r\n        \"F64.0\": \"Trastorno de identidad sexual\"\r\n    },\r\n\r\n    \"F65 Trastornos de inclinación sexual\": {\r\n        \"F65.0\": \"Trastornos de inclinación sexual\"\r\n    },\r\n    \"F66 Trastornos psicológicos y del comportamiento del desarrollo y orientación sexuales\": {\r\n        \"F66.0\": \"Trastornos psicológicos y del comportamiento del desarrollo y orientación sexuales\"\r\n    },\r\n\r\n    \"F68 Otros trastornos de la personalidad y del comportamiento del adulto \": {\r\n        \"F68.0\": \"Otros trastornos de la personalidad y del comportamiento del adulto \"\r\n    },\r\n\r\n    \"F69 Trastorno de la personalidad y del comportamiento del adulto sin especificación\": {\r\n        \"F69.0\": \"Trastorno de la personalidad y del comportamiento del adulto sin especificación\"\r\n    },\r\n    \"F70-F79 Retraso mental\": {\r\n        F70: \"Retraso mental leve\",\r\n        F71: \"Retraso mental moderado \",\r\n        F72: \"Retraso mental grave \",\r\n        F73: \"Retraso mental profundo \",\r\n        F78: \"Otro retraso mental \",\r\n        F79: \"Retraso mental sin especificación \"\r\n    },\r\n    \"F80-F89 trastornos del desarrollo psicológico\": {\r\n        F80: \"Trastornos específicos del desarrollo del habla y de lenguaje\",\r\n        F81: \"Trastornos específicos del desarrollo del aprendizaje escolar\",\r\n        F82: \"Trastorno específico del desarrollo psicomotor\",\r\n        F83: \"Trastorno específico del desarrollo mixto\",\r\n        F84: \"Trastornos generalizados del desarrollo\",\r\n        F88: \"Otros trastornos del desarrollo psicológico\",\r\n        F89: \"Trastorno del desarrollo psicológico sin especificación\"\r\n    },\r\n\r\n    \"F90-F98 Trastornos del comportamiento y de las emociones de comienzo habitual en la infancia y adolescencia \": {\r\n        F90: \"Trastornos hipercinéticos \",\r\n        F91: \"Trastornos disociales \",\r\n        F92: \"Trastornos disociales y de las emociones mixtos \",\r\n        F93: \"Trastornos de las emociones de comienzo habitual en la infancia \",\r\n        F94: \"Trastornos del comportamiento social de comienzo habitual en la infancia y adolescencia \",\r\n        F95: \" Trastornos de tics\",\r\n        F98: \"Otros trastornos de las emociones y del comportamiento de comienzo habitual en la infancia y adolescencia \",\r\n        F99: \"Trastorno mental sin especificación\"\r\n    },\r\n    \"X60-X84 Autolesiones intencionales\": {\r\n        X60: \"Envenenamiento intencionalmente autoinfligido por analgésicos no opiáceos, antipiréticos o antirreumáticos \",\r\n        X61: \"Envenenamiento intencionalmente autoinfligido por fármacos antiepilépticos, sedantes, hipnóticos, antiparkinsonianos y psicotrópicos no clasificados en otro lugar\",\r\n        X62: \"Envenenamiento Intencional autoinfligido por narcóticosy psicodisléptlcos (alucinógenos) no clasificados en otro lugar\",\r\n        X63: \"\tEnvenenamiento Intencionalmente autoinfligido por otrosfármacos que actúan sobre el sistema nervioso autónomo\",\r\n        X64: \"Envenenamiento Intencionalmente autoinfligido por otras drogas, fármacos o productos biológicos\",\r\n        X65: \"Envenenamiento Intencionalmente autoinfligido por alcohol\",\r\n        X66: \"Envenenamiento Intencionalmente autoinfligido por solventes orgánicos, hidrocarburos halogenados o a sus vapores\",\r\n        X67: \"Envenenamiento Intencionalmente autoinfligido por exposición a otros gases y vapores\",\r\n        X68: \"Envenenamiento Intencionalmente autoinfligido por pesticidas\",\r\n        X69: \"\tEnvenenamiento Intencionalmente autoinfligido por otras sustancias químicas o nocivas no especificadas\",\r\n        X70: \"Daño intencionalmente autoinfligido por ahorcamiento, estrangulación o sofocación\",\r\n        X71: \"Daño intencionalmente autoinfligido por ahogamiento e inmersión\",\r\n        X72: \"Daño intencionalmente autoinfligido por disparo de arma corta\",\r\n        X73: \"Daño intencionalmente autoinfligido por disparo de rifles, escopetas o arma larga\",\r\n        X74: \"Daño intencionalmente autoinfligido por otras armas de fuego\",\r\n        X75: \"Daño intencionalmente autoinfligido por material explosivo\",\r\n        X76: \"Daño intencionalmente autoinfligido por fuego y llamas\",\r\n        X77: \"Daño intencionalmente autoinfligido por vapor de agua, vapores u objetos calientes\",\r\n        X78: \"Daño intencionalmente autoinfligido por un objeto cortante\",\r\n        X79: \"Daño intencionalmente autoinfligido por objetos romos\",\r\n        X80: \"Daño intencionalmente autoinfligido porsalto desde un lugar elevado\",\r\n        X81: \"Daño intencionalmente autoinfligido por arrojarse o tenderse ante un objeto en movimiento\",\r\n        X82: \"Daño intencionalmente autoinfligido por choque con vehículo de motor  \",\r\n        X83: \"Daño intencionalmente autoinfligido por otros medios específicos\",\r\n        X84: \"Daño intencionalmente autoinfligido por medios inespecíficos\"\r\n    },\r\n    \"Y06 Negligencia y abandono\": { \"Y06.0\": \"Negligencia y abandono\" },\r\n    \"Y07 Otros síndromes de malos tratos\": { \"Y07.0\": \"Otros síndromes de malos tratos\" },\r\n    \"Y40-Y59 Drogas, medicamentos y sustancias biológicas que causan efectos adversos en uso terapéutico\": {\r\n        Y46: \"Antiepilépticos y antiparkinsonianos\",\r\n        Y47: \"Sedantes, hipnóticos y ansiolíticos\",\r\n        Y49: \"Psicótropos no clasificados en otro lugar \",\r\n        Y50: \"Estimulantes del sistema nervioso central no clasificados en otro lugar\",\r\n        Y51: \"Fármacos que afectan primariamente al sistema nervioso autónomo \",\r\n        Y57: \"Otros fármacos y drogas sin especificar\"\r\n    },\r\n    \"Z00-Z99 Factores que influyen en el estado de salud y en el contacto con los servicios de salud\": {\r\n        \"Z55\": \"Problemas relacionados con la educación y la alfabetización\",\r\n        \"Z56\": \"Problemas relacionados con el empleo y desempleo\",\r\n        \"Z59\": \"Problemas relacionados con la vivienda y las condiciones económicas\",\r\n        \"Z60\": \"\tProblemas relacionados con el ambiente social\",\r\n        \"Z60.0\": \"Problemas de ajuste a las transiciones de los ciclos vitales\",\r\n        \"Z60.1\": \"Situaciones familiares atípicas\",\r\n        \"Z60.2\": \"Vivir solo\",\r\n        \"Z60.3\": \"Dificultades en la adaptación cultural\",\r\n        \"Z60.4\": \"Exclusión y rechazo social\",\r\n        \"Z60.5\": \"Ser blanco de discriminación adversa y persecución \",\r\n        \"Z61.0\": \"Pérdida de relaciones afectivas en la infancia\",\r\n        \"Z61.1\": \"Cambio de domicilio en la niñez\",\r\n        \"Z61.2\": \"Patrones de relaciones familiares alterados en la infancia\",\r\n        \"Z61.3\": \"Hechos contundentes a la pérdida de la autoestima en la niñez\",\r\n        \"Z61.4\": \"Problemas relacionados con presunto abuso sexual del niño por una persona dentro del grupo de apoyo primario\",\r\n        \"Z61.5\": \"Problemas relacionados con presunto abuso sexual del niño por una persona no perteneciente al grupo de apoyo primario\",\r\n        \"Z61.6\": \" Problemas relacionados con presunto abuso físico del niño\",\r\n        \"Z61.7\": \"Experiencias personales atemorizantes en la niñez\",\r\n        \"Z62.0\": \"\tSupervisión y control inadecuados por parte de los padres\",\r\n        \"Z62.1\": \"Sobreprotección parental\",\r\n        \"Z62.2\": \"Crianza en una institución\",\r\n        \"Z62.3\": \"Hostigamiento y acusación de culpabilidad al niño\",\r\n        \"Z62.4\": \"Abandono emocional del niño\",\r\n        \"Z62.5\": \"\tOtros problemas relacionados con la negligencia en la crianza del niño\",\r\n        \"Z62.6\": \"Presiones inapropiadas de los padres y otras anormalidades en la crianza\",\r\n        \"Z63.0\": \"Problemas en la relación entre esposos o pareja\",\r\n        \"Z63.1\": \"Problemas en la relación con los padres y los familiares políticos\",\r\n        \"Z63.2\": \"Problemas relacionados con el apoyo familiar inadecuado\",\r\n        \"Z63.3\": \"Problemas relacionados con la ausencia de un miembro de la familia\",\r\n        \"Z63.4\": \"Problemas relacionados con la desaparición o muerte de un miembro de la familia\",\r\n        \"Z63.5\": \"Problemas relacionados con la ruptura familiar por separación o divorcio\",\r\n        \"Z63.6\": \"Problemas relacionados con familiar dependiente, necesitado de cuidado en la casa\",\r\n        \"Z63.7\": \"Problemas relacionados con otros hechos estresantes que afectan a la familia y al hogar\",\r\n        \"Z64.0\": \"Problemas relacionados con embarazo no deseado\",\r\n        \"Z64.1\": \"Problemas relacionados con la multiparidad\",\r\n        \"Z64.2\": \"Problemas relacionados con la solicitud o aceptación de intervenciones físicas, nutricionales y químicas, conociendo su riesgo y peligro\",\r\n        \"Z64.3\": \"Problemas relacionados con la solicitud o aceptación de intervenciones psicológicas o de la conducta, conociendo su riesgo y peligro\",\r\n        \"Z64.4\": \"Problemas relacionados con el desacuerdo con consejeros\",\r\n        \"Z65.0\": \"Problemas relacionados con culpabilidad en procedimientos civiles o criminales sin prisión\",\r\n        \"Z65.1\": \"Problemas relacionados con prisión y otro encarcelamiento\",\r\n        \"Z65.2\": \"Problemas relacionados con la liberación de la prisión\",\r\n        \"Z65.3\": \"Problemas relacionados con otras circunstancias legales\",\r\n        \"Z65.4\": \"Problemas relacionados con víctima de crimen o terrorismo\",\r\n        \"Z65.5\": \"Problemas relacionados con la exposición a desastre, guerra u otras hostilidades\",\r\n        \"Z86.4\": \"Historia personal de abuso de sustancias psicoactivas\",\r\n        \"Z86.5\": \"Historia personal de otros trastornos mentales o del comportamiento\",\r\n        \"Z91.1\": \"Historia personal de incumplimiento del régimen o tratamiento médico\",\r\n        \"Z91.3\": \"Historia personal de ciclo sueño-vigilia no saludable\",\r\n        \"Z91.4\": \"Historia personal de trauma psicológico, no clasificado en otra parte\",\r\n        \"Z91.5\": \"HISTORIA PERSONAL DE LESIÓN AUTOINFLIGIDA INTENCIONALMENTE\",\r\n    }\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { Form, Input, Button, message, Select, Upload, Space } from 'antd';\r\nimport { API, usuario } from '../../resources';\r\nimport { InboxOutlined } from '@ant-design/icons';\r\nimport { diagnosticos } from '../../assets/diagnosticos2';\r\nconst { Option, OptGroup } = Select;\r\nconst { Dragger } = Upload;\r\nconst { TextArea } = Input;\r\n\r\nconst handleChange = (value) => {\r\n    // Select diagnostic\r\n    console.log(`selected ${value}`);\r\n};\r\n\r\nconst onFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo);\r\n};\r\n\r\n\r\n//List of Estudios styles\r\n// const formItemLayout = {\r\n//     labelCol: {\r\n//         xs: {\r\n//             span: 24,\r\n//         },\r\n//         sm: {\r\n//             span: 4,\r\n//         },\r\n//     },\r\n//     wrapperCol: {\r\n//         xs: {\r\n//             span: 24,\r\n//         },\r\n//         sm: {\r\n//             span: 20,\r\n//         },\r\n//     },\r\n// };\r\n// const formItemLayoutWithOutLabel = {\r\n//     wrapperCol: {\r\n//         xs: {\r\n//             span: 24,\r\n//             offset: 0,\r\n//         },\r\n//         sm: {\r\n//             span: 20,\r\n//             offset: 4,\r\n//         },\r\n//     },\r\n// };\r\n\r\n\r\n\r\nexport function NuevaNota(props) {\r\n    const [estudiosFiles, setEstudiosFiles] = useState([])\r\n\r\n    useEffect(() => {\r\n        console.log('Received nota on props: ', props.nota)\r\n    }, [])\r\n\r\n   \r\n    const onFinish = async (values) => {\r\n        // Create Nota\r\n        values.id_medico = usuario._id;\r\n        values.id_usuario = props.paciente;\r\n        values.recetas = [];\r\n        values.estudios = estudiosFiles;\r\n        console.log('ready To send: ', values)\r\n        const newNota = await fetch(API + 'notas/add', {\r\n            method: 'POST',\r\n            body: JSON.stringify(values),\r\n            headers: { 'Content-Type': 'application/json' }\r\n        }).then(res => res.json())\r\n            .then(response => {\r\n                message.success(response.message || response.error);\r\n                // response.message && response.message === ''\r\n                return response;\r\n            })\r\n            .catch(error => console.error('Error:', error))\r\n\r\n        // Add new nota to received notas\r\n        props.prevExpNotas.push(newNota.id_nota)\r\n        //Update nota at expedient\r\n        fetch(API + 'expedientes/updateNotas/' + props.id_expediente, {\r\n            method: 'PUT',\r\n            body: JSON.stringify({ \"notas\": props.prevExpNotas }),\r\n            headers: { 'Content-Type': 'application/json' }\r\n        }).then(res => res.json())\r\n            .then(response => {\r\n                console.log('Update Exp:', response);\r\n                message.success(response.message || response.error);\r\n            })\r\n            .catch(error => console.error('Error:', error))\r\n    };\r\n\r\n    const onFinishEdit = (values) => {\r\n        // Create Nota\r\n        console.log('ready To send: ', values)\r\n        fetch(API + 'notas/update/' + props.nota._id, {\r\n            method: 'PUT',\r\n            body: JSON.stringify(values),\r\n            headers: { 'Content-Type': 'application/json' }\r\n        }).then(res => res.json())\r\n            .then(response => {\r\n                message.success(response.message || response.error);\r\n                if (response.message && response.message === 'Nota Updated') props.setIsModalVisible(false)\r\n                console.log(response);\r\n            })\r\n            .catch(error => console.error('Error:', error))\r\n    };\r\n\r\n    // Upload File\r\n    const dragDropProps = {\r\n        name: 'file',\r\n        multiple: true,\r\n        action: API + 'notas/estudios/upload', // Production\r\n\r\n        onChange(info) {\r\n            const { status } = info.file;\r\n\r\n            if (status !== 'uploading') {\r\n                console.log(info.file, info.fileList);\r\n            }\r\n\r\n            if (status === 'done') {\r\n                message.success(`${info.file.name} file uploaded successfully.`);\r\n                console.log('New Files: ', info.file.response.file)\r\n                setEstudiosFiles([...estudiosFiles, info.file.response.file])\r\n            } else if (status === 'error') {\r\n                message.error(`${info.file.name} file upload failed.`);\r\n            }\r\n        },\r\n\r\n        onDrop(e) {\r\n            console.log('Dropped files', e.dataTransfer.files);\r\n        },\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h4 style={{ marginLeft: 20 }}>Detalles de la nota</h4>\r\n            {/* <p>Expediente received: {props.id_expediente}</p>\r\n            <p>Paciente received: {props.paciente}</p>\r\n            <p>Medico received: {usuario._id}</p>\r\n            <p>prevExpNotas received: {props.prevExpNotas}</p>\r\n            *La nota lleva el id del medico, obtenido de la sesion */}\r\n            {/* <p>Diag [0].clasificacion {diagnosticos[0]['clasificacion']}</p> */}\r\n\r\n            <br />\r\n            <Dragger {...dragDropProps}>\r\n                <p className=\"ant-upload-drag-icon\">\r\n                    <InboxOutlined />\r\n                </p>\r\n                <p className=\"ant-upload-text\">Arrastra los archivos de estudio aquí, o da click para buscar</p>\r\n                <p className=\"ant-upload-hint\">\r\n                    Selecciona archivos en pdf o imagen que sean menores a 2 MB para poder subirlos\r\n                </p>\r\n            </Dragger>\r\n            <Form name=\"basic\" labelCol={{ span: 8 }} wrapperCol={{ span: 14 }} initialValues={props.nota ? props.nota : { remember: true, estudios: [] }} onFinish={props.nota ? onFinishEdit : onFinish} onFinishFailed={onFinishFailed} autoComplete=\"off\" style={{ marginTop: 12 }} >\r\n\r\n                <Form.Item label=\"Edad\" name=\"edad\" rules={[{ required: true, message: 'Ingresa RFC' }]} >\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item label=\"Talla\" name=\"talla\" rules={[{ required: false, message: 'Ingresa RFC' }]} >\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item label=\"Peso\" name=\"peso\" rules={[{ required: false, message: 'Ingresa RFC' }]} >\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item label=\"IMC\" name=\"imc\" rules={[{ required: false, message: 'Ingresa RFC' }]} >\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item label=\"Temperatura\" name=\"temperatura\" rules={[{ required: false, message: 'Ingresa RFC' }]} >\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item label=\"Presion Arterial\" name=\"presion_arterial\" rules={[{ required: false, message: 'Ingresa RFC' }]} >\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item label=\"Frecuencia Cariaca\" name=\"frecuencia_cardiaca\" rules={[{ required: false, message: 'Ingresa RFC' }]} >\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item label=\"Frecuencia respiratoria\" name=\"frecuencia_respiratoria\" rules={[{ required: false, message: 'Ingresa RFC' }]} >\r\n                    <Input />\r\n                </Form.Item>\r\n\r\n                {/* <Form.Item label=\"Estudios\" name=\"estudios\" rules={[{ required: true, message: 'Ingresa RFC' }]} >\r\n                    <Input />\r\n                </Form.Item> */}\r\n\r\n                {/* \r\n                <Form.List\r\n                    name=\"estudios\"\r\n                    rules={[\r\n                        {\r\n                            validator: async (_, names) => {\r\n                                if (!names || names.length < 1) {\r\n                                    return Promise.reject(new Error('Ingresa al menos un estudio'));\r\n                                }\r\n                            },\r\n                        },\r\n                    ]}\r\n                >\r\n                    {(fields, { add, remove }, { errors }) => (\r\n                        <>\r\n                            {fields.map((field, index) => (\r\n                                <Form.Item\r\n                                    {...(index === 0 ? formItemLayout : formItemLayoutWithOutLabel)}\r\n                                    label={index === 0 ? 'Estudio' : ''}\r\n                                    required={false}\r\n                                    key={field.key}\r\n                                    getValueFromEvent={getFile}\r\n                                >\r\n                                    <Form.Item\r\n                                        {...field}\r\n                                        validateTrigger={['onChange', 'onBlur']}\r\n                                        rules={[\r\n                                            {\r\n                                                required: true,\r\n                                                whitespace: true,\r\n                                                message: \"Ingresa estudios\",\r\n                                            },\r\n                                        ]}\r\n                                        noStyle\r\n                                    >\r\n                                        <Upload {...UploadProps}>\r\n                                            <Button icon={<UploadOutlined />}>Click to Upload</Button>\r\n                                        </Upload>\r\n                                    </Form.Item>\r\n                                    {fields.length > 1 ? (\r\n                                        <MinusCircleOutlined\r\n                                            className=\"dynamic-delete-button\"\r\n                                            onClick={() => remove(field.name)}\r\n                                        />\r\n                                    ) : null}\r\n                                </Form.Item>\r\n                            ))}\r\n                            <Form.Item>\r\n                                <Button\r\n                                    type=\"dashed\"\r\n                                    onClick={() => add()}\r\n                                    style={{\r\n                                        // width: '100%',\r\n                                        position: 'relative',\r\n                                        alignItems: 'center',\r\n                                        justifyContent: 'flex-end'\r\n                                    }}\r\n                                    icon={<PlusOutlined />}\r\n                                >\r\n                                    Agregar Estudios\r\n                                </Button>\r\n                                <Form.ErrorList errors={errors} />\r\n                            </Form.Item>\r\n                        </>\r\n                    )}\r\n                </Form.List>\r\n */}\r\n\r\n                <Form.Item label=\"Observaciones\" name=\"Observaciones\" rules={[{ required: true, message: 'Ingresa Observaciones' }]} >\r\n                    <TextArea rows={4} />\r\n                </Form.Item>\r\n\r\n                <Form.Item label=\"Diagnostico\" name=\"diagnostico\" rules={[{ required: true, message: 'Selecciona Diagnostico' }]} >\r\n                    <Select\r\n                        showSearch\r\n                        style={{ width: 400 }}\r\n                        onChange={handleChange}\r\n                    >\r\n                        {\r\n                            Object.keys(diagnosticos).map((k) => {\r\n                                return <OptGroup label={k}>\r\n                                    {Object.keys(diagnosticos[k]).map((sk) => {\r\n                                        return <Option value={sk}>{diagnosticos[k][sk]}</Option>\r\n                                    })}\r\n                                </OptGroup>\r\n\r\n                            })\r\n                        }\r\n                    </Select>\r\n                </Form.Item>\r\n\r\n                <Form.Item wrapperCol={{ offset: 8, span: 16 }}>\r\n                    <Space>\r\n                        <Button onClick={() => props.setIsModalVisible(false)}>\r\n                            Cancelar\r\n                        </Button>\r\n                        <Button type=\"primary\" htmlType=\"submit\">\r\n                            Guardar\r\n                        </Button>\r\n                    </Space>\r\n\r\n                </Form.Item>\r\n            </Form>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport { Page, Text, View, Document, StyleSheet, Image } from '@react-pdf/renderer';\r\nimport { PDFViewer } from '@react-pdf/renderer';\r\nimport Logo from '../../assets/Logo.png'\r\nimport { usuario, IMAGE_API } from '../../resources';\r\n\r\nexport default function RecetaDocument(props) {\r\n\r\n    useEffect(() => {\r\n        console.log('receta props', props)\r\n    }, [])\r\n\r\n    // Create styles\r\n    // Styles for a4\r\n    // const styles = StyleSheet.create({\r\n    //     page: {\r\n    //         flexDirection: 'column',\r\n    //         backgroundColor: 'white'\r\n    //     },\r\n    //     block: {\r\n    //         flexDirection: 'row'\r\n    //     },\r\n    //     section: {\r\n    //         margin: 10,\r\n    //         padding: 10,\r\n    //         flexGrow: 1\r\n    //     },\r\n    //     image: {\r\n    //         // marginVertical: 15,\r\n    //         // marginHorizontal: 10,\r\n    //         width: 132\r\n    //     },\r\n    //     footText: {\r\n    //         fontSize: 14\r\n    //     }\r\n    // });\r\n    // Styles for a5\r\n    const styles = StyleSheet.create({\r\n        page: {\r\n            flexDirection: 'column',\r\n            backgroundColor: 'white'\r\n        },\r\n        block: {\r\n            flexDirection: 'row',\r\n            justifyContent: 'space-between'\r\n        },\r\n        sectionFull: {\r\n            marginHorizontal: 55,\r\n            // padding: 10,\r\n            flexGrow: 1\r\n        },\r\n        section: {\r\n            margin: 10,\r\n            padding: 10,\r\n        },\r\n        image: {\r\n            width: 64\r\n        },\r\n        desc: {\r\n            fontSize: 12\r\n        },\r\n        footText: {\r\n            fontSize: 14\r\n        },\r\n        prescription: {\r\n            fontSize: 16\r\n        },\r\n    });\r\n    // Create Document Component\r\n    function Receta() {\r\n        return <Document>\r\n            <Page size=\"A5\" orientation=\"landscape\" style={styles.page}>\r\n\r\n                <View style={styles.block}>\r\n                    <View style={[styles.section, { alignItems: 'center' }]}>\r\n                        <Image style={styles.image} src={IMAGE_API + props.logoHospital} />\r\n                        <Text style={styles.footText}>Dr. {usuario.name}</Text>\r\n                        <View style={{ color: 'black', width: '60%', backgroundColor: 'black', borderBottomColor: '#9bb4df', borderBottomWidth: 1 }}></View>\r\n                        {usuario.especialidad && <Text style={styles.footText}>{usuario.especialidad}</Text>}\r\n                    </View>\r\n                    <View style={[styles.section, { alignItems: 'center' }]}>\r\n                        {\r\n                            usuario.universidades && usuario.universidades.map((u) => <View style={{ alignItems: 'center' }}>\r\n                                <Text style={(usuario.universidades && usuario.universidades.length) > 1 ? styles.desc : styles.footText}>{u.carrera}</Text>\r\n                                <Text style={(usuario.universidades && usuario.universidades.length) > 1 ? styles.desc : styles.footText}>{u.universidad.toUpperCase()}</Text>\r\n                            </View>)\r\n                        }\r\n                        <Text style={(usuario.universidades && usuario.universidades.length) > 1 ? styles.desc : styles.footText}>Ced. Prof.: {usuario.cedula}</Text>\r\n                    </View>\r\n                </View>\r\n\r\n                <View style={styles.sectionFull}>\r\n                    <Text style={styles.footText}>Nombre: {props.paciente.name}</Text>\r\n                    <Text style={styles.footText}>Fecha: {new Date().toLocaleString()}</Text>\r\n                </View>\r\n\r\n                <View style={styles.sectionFull}>\r\n                    <Text style={[styles.prescription, { lineHeight: 2 }]}>{props.receta.prescripcion}</Text>\r\n                </View>\r\n\r\n                <View style={{ color: 'black', width: '94%', backgroundColor: 'black', borderBottomColor: '#9bb4df', borderBottomWidth: 1, marginHorizontal: 20 }}></View>\r\n                <View style={styles.block}>\r\n                    <View style={styles.section}>\r\n                        {/* <Text style={styles.footText}>José Rubén Romero #103, Bosque Camelinas</Text>\r\n                        <Text style={styles.footText}>Morelia, Mich. CP 58290</Text>\r\n                        <Text style={styles.footText}>Tel. (443) 3235088, Cel (443) 356 7822</Text> */}\r\n                        <Text style={styles.footText}>{usuario.email}</Text>\r\n                        <Text style={styles.footText}>{usuario.telefono}</Text>\r\n                    </View>\r\n                    <View style={styles.section}>\r\n                        <Image style={styles.image} src={Logo} />\r\n                        <Text style={{ fontSize: 10, }}>www.recreamed.com</Text>\r\n                    </View>\r\n                </View>\r\n            </Page>\r\n\r\n\r\n        </Document>\r\n    }\r\n    return <div>\r\n        <PDFViewer height={500} width={550}>\r\n            <Receta />\r\n        </PDFViewer>\r\n    </div>\r\n\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { Card, Button, Row, Col, Modal, Form, Input, message } from 'antd';\r\nimport { API, sendDataBody, updateData, usuario } from '../../resources';\r\nimport { PlusOutlined, FormOutlined, PrinterOutlined } from '@ant-design/icons';\r\nimport RecetaDocument from './detalleRecetaForPrint';\r\nconst { TextArea } = Input;\r\n//Los IDS de las recetas son tomados y enviados desde el expediente\r\n// Estan siendo agregadas y actualizadas directamente al expediente desde el form de detallenota->Agregar Receta\r\nexport default function DetalleReceta(props) {\r\n\r\n    const [recetaData, setRecetaData] = useState([]);\r\n    const [recetaLoading, setRecetaLoading] = useState(true);\r\n    const [recetaForEdit, setRecetaForEdit] = useState({});\r\n    const [isModalVisible, setIsModalVisible] = useState(false); // Modal For Add REcipe\r\n    const [isEditingModalVisible, setIsEditingModalVisible] = useState(false); // Modal For Edit Recipe\r\n    const [isPrintingModalVisible, setIsPrintingModalVisible] = useState(false)\r\n\r\n    // Add Recipe Modal\r\n    const handleOk = () => { setIsModalVisible(false); };\r\n    const handleCancel = () => { setIsModalVisible(false); };\r\n    // Edit Recipe Modal\r\n    const showEditModal = () => { console.log('BeforeEdit'); setIsEditingModalVisible(true); };\r\n    const handleEditOk = () => { setIsEditingModalVisible(false); };\r\n    const handleEditCancel = () => { setIsEditingModalVisible(false); };\r\n    // Print Receta Modal\r\n    const handlePrintOk = () => { setIsPrintingModalVisible(false); setIsLogoSelected(false) };\r\n    const handlePrintCancel = () => { setIsPrintingModalVisible(false); setIsLogoSelected(false) };\r\n    // Select logo for print in receta. Switches the modal view into select logo hospital/pdf recipe for print\r\n    const [logoHospital, setLogoHospital] = useState(null)\r\n    const [nombreHospital, setNombreHospital] = useState(null)\r\n    const [isLogoSelected, setIsLogoSelected] = useState(false)\r\n\r\n    useEffect(() => {\r\n        props.recetas ?\r\n            getRecetasData()\r\n            :\r\n            finifhGet()\r\n    }, [props.recetas])\r\n\r\n    const getRecetasData = () => {\r\n        sendDataBody('recetas/getMany', { 'ids': props.recetas }).then((response) => {\r\n            setRecetaData(response);\r\n            setRecetaLoading(false)\r\n        })\r\n    }\r\n\r\n    const finifhGet = () => { setRecetaData([]); setRecetaLoading(false); }\r\n\r\n    // New Receta\r\n    const onFinish = async (values) => {\r\n        values.id_nota = props.id_nota;\r\n        console.log('new Receta:', values);\r\n        console.log('new Recetas:', values);\r\n\r\n        const newReceta = await fetch(API + 'recetas/add', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(values)\r\n        }).then(res => res.json())\r\n            .then(response => {\r\n                console.log('Success:', response);\r\n                message.info(response.message || response.error)\r\n                response.message === 'Receta creada correctamente' ? setIsModalVisible(false) : console.log(response.error);\r\n                return response;\r\n            })\r\n            .catch(error => console.error('Error:', error))\r\n\r\n        props.recetas.push(newReceta.id_receta)\r\n        console.log('New Recetas: ', props.recetas);\r\n\r\n        // Update nota.recetas\r\n        fetch(API + 'notas/updateRecetas/' + props.id_nota, {\r\n            method: 'PUT',\r\n            body: JSON.stringify({ \"recetas\": props.recetas }),\r\n            headers: { 'Content-Type': 'application/json' }\r\n        }).then(res => res.json())\r\n            .then(response => {\r\n                console.log('Update Exp:', response);\r\n                message.success(response.message || response.error);\r\n            })\r\n            .catch(error => console.error('Error:', error))\r\n\r\n    };\r\n\r\n    const onFinishFailed = (errorInfo) => {\r\n        console.log('Failed:', errorInfo);\r\n    };\r\n    // End of Form\r\n\r\n    // Set Edit Receta and open modal\r\n    const editReceta = (r) => {\r\n        setRecetaForEdit(r)\r\n        console.log(r);\r\n        showEditModal();\r\n    }\r\n    // Send data for update Receta\r\n    const updateReceta = (values) => {\r\n        console.log('update', values);\r\n        updateData(`recetas/update/${recetaForEdit._id}`, values).then((rs) => {\r\n            // message.success(rs);\r\n            setIsEditingModalVisible(false)\r\n            getRecetasData()\r\n        })\r\n    }\r\n    // Print Receta\r\n    const printReceta = async (r) => {\r\n        await setRecetaForEdit(r)\r\n        setIsPrintingModalVisible(true)\r\n        console.log(r);\r\n    }\r\n\r\n\r\n    const gridStyle = {\r\n        width: '100%',\r\n        height: '32',\r\n        textAlign: 'center',\r\n        display: 'inline-flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n    };\r\n\r\n    return <div>\r\n        <Card\r\n        // title={<>Recetas <Button className='btnIconCentered' onClick={() => setIsModalVisible(true)} size='small' type=\"primary\" shape=\"circle\" icon={<PlusOutlined />} ghost /></>}\r\n        >\r\n            <div className='fila' style={{ marginBottom: 8 }}>\r\n                <h6>Recetas</h6>\r\n                <Button className='btnIconCentered' onClick={() => setIsModalVisible(true)} size='small' type=\"primary\" shape=\"circle\" icon={<PlusOutlined />} ghost />\r\n            </div>\r\n            {\r\n                recetaLoading ? <h5>Cargando Receta...</h5> :\r\n                    recetaData.length > 0 ?\r\n\r\n                        recetaData.map((r) => {\r\n                            return <div key={r._id} style={{ display: 'flex', flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                                <p style={{ whiteSpace: 'pre' }}>{r.prescripcion} </p>\r\n                                <div>\r\n                                    <Button style={{ marginLeft: 8 }} onClick={() => editReceta(r)} size='small' type=\"primary\" shape=\"circle\" icon={<FormOutlined />} className='btnIconCentered' ghost />\r\n                                    <Button style={{ marginLeft: 8 }} onClick={() => printReceta(r)} size='small' type=\"primary\" shape=\"circle\" icon={<PrinterOutlined />} className='btnIconCentered' ghost />\r\n                                </div>\r\n                            </div>\r\n                        })\r\n                        :\r\n                        <h6>No hay una receta asignada</h6>\r\n            }\r\n        </Card>\r\n\r\n        <Modal title=\"Nueva Receta\" open={isModalVisible} onOk={handleOk} onCancel={handleCancel}\r\n            footer={[\r\n                <Button type=\"primary\" htmlType=\"submit\" form='create_receta_medic'>\r\n                    Guardar\r\n                </Button>,\r\n                <Button onClick={handleCancel}>Cancelar</Button>\r\n            ]}>\r\n            <Form\r\n                name=\"create_receta_medic\"\r\n                labelCol={{ span: 8 }}\r\n                wrapperCol={{ span: 16 }}\r\n                initialValues={{ remember: true }}\r\n                onFinish={onFinish}\r\n                onFinishFailed={onFinishFailed}\r\n                autoComplete=\"off\"\r\n            >\r\n                <Form.Item\r\n                    label=\"Prescripcion\"\r\n                    name=\"prescripcion\"\r\n                    rules={[{ required: true, message: 'Ingresa la prescripcion' }]}\r\n                >\r\n                    <TextArea rows={4} />\r\n                </Form.Item>\r\n\r\n            </Form>\r\n        </Modal>\r\n\r\n        <Modal title=\"Editar Receta\" open={isEditingModalVisible} onOk={handleEditOk} onCancel={handleEditCancel} destroyOnClose\r\n            footer={[\r\n                <Button type=\"primary\" htmlType=\"submit\" form='update_receta_medic'>\r\n                    Actualizar\r\n                </Button>,\r\n                <Button onClick={handleEditCancel}>Cancelar</Button>\r\n            ]}>\r\n\r\n            <Form\r\n                name=\"update_receta_medic\"\r\n                labelCol={{ span: 8 }}\r\n                wrapperCol={{ span: 16 }}\r\n                initialValues={{ prescripcion: recetaForEdit.prescripcion }}\r\n                onFinish={updateReceta}\r\n                onFinishFailed={onFinishFailed}\r\n                autoComplete=\"off\"\r\n            >\r\n                <Form.Item\r\n                    label=\"Prescripcion\"\r\n                    name=\"prescripcion\"\r\n                    rules={[{ required: true, message: 'Ingresa la prescripcion' }]}\r\n                >\r\n                    <TextArea rows={4} />\r\n                </Form.Item>\r\n\r\n            </Form>\r\n        </Modal>\r\n\r\n        <Modal title=\"Imprimir Receta\" open={isPrintingModalVisible} onOk={handlePrintOk} onCancel={handlePrintCancel} width={600}\r\n            footer={[\r\n                <Button onClick={handlePrintCancel}>Cancelar</Button>\r\n            ]}\r\n        >\r\n            {\r\n                isLogoSelected ? // Si ya hay logo seleccionado, se pasa a la receta y se muestra en pdf\r\n                    <RecetaDocument receta={recetaForEdit} logoHospital={logoHospital} nombreHospital={nombreHospital} paciente={props.paciente}/>\r\n                    :\r\n                    <div>\r\n                        <Card title='Selecciona un hospital' bordered={false}>\r\n                            {\r\n                                usuario.horarios.map((h) => {\r\n                                    return <Card.Grid style={{ width: '100%' }} onClick={() => { console.log(h.sucursal); setLogoHospital(h.sucursal.logo); setNombreHospital(h.sucursal.nombre); setIsLogoSelected(true) }} key={h._id}>\r\n                                        <Row align=\"middle\">\r\n                                            <Col span={6} offset={4}><img width={64} src={'https://api.recreamed.com/images/' + h.sucursal.logo} alt=\"Logo\" /></Col>\r\n                                            <Col span={10}>{h.sucursal.nombre} <br /> {h.horario}</Col>\r\n                                        </Row>\r\n                                    </Card.Grid>\r\n                                })\r\n                            }\r\n                        </Card>\r\n                    </div>\r\n            }\r\n        </Modal>\r\n    </div>\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { getData, updateData } from '../../resources'\r\nimport { Card, Typography } from 'antd'\r\nimport { CalendarOutlined, ClockCircleOutlined, DollarOutlined } from '@ant-design/icons'\r\nconst { Paragraph } = Typography;\r\n\r\n\r\nexport default function LastCita(props) {\r\n\r\n    const [cita, setCita] = useState({})\r\n    const [lastBalance, setLastBalance] = useState([])\r\n    // const [editableStr, setEditableStr] = useState('Sin costo registrado');\r\n    const [loading, setLoading] = useState(true)\r\n\r\n    useEffect(() => { getCitasData() }, [])\r\n\r\n    const updateLastBalance = (newMonto) => {\r\n\r\n        let newLastBalance = lastBalance;\r\n        newLastBalance.monto = newMonto;\r\n        updateData(`balances/update/${lastBalance._id}`, newLastBalance).then(getCitasData)\r\n    }\r\n\r\n    const getLastCta = (eventos) => {\r\n        var fechaActual = new Date();\r\n\r\n        // Filtrar los eventos que tienen una fecha menor o igual a la fecha actual\r\n        var eventosPasados = eventos.filter(function (evento) {\r\n            var fechaEvento = new Date(evento.fecha_hora);\r\n            return fechaEvento <= fechaActual;\r\n        });\r\n\r\n        // Ordenar los eventos pasados por fecha de forma descendente\r\n        eventosPasados.sort(function (a, b) {\r\n            var fechaA = new Date(a.fecha_hora);\r\n            var fechaB = new Date(b.fecha_hora);\r\n            return fechaB - fechaA;\r\n        });\r\n\r\n        // Obtener el evento más reciente\r\n        return eventosPasados[0]\r\n    }\r\n\r\n    const getCitasData = () => {\r\n        getData(`citas/${props.paciente}`).then((rs) => {\r\n            const ultimaCita = getLastCta(rs);\r\n            console.log('lsat cita', ultimaCita)\r\n            setCita(ultimaCita)\r\n            return ultimaCita\r\n        }).then((last) => {\r\n            return getData('balances/cita/' + last?._id)\r\n        }).then((bl) => {\r\n            console.log('balance', bl)\r\n            setLastBalance(bl[0])\r\n        }).finally(() => setLoading(false))\r\n    }\r\n\r\n    const LastBalance = () => {\r\n        return <div>\r\n            {\r\n                lastBalance && lastBalance.monto ?\r\n                    (\r\n                        // <div >\r\n\r\n                        <div style={{ display: 'flex', flexDirection: 'row', alignItems: 'center', columnGap: '10px' }}>\r\n                            <DollarOutlined style={{}} />\r\n                            Costo:\r\n                            <Paragraph\r\n                                style={{ marginTop: 14 }}\r\n                                editable={{\r\n                                    onChange: updateLastBalance,\r\n                                }}\r\n                            >\r\n                                {lastBalance.monto}\r\n                            </Paragraph>\r\n                        </div>\r\n                        // <div style={{ display: 'flex', flexDirection: 'row', alignItems: 'center', columnGap: '10px' }}>\r\n                        //     <CalendarOutlined /> {new Date(lastBalance.createdAt).toLocaleDateString()}\r\n                        // </div>\r\n                        // </div>\r\n                    ) : (\r\n                        <p>Sin Ultimo Balance</p>\r\n                    )\r\n            }\r\n\r\n        </div>\r\n    }\r\n\r\n\r\n    if (loading) return <p>Cargando...</p>\r\n    return (\r\n        <div style={{ marginTop: 8 }}>\r\n            <Card>\r\n                {\r\n                    cita ? <div>\r\n                        <h6>Cita más reciente</h6>\r\n                        <ul>\r\n                            <li className='btnIconCentered'><CalendarOutlined style={{ marginRight: 8 }} /> Fecha: {new Date(cita.fecha_hora).toLocaleDateString()}</li><br />\r\n\r\n                            <li className='btnIconCentered'><ClockCircleOutlined style={{ marginRight: 8 }} /> Hora: {cita.fecha_hora.substring(11, 16)}</li>\r\n\r\n                            <LastBalance />\r\n\r\n                        </ul>\r\n                    </div> : <h6>Sin cita recente registrada</h6>\r\n                }\r\n\r\n            </Card>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport { Card, Input } from 'antd';\r\nconst { TextArea } = Input;\r\nexport default function Soap() {\r\n    return (\r\n        <Card>\r\n            <div className='fila'><strong>S</strong><TextArea rows={1} /> </div>\r\n            <div className='fila'><strong>O</strong> <TextArea rows={1} /> </div>\r\n            <div className='fila'><strong>A</strong> <TextArea rows={1} /> </div>\r\n            <div className='fila'><strong>P</strong> <TextArea rows={1} /> </div>\r\n        </Card>\r\n    )\r\n}\r\n\r\n\r\nconst exp = {\r\n    \"_id\": \"64362d88fd79d28f49d66b3b\",\r\n    \"usuario\": {\r\n        \"_id\": \"641608ae799c5d19e048ee96\",\r\n        \"name\": \"MARIO FERNANDEZ\",\r\n        \"telefono\": 4525457008\r\n    },\r\n    \"historia\": \"64362d6dfd79d28f49d66b39\",\r\n    \"notas\": [],\r\n    \"recetas\": [],\r\n    \"createdAt\": \"2023-04-12T04:03:20.209Z\",\r\n    \"updatedAt\": \"2023-04-12T04:03:20.209Z\",\r\n    \"S\": \"\",\r\n    \"O\": \"\",\r\n    \"A\": \"\",\r\n    \"P\": \"\",\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { Card, Collapse, Button, Tabs, Row, Col, Modal, Space, Typography, message, Upload, Input, Select, Form } from 'antd';\r\nimport { getData, API, updateData, usuario } from '../../resources';\r\nimport { PlusOutlined, ExperimentOutlined, DownloadOutlined, EditOutlined, InboxOutlined, SaveOutlined, CloseOutlined } from '@ant-design/icons';\r\nimport { NuevaNota } from './nuevaNota';\r\nimport DetalleReceta from './detalleReceta';\r\nimport LastCita from './lastCita'\r\nimport { diagnosticos } from '../../assets/diagnosticos2';\r\nimport Soap from './soap'\r\nconst { Panel } = Collapse;\r\nconst { Paragraph } = Typography;\r\nconst { TextArea } = Input;\r\nconst { Dragger } = Upload;\r\nconst { Option, OptGroup } = Select;\r\n\r\n\r\n\r\nexport default function DetalleNota(props) {\r\n\r\n    const [notaData, setNotaData] = useState([]);\r\n    const [notaLoading, setnotaLoading] = useState(true);\r\n    const [notaForEdit, setNotaForEdit] = useState(\"\")\r\n    // Add Nota Modal\r\n    const [isModalVisible, setIsModalVisible] = useState(false);\r\n    const handleOk = () => { setIsModalVisible(false) };\r\n    const handleCancel = () => { setIsModalVisible(false) };\r\n    // End of Add Nota Modal\r\n    // Edit Nota Modal\r\n    const [isEditModalVisible, setIsEditModalVisible] = useState(false);\r\n    const handleEditOk = () => { setIsEditModalVisible(false) };\r\n    const handleEditCancel = () => { setIsEditModalVisible(false) };\r\n    const editarNota = async (n) => { await setNotaForEdit(n); setIsEditModalVisible(true) }\r\n    // End of Edit Nota Modal\r\n    // Edit Nota fields\r\n    const [editingEntradas, setEditingEntradas] = useState(false)\r\n    const [editingDiagnostico, setEditingDiagnostico] = useState(false)\r\n\r\n    const id_paciente = props.paciente;\r\n\r\n    useEffect(() => {\r\n        console.log('Paciente received to detailNota: ', id_paciente)\r\n        id_paciente ?\r\n            getNotasData()\r\n            :\r\n            finishGet()\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        console.log('Paciente received to detailNota: ', id_paciente)\r\n        id_paciente ?\r\n            getNotasData()\r\n            :\r\n            finishGet()\r\n    }, [id_paciente])\r\n\r\n    const getNotasData = () => {\r\n        console.log('satring notas for: ', id_paciente);\r\n        getData(`notas/${id_paciente}`).then(rs => {\r\n            console.log('NotasData: ', rs);\r\n            rs.forEach((nt, i) => {\r\n                nt.label = 'Nota' + (i + 1);\r\n            });\r\n            setNotaData(rs);\r\n            setnotaLoading(false)\r\n        })\r\n    }\r\n    const finishGet = () => { setNotaData([]); setnotaLoading(false); }\r\n\r\n    const NotaGridStyle = {\r\n        width: '25%',\r\n        textAlign: 'center',\r\n        border: '1px solid rgba(255, 255, 255, 255)'\r\n    };\r\n\r\n    const EstudioGridStyle = {\r\n        width: '50%',\r\n        // height: '32',\r\n        textAlign: 'center',\r\n        display: 'inline-flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    };\r\n\r\n    const createNota = async () => {\r\n        let newNotaBody = {\r\n            id_usuario: id_paciente,\r\n            id_medico: usuario._id,\r\n            edad: 1,\r\n            talla: 1,\r\n            imc: 1,\r\n            peso: 1,\r\n            temperatura: 1,\r\n            presion_arterial: \"---/---\",\r\n            frecuencia_cardiaca: 1,\r\n            frecuencia_respiratoria: 1,\r\n            estudios: [],\r\n            Observaciones: \"\",\r\n            recetas: []\r\n        }\r\n        const newNota = await fetch(API + 'notas/add', {\r\n            method: 'POST',\r\n            body: JSON.stringify(newNotaBody),\r\n            headers: { 'Content-Type': 'application/json' }\r\n        }).then(res => res.json())\r\n            .then(response => {\r\n                message.success(response.message || response.error);\r\n                // response.message && response.message === ''\r\n                return response;\r\n            })\r\n            .catch(error => console.error('Error:', error))\r\n\r\n        // Add new nota to received notas\r\n        props.prevExpNotas.push(newNota.id_nota)\r\n        //Update nota at expedient\r\n        fetch(API + 'expedientes/updateNotas/' + props.id_expediente, {\r\n            method: 'PUT',\r\n            body: JSON.stringify({ \"notas\": props.prevExpNotas }),\r\n            headers: { 'Content-Type': 'application/json' }\r\n        }).then(res => res.json())\r\n            .then(response => {\r\n                console.log('Update Exp:', response);\r\n                message.success(response.message || response.error);\r\n            })\r\n            .catch(error => console.error('Error:', error))\r\n            .finally(() => { getNotasData() })\r\n    };\r\n\r\n    const updateNota = (originalNota, field, newString) => {\r\n        originalNota[field] = newString;\r\n        console.log(originalNota)\r\n        updateData(`notas/update/${originalNota._id}`, originalNota).then((rs) => { getNotasData() })\r\n    }\r\n    const onEntryFinish = (nota, values) => {\r\n        console.log(values)\r\n        console.log('Before:', nota)\r\n        nota.entradas = [...nota.entradas, values];\r\n        console.log('After:', nota)\r\n        updateData(`notas/update/${nota._id}`, nota).then((rs) => {\r\n            getNotasData()\r\n        }).finally(() => setEditingEntradas(false))\r\n    }\r\n\r\n    const onEntryFinishFailed = (errorInfo) => {\r\n        console.log('Failed:', errorInfo);\r\n    };\r\n\r\n    // Upload File For Estudios\r\n    const dragDropProps = {\r\n        name: 'file',\r\n        multiple: true,\r\n        action: API + 'notas/estudios/upload', // Production\r\n\r\n        onChange(info) {\r\n            const { status } = info.file;\r\n\r\n            if (status !== 'uploading') {\r\n                console.log(info.file, info.fileList);\r\n            }\r\n\r\n            if (status === 'done') {\r\n                message.success(`${info.file.name} file uploaded successfully.`);\r\n                console.log('New Files: ', info.file.response.file)\r\n                // setEstudiosFiles([...estudiosFiles, info.file.response.file])\r\n            } else if (status === 'error') {\r\n                message.error(`${info.file.name} file upload failed.`);\r\n            }\r\n        },\r\n\r\n        onDrop(e) {\r\n            console.log('Dropped files', e.dataTransfer.files);\r\n        },\r\n    };\r\n\r\n    const items = notaData.map((nota, i) => {\r\n        return {\r\n            label: `Nota ${i + 1}`,\r\n            key: nota._id,\r\n            children: <Row gutter={8}>\r\n                {/* Mitad de la pantalla para NOTA*/}\r\n                <Col span={12}>\r\n                    {/* Detalle nota and soap will come into enfermero nota */}\r\n                    {/* <Soap />\r\n                    <Collapse bordered={false} style={{ backgroundColor: '#fff' }}>\r\n                        <Panel header={<Tooltip title=\"Haga Click para mostrar u ocultar\" placement=\"right\"><span>Detalles de la nota</span></Tooltip>} key=\"1\">\r\n                            <Card >\r\n                                <Card.Grid style={NotaGridStyle}>Edad: <Paragraph editable={{ onChange: (ns) => updateNota(nota, \"edad\", ns) }} >{nota.edad}</Paragraph></Card.Grid>\r\n                                <Card.Grid style={NotaGridStyle}>Talla:<Paragraph editable={{ onChange: (ns) => updateNota(nota, \"talla\", ns) }} >{nota.talla}</Paragraph></Card.Grid>\r\n                                <Card.Grid style={NotaGridStyle}>Peso: <Paragraph editable={{ onChange: (ns) => updateNota(nota, \"peso\", ns) }} >{nota.peso}</Paragraph></Card.Grid>\r\n                                <Card.Grid style={NotaGridStyle}>IMC: <Paragraph editable={{ onChange: (ns) => updateNota(nota, \"imc\", ns) }} >{nota.imc}</Paragraph></Card.Grid>\r\n                                <Card.Grid style={NotaGridStyle}>Temperatura: <Paragraph editable={{ onChange: (ns) => updateNota(nota, \"temperatura\", ns) }} >{nota.temperatura}</Paragraph></Card.Grid>\r\n                                <Card.Grid style={NotaGridStyle}>Presion Arterial: <Paragraph editable={{ onChange: (ns) => updateNota(nota, \"presion_arterial\", ns) }} >{nota.presion_arterial}</Paragraph></Card.Grid>\r\n                                <Card.Grid style={NotaGridStyle}>Frecuencia Cardiaca : <Paragraph editable={{ onChange: (ns) => updateNota(nota, \"frecuencia_cardiaca\", ns) }} >{nota.frecuencia_cardiaca}</Paragraph></Card.Grid>\r\n                                <Card.Grid style={NotaGridStyle}>Frecuencia Respiratoria : <Paragraph editable={{ onChange: (ns) => updateNota(nota, \"frecuencia_respiratoria\", ns) }} >{nota.edad}</Paragraph></Card.Grid>\r\n                            </Card>\r\n                        </Panel>\r\n                    </Collapse> */}\r\n\r\n                    <Card title='Observaciones'>\r\n                        <Paragraph editable={{ onChange: (ns) => updateNota(nota, \"Observaciones\", ns) }} >\r\n                            {nota.Observaciones}\r\n                        </Paragraph>\r\n                    </Card>\r\n\r\n                    <Card title='Diagnostico'>\r\n\r\n                        {\r\n                            nota.diagnostico ? <div>{nota.diagnostico}</div> : <Select\r\n                                showSearch\r\n                                placeholder='Selecciona un diagnostico'\r\n                                style={{ width: 400 }}\r\n                                onChange={(newValue) => updateNota(nota, \"diagnostico\", newValue)}\r\n                            >\r\n                                {\r\n                                    Object.keys(diagnosticos).map((k) => {\r\n                                        return <OptGroup label={k}>\r\n                                            {Object.keys(diagnosticos[k]).map((sk) => {\r\n                                                return <Option value={diagnosticos[k][sk]}>{diagnosticos[k][sk]}</Option>\r\n                                            })}\r\n                                        </OptGroup>\r\n\r\n                                    })\r\n                                }\r\n                            </Select>\r\n                        }\r\n                    </Card>\r\n\r\n                    <Card title='Entradas'>\r\n                        {\r\n                            editingEntradas ? <Form\r\n                                name=\"add_entry_form\"\r\n                                // labelCol={{ span: 8 }}\r\n                                // wrapperCol={{ span: 16 }}\r\n                                onFinish={(vals) => onEntryFinish(nota, vals)}\r\n                                onFinishFailed={onEntryFinishFailed}\r\n                                autoComplete=\"off\"\r\n                            >\r\n                                <Space>\r\n                                    <Form.Item\r\n                                        // label=\"Nueva entrada\"\r\n                                        name=\"descripcion\"\r\n                                        rules={[{ required: true, message: 'Ingresa la descripcion' }]}\r\n                                    >\r\n                                        <TextArea rows={2} placeholder=\"Ingresa los detalles\" />\r\n                                    </Form.Item>\r\n                                    <Form.Item\r\n                                    // wrapperCol={{ offset: 8, span: 16 }}\r\n                                    >\r\n                                        <div className='fila'>\r\n                                            <Button className='btnIconCentered' type=\"primary\" shape=\"circle\" size='small' htmlType=\"submit\" icon={<SaveOutlined />} />\r\n                                            <Button className='btnIconCentered' type=\"primary\" shape=\"circle\" size='small' onClick={() => setEditingEntradas(false)} icon={<CloseOutlined />} />\r\n                                        </div>\r\n                                    </Form.Item>\r\n                                </Space>\r\n                            </Form> : <div className='fila'>\r\n                                <ul>\r\n                                    {\r\n                                        nota.entradas && nota.entradas.map((e) => <li key={e._id}>{e.createdAt?.substring(0, 10)} - {e.descripcion}</li>)\r\n                                    }\r\n                                </ul>\r\n                                <Button className='btnIconCentered' type=\"primary\" shape=\"circle\" ghost onClick={() => { setEditingEntradas(true) }} size='small' icon={<PlusOutlined />} />\r\n                            </div>\r\n                        }\r\n\r\n                    </Card>\r\n\r\n                    {/* <Card title='Tratamiento'>\r\n                        <Select\r\n                            defaultValue=\"Tratamiento 1\"\r\n                            style={{ width: 120 }}\r\n                            // onChange={handleChange}\r\n                            options={[\r\n                                {\r\n                                    value: 'jack',\r\n                                    label: 'Tratamiento 1',\r\n                                },\r\n                                {\r\n                                    value: 'lucy',\r\n                                    label: 'Tratamiento 2',\r\n                                },\r\n                                {\r\n                                    value: 'Yiminghe',\r\n                                    label: 'Tratamiento 3',\r\n                                },\r\n                            ]}\r\n                        />\r\n                    </Card> */}\r\n\r\n                    <Card title='Estudios'>\r\n                        {nota.estudios.map((e) => {\r\n                            return <Card.Grid style={EstudioGridStyle}>\r\n                                <a href={`${API}notas/estudios/download/${e}`}><ExperimentOutlined />{e}<DownloadOutlined /> </a>\r\n                            </Card.Grid>\r\n                        })}\r\n\r\n                        <Dragger {...dragDropProps} style={{ padding: 6 }}>\r\n                            <p className=\"ant-upload-drag-icon\">\r\n                                <InboxOutlined />\r\n                            </p>\r\n                            <p className=\"ant-upload-text\">Arrastra los archivos de estudio aquí, o da click para buscar</p>\r\n                            <p className=\"ant-upload-hint\">\r\n                                Selecciona archivos en pdf o imagen que sean menores a 2 MB para poder subirlos\r\n                            </p>\r\n                        </Dragger>\r\n                    </Card>\r\n                    <Button style={{ float: 'right' }} onClick={() => { editarNota(nota) }} size='small' type=\"primary\" icon={<EditOutlined />} className='btnIconCentered'>Editar Nota</Button>\r\n                </Col>\r\n                <Col span={12} >\r\n                    {/* La otra mitad de la pantalla para receta */}\r\n                    <DetalleReceta recetas={nota.recetas} id_nota={nota._id} paciente={props.paciente} />\r\n\r\n                    {/* Debajo de la receta esta la ultima cita */}\r\n                    <LastCita paciente={id_paciente} />\r\n                </Col>\r\n            </Row>\r\n        }\r\n    }).reverse()\r\n\r\n    // return <div style={{backgroundColor: '#fff', padding: 16}}>\r\n    return <Card >\r\n\r\n        <Space>\r\n            <h5>Notas </h5>\r\n            <Button className='btnIconCentered' onClick={createNota} size='small' type=\"primary\" shape=\"circle\" icon={<PlusOutlined />} ghost />\r\n        </Space>\r\n\r\n        {\r\n            notaLoading ? <h5>Cargando Nota...</h5> : <Tabs items={items} />\r\n        }\r\n\r\n        <Modal title=\"Nueva Nota\" open={isModalVisible} onOk={handleOk} onCancel={handleCancel} width={680} footer={[]} destroyOnClose>\r\n            <NuevaNota id_expediente={props.id_expediente} paciente={id_paciente} prevExpNotas={props.prevExpNotas} setIsModalVisible={setIsModalVisible} />\r\n        </Modal>\r\n\r\n        <Modal title=\"Editar Nota\" open={isEditModalVisible} onOk={handleEditOk} onCancel={handleEditCancel} width={680} footer={[]} destroyOnClose>\r\n            <NuevaNota nota={notaForEdit} setIsModalVisible={setIsEditModalVisible} />\r\n        </Modal>\r\n\r\n\r\n\r\n    </Card>\r\n\r\n\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Card, Space, Button, Input, Form, message } from 'antd';\r\nimport { getData, API } from '../../resources';\r\nimport { FormOutlined } from '@ant-design/icons';\r\n\r\nexport default function DetalleHistoria(props) {\r\n    const { TextArea } = Input;\r\n    const [historiaData, setHistoriaData] = useState(\"\")\r\n    const [notaLoading, setHistoriaLoading] = useState(true)\r\n    const [editing, setEditing] = useState(false)\r\n\r\n    useEffect(() => {\r\n        //     console.log(\"Props IDHistoria: \", props.historia)\r\n        props.historia ?\r\n            getHistoriaData()\r\n            :\r\n            finifhGet()\r\n    }, [props.historia])\r\n\r\n    const finifhGet = () => { setHistoriaData([]); setHistoriaLoading(false); }\r\n\r\n    const getHistoriaData = () => {\r\n        getData(`historia/${props.historia}`).then(rs => { setHistoriaData(rs); setHistoriaLoading(false) })\r\n    }\r\n\r\n    const gridStyle = {\r\n        width: '100%',\r\n        // height: '40',\r\n        // textAlign: 'center',\r\n        // display: 'inline-flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        marginTop: 15\r\n    };\r\n\r\n    const updateHistoria = (values) => {\r\n        setEditing(false)\r\n        fetch(API + 'historias/update/' + historiaData[0]._id, {\r\n            method: 'PUT',\r\n            body: JSON.stringify(values),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then(res => res.json())\r\n            .then(response => {\r\n                console.log('Success:', response);\r\n                message.success(response.message || response.error);\r\n            })\r\n            .finally(() => {\r\n                getHistoriaData()\r\n                setEditing(false)\r\n            })\r\n        console.log('New Historia', values);\r\n    }\r\n\r\n\r\n    const HistoriaDetails = () => {\r\n        return <Card style={gridStyle} >\r\n            <h5>Historia Clinica</h5>\r\n\r\n            {\r\n                editing ?\r\n                    <>\r\n                        <Form name='historiaForm' initialValues={{ historial: historiaData[0].historial }} onFinish={updateHistoria}>\r\n                            <Form.Item name='historial'>\r\n                                <TextArea rows={4} />\r\n                            </Form.Item>\r\n                            <Space>\r\n                                <Form.Item>\r\n                                    <Button type=\"primary\" htmlType=\"submit\">Guardar</Button>\r\n                                </Form.Item>\r\n                                <Form.Item>\r\n                                    <Button onClick={() => setEditing(false)}>Cancelar</Button>\r\n                                </Form.Item>\r\n                            </Space>\r\n                        </Form>\r\n                    </>\r\n                    :\r\n                    <div>\r\n                        <p style={{ whiteSpace: 'pre', textAlign: 'left' }}>{historiaData[0].historial}</p>\r\n                        <Button className='btnIconCentered' onClick={() => setEditing(true)} size='small' disabled={!props.historia} type=\"primary\" shape=\"circle\" icon={<FormOutlined className='sizedIcon' />} style={{ position: 'absolute', bottom: 18, right: 18 }} ghost/>\r\n                    </div>\r\n            }</Card>\r\n    }\r\n\r\n\r\n    return <div>\r\n        {/* <Space>\r\n            <Button className='btnIconCentered' onClick={() => setEditing(true)} size='small' disabled={!props.historia} type=\"primary\" shape=\"circle\" icon={<FormOutlined className='sizedIcon' />} />\r\n        </Space> */}\r\n        {\r\n            notaLoading ? <h5>Cargando Historia...</h5> :\r\n                historiaData.length > 0 ?\r\n                    <HistoriaDetails />\r\n                    :\r\n                    <h6>No hay una historia asignada</h6>\r\n        }\r\n        <br />\r\n    </div>\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Button, Space, message } from 'antd';\r\nimport { API, sendDataBody } from '../../resources';\r\nimport DetalleNota from './detalleNota'\r\nimport DetalleHistoria from './detalleHistoria';\r\n// import html2canvas from 'html2canvas';\r\n// import { jsPDF } from \"jspdf\";\r\n\r\n\r\nexport default function Expedientes(props) {\r\n    const [expedientesData, setExpedientesData] = useState(null);\r\n    const [expedientesLoading, setExpedientesLoading] = useState(true);\r\n    const [historia, setHistoria] = useState(\"\");\r\n    const [notas, setNotas] = useState(\"\");\r\n\r\n    const { _id: id_paciente } = props.paciente;\r\n\r\n    useEffect(() => {\r\n        getExpedientesData(id_paciente)\r\n    }, [id_paciente])\r\n\r\n\r\n    const getExpedientesData = (id_paciente) => {\r\n        console.log('Received patient exp doc ', id_paciente)\r\n        fetch(API + `expedientes/${id_paciente}`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                console.log(\"GetExpData: \", data);\r\n                setExpedientesData(data);\r\n                if (typeof data != \"undefined\") {\r\n                    setNotas(data.notas); setHistoria(data.historia);\r\n                } else { setNotas(null); setHistoria(null) }\r\n            })\r\n            .finally(() => setExpedientesLoading(false))\r\n    }\r\n\r\n    // const printDocument = () => {\r\n    //     const input = document.getElementById('expedient-export');\r\n    //     html2canvas(input)\r\n    //         .then((canvas) => {\r\n    //             const imgData = canvas.toDataURL('image/png');\r\n    //             const pdf = new jsPDF();\r\n    //             pdf.addImage(imgData, 'JPEG', 0, 0);\r\n    //             pdf.output('dataurlnewwindow');//Name of file?\r\n    //             pdf.save(\"expediente.pdf\");\r\n    //         })\r\n    //         ;\r\n    // }\r\n\r\n\r\n    async function addHistoria() {\r\n        // return await fetch(API + 'historias/add', {\r\n        //     method: 'POST',\r\n        //     headers: {\r\n        //         'Content-Type': 'application/json'\r\n        //     },\r\n        //     body: JSON.stringify({\r\n        //         historial: \"Historia clinica al \" + new Date()\r\n        //     })\r\n        // }).then(res => res.json())\r\n        //     .then(response => {\r\n        //         console.log('Story Created: ', response);\r\n        //         return response\r\n        //     })\r\n        //     .catch(error => console.error('Error:', error))\r\n\r\n\r\n        return sendDataBody('historias/add', {\r\n            historial: \"Historia clinica al \" + new Date()\r\n        })\r\n    }\r\n\r\n    const createPAtientData = async (usr) => {\r\n        const historia = await addHistoria();\r\n        const postBody = {\r\n            usuario: usr,\r\n            historia: historia.id_historia,\r\n            notas: [],\r\n            recetas: []\r\n        }\r\n        console.log('postBodyForExpedient: ', postBody);\r\n\r\n        sendDataBody('expedientes/add', postBody).then(response => {\r\n            console.log('Success:', response);\r\n            message.success(response.message || response.error);\r\n            if (response.message && response.message === 'Expediente creado correctamente') {\r\n                getExpedientesData(id_paciente)\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n\r\n\r\n    if (expedientesLoading) return <p>Cargando...</p>\r\n\r\n    return <div id='expedient-export' >\r\n\r\n        {/* <h4 className='spacedTitle'>Expediente </h4> */}\r\n\r\n        <DetalleHistoria historia={historia} />\r\n\r\n        \r\n\r\n        {\r\n            expedientesData ?\r\n                <DetalleNota id_expediente={expedientesData._id} prevExpNotas={expedientesData.notas} paciente={id_paciente} />\r\n                :\r\n                <div style={{}}>\r\n                    Sin expediente\r\n                    <br />\r\n                    <br />\r\n                    <Button onClick={() => { createPAtientData(id_paciente) }}>Crear Expediente Ahora</Button>\r\n                </div>\r\n        }\r\n\r\n        {/* <Button onClick={printDocument}>Exportar a pdf</Button> */}\r\n\r\n\r\n\r\n    </div>;\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Form, Input, InputNumber, Button, message, Space, Row, Col, Upload } from 'antd'\r\nimport { MinusCircleOutlined, PlusOutlined, InboxOutlined } from '@ant-design/icons';\r\nimport { Select } from 'antd';\r\nimport { getData, API } from '../../resources'\r\nconst { Option } = Select;\r\nconst { Dragger } = Upload;\r\n\r\n\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    xs: {\r\n      span: 24,\r\n    },\r\n    sm: {\r\n      span: 8,\r\n    },\r\n  },\r\n  wrapperCol: {\r\n    xs: {\r\n      span: 24,\r\n    },\r\n    sm: {\r\n      span: 14,\r\n    },\r\n  },\r\n};\r\nconst tailFormItemLayout = {\r\n  wrapperCol: {\r\n    xs: {\r\n      span: 24,\r\n      offset: 0,\r\n    },\r\n    sm: {\r\n      span: 16,\r\n      offset: 8,\r\n    },\r\n  },\r\n};\r\nexport default function PerfilEdit(props) {\r\n\r\n  const [form] = Form.useForm();\r\n\r\n  const [sucursales, setSucursales] = useState([]);\r\n  const [sucursalesLoading, setSucursalesLoading] = useState(true);\r\n  const [avatar, setAvatar] = useState(props.perfil.avatar)\r\n\r\n  //Start upload props Upload File\r\n  const dragDropProps = {\r\n    name: 'file',\r\n    multiple: false,\r\n    action: API + 'imagenes/upload',\r\n\r\n    onChange(info) {\r\n      const { status } = info.file;\r\n\r\n      if (status !== 'uploading') {\r\n        console.log(info.file, info.fileList);\r\n      }\r\n\r\n      if (status === 'done') {\r\n        message.success(`${info.file.name} file uploaded successfully.`);\r\n        console.log('New Files: ', info.file.response.file)\r\n        setAvatar(info.file.response.file)\r\n      } else if (status === 'error') {\r\n        message.error(`${info.file.name} file upload failed.`);\r\n      }\r\n    },\r\n\r\n    onDrop(e) {\r\n      console.log('Dropped files', e.dataTransfer.files);\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log('received Medic: ', props.perfil);\r\n    getData('sucursales').then((rs) => { setSucursales(rs); setSucursalesLoading(false) })\r\n  },[])\r\n\r\n  // const onFinish = (values) => {\r\n  //   values.avatar = avatar;\r\n  //   values.estatus = '1';\r\n  //   values.rol = 'Medico';\r\n  //   delete values.confirm;\r\n  //   delete values.prefix;\r\n\r\n  //   console.log('ready to send', values)\r\n  //   fetch(S_API + 'register', {\r\n  //     method: 'POST',\r\n  //     body: JSON.stringify(values),\r\n  //     headers: {\r\n  //       'Content-Type': 'application/json'\r\n  //     }\r\n  //   }).then(res => res.json())\r\n  //     .then(response => {\r\n  //       console.log('Success:', response);\r\n  //       response.message && response.message === 'Usuario creado correctamente' ?\r\n  //         window.location.href = 'doctores' : message.error(response.error);\r\n  //     })\r\n  //     .catch(error => console.error('Error:', error))\r\n  // };\r\n\r\n  const onFinishEdit = (values) => {\r\n    values.avatar = avatar;\r\n    // values.estatus = '1';\r\n    // values.rol = 'Medico';\r\n    // delete values.confirm;\r\n    // delete values.prefix;\r\n\r\n    console.log('ready to send', values)\r\n    fetch(API + 'users/updateUser/' + props.perfil._id, {\r\n      method: 'PUt',\r\n      body: JSON.stringify(values),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log('Success:', response);\r\n        response.message && response.message === 'Usuario actualizado correctamente' ?\r\n          props.setEditing(false) : message.error(response.error);\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  };\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h4>Editar perfil</h4>\r\n      <br />\r\n      <Dragger {...dragDropProps}>\r\n        <p className=\"ant-upload-drag-icon\">\r\n          <InboxOutlined />\r\n        </p>\r\n        <p className=\"ant-upload-text\">Arrastra la imagen de perfil o click ara buscar</p>\r\n        <p className=\"ant-upload-hint\">\r\n          Selecciona archivos en formato png, jpeg o webp\r\n        </p>\r\n      </Dragger>\r\n      <br />\r\n      <Form\r\n        {...formItemLayout}\r\n        form={form}\r\n        name=\"register\"\r\n        onFinish={onFinishEdit}\r\n        // initialValues={{ horarios: [{ sucursal: '', horario: '' }], prefix: '+52' }}\r\n        initialValues={props.perfil}\r\n        scrollToFirstError\r\n      >\r\n\r\n        <Row>\r\n\r\n          <Col span={11}>\r\n            <Form.Item name=\"name\" label=\"Nombre\" rules={[{ required: true, message: 'Ingresa Nombre y apellidos' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item name=\"email\" label=\"Correo\" rules={[{ type: 'email', message: 'Ingresa un corrreo electronico valido' }, { required: true, message: 'Please input your E-mail!' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            {/* <Form.Item name=\"password\" label=\"Contraseña\" rules={[{ required: true, message: 'Por favor ingrese su contraseña!', },]} hasFeedback >\r\n              <Input.Password />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"confirm\" label=\"Confirmar contraseña\" dependencies={['password']} hasFeedback\r\n              rules={[\r\n                {\r\n                  required: true,\r\n                  message: 'Please confirm your password!',\r\n                },\r\n                ({ getFieldValue }) => ({\r\n                  validator(_, value) {\r\n                    if (!value || getFieldValue('password') === value) {\r\n                      return Promise.resolve();\r\n                    }\r\n                    return Promise.reject(new Error('Las contraseñas deben coincidir!'));\r\n                  },\r\n                }),\r\n              ]}\r\n            >\r\n              <Input.Password />\r\n            </Form.Item> */}\r\n\r\n            <Form.Item name=\"telefono\" label=\"Telefono\" rules={[{ required: true, message: 'Ingresa el numero de telefono correcto' },]}>\r\n              <InputNumber style={{ width: '100%' }} />\r\n            </Form.Item>\r\n\r\n\r\n            <Form.Item label=\"horarios\" rules={[{ required: true, message: 'Ingresa al menos un horario', },]}>\r\n              <Form.List name=\"horarios\" label=\"horarios list\"\r\n              >\r\n                {(fields, { add, remove }) => (\r\n                  <>\r\n                    {fields.map(({ key, name, ...restField }) => (\r\n                      <Space key={key} style={{ display: 'flex', marginBottom: 8 }} align=\"baseline\">\r\n                        <Form.Item\r\n                          {...restField}\r\n                          name={[name, 'sucursal']}\r\n                          rules={[{ required: true, message: 'Elije Sucursal' }]}\r\n                        >\r\n                          <Select placeholder=\"Elije Sucursal\" style={{ width: '120px' }} >\r\n                            {sucursalesLoading ? \"Cargando\" :\r\n                              sucursales.map(s => <Option value={s._id}>{s.nombre}</Option>)\r\n                            }\r\n                          </Select>\r\n                        </Form.Item>\r\n                        <Form.Item\r\n                          {...restField}\r\n                          name={[name, 'horario']}\r\n                          rules={[{ required: true, message: 'Missing last name' }]}\r\n                        >\r\n                          <Input placeholder=\"Horario\" />\r\n                        </Form.Item>\r\n                        <MinusCircleOutlined onClick={() => remove(name)} />\r\n                      </Space>\r\n                    ))}\r\n                    <Form.Item>\r\n                      <Button type=\"dashed\" onClick={() => add()} block icon={<PlusOutlined />}>\r\n                        Agregar Horario\r\n                      </Button>\r\n                    </Form.Item>\r\n                  </>\r\n                )}\r\n              </Form.List>\r\n            </Form.Item>\r\n\r\n\r\n\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item name=\"cedula\" label=\"Cedula\" rules={[{ required: false, message: 'Ingresa cedula' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            {/* Not Necesary For Medic. He'll be in hospital direction */}\r\n            {/* <Form.Item name=\"calle\" label=\"Calle\" rules={[{ required: true, message: 'Ingresa calle', whitespace: true }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"numexterior\" label=\"Num Exterior\" rules={[{ required: true, message: 'Ingresa numero exterior' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"numinterior\" label=\"Num Interior\" rules={[{ required: true, message: 'Ingresa numinterior' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item label=\"Colonia\" name=\"colonia\" rules={[{ required: true, message: 'Please input your colobnia!' }]}            >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"estado\" label=\"Estado\" rules={[{ required: true, message: 'Apellido materno', },]}>\r\n              <Select placeholder=\"Elije tu estado\">\r\n                {estados.map(e => <Option value={e}>{e}</Option>)}\r\n              </Select>\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"municipio\" label=\"Municipio\" rules={[{ required: true, message: 'Ingresa tu municipio' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"codigopostal\" label=\"Codigo Postal\" rules={[{ required: true, message: 'Ingresa codigopostal', },]}>\r\n              <InputNumber addonAfter={suffixSelector} style={{ width: '100%', }} />\r\n            </Form.Item> */}\r\n\r\n            <Form.Item name=\"certificacion\" label=\"Certificacion\" rules={[{ required: false, message: 'Ingresa tu certificacion' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n\r\n\r\n            <Form.Item label=\"Universidades\" rules={[{ required: true, message: 'Ingresa al menos una universidad', },]}>\r\n              <Form.List name=\"universidades\" label=\"universidades list\">\r\n                {(fields, { add, remove }) => (\r\n                  <>\r\n                    {fields.map(({ key, name, ...restField }) => (\r\n                      <Space key={key} style={{ display: 'flex', marginBottom: 8 }} align=\"baseline\">\r\n                        <Form.Item\r\n                          {...restField}\r\n                          name={[name, 'universidad']}\r\n                          rules={[{ required: true, message: 'Ingresa la universidad' }]}\r\n                        >\r\n                          <Input placeholder=\"Universidad\" />\r\n                        </Form.Item>\r\n                        <Form.Item\r\n                          {...restField}\r\n                          name={[name, 'carrera']}\r\n                          rules={[{ required: true, message: 'Ingresa la carrera' }]}\r\n                        >\r\n                          <Input placeholder=\"Carrera\" />\r\n                        </Form.Item>\r\n                        <Form.Item\r\n                          {...restField}\r\n                          name={[name, 'cedula']}\r\n                          rules={[{ required: false, message: 'Ingresa la cedula' }]}\r\n                        >\r\n                          <Input placeholder=\"Cedula\" />\r\n                        </Form.Item>\r\n                        <MinusCircleOutlined onClick={() => remove(name)} />\r\n                      </Space>\r\n                    ))}\r\n                    <Form.Item>\r\n                      <Button type=\"dashed\" onClick={() => add()} block icon={<PlusOutlined />}>\r\n                        Agregar Universidad\r\n                      </Button>\r\n                    </Form.Item>\r\n                  </>\r\n                )}\r\n              </Form.List>\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"especialidad\" label=\"Especialidad\" rules={[{ required: true, message: 'Ingresa tu especialidad' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n\r\n            <Form.Item {...tailFormItemLayout}>\r\n              <Button type=\"primary\" htmlType=\"submit\">\r\n                Guardar\r\n              </Button>\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n\r\n\r\n\r\n\r\n\r\n        {/* <Form.Item\r\n          name=\"agreement\"\r\n          valuePropName=\"checked\"\r\n          rules={[\r\n            {\r\n              validator: (_, value) =>\r\n                value ? Promise.resolve() : Promise.reject(new Error('Should accept agreement')),\r\n            },\r\n          ]}\r\n          {...tailFormItemLayout}\r\n        >\r\n          <Checkbox>\r\n            He leído y acepto los <a href=\"https://recreamed.com\">terminos y condiciones</a>\r\n          </Checkbox>\r\n        </Form.Item> */}\r\n\r\n\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Form, Input, Button, InputNumber, Modal } from 'antd';\r\nimport { updateData } from '../../resources';\r\n\r\nexport default function AddService({ isOpen, handleClose, service, profileData, getProfileData }) {\r\n\r\n    const [initialService, setinitialService] = useState(null)\r\n\r\n    useEffect(() => {\r\n        console.log('before', profileData)\r\n        setinitialService(service)\r\n    }, [service])\r\n\r\n    const onFinish = async (values) => {\r\n        console.log(values)\r\n        const newData = profileData.configuracion ? { configuracion: { tratamientos_ofrecidos: [...profileData.configuracion.tratamientos_ofrecidos, values] } } : { configuracion: { tratamientos_ofrecidos: values } }\r\n        await updateData(`/users/updateUser/${profileData._id}`, newData).then((rs) => { console.log(rs); getProfileData(); handleClose() })\r\n    };\r\n\r\n    const onFinishEdit = async (values) => {\r\n        const { configuracion: { tratamientos_ofrecidos } } = profileData;\r\n        const foundIndex = tratamientos_ofrecidos.findIndex((svc => svc._id === service._id));\r\n        tratamientos_ofrecidos[foundIndex] = values;\r\n        profileData.configuracion.tratamientos_ofrecidos = tratamientos_ofrecidos;\r\n        console.log(\"after: \", profileData)\r\n        await updateData(`/users/updateUser/${profileData._id}`, profileData).then((rs) => { console.log(rs); getProfileData(); handleClose() })\r\n\r\n    }\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            setinitialService(null)\r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <Modal title={service ? \"Editar Servicio\" : \"Agregar Servicio\"} open={isOpen} onCancel={handleClose} destroyOnClose\r\n            footer={[\r\n                <Button type=\"primary\" htmlType=\"submit\" form='add_tratamiento_medic'>\r\n                    {service ? \"Guardar\" : \"Agregar\"}\r\n                </Button>,\r\n                <Button onClick={handleClose}>Cerrar</Button>\r\n            ]}\r\n        >\r\n            <Form\r\n                name=\"add_tratamiento_medic\"\r\n                onFinish={service ? onFinishEdit : onFinish}\r\n                labelCol={{ span: 8 }} wrapperCol={{ span: 16 }} style={{ maxWidth: 600 }}\r\n                initialValues={service}\r\n            >\r\n\r\n                <div className='fila'>\r\n                    <Form.Item label=\"Nuevo Servicio\" style={{ marginBottom: 0 }} >\r\n\r\n                        <Form.Item name=\"tratamiento\" label=\"Tratamiento\" rules={[{ required: true }]}  >\r\n                            <Input placeholder=\"Ingresa Descripcion\" />\r\n                        </Form.Item>\r\n\r\n                        <Form.Item name=\"observaciones\" label=\"Observaciones\" rules={[{ required: false }]}  >\r\n                            <Input placeholder=\"Ingresa Observaciones\" />\r\n                        </Form.Item>\r\n\r\n                        <Form.Item\r\n                            name=\"costo\" rules={[{ required: true }]}  >\r\n                            <InputNumber placeholder=\"Costo\" />\r\n                        </Form.Item>\r\n\r\n                    </Form.Item>\r\n                </div>\r\n            </Form>\r\n        </Modal>\r\n\r\n    )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Form, Button, Table, InputNumber, Divider, Popconfirm } from 'antd';\r\nimport Loading from '../../loading';\r\nimport { getData, updateData } from '../../resources';\r\nimport AddService from './service.add';\r\n\r\nexport default function Configuration({ id_usuario, correo }) {\r\n\r\n    const [profileData, setProfileData] = useState([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [editingCostoCita, setEditingCostoCita] = useState(false)\r\n    const [isModalOpen, setisModalOpen] = useState(false)\r\n    const [servicioForEdit, setServicioForEdit] = useState(null)\r\n\r\n    useEffect(() => {\r\n        getProfileData()\r\n\r\n        // deleteServices()\r\n    }, [])\r\n\r\n    const getProfileData = () => {\r\n        getData(`userByMail/${correo}`).then((rs) => {\r\n            localStorage.setItem('userData', JSON.stringify(rs[0])) // Save profile data into local storage again, due to changes\r\n            setProfileData(rs[0]) // Must change on backend to findOne, and remove the [0]\r\n        }).finally(() => { setLoading(false) })\r\n    }\r\n\r\n    const confirmDelete = async (val) => {\r\n\r\n        const { configuracion: { tratamientos_ofrecidos } } = profileData;\r\n        const foundIndex = tratamientos_ofrecidos.findIndex((svc => svc._id === val._id));\r\n        tratamientos_ofrecidos.splice(foundIndex, 1)\r\n        profileData.configuracion.tratamientos_ofrecidos = tratamientos_ofrecidos;\r\n        console.log(\"after: \", profileData)\r\n        await updateData(`/users/updateUser/${profileData._id}`, profileData).then((rs) => { console.log(rs); getProfileData() })\r\n\r\n        // const newData = { configuracion: {} }\r\n        // updateData(`/users/updateUser/${id_usuario}`, newData).then((rs) => { console.log(rs); getProfileData() })\r\n        console.log(val)\r\n    }\r\n\r\n    const columns = [\r\n        {\r\n            title: 'Servicio',\r\n            dataIndex: 'tratamiento',\r\n            key: 'name',\r\n        },\r\n        {\r\n            title: 'Observaciones',\r\n            dataIndex: 'observaciones',\r\n            key: 'observaciones',\r\n        },\r\n        {\r\n            title: 'Costo',\r\n            dataIndex: 'costo',\r\n            key: 'costo',\r\n        },\r\n        {\r\n            title: 'Opciones',\r\n            dataIndex: 'opciones',\r\n            key: 'opciones',\r\n            render: (_, record) => {\r\n                return <div className='fila'>\r\n                    <Button ghost type='primary' onClick={() => handleEditService(record)}>Editar</Button>\r\n                    <Popconfirm\r\n                        title=\"Delete the task\"\r\n                        description=\"Are you sure to delete this task?\"\r\n                        onConfirm={() => confirmDelete(record)}\r\n                        onCancel={() => console.log('Canceled')}\r\n                        okText=\"Yes\"\r\n                        cancelText=\"No\"\r\n                    >\r\n                        <Button ghost danger>Eliminar</Button>\r\n                    </Popconfirm>\r\n                </div>\r\n            }\r\n        }\r\n    ];\r\n\r\n\r\n    const handleEditService = (record) => {\r\n\r\n        setServicioForEdit(record)\r\n        setisModalOpen(true)\r\n    }\r\n    const handleClose = () => {\r\n        setServicioForEdit(null)\r\n        setisModalOpen(false);\r\n    }\r\n\r\n    // Form For edit Costo base de cita\r\n    const CostoCitaForm = () => {\r\n        return <Form\r\n            name=\"basic\"\r\n            labelCol={{ span: 8 }}\r\n            wrapperCol={{ span: 16 }}\r\n            style={{ maxWidth: 600 }}\r\n            initialValues={{ remember: true }}\r\n            onFinish={onFinishEditPrice}\r\n            onFinishFailed={onFinishFailed}\r\n            autoComplete=\"off\"\r\n        >\r\n            <Form.Item\r\n                label=\"Costo base de cita\"\r\n                name=\"costo_cita\"\r\n                rules={[{\r\n                    required: true,\r\n                    message: 'Please input your username!'\r\n                }]}\r\n            >\r\n                <InputNumber />\r\n            </Form.Item>\r\n\r\n            <Form.Item\r\n                wrapperCol={{ offset: 8, span: 16 }}\r\n            >\r\n                <Button type=\"primary\" htmlType=\"submit\">\r\n                    Guardar\r\n                </Button>\r\n            </Form.Item>\r\n        </Form>\r\n    }\r\n\r\n    // Methods for edit base price for cita\r\n    const onFinishEditPrice = (values) => {\r\n        const newConfig = {\r\n            configuracion: Object.assign(profileData.configuracion, values)\r\n        }\r\n        updateData(`/users/updateUser/${id_usuario}`, newConfig)\r\n            .then(() => getProfileData())\r\n            .finally(() => setEditingCostoCita(false))\r\n    };\r\n\r\n    const onFinishFailed = (errorInfo) => {\r\n        console.log('Failed:', errorInfo);\r\n    };\r\n\r\n    if (loading) return <Loading />\r\n\r\n    return (\r\n        <div>\r\n            <h4>Configuracion</h4>\r\n            <br />\r\n            {\r\n                editingCostoCita ?\r\n                    <div>\r\n                        <h5>Editando</h5>\r\n                        <CostoCitaForm />\r\n                    </div>\r\n                    :\r\n                    <div style={{ display: 'flex', alignContent: 'center', columnGap: 12 }}>\r\n                        <h5>\r\n                            {\r\n                                profileData.configuracion && profileData.configuracion.costo_cita ? `Costo de cita: ${profileData.configuracion.costo_cita}` : \"Sin costo de cita definido\"\r\n                            }\r\n                        </h5>\r\n                        <Button type='primary' size='small' onClick={setEditingCostoCita}>Modificar</Button>\r\n                    </div>\r\n            }\r\n\r\n            <Divider />\r\n\r\n            <h5>Servicios Registrados</h5> <Button onClick={() => setisModalOpen(true)}>Agergar Servicio</Button>\r\n\r\n            <Table dataSource={profileData.configuracion?.tratamientos_ofrecidos} columns={columns} bordered />\r\n\r\n            <AddService isOpen={isModalOpen} handleClose={handleClose} service={servicioForEdit} profileData={profileData} getProfileData={getProfileData} />\r\n\r\n        </div >\r\n    )\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { Row, Col, Space, Button, Divider, Image } from 'antd';\r\nimport { Avatar, Card } from 'antd';\r\nimport { UserOutlined } from '@ant-design/icons';\r\nimport { API, usuario } from '../../resources';\r\nimport Loading from '../../loading';\r\nimport { FormOutlined } from '@ant-design/icons';\r\nimport PerfilEdit from './perfilEdit';\r\nimport Configuration from './configuration';\r\n\r\n\r\nexport default function Perfil() {\r\n\r\n    const [profileData, setProfileData] = useState([]);\r\n    const [editing, setEditing] = useState(false)\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        getProfileData()\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        getProfileData()\r\n    }, [editing])\r\n\r\n    const getProfileData = () => {\r\n        fetch(API + 'userByMail/' + usuario.email)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                setProfileData(data[0]);\r\n                setIsLoading(false);\r\n            });\r\n    }\r\n\r\n    const editPerfil = async (p) => {\r\n        p.horarios.forEach((h) => { h.sucursal = h.sucursal._id })\r\n        setEditing(true);\r\n    }\r\n\r\n    const MiniCard = ({ universidad, carrera, cedula = '' }) => {\r\n        return <div style={{ display: 'flex', flexDirection: 'row', justifyContent: 'space-between', marginBottom: 12, textAlign: 'left' }}>\r\n            <div style={{ display: 'flex', flexDirection: 'column', width: '30%', borderBottom: 'solid 2px #f5f6f8'  }}><div className='desc'>Universidad:</div><div>{universidad}</div> </div>\r\n            <div style={{ display: 'flex', flexDirection: 'column', width: '30%', borderBottom: 'solid 2px #f5f6f8'  }}><div className='desc'>Carrera:</div><div>{carrera}</div></div>\r\n            <div style={{ display: 'flex', flexDirection: 'column', width: '30%', borderBottom: 'solid 2px #f5f6f8'  }}><div className='desc'>Cedula:</div><div>{cedula}</div></div>\r\n        </div>\r\n    }\r\n\r\n    const DetailsProfile = () => {\r\n        // Two columns of 8 spaces with 4 spaces around\r\n        return <div>\r\n\r\n            <Row gutter={8} style={{ backgroundColor: '#f5f6f8', borderRadius: 12, padding: 8 }}>\r\n                <Col span={8} >\r\n                    <Card style={{ display: 'flex', justifyContent: 'center', textAlign: 'center' }}>\r\n                        {\r\n                            // Profile Pic\r\n                            profileData.avatar.length > 9 ?\r\n                                <Image style={{ borderRadius: 12 }} width={256} src={'https://api.recreamed.com/images/' + profileData.avatar} alt='medic-profile-pic' />\r\n                                :\r\n                                <Avatar size={128} icon={<UserOutlined />} className='btnIconCentered' />\r\n                        }\r\n                        <br />\r\n                        <br />\r\n                        <br />\r\n                        <p className='nombre'>{profileData.name} </p>\r\n                        <p className='datos'>{profileData.rol} </p>\r\n                        {\r\n                            profileData.especialidad && <p className='datos'>{profileData.especialidad} </p>\r\n                        }\r\n                        <p className='datos'>{profileData.email} </p>\r\n                        <p className='datos'>{profileData.telefono} </p>\r\n                    </Card>\r\n                </Col>\r\n\r\n                <Col span={7}>\r\n                    <Card title='Horarios' size='small' style={{ height: '100%' }} >\r\n                        {\r\n                            profileData.horarios.map((h) => {\r\n                                return <Card.Grid style={{ width: '100%' }} >\r\n                                    <Row align=\"middle\">\r\n                                        <Col span={6} offset={4}><img width={64} src={'https://api.recreamed.com/images/' + h.sucursal.logo} alt=\"Logo\" /></Col>\r\n                                        <Col span={10}>{h.sucursal.nombre} <br /> {h.horario}</Col>\r\n                                    </Row>\r\n                                </Card.Grid>\r\n                            })\r\n                        }\r\n                    </Card>\r\n\r\n                    {/* <Card title='Datos Academicos' size='small' style={cardStyle}>\r\n                        <p><span className='desc'>Certificacion:</span> {profileData.certificacion} </p>\r\n                        <p><span className='desc'>Cedula:</span> {profileData.cedula} </p>\r\n                    </Card> */}\r\n                </Col>\r\n\r\n                <Col span={9}>\r\n                    <Card title='Universidades' size='small' style={{ height: '100%' }}>\r\n\r\n                        {\r\n                            profileData.universidades && profileData.universidades.map((u) => {\r\n                                return <MiniCard {...u} />\r\n                            })\r\n                        }\r\n                    </Card>\r\n                </Col>\r\n\r\n            </Row>\r\n            <br />\r\n            <Configuration id_usuario={usuario._id} correo={usuario.email} />\r\n        </div>\r\n    }\r\n\r\n    return (\r\n        <div className='mainContainer'>\r\n\r\n            <Space>\r\n                <h3>PERFIL</h3>\r\n                <Button onClick={() => editPerfil(profileData)} type=\"primary\" shape=\"circle\" icon={<FormOutlined />} className='btnIconCentered' />\r\n            </Space>\r\n            {isLoading ? <Loading /> :\r\n                <div>\r\n                    {\r\n                        editing ?\r\n\r\n                            <>\r\n                                <PerfilEdit perfil={profileData} setEditing={setEditing} />\r\n                                <Button onClick={() => setEditing(false)}>Cancelar</Button>\r\n                            </> :\r\n                            <DetailsProfile />\r\n                    }\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/Icon.e05b6872.png\";","import React, { Component } from 'react'\r\nimport { Row, Col, Statistic, Card } from 'antd'\r\n// import { Pie, Line } from '@ant-design/charts';\r\nimport './home.css'\r\n\r\nexport class Home extends Component {\r\n\r\n    dataPie = [\r\n        {\r\n            type: 'F01',\r\n            value: 9,\r\n        },\r\n        {\r\n            type: 'F05',\r\n            value: 4,\r\n        },\r\n        {\r\n            type: 'F09',\r\n            value: 7,\r\n        },\r\n        {\r\n            type: 'F13',\r\n            value: 2,\r\n        },\r\n        {\r\n            type: 'F16',\r\n            value: 12,\r\n        },\r\n        {\r\n            type: 'F22',\r\n            value: 3,\r\n        },\r\n    ];\r\n\r\n    configPie = {\r\n        appendPadding: 10,\r\n        data: this.dataPie,\r\n        angleField: 'value',\r\n        colorField: 'type',\r\n        height: 450,\r\n        radius: 0.8,\r\n        label: {\r\n            type: 'inner',\r\n            offset: '-0.5',\r\n            content: '{name} {percentage}',\r\n            style: {\r\n                fill: '#fff',\r\n                fontSize: 14,\r\n                textAlign: 'center',\r\n            },\r\n        },\r\n    };\r\n\r\n    dataLine = [\r\n        { mes: 'Junio', consultas: 24 },\r\n        { mes: 'Julio', consultas: 17 },\r\n        { mes: 'Agosto', consultas: 22 },\r\n        { mes: 'Septiembre', consultas: 15 },\r\n        { mes: 'Octubre', consultas: 18 }\r\n    ];\r\n\r\n    configLine = {\r\n        data: this.dataLine,\r\n        height: 410,\r\n        xField: 'mes',\r\n        yField: 'consultas',\r\n        color: '#01B075',\r\n        point: {\r\n            size: 5,\r\n            shape: 'diamond',\r\n            color: '#01B075'\r\n        },\r\n        label: {\r\n            style: {\r\n                fill: '#aaa',\r\n                fontSize: 16,\r\n                stroke: '#01B075'\r\n            },\r\n        },\r\n    };\r\n    render() {\r\n        return (\r\n            <>\r\n\r\n                <br />\r\n                <div className=\"contenedor\">\r\n                    <Row gutter={30}>\r\n                        <Col xs={24} sm={12} lg={6}>\r\n                            <Card className=\"cardsContenedor\" hoverable bordered={false}>\r\n                                <Statistic title=\"Total Hospitales\" value=\"4\" valueStyle={{ color: 'white' }} style={{ backgroundColor: '#4BA6FE', borderRadius: 12 }} className=\"cardsContenido\" />\r\n                            </Card>\r\n                        </Col>\r\n                        <Col xs={24} sm={12} lg={6}>\r\n                            <Card className=\"cardsContenedor\" hoverable bordered={false}>\r\n                                <Statistic title=\"Total Medicos\" value=\"14\" valueStyle={{ color: 'white' }} style={{ backgroundColor: '#FF838A', borderRadius: 12 }} className=\"cardsContenido\" />\r\n                            </Card>\r\n                        </Col>\r\n\r\n                        <Col xs={24} sm={12} lg={6}>\r\n                            <Card className=\"cardsContenedor\" hoverable bordered={false}>\r\n                                <Statistic title=\"Total Pacientes\" value=\"241\" valueStyle={{ color: 'white' }} style={{ backgroundColor: '#18D0C2', borderRadius: 12 }} className=\"cardsContenido\" />\r\n                            </Card>\r\n                        </Col>\r\n                        <Col xs={24} sm={12} lg={6}>\r\n                            <Card className=\"cardsContenedor\" hoverable bordered={false}>\r\n                                <Statistic title=\"Citas Hoy\" value={47} valueStyle={{ color: 'white' }} style={{ backgroundColor: '#847DFC', borderRadius: 12 }} className=\"cardsContenido\" />\r\n                            </Card>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row gutter={20}>\r\n                        <Col xs={24} md={12} style={{textAlign:'center'}}>\r\n                            <h5 style={{color: '#1F263C'}}>Diagnosticos</h5>\r\n                        </Col>\r\n                        <Col xs={24} md={12} style={{textAlign:'center'}}>\r\n                            <h5>Citas</h5>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row gutter={20}>\r\n                        <Col xs={24} md={12} className=\"graficaCircular\">\r\n                            {/* <Pie {...this.configPie} style={{ backgroundColor: '#1F263C', borderRadius: 12 }} /> */}\r\n                        </Col>\r\n\r\n                        <Col xs={24} md={12}>\r\n                            {/* <Line {...this.configLine} style={{ backgroundColor: '#1F263C', padding: '20px', borderRadius: 12 }} /> */}\r\n                        </Col>\r\n                    </Row>\r\n\r\n                </div>\r\n\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Home\r\n","import React from 'react'\r\nimport { Avatar, Card, Divider, Button, Row, Col } from 'antd';\r\nimport { FormOutlined, UserOutlined, MailOutlined, MobileOutlined } from '@ant-design/icons';\r\n\r\nexport default function DetallesPaciente({ paciente, setEditing }) {\r\n    return (<div style={{ marginTop: 16, display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n\r\n        <Card bodyStyle={{ textAlign: 'center' }}>\r\n            {\r\n                paciente.avatar.length > 9 ?\r\n                    <img width={128} src={'https://api.recreamed.com/images/' + paciente.avatar} alt='ProfilePic' style={{ alignSelf: 'center' }} /> :\r\n                    <Avatar size={128} icon={<UserOutlined />} className='btnIconCentered' style={{ alignSelf: 'center' }} />\r\n            }\r\n            <br />\r\n            <br />\r\n            <p className='nombre'><UserOutlined style={{ marginRight: 10 }} /> {paciente.name}</p>\r\n            <p className='datos'><MailOutlined style={{ marginRight: 10 }} /> {paciente.email}</p>\r\n            <p className='datos'><MobileOutlined style={{ marginRight: 10 }} /> {paciente.telefono}</p>\r\n        </Card>\r\n\r\n        <Card style={{ marginTop: 16 }}>\r\n            <p className='nombre'>Datos del Paciente</p>\r\n            <Row><Col span={10}><span className='desc'>Responsable:</span></Col><Col span={10}>{paciente.responsable.nombre}</Col> </Row>\r\n            <Row><Col span={10}><span className='desc'>Sexo:</span></Col><Col span={10}>{paciente.sexo}</Col> </Row>\r\n            <Row><Col span={10}><span className='desc'>Edad:</span></Col><Col span={10}>{paciente.edad}</Col> </Row>\r\n            <Row><Col span={10}><span className='desc'>Peso:</span></Col><Col span={10}>{paciente.peso}</Col> </Row>\r\n            <Row><Col span={10}><span className='desc'>Talla:</span></Col><Col span={10}>{paciente.talla}</Col></Row>\r\n            <Row><Col span={10}><span className='desc'>Ocupacion:</span></Col><Col span={10}> {paciente.ocupacion}</Col></Row>\r\n            <Row><Col span={10}><span className='desc'>Estado Civil:</span></Col><Col span={10}> {paciente.estado_civil}</Col></Row>\r\n            <Row><Col span={10}><span className='desc'>Fuma:</span></Col><Col span={10}>{paciente.fuma ? 'Si' : 'No'}</Col> </Row>\r\n            <Row><Col span={10}><span className='desc'>Alcohol:</span></Col><Col span={10}>{paciente.alcohol ? 'Si' : 'No'}</Col> </Row>\r\n            <Row><Col span={10}><span className='desc'>Drogas:</span></Col><Col span={10}>{paciente.drogas}</Col> </Row>\r\n            <Row><Col span={10}><span className='desc'>cuales_drogas:</span></Col><Col span={10}>{paciente.cuales_drogas}</Col> </Row>\r\n            <Row><Col span={10}><span className='desc'>Diagnostico:</span></Col><Col span={10}>{paciente.peso}</Col> </Row>\r\n            <Row><Col span={10}><span className='desc'>Enfermedades familiares:</span></Col><Col span={10}>{paciente.enfermedades_familiares.map((e) => <p>{e}</p>)}</Col> </Row>\r\n            <Row><Col span={10} ><span className='desc'>Enfermedades Medicas:</span></Col><Col span={10}><div style={{ width: 160, height: 8 }}>{paciente.enfermedades_medicas.map((e) => <p style={{ textOverflow: 'ellipsis', overflow: 'hidden' }}>{e}</p>)}</div></Col> </Row>\r\n            <Button className='btnIconCentered' onClick={() => setEditing(true)} size='small' type=\"primary\" shape=\"circle\" icon={<FormOutlined className='sizedIcon' />} style={{ position: 'absolute', bottom: 18, right: 18 }} ghost />\r\n        </Card>\r\n\r\n    </div>)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { Form, Input, Button, message, Space, Divider, Upload, Switch, Modal } from 'antd'\r\nimport { InputNumber, Select } from 'antd';\r\nimport { S_API, API, usuario, estados } from '../../resources'\r\nimport { UploadOutlined, PlusOutlined, MinusCircleOutlined } from '@ant-design/icons'\r\n// const { Dragger } = Upload;\r\n\r\n\r\nconst { Option } = Select;\r\n\r\nfunction RegisterForm(props) {\r\n  const [form] = Form.useForm();\r\n  const [avatar, setAvatar] = useState(props.paciente ? props.paciente.avatar : 'noimg.jpg')\r\n\r\n\r\n  async function addHistoria() {\r\n    return await fetch(API + 'historias/add', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        historial: \"Historia clinica al \" + new Date()\r\n      })\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log('Story Created: ', response);\r\n        return response\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  }\r\n\r\n  const createPAtientData = async (usr) => {\r\n    const historia = await addHistoria();\r\n    console.log('historia on Register: ', historia);\r\n    const postBody = {\r\n      usuario: usr,\r\n      historia: historia.id_historia,\r\n      notas: [],\r\n      recetas: []\r\n    }\r\n    console.log('postBodyForExpedient: ', postBody);\r\n    await fetch(API + 'expedientes/add', {\r\n      method: 'POST',\r\n      body: JSON.stringify(postBody),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log('Success:', response);\r\n        message.success(response.message || response.error);\r\n        if (response.message && response.message === 'Expediente creado correctamente') {\r\n          props.setAdding(false)\r\n        }\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  }\r\n\r\n  const onFinish = async (values) => {\r\n\r\n    // Register patient\r\n    values.avatar = avatar;\r\n    values.estatus = '1';\r\n    values.rol = 'Paciente';\r\n    values.password = '' + values.telefono;\r\n    values.universidades = [];\r\n    values.certificacion = '';\r\n    values.cedula = '';\r\n    values.horarios = [];\r\n    values.medicos_asignados = props.paciente ? props.paciente.medicos_asignados : [usuario._id];\r\n    // values.responsable = (props.paciente && props.paciente.responsable) ? props.paciente.responsable : { nombre: values.res_name, telefono: values.res_phone }\r\n    values.responsable = { nombre: values.res_name, telefono: values.res_phone }\r\n\r\n    delete values.prefix;\r\n    delete values.res_name;\r\n    delete values.res_phone;\r\n\r\n    const url = props.paciente ? API + 'users/updateUser/' + props.paciente._id : S_API + 'register';\r\n\r\n    console.log('before send', values)\r\n    console.log('url: ', url);\r\n    await fetch(url, {\r\n      method: props.paciente ? 'PUT' : 'POST',\r\n      body: JSON.stringify(values),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log('Create User Response:', response);\r\n        message.success(response.message || response.error);\r\n        props.paciente ? console.log('Editing, not creating patient') : createPAtientData(response.user_id);\r\n        response.message === 'Usuario creado correctamente' ?\r\n          props.setAdding(false) : console.log(response);\r\n        response.message === 'Usuario actualizado correctamente' ?\r\n          finishUpdate() : console.log(response);\r\n\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  };\r\n\r\n  const finishUpdate = () => {\r\n    props.setAdding(false); props.getPacientesData()\r\n  }\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo);\r\n  };\r\n\r\n  //Start upload props Upload File\r\n  const dragDropProps = {\r\n    name: 'file',\r\n    multiple: false,\r\n    action: API + 'imagenes/upload',\r\n\r\n    onChange(info) {\r\n      const { status } = info.file;\r\n\r\n      if (status !== 'uploading') {\r\n        console.log(info.file, info.fileList);\r\n      }\r\n\r\n      if (status === 'done') {\r\n        message.success(`${info.file.name} file uploaded successfully.`);\r\n        console.log('New Files: ', info.file.response.file)\r\n        setAvatar(info.file.response.file)\r\n      } else if (status === 'error') {\r\n        message.error(`${info.file.name} file upload failed.`);\r\n      }\r\n    },\r\n\r\n    // onDrop(e) {\r\n    //   console.log('Dropped files', e.dataTransfer.files);\r\n    // },\r\n  };\r\n  return (\r\n    <div style={{ width: '100%', height: '100%', overflowY: 'scroll' }} >\r\n      {\r\n        props.paciente ? <h4>Editar paciente</h4> : <h4>Registrar Paciente</h4>\r\n      }\r\n\r\n      <br />\r\n\r\n\r\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n        <Upload {...dragDropProps}>\r\n          <Button type=\"dashed\" icon={<UploadOutlined style={{ fontSize: 24, color: '#0d6efd' }} />} style={{ width: 400, height: 80 }} block>Selecciona la foto de perfil</Button>\r\n        </Upload>\r\n      </div>\r\n      <br />\r\n      <Form\r\n        // {...formItemLayout}\r\n        labelCol={{ span: 6 }} wrapperCol={{ span: 16 }}\r\n        form={form}\r\n        name=\"register_patient_medic\"\r\n        onFinish={onFinish}\r\n        onFinishFailed={onFinishFailed}\r\n        initialValues={props.paciente}\r\n        scrollToFirstError\r\n      >\r\n\r\n        <Form.Item\r\n          name=\"name\"\r\n          label=\"Nombre\"\r\n          rules={[{ required: true, message: 'Ingresa Nombre y apellidos' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"email\"\r\n          label=\"Correo\"\r\n          rules={[{ type: 'email', message: 'Ingresa un correo electronico vaido!' }, { required: true, message: 'Ingresa un correo electronico' }]}>\r\n          <Input />\r\n        </Form.Item>\r\n\r\n\r\n        <Form.Item\r\n          name=\"telefono\"\r\n          label=\"Telefono\"\r\n          rules={[{ required: true, message: 'Ingresa tu numero de telefono' }]}\r\n        >\r\n          <InputNumber\r\n            // addonBefore={prefixSelector}\r\n            style={{ width: '100%' }}\r\n          />\r\n        </Form.Item>\r\n\r\n        <Divider>Responsable (opcional) </Divider>\r\n        <Form.Item name=\"res_name\" label=\"Nombre Responsable\" >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item name=\"res_phone\" label=\"Telefono Responsable\">\r\n          <Input />\r\n        </Form.Item>\r\n        <Divider />\r\n\r\n        <Form.Item\r\n          name=\"calle\"\r\n          label=\"Calle\"\r\n          rules={[{ required: false, message: 'Ingresa calle', whitespace: true }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"numexterior\"\r\n          label=\"Num Exterior\"\r\n          rules={[{ required: false, message: 'Ingresa numero exterior' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"numinterior\"\r\n          label=\"Num Interior\"\r\n          rules={[{ required: false, message: 'Ingresa numinterior' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label=\"Colonia\"\r\n          name=\"colonia\"\r\n          rules={[{ required: false, message: 'Ingresa ' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"estado\"\r\n          label=\"Estado\"\r\n          rules={[{ required: false, message: 'Apellido materno', },]}>\r\n          <Select placeholder=\"Elije tu estado\" showSearch>\r\n            {estados.map(e => <Option value={e}>{e}</Option>)}\r\n          </Select>\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"municipio\"\r\n          label=\"Municipio\"\r\n          rules={[{ required: false, message: 'Ingresa tu municipio' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"codigopostal\"\r\n          label=\"Codigo Postal\"\r\n          rules={[{ required: false, message: 'Ingresa codigopostal', },]}>\r\n          <InputNumber style={{ width: '100%', }} />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"sexo\" label=\"sexo\" rules={[{ required: false, message: 'Selecciona una opcion' }]}>\r\n          <Select placeholder=\"Elije el sexo\" >\r\n            <Option value=\"H\">H</Option>\r\n            <Option value=\"M\">M</Option>\r\n            <Option value=\"Otro\">Otro</Option>\r\n          </Select>\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"edad\" label=\"Edad\" rules={[{ required: false, message: 'Ingresa edad' }]} >\r\n          <InputNumber min={1} max={120} />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"diagnostico\" label=\"Diagnostico\" rules={[{ required: false, message: 'Ingresa el diagnostico' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"peso\" label=\"Peso\" rules={[{ required: false, message: 'Ingresa el peso' }]} >\r\n          <InputNumber min={1} max={200} />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"talla\" label=\"Talla\" rules={[{ required: false, message: 'Ingresa la talla' }]} >\r\n          <InputNumber min={1} max={200} />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"ocupacion\" label=\"Ocupacion\" rules={[{ required: false, message: 'Ingresa ocupacion' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"estado_civil\" label=\"Estado Civil\" rules={[{ required: false, message: 'Ingresa estado civil' }]} >\r\n          <Select placeholder=\"Elije el estado civil\" >\r\n            <Option value=\"Soltero\">Soltero</Option>\r\n            <Option value=\"Casado\">Casado</Option>\r\n            <Option value=\"Divorciado\">Divorciado</Option>\r\n            <Option value=\"Separación en proceso judicial\">Separación en proceso judicial</Option>\r\n            <Option value=\"Viudo\">Viudo</Option>\r\n            <Option value=\"Concubinato\">Concubinato</Option>\r\n          </Select>\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"escolaridad\" label=\"Escolaridad\" rules={[{ required: false, message: 'Ingresa escolaridad' }]} >\r\n          <Select placeholder=\"Elije escolaridad\" >\r\n            <Option value=\"Ninguno\">Ninguno</Option>\r\n            <Option value=\"Preescolar\">Preescolar</Option>\r\n            <Option value=\"Primaria\">Primaria</Option>\r\n            <Option value=\"Secundaria\">Secundaria</Option>\r\n            <Option value=\"Medio Superior\">Medio Superior</Option>\r\n            <Option value=\"Superior\">Superior</Option>\r\n            <Option value=\"Posgrado\">Posgrado</Option>\r\n          </Select>\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"lugar_de_nacimiento\" label=\"Lugar De Nacimiento\" rules={[{ required: false, message: 'Ingresa el lugar de nacimiento' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"ciudad\" label=\"Ciudad de residencia\" rules={[{ required: false, message: 'Ingresa ciudad' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"fuma\" label=\"Fuma\" rules={[{ required: false, message: 'Ingresa tu universidad' }]} >\r\n          <Switch defaultChecked={false} />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"alcohol\" label=\"Alcohol\" rules={[{ required: false, message: 'Ingresa tu universidad' }]} >\r\n          <Switch defaultChecked={false} />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"drogas\" label=\"Drogas\" rules={[{ required: false, message: 'Selecciona una opcion' }]} >\r\n          <Select placeholder=\"Elije una opcion\" >\r\n            <Option value=\"Antes\">Antes</Option>\r\n            <Option value=\"Ahora\">Ahora</Option>\r\n            <Option value=\"Nunca\">Nunca</Option>\r\n          </Select>\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"cuales_drogas\" label=\"Cuales Drogas\" rules={[{ required: false, message: 'Selecciona una opcion' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"enfermedades_familiares\" label=\"Enfermedades Familiares\" rules={[{ required: false, message: 'Ingresa tu universidad' }]} >\r\n          <Form.List name=\"enfermedades_familiares\" >\r\n            {(fields, { add, remove }, { errors }) => (\r\n              <>\r\n                {fields.map((field, index) => (\r\n                  <Form.Item label='' required={false} key={field.key}>\r\n                    <Form.Item {...field} noStyle\r\n                      validateTrigger={['onChange', 'onBlur']}\r\n                      rules={[{ required: false, whitespace: true, message: \"Ingresa la enfermedad o elimina este campo\" }]}\r\n                    >\r\n                      <Input placeholder=\"Ingresa enfermedad\" style={{ width: fields.length > 1 ? '93%' : '100%' }} />\r\n                    </Form.Item>\r\n                    {fields.length > 1 ? (\r\n                      <MinusCircleOutlined\r\n                        className=\"dynamic-delete-button\"\r\n                        onClick={() => remove(field.name)}\r\n                      />\r\n                    ) : null}\r\n                  </Form.Item>\r\n                ))}\r\n                <Form.Item>\r\n                  <Button type=\"dashed\" onClick={() => add()} icon={<PlusOutlined />}>\r\n                    Agregar Enfermedad  Familiar\r\n                  </Button>\r\n\r\n                  <Form.ErrorList errors={errors} />\r\n                </Form.Item>\r\n              </>\r\n            )}\r\n          </Form.List>\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"enfermedades_medicas\" label=\"Enfermedades Medicas\" rules={[{ required: false, message: 'Ingresa tu universidad' }]} >\r\n          <Form.List name=\"enfermedades_medicas\">\r\n            {(fields, { add, remove }, { errors }) => (\r\n              <>\r\n                {fields.map((field, index) => (\r\n                  <Form.Item label='' required={false} key={field.key}>\r\n                    <Form.Item {...field} noStyle\r\n                      validateTrigger={['onChange', 'onBlur']}\r\n                      rules={[{ required: false, whitespace: true, message: \"Ingresa la enfermedad o elimina este campo\" }]}\r\n                    >\r\n                      <Input placeholder=\"Ingresa enfermedad\" style={{ width: fields.length > 1 ? '93%' : '100%' }} />\r\n                    </Form.Item>\r\n                    {fields.length > 1 ? (\r\n                      <MinusCircleOutlined\r\n                        className=\"dynamic-delete-button\"\r\n                        onClick={() => remove(field.name)}\r\n                      />\r\n                    ) : null}\r\n                  </Form.Item>\r\n                ))}\r\n                <Form.Item>\r\n                  <Button type=\"dashed\" onClick={() => add()} icon={<PlusOutlined />}>\r\n                    Agregar Enfermedad Medica\r\n                  </Button>\r\n\r\n                  <Form.ErrorList errors={errors} />\r\n                </Form.Item>\r\n              </>\r\n            )}\r\n          </Form.List>\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"tratamiento_actual\" label=\"Tratamiento actual\" rules={[{ required: false, message: 'Ingresa tu universidad' }]} >\r\n          <Form.List name=\"tratamiento_actual\" >\r\n            {(fields, { add, remove }, { errors }) => (\r\n              <>\r\n                {fields.map((field, index) => (\r\n                  <Form.Item\r\n                    // label={`Tratamiento ${index + 1}`} \r\n                    label=''\r\n                    required={false} key={field.key}>\r\n                    <Form.Item {...field} noStyle\r\n                      validateTrigger={['onChange', 'onBlur']}\r\n                      rules={[{ required: false, whitespace: true, message: \"Ingresa la enfermedad o elimina este campo\" }]}\r\n                    >\r\n                      <Input placeholder=\"Ingresa enfermedad\" style={{ width: fields.length > 1 ? '93%' : '100%' }} />\r\n                    </Form.Item>\r\n                    {fields.length > 1 ? (\r\n                      <MinusCircleOutlined\r\n                        className=\"dynamic-delete-button\"\r\n                        onClick={() => remove(field.name)}\r\n                      />\r\n                    ) : null}\r\n                  </Form.Item>\r\n                ))}\r\n                <Form.Item>\r\n                  <Button type=\"dashed\" onClick={() => add()} icon={<PlusOutlined />}>\r\n                    Agregar Tratamiento\r\n                  </Button>\r\n\r\n                  <Form.ErrorList errors={errors} />\r\n                </Form.Item>\r\n              </>\r\n            )}\r\n          </Form.List>\r\n        </Form.Item>\r\n\r\n        {/* <Form.Item wrapperCol={{\r\n          offset: 8,\r\n          span: 16,\r\n        }}>\r\n          <Space>\r\n            <Button onClick={() => props.setAdding(false)}>Cancelar</Button>\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              Registrar\r\n            </Button>\r\n          </Space>\r\n\r\n        </Form.Item> */}\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default function Register({ paciente, setIsModalOpen, isModalOpen, getPacientesData }) {\r\n\r\n  // const [isModalOpen, setIsModalOpen] = useState(false);\r\n  // const showModal = () => { setIsRegisterModalOpen(true); };\r\n  const handleOk = () => {\r\n    setIsModalOpen(false);\r\n  };\r\n  const handleCancel = () => {\r\n    setIsModalOpen(false);\r\n  };\r\n\r\n  return <Modal width={800} title={paciente ? 'Editar Paciente' : 'Registrar Paciente'} open={isModalOpen} onOk={handleOk} onCancel={handleCancel} destroyOnClose\r\n    footer={[\r\n      <Button onClick={() => setIsModalOpen(false)}>Cancelar</Button>,\r\n      <Button type=\"primary\" htmlType=\"submit\" form='register_patient_medic'>\r\n        Guardar\r\n      </Button>\r\n    ]}\r\n  >\r\n    <RegisterForm paciente={paciente} setAdding={setIsModalOpen} getPacientesData={getPacientesData} />\r\n  </Modal>\r\n\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { Button, Select, List, Row, Col } from 'antd'\r\nimport { API } from '../../resources'\r\nimport Loading from '../../loading'\r\nimport { usuario } from '../../resources'\r\nimport Expedientes from '../expedientes/expedientes'\r\n// import DetallesPaciente from './detalles.paciente_old'\r\nimport DetallesPaciente from './detalles.paciente'\r\nimport Register from './register.patient'\r\nimport { PlusOutlined, MobileOutlined, UserOutlined } from '@ant-design/icons';\r\nconst { Option } = Select;\r\n\r\nexport default function MainPacientes() {\r\n\r\n  const [pacientesData, setPacientesData] = useState([])\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  // const [paciente, setPaciente] = useState(null)\r\n  const [isRegisterModalOpen, setIsRegisterModalOpen] = useState(false)\r\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false)\r\n  const [activePatient, setActivePatient] = useState(pacientesData[0]?._id)\r\n\r\n  useEffect(() => {\r\n    getPacientesData()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    getPacientesData()\r\n  }, [isRegisterModalOpen])\r\n\r\n  const getPacientesData = () => {\r\n    fetch(API + `mispacientes/${usuario._id}`)\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        data.forEach(paciente => {\r\n          paciente.res_name = paciente.responsable.nombre;\r\n          paciente.res_phone = paciente.responsable.telefono;\r\n        });\r\n        console.log(data); setPacientesData(data);\r\n        if (data && data.length > 0) setActivePatient(data[0])\r\n      })\r\n      .finally(() => setIsLoading(false))\r\n  }\r\n\r\n\r\n\r\n\r\n  const onChange = (data) => {\r\n    // console.log('onchangeSearchInput', data)\r\n    const found = pacientesData.find(p => p._id === data)\r\n    setActivePatient(found)\r\n  };\r\n\r\n  const onSearch = (value) => {\r\n    console.log('search:', value);\r\n  };\r\n\r\n  if (isLoading) return <Loading />\r\n\r\n  return (\r\n    <div className='mainContainer' style={{ backgroundColor: '#f5f6f8' }}>\r\n      {/* <Col ></Col> */}\r\n      <h3 >Pacientes</h3>\r\n      <Row justify=\"start\">\r\n        <Col>\r\n          <div className=\"my-select-container\">\r\n            <Select\r\n              // Widget para buscar pacientes\r\n              style={{ borderRadius: 8, width: 256 }}\r\n              dropdownStyle={{ borderRadius: 8 }}\r\n              showSearch\r\n              placeholder=\"Buscar paciente\"\r\n              optionFilterProp=\"children\"\r\n              onChange={onChange}\r\n              onSearch={onSearch}\r\n              filterOption={(input, option) => option.children.toLowerCase().includes(input.toLowerCase())}\r\n            >\r\n              {\r\n                pacientesData.map((p) => <Option key={p._id} value={p._id}>{p.name}</Option>)\r\n              }\r\n            </Select>\r\n          </div>\r\n        </Col>\r\n        <Col style={{ marginLeft: 12 }}><Button className='btnIconCentered' style={{ marginTop: 4 }} onClick={() => setIsRegisterModalOpen(!isRegisterModalOpen)} size='small' type=\"primary\" shape=\"circle\" icon={<PlusOutlined />} /> </Col>\r\n      </Row> <div style={{ height: '16px' }}></div>\r\n\r\n      <Row gutter={16}>\r\n        <Col span={6}>\r\n          <DetallesPaciente paciente={activePatient} setEditing={setIsEditModalOpen}/>\r\n        </Col>\r\n        <Col span={18} >\r\n          <Expedientes paciente={activePatient} />\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Modal For Register */}\r\n      <Register setIsModalOpen={setIsRegisterModalOpen} isModalOpen={isRegisterModalOpen} getPacientesData={getPacientesData} />\r\n\r\n      {/* Modal For Edit */}\r\n      <Register setIsModalOpen={setIsEditModalOpen} isModalOpen={isEditModalOpen} paciente={activePatient} getPacientesData={getPacientesData} />\r\n\r\n    </div >\r\n  )\r\n\r\n}\r\n","import React, { useEffect, useState, useRef } from 'react'\r\nimport { getData, sendDataBody } from '../resources';\r\nimport { Form, Button, Space, Select, message } from 'antd'\r\nimport { usuario, ids_hospitales } from '../resources';\r\nimport QRCode from \"react-qr-code\";\r\nimport { toBlob, toPng } from 'html-to-image';\r\nconst { Option } = Select;\r\n\r\n\r\n\r\nexport default function EscalasCreateGeneralLink(props) {\r\n\r\n    const [misPacientes, setMisPacientes] = useState([])\r\n    const [selectedPatient, setSelectedPatient] = useState(null)\r\n    const [link, setLink] = useState('')\r\n    // Used to add a medico _id when the user is admin\r\n    const [medicosData, setMedicosData] = useState([])\r\n    const [medico, setMedico] = useState(null)\r\n\r\n    const imageRef = useRef(null);\r\n\r\n\r\n    const getPacientesOfDoctor = (_id) => { //Para el caso que la sesion sea de Medico\r\n        getData(`mispacientes/${_id}`).then(rs => { setSelectedPatient(null); setMisPacientes(rs); console.log(`patients of ${_id}`, rs); })\r\n    }\r\n\r\n    // If administrator or reception, filter medicos of hospital\r\n    const getDoctorsData = () => { //Para el caso que la sesion sea de Administrador\r\n        // const body = { ids: usuario.medicos_asignados }\r\n        // sendDataBody(`users/getMany`, body).then(rs => { setMedicosData(rs); console.log('medicosData: ', rs); })\r\n        getData('users_by_rol/Medico').then((rs) => { setMedicosData(myDoctors(rs)) })\r\n    }\r\n\r\n    const myDoctors = (doctorsData) => {\r\n\r\n        let doctorsFound = [];\r\n        ids_hospitales.forEach(id_hospital => {\r\n            doctorsData.forEach(doctor => {\r\n                doctor.horarios.forEach(horario => {\r\n                    if (!doctorsFound.includes(doctor) && horario.sucursal._id === id_hospital) doctorsFound.push(doctor)\r\n                });\r\n            });\r\n            console.log(`Founds for ${id_hospital}: `, doctorsFound)\r\n        });\r\n\r\n        return doctorsFound;\r\n    }\r\n    // End of medicos filtering\r\n\r\n    useEffect(() => {\r\n        usuario.rol === 'Medico' ? getPacientesOfDoctor(usuario._id) : getDoctorsData()\r\n    }, [])\r\n\r\n    const handleDoctorChange = (value) => { setMedico(value); getPacientesOfDoctor(value) };\r\n    const handleChange = (value) => { setLink(null); setSelectedPatient(value) };\r\n\r\n    const generateLink = () => {\r\n        // let usr = usuario.rol === 'Administrador' ? medico : usuario._id;\r\n        let usr = (usuario.rol === 'Administrador' || usuario.rol === 'Recepcion') ? medico : usuario._id;\r\n\r\n        let l = `https://sistema.recreamed.com/${props.tipo}_public/${usr}/${selectedPatient}/${Date.now()}`\r\n        // let l = `http://localhost:3000/${props.tipo}_public/${usr}/${selectedPatient}/${Date.now()}`\r\n        setLink(l)\r\n    }\r\n    const copyLink = () => {\r\n        navigator.clipboard.writeText(link)\r\n        message.success('Enlace Copiado al Portapapeles!')\r\n    }\r\n\r\n    const handleDownload = async () => {\r\n        const dataUrl = await toPng(imageRef.current, { width: 288 });\r\n\r\n        // download image\r\n        const link = document.createElement('a');\r\n        link.download = \"codigo-de-enlace.png\";\r\n        link.href = dataUrl;\r\n        link.click();\r\n    }\r\n\r\n    const handleCopy = async () => {\r\n        message.info('Espere mientras se copia el codigo...')\r\n        toBlob(imageRef.current, { width: 288 })\r\n            .then(async function (blob) {\r\n                try {\r\n                    await navigator.clipboard.write([\r\n                        // eslint-disable-next-line no-undef\r\n                        new ClipboardItem({\r\n                            [blob.type]: blob\r\n                        })\r\n                    ]);\r\n                    console.log(\"Image copied\");\r\n                    message.success('Codigo Copiado al Portapapeles')\r\n                } catch (error) {\r\n                    console.error(error);\r\n                }\r\n            });\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            {\r\n                (usuario.rol === 'Administrador' || usuario.rol === 'Recepcion') &&\r\n                <Form.Item label=\"Medico\" name=\"usuario\" rules={[{ required: true, message: 'Selecciona el paciente' }]}\r\n                    style={{ alignItems: 'center', paddingTop: 20 }}>\r\n                    <Select\r\n                        style={{ width: 260, }}\r\n                        onChange={handleDoctorChange}\r\n                        placeholder='Selecciona un medico'\r\n                    >\r\n                        {\r\n                            medicosData.map((p) => {\r\n                                return <Option key={p._id} value={p._id}>{p.name}</Option>\r\n                            })\r\n                        }\r\n                    </Select>\r\n                </Form.Item>\r\n            }\r\n\r\n            <Form.Item label=\"Paciente\" name=\"usuario\" rules={[{ required: true, message: 'Selecciona el paciente' }]}\r\n                style={{ alignItems: 'center', paddingTop: 20 }}>\r\n                <Select\r\n                    style={{ width: 260, }}\r\n                    onChange={handleChange}\r\n                    placeholder='Selecciona un paciente'\r\n                    value={selectedPatient}\r\n                >\r\n                    {\r\n                        misPacientes.map((p) => {\r\n                            return <Option key={p._id} value={p._id}>{p.name}</Option>\r\n                        })\r\n                    }\r\n                </Select>\r\n            </Form.Item>\r\n            <Button onClick={generateLink} disabled={!selectedPatient} >Generar Enlace</Button>\r\n\r\n\r\n            <br />\r\n\r\n            {\r\n                selectedPatient && link ? <div>\r\n                    <Space align='center'>\r\n                    </Space>\r\n                    <p style={{ paddingTop: 16, color: '#1890ff' }} >{link}</p>\r\n                    <Button onClick={copyLink}>Copiar Link</Button>\r\n\r\n                    {\r\n                        usuario.rol === 'Recepcion' && <Button type='primary' href={link} target='_blank' rel='noreferrer' style={{ marginLeft: 14 }}>Contestar Ahora</Button>\r\n                    }\r\n\r\n                    <br />\r\n                    <div ref={imageRef} style={{ background: 'white', padding: '16px' }}> <QRCode value={link} /> </div>\r\n                    <Button onClick={handleDownload}>Descargar Codigo</Button>\r\n                    <Button onClick={handleCopy} style={{ marginLeft: 12 }}>Copiar Codigo</Button>\r\n                </div> : <></>\r\n            }\r\n\r\n        </div >\r\n    )\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { Table, Button, Modal } from 'antd'\r\nimport { Form, Select } from 'antd';\r\nimport { getData, usuario, sendDataBody, ids_hospitales } from '../../../resources';\r\nimport EscalasCreateGeneralLink from '../../escalasCreateGeneralLink';\r\nconst { Option } = Select;\r\n\r\n// DEPRESION QIDS \r\n\r\nexport default function DepresionResults() {\r\n    const [encuestasData, setEncuestasData] = useState([])\r\n    const [medicosData, setMedicosData] = useState([])\r\n    const [countersData, setCountersData] = useState([])\r\n\r\n    // For Modal\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const showModal = () => { setIsModalOpen(true) };\r\n    const handleOk = () => { setIsModalOpen(false) };\r\n    const handleCancel = () => { setIsModalOpen(false) };\r\n\r\n    useEffect(() => {\r\n        (usuario.rol === 'Administrador' || usuario.rol === 'Recepcion') ? getDoctorsData() : getEncuestasData(usuario._id)\r\n    }, [])\r\n    // useEffect(() => {\r\n    //     if (usuario.rol === 'Recepcion' || usuario.rol === 'Administrador') getDoctorsData()\r\n    //     else getEncuestasData(usuario._id)\r\n    //   }, [])\r\n\r\n    const getDoctorsData = () => { //Para el caso que la sesion sea de Administrador\r\n        sendDataBody('users/getMany/hospitals', { ids_hospitales: ids_hospitales }).then(rs => {\r\n            setMedicosData(rs)\r\n        })\r\n    }\r\n\r\n    const getEncuestasData = (medico) => {\r\n        getData(`encuestas/depresion/medico/${medico}`).then((rs) => {\r\n            getCounters(rs, medico);\r\n            console.log(rs);\r\n            setEncuestasData(rs)\r\n        })\r\n    }\r\n\r\n    const getCounters = (data, medico) => {\r\n        const allEncuestas = [...data];\r\n        const results = []\r\n        getData(`mispacientes/${medico}`).then(rs => {\r\n            rs.forEach(pac => {\r\n                const aprs = allEncuestas.filter(enc => enc.usuario?._id === pac._id)\r\n                const latest = aprs.at(-1)\r\n                results.push({\r\n                    'paciente': pac.name,\r\n                    'total': aprs.length,\r\n                    'semana': latest?.createdAt.substring(0, 10)\r\n                })\r\n            });\r\n            console.log(results)\r\n        }).finally(() => { setCountersData(results); });\r\n    }\r\n    const counterColumns = [\r\n        {\r\n            title: 'Paciente',\r\n            key: 'paciente',\r\n            dataIndex: 'paciente',\r\n        },\r\n        {\r\n            title: 'Fecha ultima encuesta',\r\n            key: 'semana',\r\n            dataIndex: 'semana',\r\n        },\r\n        {\r\n            title: 'Total Escalas Respondidas',\r\n            key: 'total',\r\n            dataIndex: 'total'\r\n        }\r\n    ];\r\n\r\n\r\n    const columns = [\r\n        {\r\n            title: 'Paciente',\r\n            dataIndex: 'usuario',\r\n            key: 'name',\r\n            render: (_, { usuario }) => <>{usuario ? usuario.name : \"Usuario eliminado\"}</>\r\n        },\r\n        {\r\n            title: 'Puntaje',\r\n            dataIndex: 'score',\r\n            key: 'age',\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <div className='mainContainer'>\r\n            <h5>Resultados de encuestas de sintomatologia depresiva QUIDS (QUICK INVENTORY OF DEPRESSIVE SYMPTOMATOLOGY)</h5>\r\n            <br />\r\n            <Button type=\"primary\" onClick={showModal}>\r\n                Generar Escala Depresion 1\r\n            </Button>\r\n            <br />\r\n            {\r\n                (usuario.rol === 'Administrador' || usuario.rol === 'Recepcion') && <Form.Item label=\"Medico\" name=\"usuario\" rules={[{ required: true, message: 'Selecciona el paciente' }]}\r\n                    style={{ alignItems: 'center', paddingTop: 20 }}>\r\n                    <Select\r\n                        style={{ width: 260, }}\r\n                        onChange={getEncuestasData}\r\n                        placeholder='Selecciona un medico'\r\n                    >\r\n                        {\r\n                            medicosData.map((p) => {\r\n                                return <Option key={p._id} value={p._id}>{p.name}</Option>\r\n                            })\r\n                        }\r\n                    </Select>\r\n                </Form.Item>\r\n            }\r\n            <br />\r\n            <Table dataSource={countersData} columns={counterColumns} bordered />\r\n            <br />\r\n            <h4>Detalles de encuestas</h4>\r\n            <br />\r\n            <Table dataSource={encuestasData} columns={columns} bordered />\r\n\r\n            <Modal title=\"Crear encuesta de Depresion QUIDS\" open={isModalOpen} onOk={handleOk} onCancel={handleCancel}\r\n                footer={[\r\n                    <Button onClick={handleCancel}>Cerrar</Button>\r\n                ]}>\r\n                <EscalasCreateGeneralLink tipo='depresion_qids' />\r\n            </Modal>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Table, Button, Modal } from 'antd'\r\nimport { Form, Select } from 'antd';\r\nimport { getData, usuario, sendDataBody, ids_hospitales } from '../../../resources';\r\nimport EscalasCreateGeneralLink from '../../escalasCreateGeneralLink';\r\nconst { Option } = Select;\r\n\r\n// DEPRESION GPC\r\n\r\nexport default function Depresion2Results() {\r\n    const [encuestasData, setEncuestasData] = useState([])\r\n    const [medicosData, setMedicosData] = useState([])\r\n    const [medico, setMedico] = useState(null)\r\n    const [countersData, setCountersData] = useState([])\r\n    const [loadingCounters, setLoadingCounters] = useState(true)\r\n\r\n    // For Modal\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const showModal = () => { setIsModalOpen(true) };\r\n    const handleOk = () => { setIsModalOpen(false) };\r\n    const handleCancel = () => { setIsModalOpen(false) };\r\n\r\n    useEffect(() => {\r\n        (usuario.rol === 'Administrador' || usuario.rol === 'Recepcion') ? getDoctorsData() : getEncuestasData(usuario._id)\r\n    }, [])\r\n\r\n    const getDoctorsData = () => { //Para el caso que la sesion sea de Administrador\r\n        sendDataBody('users/getMany/hospitals', { ids_hospitales: ids_hospitales }).then(rs => {\r\n            setMedicosData(rs)\r\n        })\r\n    }\r\n\r\n    const getEncuestasData = (medico) => {\r\n        getData(`encuestas/byDoctorAndTipo/${medico}/depresion_gpc/`).then((rs) => {\r\n            getCounters(rs, medico);\r\n            console.log(rs);\r\n            setEncuestasData(rs)\r\n        })\r\n    }\r\n\r\n    const getCounters = (data, medico) => {\r\n        const allEncuestas = [...data];\r\n        const results = []\r\n        getData(`mispacientes/${medico}`).then(rs => {\r\n            console.log('MisPacientes depresiod2: ', rs);\r\n            rs.forEach(pac => {\r\n                const aprs = allEncuestas.filter(enc => enc.usuario?._id === pac._id)\r\n                const latest = aprs.at(-1)\r\n                results.push({\r\n                    'paciente': pac.name,\r\n                    'total': aprs.length,\r\n                    'semana': latest?.createdAt.substring(0, 10)\r\n                })\r\n            });\r\n            console.log(results)\r\n        }).finally(() => { setCountersData(results); setLoadingCounters(false) });\r\n    }\r\n\r\n    const counterColumns = [\r\n        {\r\n            title: 'Paciente',\r\n            key: 'paciente',\r\n            dataIndex: 'paciente'\r\n        },\r\n        {\r\n            title: 'Fecha ultima encuesta',\r\n            key: 'semana',\r\n            dataIndex: 'semana',\r\n        },\r\n        {\r\n            title: 'Total encuestas',\r\n            key: 'total',\r\n            dataIndex: 'total'\r\n        }\r\n    ];\r\n\r\n\r\n    const columns = [\r\n        {\r\n            title: 'Paciente',\r\n            dataIndex: 'usuario',\r\n            key: 'name',\r\n            render: (_, { usuario }) => <>{usuario ? usuario.name : \"Usuario eliminado\"}</>\r\n        },\r\n        {\r\n            title: 'Puntaje HRSD',\r\n            dataIndex: 'respuestas_depresion2_gpc',\r\n            key: 'hrsd',\r\n            render: (_, { respuestas_depresion2_gpc }) => (\r\n                <>\r\n                    {respuestas_depresion2_gpc.hrsd}\r\n                </>\r\n            ),\r\n        },\r\n        {\r\n            title: 'Puntaje MADRS',\r\n            dataIndex: 'respuestas_depresion2_gpc',\r\n            key: 'madrs',\r\n            render: (_, { respuestas_depresion2_gpc }) => (\r\n                <>\r\n                    {respuestas_depresion2_gpc.madrs}\r\n                </>\r\n            ),\r\n        },\r\n        {\r\n            title: 'Puntaje PHQ',\r\n            dataIndex: 'respuestas_depresion2_gpc',\r\n            key: 'phq',\r\n            render: (_, { respuestas_depresion2_gpc }) => (\r\n                <>\r\n                    {respuestas_depresion2_gpc.phq}\r\n                </>\r\n            ),\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <div className='mainContainer'>\r\n            <h5>Resultados de encuestas de versiones validadas en español de las escalas HRSD, MADRS y PHQ-9</h5>\r\n            <br />\r\n            <Button type=\"primary\" onClick={showModal}>\r\n                Crear Link Depresion 2\r\n            </Button>\r\n            <br />\r\n            {\r\n                (usuario.rol === 'Administrador' || usuario.rol === 'Recepcion') && <Form.Item label=\"Medico\" name=\"usuario\" rules={[{ required: true, message: 'Selecciona el paciente' }]}\r\n                    style={{ alignItems: 'center', paddingTop: 20 }}>\r\n                    <Select\r\n                        style={{ width: 260, }}\r\n                        onChange={getEncuestasData}\r\n                        placeholder='Selecciona un medico'\r\n                    >\r\n                        {\r\n                            medicosData.map((p) => {\r\n                                return <Option key={p._id} value={p._id}>{p.name}</Option>\r\n                            })\r\n                        }\r\n                    </Select>\r\n                </Form.Item>\r\n            }\r\n            <br />\r\n            <Table dataSource={countersData} columns={counterColumns} bordered />\r\n            <br />\r\n            <h4>Detalles de encuestas</h4>\r\n            <br />\r\n            <Table dataSource={encuestasData} columns={columns} bordered />\r\n\r\n            <Modal title=\"Crear Encuesta de depresion GPC\" open={isModalOpen} onOk={handleOk} onCancel={handleCancel}\r\n                footer={[\r\n                    <Button onClick={handleCancel}>Cerrar</Button>\r\n                ]}>\r\n                <EscalasCreateGeneralLink tipo='depresion_gpc' />\r\n            </Modal>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { Tabs } from 'antd';\r\nimport DepresionResults from './depresion_1/depresionResults';\r\nimport Depresion2Results from './depresion_2/depresion2_results';\r\n\r\nexport default function DepresionMenu() {\r\n  const items = [\r\n    { label: 'Depresion 1', key: 'item-1', children: <DepresionResults /> }, // remember to pass the key prop\r\n    { label: 'Depresion 2', key: 'item-2', children: <Depresion2Results /> },\r\n  ];\r\n  return (\r\n    <div>\r\n      <h4 className='spacedTitle'>Resultados de Escalas de Depresion</h4>\r\n      <Tabs items={items} type=\"card\" />\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useEffect } from 'react';\r\nimport { Space, Table, Tag, Progress, Button, Modal } from 'antd'\r\nimport { Form, Select } from 'antd';\r\nimport { getData, usuario, sendDataBody, ids_hospitales } from '../../resources';\r\nimport LoadingIndicator from '../loadingIndicator'\r\nimport EscalasCreateGeneralLink from '../escalasCreateGeneralLink';\r\nimport Loading from '../../loading';\r\nconst { Option } = Select;\r\n\r\nexport default function KetaminaResults() {\r\n\r\n  const [ketaminaData, setKetaminaData] = useState(null);\r\n  const [medicosData, setMedicosData] = useState([])\r\n  const [countersData, setCountersData] = useState([])\r\n  const [loadingCounters, setLoadingCounters] = useState(true)\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    // usuario.rol === 'Administrador' ? getDoctorsData() : getEncuestasData(usuario._id)\r\n\r\n    // New Form\r\n    // If session is recept/admin get escalas of all medicos of my hospital\r\n    // Else if session is medico get escalas for me\r\n    if (usuario.rol === 'Recepcion' || usuario.rol === 'Administrador') getAllEscalas()\r\n    else getEncuestasData(usuario._id)\r\n\r\n    // getEcuestasDataByHospital()\r\n  }, [])\r\n\r\n  // Modal For Create Link\r\n  const showModal = () => { setIsModalOpen(true) };\r\n  const handleOk = () => { setIsModalOpen(false) };\r\n  const handleCancel = () => { setIsModalOpen(false) };\r\n\r\n  const getDoctorsData = () => { //Para el caso que la sesion sea de Administrador\r\n    sendDataBody('users/getMany/hospitals', { ids_hospitales: ids_hospitales }).then(rs => {\r\n      setMedicosData(rs)\r\n    })\r\n  }\r\n\r\n  // new Method for session is reception\r\n  const getAllEscalas = async () => {\r\n    const medicos = await sendDataBody('users/getMany/hospitals', { ids_hospitales: ids_hospitales })\r\n\r\n    // medicos.forEach(m => { m.label = m.name; m.value = m._id; })// to pass to create modal\r\n    // setMedicosData(medicos) // to pass to create modal\r\n    console.log('My medics', medicos)\r\n    const promises = medicos.map(medico => getData(`encuestas/ketamina/medico/${medico._id}`));\r\n\r\n    Promise.all(promises)\r\n      .then(resultados => {\r\n        const ingresos = resultados.flat(); // concatenar todos los arrays de ingresos\r\n        console.log(ingresos);\r\n        // Doctor is for details, medico is for edit. Usuario is for details, paciente id for Edit\r\n        ingresos.forEach((i) => { i.doctor = i.medico; i.medico = i.medico._id; if (i.paciente) { i.usuario = i.paciente; i.paciente = i.paciente._id; } })\r\n        setKetaminaData(ingresos.reverse())\r\n        setLoading(false)\r\n      })\r\n      .catch(error => {\r\n        console.error(error);\r\n      });\r\n  }\r\n\r\n  // If session is medic\r\n  const getEncuestasData = (medico) => {\r\n    getData(`encuestas/ketamina/medico/${medico}`).then((rs) => {\r\n      console.log('Encuestas ', rs);\r\n      getCounters(rs, medico);\r\n      setKetaminaData(rs)\r\n    })\r\n  }\r\n\r\n  // If session is admin/recept\r\n  const getEcuestasDataByHospital = async () => {\r\n    let allEncs = [];\r\n    // 1  get medicos of my hospital\r\n    const myDoctors = await sendDataBody('users/getMany/hospitals', { ids_hospitales: ids_hospitales })\r\n    // 2 get escalas of each medico\r\n    myDoctors.forEach(async (doc) => {\r\n      await getData(`encuestas/ketamina/medico/${doc._id}`).then((rs) => {\r\n        allEncs = [...allEncs, rs]\r\n      })\r\n    });\r\n    console.log('All Encuestas: ', allEncs)\r\n  }\r\n\r\n\r\n  const getCounters = (data, medico) => {\r\n    const allEncuestas = [...data];\r\n    const results = []\r\n    getData(`mispacientes/${medico}`).then(rs => {\r\n      console.log('getCounters ketam data: ', data)\r\n      rs.forEach(pac => {\r\n        const aprs = allEncuestas.filter(enc => enc.usuario?._id === pac._id) // Usuario can be deleted\r\n        const latest = aprs.at(-1)\r\n        results.push({\r\n          'paciente': pac.name,\r\n          'total': aprs.length,\r\n          'semana': latest?.createdAt.substring(0, 10)\r\n        })\r\n      });\r\n      console.log(results)\r\n    }).finally(() => { setCountersData(results); setLoadingCounters(false) });\r\n  }\r\n\r\n  const counterColumns = [\r\n    {\r\n      title: 'Paciente',\r\n      key: 'paciente',\r\n      dataIndex: 'paciente',\r\n    },\r\n    {\r\n      title: 'Fecha ultima encuesta',\r\n      key: 'semana',\r\n      dataIndex: 'semana',\r\n    },\r\n    {\r\n      title: 'Total encuestas',\r\n      key: 'total',\r\n      dataIndex: 'total'\r\n    }\r\n  ];\r\n  const columns = [\r\n\r\n    {\r\n      title: 'Usuario',\r\n      key: 'usuario',\r\n      dataIndex: 'usuario',\r\n      render: (_, { usuario }) => (<>{usuario ? usuario.name : \"usuario eliminado\"}</>),\r\n      sorter: true,\r\n    },\r\n    {\r\n      title: 'Fecha',\r\n      key: 'fecha',\r\n      dataIndex: 'createdAt',\r\n      render: (fecha) => (<>{fecha.substring(0, 10)}</>),\r\n      width: '9%'\r\n    },\r\n    {\r\n      title: '¿Parece que las cosas se mueven en cámara lenta ?',\r\n      key: 'desrealizacion_0',\r\n      dataIndex: 'respuestas_ketamina',\r\n      render: (_, { respuestas_ketamina }) => (\r\n        <>{respuestas_ketamina.desrealizacion_0}</>\r\n      ),\r\n    },\r\n    {\r\n      title: '¿Te parecen irreales las cosas, como si estuvieras en un sueño?',\r\n      key: 'desrealizacion_1',\r\n      dataIndex: 'respuestas_ketamina',\r\n      render: (_, { respuestas_ketamina }) => (\r\n        <>{respuestas_ketamina.desrealizacion_1}</>\r\n      ),\r\n    },\r\n    {\r\n      title: '¿Te sientes desconectado de tu propio cuerpo?',\r\n      key: 'despersonalizacion_0',\r\n      dataIndex: 'respuestas_ketamina',\r\n      render: (_, { respuestas_ketamina }) => (\r\n        <>{respuestas_ketamina.despersonalizacion_0}</>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Sientes que ha cambiado el sentido de tu propio cuerpo?: por ejemplo, tu cuerpo se siente inusualmente largo o inusualmente pequeño?',\r\n      key: 'despersonalizacion_1',\r\n      dataIndex: 'respuestas_ketamina',\r\n      render: (_, { respuestas_ketamina }) => (\r\n        <>{respuestas_ketamina.despersonalizacion_1}</>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Te has distraído, o has perdido el rastro de alguna manera de lo que esta pasando durante esta experiencia?',\r\n      key: 'amnesia_0',\r\n      dataIndex: 'respuestas_ketamina',\r\n      render: (_, { respuestas_ketamina }) => (\r\n        <>{respuestas_ketamina.amnesia_0}</>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Tiene lagunas (vacios) en su memoria?',\r\n      key: 'amnesia_1',\r\n      dataIndex: 'respuestas_ketamina',\r\n      render: (_, { respuestas_ketamina }) => (\r\n        <>{respuestas_ketamina.amnesia_1}</>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Gusto por la ketamina',\r\n      key: 'ketamina',\r\n      dataIndex: 'respuestas_ketamina',\r\n      render: (_, { respuestas_ketamina }) => (\r\n        <Space direction='vertical'>\r\n          <>Gusto por la ketamina: <Progress percent={respuestas_ketamina.ketamina * 10} /></>\r\n          <>Anhelo/Apetito de ketamina: <Progress percent={respuestas_ketamina.ketaminaiv * 10} /></>\r\n          <>Deseo de Ketamina IV: <Progress percent={respuestas_ketamina.ketaminaivb * 10} /></>\r\n        </Space>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Efectos',\r\n      key: 'Efectos',\r\n      dataIndex: 'respuestas_ketamina',\r\n      render: (_, { respuestas_ketamina }) => (\r\n        <div>\r\n          {respuestas_ketamina.Aumento_de_la_Presión_Arterial && <Tag color=\"red\">Aumento de la presion arterial</Tag>}\r\n          {respuestas_ketamina.Debilidad_o_Mareos_ligeros && <Tag color=\"red\">Debilidad o Mareos ligeros</Tag>}\r\n          {respuestas_ketamina.Dolor_de_cabeza && <Tag color=\"red\">Dolor de cabeza</Tag>}\r\n          {respuestas_ketamina.Mareos && <Tag color=\"red\">Mareos</Tag>}\r\n          {respuestas_ketamina.Nauseas && <Tag color=\"red\">Nauseas</Tag>}\r\n          {respuestas_ketamina.Sentimientos_de_Ansiedad && <Tag color=\"red\">Sentimientos de Ansiedad</Tag>}\r\n        </div>\r\n      ),\r\n    },\r\n\r\n  ];\r\n\r\n\r\n\r\n  // if ((usuario.rol === 'Recepcion' || usuario.rol === 'Administracion') && !ketaminaData) return <h5>Seleccione un medico para ver los resultados de sus encuestas</h5>\r\n\r\n  if (loading) return <Loading />\r\n\r\n  return (\r\n    <div>\r\n      <br />\r\n      <h4>Resultados de listas de verificacion para efectos secundarios</h4>\r\n      <br />\r\n      <Button type=\"primary\" onClick={showModal}>\r\n        Generar Escala\r\n      </Button>\r\n      <br />\r\n\r\n      {/* {\r\n        (usuario.rol === 'Administrador' || usuario.rol === 'Recepcion') && <Form.Item label=\"Selecciona un Medico\" name=\"usuario\" rules={[{ required: true, message: 'Selecciona el paciente' }]}\r\n          style={{ alignItems: 'center', paddingTop: 20 }}>\r\n          <Select\r\n            style={{ width: 260, }}\r\n            onChange={getEncuestasData}\r\n            placeholder='Selecciona un medico'\r\n          >\r\n            {\r\n              medicosData.map((p) => {\r\n                return <Option key={p._id} value={p._id}>{p.name}</Option>\r\n              })\r\n            }\r\n          </Select>\r\n        </Form.Item>\r\n      } */}\r\n      <br />\r\n\r\n      {/* <Table dataSource={countersData} columns={counterColumns} loading={{ indicator: <LoadingIndicator />, spinning: loadingCounters }} bordered /> */}\r\n      <br />\r\n      <h4>Detalles de encuestas</h4>\r\n      <br />\r\n\r\n      <Table dataSource={ketaminaData} columns={columns} scroll={{ x: 1300 }} bordered />\r\n\r\n\r\n      <Modal title=\"Generar Escala de Ketamina\" open={isModalOpen} onOk={handleOk} onCancel={handleCancel}\r\n        footer={[\r\n          <Button onClick={handleCancel}>Cerrar</Button>\r\n        ]}\r\n      >\r\n        {/* <KetaminaCreateLink /> */}\r\n        <EscalasCreateGeneralLink tipo=\"ketamina\" />\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Button, Modal, Select, Form, Table } from 'antd';\r\nimport EscalasCreateGeneralLink from '../../escalasCreateGeneralLink';\r\nimport { getData, usuario, sendDataBody, ids_hospitales } from '../../../resources';\r\nconst { Option } = Select;\r\n\r\nexport default function PostTraumaticoResults() {\r\n    const [encuestasData, setEncuestasData] = useState([])\r\n    const [medicosData, setMedicosData] = useState([])\r\n    const [medico, setMedico] = useState(null)\r\n    const [countersData, setCountersData] = useState([])\r\n    const [loadingCounters, setLoadingCounters] = useState(true)\r\n    const [columns, setColumns] = useState([])\r\n\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const showModal = () => { setIsModalOpen(true) };\r\n    const handleOk = () => { setIsModalOpen(false) };\r\n    const handleCancel = () => { setIsModalOpen(false) };\r\n\r\n\r\n    useEffect(() => {\r\n        addColumns();\r\n        (usuario.rol === 'Administrador' || usuario.rol === 'Recepcion') ? getDoctorsData() : getEncuestasData(usuario._id)\r\n    }, [])\r\n    const getDoctorsData = () => { //Para el caso que la sesion sea de Administrador\r\n        sendDataBody('users/getMany/hospitals', { ids_hospitales: ids_hospitales }).then(rs => {\r\n            setMedicosData(rs)\r\n        })\r\n    }\r\n    const getEncuestasData = (medico) => {\r\n        getData(`encuestas/byDoctorAndTipo/${medico}/post_traumatico/`).then((rs) => {\r\n            getCounters(rs, medico);\r\n            console.log(rs);\r\n            setEncuestasData(rs)\r\n        })\r\n    }\r\n\r\n    const getCounters = (data, medico) => {\r\n        const allEncuestas = [...data];\r\n        const results = []\r\n        getData(`mispacientes/${medico}`).then(rs => {\r\n            console.log('MisPacientes ept1: ', rs);\r\n            rs.forEach(pac => {\r\n                const aprs = allEncuestas.filter(enc => enc.usuario?._id === pac._id)\r\n                const latest = aprs.at(-1)\r\n                results.push({\r\n                    'paciente': pac.name,\r\n                    'total': aprs.length,\r\n                    'semana': latest?.createdAt.substring(0, 10)\r\n                })\r\n            });\r\n            console.log(results)\r\n        }).finally(() => { setCountersData(results); setLoadingCounters(false) });\r\n    }\r\n\r\n    const counterColumns = [\r\n        {\r\n            title: 'Paciente',\r\n            key: 'paciente',\r\n            dataIndex: 'paciente'\r\n        },\r\n        {\r\n            title: 'Fecha ultima encuesta',\r\n            key: 'semana',\r\n            dataIndex: 'semana',\r\n        },\r\n        {\r\n            title: 'Total Escalas Respondidas',\r\n            key: 'total',\r\n            dataIndex: 'total'\r\n        }\r\n    ];\r\n\r\n\r\n\r\n    const addColumns = () => {\r\n        let columns = [\r\n            {\r\n                title: 'Paciente',\r\n                dataIndex: 'usuario',\r\n                key: 'name',\r\n                render: (_, { usuario }) => <>{usuario ? usuario.name : \"Usuario eliminado\"}</>\r\n            }\r\n        ];\r\n        for (let i = 1; i < 18; i++) {\r\n            columns.push({\r\n                title: 'Pregunta ' + i,\r\n                children: [\r\n                    {\r\n                        title: 'Frecuencia',\r\n                        dataIndex: 'respuestas_depresion2_gpc',\r\n                        key: 'hrsd' + i,\r\n                        render: (_, { respuestas_ept1_davidson }) => (\r\n                            <>\r\n                                {respuestas_ept1_davidson[i][0]}\r\n                            </>\r\n                        ),\r\n                    }, {\r\n                        title: 'Gravedad',\r\n                        dataIndex: 'respuestas_depresion2_gpc',\r\n                        key: 'hrsd' + i,\r\n                        render: (_, { respuestas_ept1_davidson }) => (\r\n                            <>\r\n                                {respuestas_ept1_davidson[i][1]}\r\n                            </>\r\n                        ),\r\n                    }\r\n\r\n                ]\r\n            })\r\n        }\r\n        setColumns(columns)\r\n    }\r\n    return (\r\n        <div>\r\n            <h6>Evaluación Del Trastorno Por Estrés Postraumático: Aproximación A Las Propiedades Psicométricas De La Escala De Trauma De Davidson</h6>\r\n            <br />\r\n            <Button type=\"primary\" onClick={showModal}>\r\n                Crear Enlace EPT 1\r\n            </Button>\r\n            <br />\r\n            {\r\n                (usuario.rol === 'Administrador' || usuario.rol === 'Recepcion') && <Form.Item label=\"Medico\" name=\"usuario\" rules={[{ required: true, message: 'Selecciona el paciente' }]}\r\n                    style={{ alignItems: 'center', paddingTop: 20 }}>\r\n                    <Select\r\n                        style={{ width: 260, }}\r\n                        onChange={getEncuestasData}\r\n                        placeholder='Selecciona un medico'\r\n                    >\r\n                        {\r\n                            medicosData.map((p) => {\r\n                                return <Option key={p._id} value={p._id}>{p.name}</Option>\r\n                            })\r\n                        }\r\n                    </Select>\r\n                </Form.Item>\r\n            }\r\n            <br />\r\n            <Table dataSource={countersData} columns={counterColumns} bordered />\r\n            <br />\r\n            <h4>Detalles de encuestas</h4>\r\n            <br />\r\n            <Table dataSource={encuestasData} columns={columns} scroll={{ x: 1600 }} bordered />\r\n\r\n\r\n            <Modal title=\"Crear Encuesta de Estres Post Traumatico\" open={isModalOpen} onOk={handleOk} onCancel={handleCancel}\r\n                footer={[\r\n                    <Button onClick={handleCancel}>Cerrar</Button>\r\n                ]}>\r\n                <EscalasCreateGeneralLink tipo='post_traumatico' />\r\n            </Modal>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Button, Modal, Table, Form, Select } from 'antd';\r\nimport EscalasCreateGeneralLink from '../../escalasCreateGeneralLink';\r\nimport { getData, usuario, sendDataBody, ids_hospitales } from '../../../resources';\r\nconst Option = { Select }\r\n\r\nexport default function PostTraumaticoMexicanaResults() {\r\n\r\n    const [encuestasData, setEncuestasData] = useState([])\r\n    const [medicosData, setMedicosData] = useState([])\r\n    const [medico, setMedico] = useState(null)\r\n    const [countersData, setCountersData] = useState([])\r\n    const [loadingCounters, setLoadingCounters] = useState(true)\r\n    const [columns, setColumns] = useState([])\r\n\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const showModal = () => { setIsModalOpen(true) };\r\n    const handleOk = () => { setIsModalOpen(false) };\r\n    const handleCancel = () => { setIsModalOpen(false) };\r\n\r\n\r\n    useEffect(() => {\r\n        addColumns();\r\n        (usuario.rol === 'Administrador' || usuario.rol === 'Recepcion') ? getDoctorsData() : getEncuestasData(usuario._id)\r\n    }, [])\r\n    const getDoctorsData = () => { //Para el caso que la sesion sea de Administrador\r\n        sendDataBody('users/getMany/hospitals', { ids_hospitales: ids_hospitales }).then(rs => {\r\n            setMedicosData(rs)\r\n        })\r\n    }\r\n    const getEncuestasData = (medico) => {\r\n        getData(`encuestas/byDoctorAndTipo/${medico}/post_traumatico_mx/`).then((rs) => {\r\n            getCounters(rs, medico);\r\n            console.log(rs);\r\n            setEncuestasData(rs)\r\n        })\r\n    }\r\n\r\n    const getCounters = (data, medico) => {\r\n        const allEncuestas = [...data];\r\n        const results = []\r\n        getData(`mispacientes/${medico}`).then(rs => {\r\n            console.log('MisPacientes ept1: ', rs);\r\n            rs.forEach(pac => {\r\n                const aprs = allEncuestas.filter(enc => enc.usuario?._id === pac._id)\r\n                const latest = aprs.at(-1)\r\n                results.push({\r\n                    'paciente': pac.name,\r\n                    'total': aprs.length,\r\n                    'semana': latest?.createdAt.substring(0, 10)\r\n                })\r\n            });\r\n            console.log(results)\r\n        }).finally(() => { setCountersData(results); setLoadingCounters(false) });\r\n    }\r\n\r\n    const counterColumns = [\r\n        {\r\n            title: 'Paciente',\r\n            key: 'paciente',\r\n            dataIndex: 'paciente'\r\n        },\r\n        {\r\n            title: 'Fecha ultima encuesta',\r\n            key: 'semana',\r\n            dataIndex: 'semana',\r\n        },\r\n        {\r\n            title: 'Total encuestas',\r\n            key: 'total',\r\n            dataIndex: 'total'\r\n        }\r\n    ];\r\n\r\n    const addColumns = () => {\r\n        let columns = [\r\n            {\r\n                title: 'Paciente',\r\n                dataIndex: 'usuario',\r\n                key: 'name',\r\n                render: (_, { usuario }) => <>{usuario ? usuario.name : \"Usuario eliminado\"}</>\r\n            }\r\n        ];\r\n        for (let i = 1; i < 15; i++) {\r\n            columns.push({\r\n                title: 'Pregunta ' + i,\r\n                key: 'eptmx' + i,\r\n                dataIndex: 'respuestas_ept_3mx',\r\n                render: (_, { respuestas_ept_3mx }) => <>{respuestas_ept_3mx[i]}</>\r\n            })\r\n        }\r\n        setColumns(columns)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h6>Resultados de la Validación mexicana de la Escala de Estrés Traumático Secundario</h6>\r\n\r\n            <br />\r\n            <Button type=\"primary\" onClick={showModal}>\r\n                Crear Enlace EPT MX\r\n            </Button>\r\n            <br />\r\n\r\n            {\r\n                (usuario.rol === 'Administrador' || usuario.rol === 'Recepcion') && <Form.Item label=\"Medico\" name=\"usuario\" rules={[{ required: true, message: 'Selecciona el paciente' }]}\r\n                    style={{ alignItems: 'center', paddingTop: 20 }}>\r\n                    <Select\r\n                        style={{ width: 260, }}\r\n                        onChange={getEncuestasData}\r\n                        placeholder='Selecciona un medico'\r\n                    >\r\n                        {\r\n                            medicosData.map((p) => {\r\n                                return <Option key={p._id} value={p._id}>{p.name}</Option>\r\n                            })\r\n                        }\r\n                    </Select>\r\n                </Form.Item>\r\n            }\r\n            <br />\r\n            <Table dataSource={countersData} columns={counterColumns} bordered />\r\n            <br />\r\n            <h4>Detalles de encuestas</h4>\r\n            <br />\r\n            <Table dataSource={encuestasData} columns={columns} scroll={{ x: 1600 }} bordered />\r\n\r\n\r\n            <Modal title=\"Crear Encuesta de Estres Post Traumatico\" open={isModalOpen} onOk={handleOk} onCancel={handleCancel}\r\n                footer={[\r\n                    <Button onClick={handleCancel}>Cerrar</Button>\r\n                ]}>\r\n                <EscalasCreateGeneralLink tipo='post_traumatico_mx' />\r\n            </Modal>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { Tabs } from 'antd';\r\nimport PostTraumaticoResults from './post_traumatico/p_t_results';\r\nimport PostTraumaticoClinicoResults from './p_t_clinico/p_t_clinico_results';\r\nimport PostTraumaticoMexicanaResults from './p_t_mexicana/p_t_mexicana_results';\r\n\r\nexport default function PostTraumaticoMenu() {\r\n  const items = [\r\n    { label: 'EPT 1', key: 'item-1', children: <PostTraumaticoResults /> },\r\n    // { label: 'EPT 2', key: 'item-2', children: <PostTraumaticoClinicoResults/> },\r\n    { label: 'EPT 3', key: 'item-3', children: <PostTraumaticoMexicanaResults /> },\r\n  ]\r\n  return (\r\n    <div>\r\n      <h4 className='spacedTitle'>Resultados de Escalas de Estrés Post Traumatico</h4>\r\n      <Tabs items={items} type=\"card\" />\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { usuario, getData, sendDataBody, ids_hospitales } from '../../resources'\r\nimport { Form, Select, Space, Button, Table, Modal } from 'antd';\r\nimport EscalasCreateGeneralLink from '../escalasCreateGeneralLink';\r\nconst { Option } = Select;\r\n\r\nexport default function DolorResults() {\r\n    const [encuestasData, setEncuestasData] = useState([])\r\n    const [medicosData, setMedicosData] = useState([])\r\n    const [medico, setMedico] = useState(null)\r\n    const [countersData, setCountersData] = useState([])\r\n    const [loadingCounters, setLoadingCounters] = useState(true)\r\n    // For Modal\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const showModal = () => { setIsModalOpen(true) };\r\n    const handleOk = () => { setIsModalOpen(false) };\r\n    const handleCancel = () => { setIsModalOpen(false) };\r\n\r\n    useEffect(() => {\r\n        (usuario.rol === 'Administrador' || usuario.rol === 'Recepcion') ? getDoctorsData() : getEncuestasData(usuario._id)\r\n    }, [])\r\n\r\n    const getDoctorsData = () => { //Para el caso que la sesion sea de Administrador\r\n        sendDataBody('users/getMany/hospitals', { ids_hospitales: ids_hospitales }).then(rs => {\r\n            setMedicosData(rs)\r\n        })\r\n    }\r\n\r\n    const getEncuestasData = (medico) => {\r\n        getData(`encuestas/dolor/medico/${medico}`).then((rs) => {\r\n            getCounters(rs, medico);\r\n            console.log(rs);\r\n            setEncuestasData(rs)\r\n        })\r\n    }\r\n\r\n    const getCounters = (data, medico) => {\r\n        const allEncuestas = [...data];\r\n        const results = []\r\n        getData(`mispacientes/${medico}`).then(rs => {\r\n            rs.forEach(pac => {\r\n                const aprs = allEncuestas.filter(enc => enc.usuario?._id === pac._id)\r\n                const latest = aprs.at(-1)\r\n                results.push({\r\n                    'paciente': pac.name,\r\n                    'total': aprs.length,\r\n                    'semana': latest?.createdAt.substring(0, 10)\r\n                })\r\n            });\r\n            console.log(results)\r\n        }).finally(() => { setCountersData(results); setLoadingCounters(false) });\r\n    }\r\n\r\n    const counterColumns = [\r\n        {\r\n            title: 'Paciente',\r\n            key: 'paciente',\r\n            dataIndex: 'paciente',\r\n        },\r\n        {\r\n            title: 'Fecha ultima encuesta',\r\n            key: 'semana',\r\n            dataIndex: 'semana',\r\n        },\r\n        {\r\n            title: 'Total Escalas Respondidas',\r\n            key: 'total',\r\n            dataIndex: 'total'\r\n        }\r\n    ];\r\n\r\n    const columns = [\r\n\r\n        {\r\n            title: 'Usuario',\r\n            dataIndex: 'usuario',\r\n            key: 'usuario',\r\n            render: (_, { usuario }) => <p>{usuario ? usuario.name : \"Usuario eliminado\"}</p>\r\n        },\r\n        {\r\n            title: 'Pretgunta 1',\r\n            dataIndex: 'respuestas_dolor',\r\n            key: 'usuario',\r\n            render: (_, { respuestas_dolor }) => <p>{respuestas_dolor[1]}</p>\r\n        },\r\n        {\r\n            title: 'Pretgunta 2',\r\n            dataIndex: 'respuestas_dolor',\r\n            key: 'usuario',\r\n            render: (_, { respuestas_dolor }) => <p>{respuestas_dolor[2]}</p>\r\n        },\r\n        {\r\n            title: 'Pretgunta 3',\r\n            dataIndex: 'respuestas_dolor',\r\n            key: 'usuario',\r\n            render: (_, { respuestas_dolor }) => <p>{respuestas_dolor[3]}</p>\r\n        },\r\n        {\r\n            title: 'Pretgunta 4',\r\n            dataIndex: 'respuestas_dolor',\r\n            key: 'usuario',\r\n            render: (_, { respuestas_dolor }) => <p>{respuestas_dolor[4]}</p>\r\n        },\r\n        {\r\n            title: 'Pretgunta 5',\r\n            dataIndex: 'respuestas_dolor',\r\n            key: 'usuario',\r\n            render: (_, { respuestas_dolor }) => <p>{respuestas_dolor[5]}</p>\r\n        },\r\n        {\r\n            title: 'Pretgunta 6',\r\n            dataIndex: 'respuestas_dolor',\r\n            key: 'usuario',\r\n            render: (_, { respuestas_dolor }) => <p>{respuestas_dolor[6]}</p>\r\n        },\r\n        {\r\n            title: 'Pretgunta 7',\r\n            dataIndex: 'respuestas_dolor',\r\n            key: 'usuario',\r\n            render: (_, { respuestas_dolor }) => <p>{respuestas_dolor[7]}</p>\r\n        },\r\n        {\r\n            title: 'Pretgunta 8',\r\n            dataIndex: 'respuestas_dolor',\r\n            key: 'usuario',\r\n            render: (_, { respuestas_dolor }) => <p>{respuestas_dolor[8]}</p>\r\n        },\r\n        {\r\n            title: 'Pretgunta 9',\r\n            dataIndex: 'respuestas_dolor',\r\n            key: 'usuario',\r\n            render: (_, { respuestas_dolor }) => <p>{respuestas_dolor[9]}</p>\r\n        },\r\n        {\r\n            title: 'Pretgunta 10',\r\n            dataIndex: 'respuestas_dolor',\r\n            key: 'usuario',\r\n            render: (_, { respuestas_dolor }) => <p>{respuestas_dolor[10]}</p>\r\n        },\r\n        {\r\n            title: 'Pretgunta 11',\r\n            dataIndex: 'respuestas_dolor',\r\n            key: 'usuario',\r\n            render: (_, { respuestas_dolor }) => <p>{respuestas_dolor[11]}</p>\r\n        },\r\n        {\r\n            title: 'Pretgunta 12',\r\n            dataIndex: 'respuestas_dolor',\r\n            key: 'usuario',\r\n            render: (_, { respuestas_dolor }) => <p>{respuestas_dolor[12]}</p>\r\n        },\r\n        {\r\n            title: 'Pretgunta 13 A-G',\r\n            dataIndex: 'respuestas_dolor',\r\n            key: 'usuario',\r\n            render: (_, { respuestas_dolor }) => <p>{respuestas_dolor['A13']}</p>\r\n        },\r\n        {\r\n            title: 'Pretgunta 14',\r\n            dataIndex: 'respuestas_dolor',\r\n            key: 'usuario',\r\n            render: (_, { respuestas_dolor }) => <p>{respuestas_dolor[14]}</p>\r\n        },\r\n        {\r\n            title: 'Pretgunta 15',\r\n            dataIndex: 'respuestas_dolor',\r\n            key: 'usuario',\r\n            render: (_, { respuestas_dolor }) => <p>{respuestas_dolor[15]}</p>\r\n        },\r\n        {\r\n            title: 'Pretgunta 16',\r\n            dataIndex: 'respuestas_dolor',\r\n            key: 'usuario',\r\n            render: (_, { respuestas_dolor }) => <p>{respuestas_dolor[16]}</p>\r\n        },\r\n        {\r\n            title: 'Pretgunta 17',\r\n            dataIndex: 'respuestas_dolor',\r\n            key: 'usuario',\r\n            render: (_, { respuestas_dolor }) => <p>{respuestas_dolor[17]}</p>\r\n        },\r\n        {\r\n            title: 'Pretgunta 18',\r\n            dataIndex: 'respuestas_dolor',\r\n            key: 'usuario',\r\n            render: (_, { respuestas_dolor }) => <p>{respuestas_dolor[18]}</p>\r\n        },\r\n        {\r\n            title: 'Pretgunta 19',\r\n            dataIndex: 'respuestas_dolor',\r\n            key: 'usuario',\r\n            render: (_, { respuestas_dolor }) => <p>{respuestas_dolor[19]}</p>\r\n        },\r\n        {\r\n            title: 'Pretgunta 20',\r\n            dataIndex: 'respuestas_dolor',\r\n            key: 'usuario',\r\n            render: (_, { respuestas_dolor }) => <p>{respuestas_dolor[20]}</p>\r\n        },\r\n        {\r\n            title: 'Pretgunta 21',\r\n            dataIndex: 'respuestas_dolor',\r\n            key: 'usuario',\r\n            render: (_, { respuestas_dolor }) => <p>{respuestas_dolor[21]}</p>\r\n        },\r\n        {\r\n            title: 'Pretgunta 22',\r\n            dataIndex: 'respuestas_dolor',\r\n            key: 'usuario',\r\n            render: (_, { respuestas_dolor }) => <p>{respuestas_dolor[22]}</p>\r\n        },\r\n        // {\r\n        //     title: 'Address',\r\n        //     dataIndex: 'address',\r\n        //     key: 'address',\r\n        // },\r\n        // {\r\n        //     title: 'Tags',\r\n        //     key: 'tags',\r\n        //     dataIndex: 'tags',\r\n        //     render: (_, { tags }) => (\r\n        //         <>\r\n        //             {tags.map((tag) => {\r\n        //                 let color = tag.length > 5 ? 'geekblue' : 'green';\r\n        //                 if (tag === 'loser') {\r\n        //                     color = 'volcano';\r\n        //                 }\r\n        //                 return (\r\n        //                     <Tag color={color} key={tag}>\r\n        //                         {tag.toUpperCase()}\r\n        //                     </Tag>\r\n        //                 );\r\n        //             })}\r\n        //         </>\r\n        //     ),\r\n        // },\r\n        {\r\n            title: 'Action',\r\n            key: 'action',\r\n            render: (_, record) => (\r\n                <Space size=\"middle\">\r\n                    <a>Invite {record.name}</a>\r\n                    <a>Delete</a>\r\n                </Space>\r\n            ),\r\n        },\r\n    ];\r\n\r\n    return (\r\n        <div>\r\n            <h4 className='spacedTitle'>Resultados de encuestas de dolor</h4>\r\n            <Button type=\"primary\" onClick={showModal}>\r\n                Crear Link Encuesta de Dolor\r\n            </Button>\r\n            <br />\r\n            {\r\n                (usuario.rol === 'Administrador' || usuario.rol === 'Recepcion') && <Form.Item label=\"Medico\" name=\"usuario\" rules={[{ required: true, message: 'Selecciona el paciente' }]}\r\n                    style={{ alignItems: 'center', paddingTop: 20 }}>\r\n                    <Select\r\n                        style={{ width: 260, }}\r\n                        onChange={getEncuestasData}\r\n                        placeholder='Selecciona un medico'\r\n                    >\r\n                        {\r\n                            medicosData.map((p) => {\r\n                                return <Option key={p._id} value={p._id}>{p.name}</Option>\r\n                            })\r\n                        }\r\n                    </Select>\r\n                </Form.Item>\r\n            }\r\n            <br />\r\n            <Table dataSource={countersData} columns={counterColumns} bordered />\r\n            <br />\r\n            <h4>Detalles de encuestas</h4>\r\n            <br />\r\n            <Table columns={columns} dataSource={encuestasData} scroll={{ x: '200vw' }} bordered />\r\n\r\n            <Modal title=\"Crear Encuesta de dolor\" open={isModalOpen} onOk={handleOk} onCancel={handleCancel}\r\n                footer={[\r\n                    <Button onClick={handleCancel}>Cerrar</Button>\r\n                ]}>\r\n                <EscalasCreateGeneralLink tipo='dolor' />\r\n            </Modal>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Tabs } from 'antd';\r\nimport DepresionMenu from './depresion/depresionMenu'\r\nimport KetaminaResults from './ketamina/ketaminaResults';\r\nimport PostTraumaticoMenu from './estres_post_traumatico/postTraumaticoMenu';\r\nimport DolorResults from './dolor/dolorResults';\r\n\r\nconst onChange = (key) => { console.log(key) };\r\n\r\nconst escalasMenuItems = [\r\n    { label: 'Ketamina', key: 'item-1', children: <KetaminaResults /> },\r\n    { label: 'Depresion', key: 'item-3', children: <DepresionMenu /> },\r\n    { label: 'Dolor', key: 'item-4', children: <DolorResults /> },\r\n    { label: 'Estres Post Traumatico', key: 'item-5', children: <PostTraumaticoMenu /> },\r\n];\r\n\r\nexport default function Escalas() {\r\n    return (\r\n        <div>\r\n            <Tabs items={escalasMenuItems} defaultActiveKey=\"1\" onChange={onChange} tabPosition='left' />\r\n        </div>\r\n\r\n    )\r\n}\r\n","import { useState, useEffect } from 'react'\r\nimport { Button, Modal, Form, Input, Select, InputNumber, message } from 'antd';\r\nimport { getData, sendDataBody, updateData, usuario } from '../../resources';\r\n// DOCTOR CREATE BALANCE\r\nexport default function CreateBalance(props) {\r\n\r\n    const [pacientesData, setPacientesData] = useState({})\r\n    const handleOk = () => { props.setIsModalOpen(false) };\r\n    const handleCancel = () => { props.setIsModalOpen(false); props.setBalanceForEdit(null) };\r\n\r\n    useEffect(() => {\r\n        console.log('received for edit ', props.balanceForEdit)\r\n        return getPacientesData()\r\n    }, [])\r\n    useEffect(() => {\r\n        console.log('received for edit ', props.balanceForEdit)\r\n    }, [props.balanceForEdit])\r\n\r\n    const getPacientesData = () => {\r\n        getData(`mispacientes/${usuario._id}`).then((rs) => {\r\n            rs.forEach(p => { p.label = p.name; p.value = p._id; });\r\n            setPacientesData(rs);\r\n        })\r\n    }\r\n\r\n    // Form methods\r\n    const onFinish = (values) => {\r\n\r\n        if (!props.balanceForEdit || Object.keys(props.balanceForEdit).length === 0) {\r\n            values.medico = usuario._id\r\n            values.fecha_hora = new Date();\r\n            values.tipo = props.tipo;\r\n            values.estado = 'pendiente'\r\n        }\r\n\r\n\r\n        console.log('Ready to send:', values);\r\n        console.log('For Edit: ', props.balanceForEdit);\r\n\r\n        (props.balanceForEdit && Object.keys(props.balanceForEdit).length > 0) ?\r\n            updateData(`/balances/update/${props.balanceForEdit._id}`, values).then((rs) => {\r\n                console.log(rs); props.setBalanceForEdit({}); props.setIsModalOpen(false); props.getBalancesData()\r\n            })\r\n            :\r\n            sendDataBody(`balances/add`, values)\r\n                .then((rs) => { console.log(rs); message.success(rs.message || rs.error) })\r\n                .finally(() => {\r\n                    props.setBalanceForEdit({}); props.setIsModalOpen(false); props.getBalancesData()\r\n                })\r\n    };\r\n\r\n    const onFinishFailed = (errorInfo) => { console.log('Failed:', errorInfo) };\r\n\r\n    const handleChange = (value) => { console.log(`selected ${value}`) };\r\n\r\n    return (\r\n        <Modal title={props.balanceForEdit ? `Editar ${props.tipo}` : `Agregar ${props.tipo}`} open={props.isModalOpen} onOk={handleOk} onCancel={handleCancel} destroyOnClose\r\n            footer={[\r\n                <Button type=\"primary\" htmlType=\"submit\" form='edit_balance'>\r\n                    Guardar\r\n                </Button>,\r\n                <Button onClick={handleCancel}>\r\n                    Cancelar\r\n                </Button>\r\n            ]}>\r\n            <Form\r\n                name=\"edit_balance\"\r\n                labelCol={{ span: 8 }}\r\n                wrapperCol={{ span: 16 }}\r\n                initialValues={props.balanceForEdit}\r\n                onFinish={onFinish}\r\n                onFinishFailed={onFinishFailed}\r\n                autoComplete=\"off\"\r\n            >\r\n\r\n\r\n                <Form.Item\r\n                    label=\"Monto\"\r\n                    name=\"monto\"\r\n                    rules={[{ required: true, message: 'Ingresa el monto' }]}\r\n                >\r\n                    <InputNumber style={{ width: '100%' }} />\r\n                </Form.Item>\r\n\r\n                <Form.Item\r\n                    label=\"Abono\"\r\n                    // name=\"abono\"\r\n                    rules={[{ required: true, message: 'Ingresa el abono' }]}\r\n                >\r\n                    <InputNumber style={{ width: '100%' }} />\r\n                </Form.Item>\r\n\r\n                {\r\n                    // Para el caso que sea un ingreso sin cita\r\n                    (!props.balanceForEdit || Object.keys(props.balanceForEdit).length === 0) && <div>\r\n                        <Form.Item\r\n                            label=\"Concepto\"\r\n                            name=\"concepto\"\r\n                            rules={[{ required: true, message: 'Ingresa el concepto' }]}\r\n                        >\r\n                            <Input />\r\n                        </Form.Item>\r\n\r\n                        {\r\n                            props.tipo === 'ingreso' && <Form.Item\r\n                                label=\"Paciente\"\r\n                                name=\"paciente\"\r\n                            >\r\n                                <Select\r\n                                    onChange={handleChange}\r\n                                    options={pacientesData}\r\n                                />\r\n                            </Form.Item>\r\n                        }\r\n\r\n                    </div>\r\n                }\r\n\r\n                <Form.Item\r\n                    label=\"Forma de Pago\"\r\n                    name=\"forma_de_pago\"\r\n                >\r\n                    <Select\r\n                        onChange={handleChange}\r\n                        options={[\r\n                            {\r\n                                value: 'efectivo',\r\n                                label: 'Efectivo',\r\n                            },\r\n                            {\r\n                                value: 'tarjeta',\r\n                                label: 'Tarjeta',\r\n                            },\r\n                            {\r\n                                value: 'transferencia',\r\n                                label: 'Transferencia',\r\n                            },\r\n                        ]}\r\n                    />\r\n                </Form.Item>\r\n\r\n                {/* <Form.Item\r\n                    label=\"Estado\"\r\n                    name=\"estado\"\r\n                    rules={[{ required: true, message: 'Ingresa el monto' }]}\r\n                >\r\n                    <Select\r\n                        onChange={handleChange}\r\n                        options={[\r\n                            {\r\n                                value: 'pendiente',\r\n                                label: 'Pendiente',\r\n                            },\r\n                            {\r\n                                value: 'pagado',\r\n                                label: 'Pagado',\r\n                            },\r\n                            {\r\n                                value: 'pago parcial',\r\n                                label: 'Pago parcial',\r\n                            },\r\n                        ]}\r\n                    />\r\n                </Form.Item> */}\r\n\r\n                <Form.Item\r\n                    wrapperCol={{\r\n                        offset: 8,\r\n                        span: 16,\r\n                    }}\r\n                >\r\n\r\n                </Form.Item>\r\n            </Form>\r\n        </Modal>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Document, Page, Text, View, StyleSheet, Image } from '@react-pdf/renderer';\r\nimport { PDFViewer } from '@react-pdf/renderer';\r\n\r\n\r\n// Estilo para el ticket\r\nconst styles = StyleSheet.create({\r\n    titleContainer: {\r\n        flexDirection: 'row',\r\n        justifyContent: 'center',\r\n        marginBottom: 10,\r\n    },\r\n    reportTitle: {\r\n        fontSize: 18,\r\n        textAlign: 'center',\r\n        fontFamily: 'Helvetica-Bold',\r\n        textTransform: 'uppercase',\r\n    },\r\n    subtitle: {\r\n        fontSize: 14,\r\n        textAlign: 'center',\r\n        fontFamily: 'Helvetica',\r\n        marginBottom: 20,\r\n    },\r\n    text: {\r\n        margin: 10,\r\n        fontSize: 12,\r\n        textAlign: 'justify',\r\n        fontFamily: 'Helvetica',\r\n    },\r\n    sellerBuyerInfo: {\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n        marginBottom: 10,\r\n    },\r\n    infoTitle: {\r\n        fontFamily: 'Helvetica-Bold',\r\n        fontSize: 12,\r\n    },\r\n    infoText: {\r\n        fontFamily: 'Helvetica',\r\n        fontSize: 12,\r\n    },\r\n    table: {\r\n        display: 'table',\r\n        width: 'auto',\r\n        marginTop: 10,\r\n        borderStyle: 'solid',\r\n        borderWidth: 1,\r\n        borderColor: '#bfbfbf',\r\n    },\r\n    tableRow: {\r\n        margin: 'auto',\r\n        flexDirection: 'row',\r\n    },\r\n    tableColHeader: {\r\n        width: '25%',\r\n        borderStyle: 'solid',\r\n        borderWidth: 1,\r\n        borderColor: '#bfbfbf',\r\n        backgroundColor: '#f0f0f0',\r\n        textAlign: 'center',\r\n        fontFamily: 'Helvetica-Bold',\r\n        fontSize: 12,\r\n        paddingTop: 5,\r\n        paddingBottom: 5,\r\n    },\r\n    tableCol: {\r\n        width: '25%',\r\n        borderStyle: 'solid',\r\n        borderWidth: 1,\r\n        borderColor: '#bfbfbf',\r\n        textAlign: 'center',\r\n        fontFamily: 'Helvetica',\r\n        fontSize: 10,\r\n        paddingTop: 5,\r\n        paddingBottom: 5,\r\n    },\r\n    tableCellHeader: {\r\n        margin: 'auto',\r\n        marginTop: 5,\r\n        marginBottom: 5,\r\n        flexDirection: 'row',\r\n    },\r\n    total: {\r\n        fontFamily: 'Helvetica-Bold',\r\n        fontSize: 14,\r\n        marginTop: 30,\r\n        textAlign: 'right',\r\n        paddingRight: 50,\r\n    },\r\n\r\n    page: {\r\n        fontFamily: 'Helvetica',\r\n        fontSize: 12,\r\n        padding: 40,\r\n    },\r\n    header: {\r\n        flexDirection: 'row',\r\n        alignItems: 'center',\r\n        borderBottom: '1pt solid #000',\r\n        paddingBottom: 10,\r\n        marginBottom: 10,\r\n    },\r\n    logo: {\r\n        width: 50,\r\n        height: 50,\r\n        marginRight: 10,\r\n    },\r\n    title: {\r\n        fontSize: 20,\r\n        marginLeft: 10,\r\n    },\r\n    company: {\r\n        fontSize: 14,\r\n        marginTop: 5,\r\n        marginLeft: 10,\r\n    },\r\n});\r\n\r\n// Componente del ticket\r\nexport default function Ticket({ ingresos, logo, company, seller, buyer }) {\r\n    console.log('Received for print ', ingresos)\r\n    return <PDFViewer height={500} width={550}>\r\n        <Document>\r\n            <Page size=\"A4\" style={styles.page}>\r\n                <View>\r\n                    <View style={styles.header}>\r\n                        <Image style={styles.logo} src={logo} />\r\n                        <View>\r\n                            <Text style={styles.title}>Nota de Venta</Text>\r\n                            <Text style={styles.company}>Hospital: </Text>\r\n                            <Text style={styles.company}>{new Date(ingresos[0].createdAt).toLocaleString()} </Text>\r\n                        </View>\r\n                    </View>\r\n                    <View style={styles.sellerBuyerInfo}>\r\n                        <View>\r\n                            <Text style={styles.infoTitle}>Medico:</Text>\r\n                            <Text style={styles.infoText}>{ingresos[0].medico.name}</Text>\r\n                        </View>\r\n                        <View>\r\n                            <Text style={styles.infoTitle}>Paciente:</Text>\r\n                            <Text style={styles.infoText}>{ingresos[0].paciente? ingresos[0].paciente.name : 'Sin paciente'}</Text>\r\n                        </View>\r\n                    </View>\r\n                    <View style={styles.table}>\r\n                        <View style={styles.tableRow}>\r\n                            <Text style={styles.tableColHeader}>Concepto</Text>\r\n                            <Text style={styles.tableColHeader}>Cantidad</Text>\r\n                            <Text style={styles.tableColHeader}>Precio Unitario</Text>\r\n                            <Text style={styles.tableColHeader}>Subtotal</Text>\r\n                        </View>\r\n                        {ingresos.map((item) => (\r\n                            <View style={styles.tableRow} key={item.id}>\r\n                                <Text style={styles.tableCol}>{item.concepto}</Text>\r\n                                <Text style={styles.tableCol}>1</Text>\r\n                                <Text style={styles.tableCol}>${item.monto.toFixed(2)}</Text>\r\n                                <Text style={styles.tableCol}>\r\n                                    {/* ${(item.monto * item.quantity).toFixed(2)} */}\r\n                                    ${item.monto.toFixed(2)}\r\n                                </Text>\r\n                            </View>\r\n                        ))}\r\n                    </View>\r\n                    <Text style={styles.total}>\r\n                        Total: ${ingresos.reduce((acc, item) => acc + item.monto * 1, 0).toFixed(2)}\r\n                    </Text>\r\n                </View>\r\n            </Page>\r\n        </Document>\r\n\r\n    </PDFViewer>\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { Table, Tag, Button, Typography, Modal } from 'antd';\r\nimport { CheckCircleTwoTone } from '@ant-design/icons'\r\nimport { deleteData, getData, usuario } from '../../resources';\r\nimport CreateBalance from './create-balance';\r\nimport Ticket from './ticket-for-print';\r\n\r\nconst { Text } = Typography;\r\n\r\nexport default function Balances() {\r\n    const [balancesData, setBalancesData] = useState([])\r\n\r\n    // Modal For Edit Ingreso\r\n    const [ingresoForEdit, setIngresoForEdit] = useState(null)\r\n    const [isIngresoModalOpen, setIsIngresoModalOpen] = useState(false);\r\n    const showIngresoModal = () => { setIsIngresoModalOpen(true) };\r\n\r\n    // Modal For Edit Gasto\r\n    const [egresoForEdit, setEgresoForEdit] = useState(null)\r\n    const [isEgresoModalOpen, setIsEgresoModalOpen] = useState(false);\r\n    const showEgresoModal = () => { setIsEgresoModalOpen(true) };\r\n\r\n    // Modal For Ticket\r\n    const [ingresoForPrint, setIngresoForPrint] = useState([])\r\n    const [isTicketModalOpen, setIsTicketModalOpen] = useState(false);\r\n    const showTicketModal = () => { setIsTicketModalOpen(true) }\r\n    const handleTicketOk = () => { setIsTicketModalOpen(false) }\r\n    const handleTicketCancel = () => { setIsTicketModalOpen(false) }\r\n\r\n    useEffect(() => { getBalancesData() }, [])\r\n\r\n    const getBalancesData = () => { getData(`balances/medico/${usuario._id}`).then((rs) => { setBalancesData(rs.reverse()); console.log('balances', rs); }) }\r\n\r\n\r\n    const columns = [\r\n        {\r\n            title: 'Fecha y Hora',\r\n            dataIndex: 'fecha_hpra',\r\n            key: 'fecha_hora',\r\n            render: (_, { fecha_hora }) => { return <>{new Date(fecha_hora).toLocaleString()}</> }\r\n        },\r\n        {\r\n            title: 'Tipo',\r\n            dataIndex: 'tipo',\r\n            key: 'tipo',\r\n            render: (_, { tipo }) => {\r\n                let color = (tipo && tipo === 'ingreso') ? 'geekblue' : 'volcano';\r\n                return tipo ? <Tag color={color} >{tipo.toUpperCase()}</Tag> : <Tag color={color}>Indefinido</Tag>\r\n            },\r\n        },\r\n        {\r\n            title: 'Monto',\r\n            dataIndex: 'monto',\r\n            key: 'monto',\r\n            render: (_, { monto }) => `$ ${monto}`\r\n        },\r\n        {\r\n            title: 'Abono',\r\n            dataIndex: 'abono',\r\n            key: 'abono',\r\n            render: (_, { abono }) => { return abono && <>${abono}</> }\r\n        },\r\n        {\r\n            title: 'Adeudo',\r\n            dataIndex: 'adeudo',\r\n            key: 'adeudo',\r\n            render: (_, record) => { return <>${record.monto - record.abono}</> }\r\n\r\n        },\r\n        {\r\n            title: 'Forma de pago',\r\n            key: 'forma_de_pago',\r\n            dataIndex: 'forma_de_pago',\r\n            render: (_, { forma_de_pago }) => {\r\n                let color = forma_de_pago === 'efectivo' ? 'green' : 'geekblue';\r\n                return <Tag color={color} >{forma_de_pago.toUpperCase()}</Tag>\r\n            },\r\n        },\r\n        {\r\n            title: 'Paciente',\r\n            key: 'cita.paciente',\r\n            dataIndex: 'cita',\r\n            // render: (_, { cita }) => {\r\n            //     return cita ? <MatchPatient paciente={cita.usuario} /> : <Text disabled>Sin Paciente</Text>\r\n            // },\r\n            render: (_, record) => {\r\n                // if (record.cita) return <MatchPatient paciente={record.cita.usuario} />\r\n                if (record.cita) return <div style={{ display: 'flex', flexDirection: 'column' }}>{record.cita.usuario.name} <span style={{ fontSize: 9 }}>Tomado de la cita</span></div> //when populate is ready\r\n                else if (record.paciente) return <>{record.paciente.name}</>\r\n                else return <Text type=\"secondary\"> Sin Paciente </Text>\r\n            },\r\n        },\r\n        {\r\n            title: 'Factura',\r\n            key: 'Factura',\r\n            dataIndex: 'factura',\r\n            render: (_, { factura }) => { return factura && <CheckCircleTwoTone /> }\r\n\r\n        },\r\n        {\r\n            title: 'Estado',\r\n            key: 'Estado',\r\n            dataIndex: 'estado',\r\n            render: (_, { estado }) => {\r\n\r\n                let color = estado === 'pagado' ? 'geekblue' : 'green';\r\n                if (estado === 'pendiente' || estado === 'sin pagar') color = 'volcano';\r\n\r\n                return <Tag color={color}> {estado.toUpperCase()} </Tag>\r\n            }\r\n\r\n        },\r\n        {\r\n            title: 'Acciones',\r\n            key: 'Editar',\r\n            render: (_, record) => <div className='fila'>\r\n                <Button onClick={() => { setIngresoForEdit(record); showIngresoModal() }}>Editar</Button>\r\n                {record.tipo === 'ingreso' && <Button onClick={() => { console.log(record); setIngresoForPrint([record]); showTicketModal() }}>Imprimir Nota</Button>}\r\n            </div>\r\n        },\r\n    ];\r\n\r\n\r\n    return (\r\n        <div className='mainContainer'>\r\n            <div className='fila'>\r\n                <h4>Tabla de Ingresos</h4>\r\n                <Button onClick={showIngresoModal} type='primary' ghost style={{ marginLeft: 32 }}>Agregar Ingreso</Button>\r\n                <Button onClick={showEgresoModal} type='primary' ghost style={{ marginLeft: 32 }}>Agregar Gasto</Button>\r\n            </div>\r\n            <Table columns={columns} dataSource={balancesData} />\r\n            <div style={{ height: 200 }}></div>\r\n\r\n            {/* Ingreso */}\r\n            <CreateBalance tipo='ingreso' balanceForEdit={ingresoForEdit} setBalanceForEdit={setIngresoForEdit} setIsModalOpen={setIsIngresoModalOpen} isModalOpen={isIngresoModalOpen} getBalancesData={getBalancesData} />\r\n\r\n            {/* Gasto */}\r\n            <CreateBalance tipo='egreso' balanceForEdit={egresoForEdit} setBalanceForEdit={setEgresoForEdit} setIsModalOpen={setIsEgresoModalOpen} isModalOpen={isEgresoModalOpen} getBalancesData={getBalancesData} />\r\n\r\n            {/* Ticket */}\r\n            <Modal title=\"Imprimir Nota de Venta\" open={isTicketModalOpen} onOk={handleTicketOk} onCancel={handleTicketCancel} width={600}>\r\n                <Ticket ingresos={ingresoForPrint} logo=\"https://api.recreamed.com/images/bd71d914-1f11-4bea-81e5-81b55e11a4e1.jpg\" company='Hospital: ' seller='Médico: ' buyer='Paciente: ' />\r\n            </Modal>\r\n\r\n\r\n        </div >\r\n    )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { getData, sendData, sendDataBody } from '../../resources'\r\nimport { Button, Form, Input } from 'antd'\r\nimport { Elements } from '@stripe/react-stripe-js'\r\nimport { loadStripe } from '@stripe/stripe-js';\r\nimport CheckoutForm from './checkoutForm';\r\n\r\nconst stripePromise = loadStripe('pk_test_51KtKDMAGvuqPNUwvUumU2NTmwdxD6v0QHYeewNv2xu8h0gYTuItBy8Nuh2ynYtbg0dLl6dL7htl4F0LJlaRoASnN00YndlN1Po')\r\n\r\nexport default function Stripe() {\r\n\r\n    const [setupBegan, setSetupBegan] = useState(false)\r\n    const [isLoading, setIsLoading] = useState(true)\r\n    const [error, setError] = useState(null)\r\n    const [account, setAccount] = useState({})\r\n    const [clientSecret, setClientSecret] = useState(null)\r\n\r\n\r\n    useEffect(() => { fetchAccount() }, [])\r\n\r\n    useEffect(() => {\r\n        sendData('stripe/create-payment-intent').then((rs) => {\r\n            const { clientSecret } = rs;\r\n            console.log(clientSecret)\r\n            setClientSecret(clientSecret)\r\n        })\r\n    }, [])\r\n\r\n\r\n\r\n    const fetchAccount = () => {\r\n        sendData('stripe/account/get').then(rs => {\r\n            console.log('initial response', rs)\r\n            if (rs.success) {\r\n                setSetupBegan(rs.setSetupBegan)\r\n                setIsLoading(false)\r\n                setAccount(rs.account)\r\n            } else {\r\n                // Failed\r\n                setError(rs.message)\r\n                setIsLoading(false)\r\n            }\r\n        })\r\n    }\r\n\r\n    // Primero se ejecuta setup y cuando devuelva el id de cuenta ahora si get account\r\n    const onStartAccountSetup = () => {\r\n        // On video, jumps from onClickBeginsetup to this method. We're going directly\r\n        setIsLoading(true)\r\n        sendDataBody('stripe/account/setup', { countryCode: 'MX' }).then((rs) => {\r\n            if (rs.success) fetchAccount()\r\n            else {\r\n                setError(rs.message)\r\n                setIsLoading(false)\r\n            }\r\n        })\r\n    }\r\n\r\n    // Finalizar form de los datos requeridos\r\n    const onFinish = (values) => {\r\n        setIsLoading(true)\r\n        console.log('Success:', values);\r\n        sendDataBody('stripe/account/save', values).then((rs) => {\r\n            if (rs.success) fetchAccount()\r\n            else {\r\n                setError(rs.message)\r\n                setIsLoading(false)\r\n            }\r\n        })\r\n    };\r\n    const onFinishFailed = (errorInfo) => {\r\n        console.log('Failed:', errorInfo);\r\n    }\r\n\r\n    if (isLoading) return <p>Cargando...</p>\r\n\r\n    if (!setSetupBegan) return <div>\r\n        {error && <p>{error}</p>}\r\n        <Button onClick={onStartAccountSetup}>Begin Setup</Button>\r\n    </div>\r\n    const options = {\r\n        // passing the client secret obtained from the server\r\n        clientSecret: clientSecret,\r\n    };\r\n\r\n    // Video at 7:20\r\n    return (\r\n        <div>\r\n            {error && <p>{error}</p>}\r\n            <p>handler</p>\r\n            <h4>Stripe</h4>\r\n            {\r\n                stripePromise && clientSecret && <Elements stripe={stripePromise}\r\n                options={options}\r\n            >\r\n                <CheckoutForm />\r\n            </Elements>\r\n            }\r\n            \r\n            {/* {\r\n                account.requirements && account.requirements.currently_due ?\r\n\r\n                    <Form\r\n                        name=\"basic\"\r\n                        labelCol={{ span: 8 }}\r\n                        wrapperCol={{ span: 16 }}\r\n                        initialValues={{}}\r\n                        onFinish={onFinish}\r\n                        onFinishFailed={onFinishFailed}\r\n                        autoComplete=\"off\">\r\n                        {\r\n\r\n                            account.requirements.currently_due.map((fieldKey) => {\r\n                                //  Here Will be an input for each fieldKey con su onFinishSaveFields \r\n                                // return <div>{fieldKey}</div>\r\n                                return <Form.Item\r\n                                    key={fieldKey}\r\n                                    label={fieldKey}\r\n                                    name={fieldKey}\r\n                                // rules={[{required: true,message: 'Please input your username!'}]}\r\n                                >\r\n                                    <Input />\r\n                                </Form.Item>\r\n                            })\r\n                        }\r\n                        <Form.Item\r\n                            wrapperCol={{\r\n                                offset: 8,\r\n                                span: 16,\r\n                            }}\r\n                        >\r\n                            <Button type=\"primary\" htmlType=\"submit\">\r\n                                Submit\r\n                            </Button>\r\n                        </Form.Item>\r\n                    </Form>\r\n\r\n\r\n                    : <p>All setup</p>\r\n\r\n            } */}\r\n\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Document, Page, Text, View, StyleSheet, Image } from '@react-pdf/renderer';\r\nimport { PDFViewer } from '@react-pdf/renderer';\r\n\r\n\r\n// Estilo para el ticket\r\nconst styles = StyleSheet.create({\r\n    titleContainer: {\r\n        flexDirection: 'row',\r\n        justifyContent: 'center',\r\n        marginBottom: 10,\r\n    },\r\n    reportTitle: {\r\n        fontSize: 18,\r\n        textAlign: 'center',\r\n        fontFamily: 'Helvetica-Bold',\r\n        textTransform: 'uppercase',\r\n    },\r\n    subtitle: {\r\n        fontSize: 14,\r\n        textAlign: 'center',\r\n        fontFamily: 'Helvetica',\r\n        marginBottom: 20,\r\n    },\r\n    text: {\r\n        margin: 10,\r\n        fontSize: 12,\r\n        textAlign: 'justify',\r\n        fontFamily: 'Helvetica',\r\n    },\r\n    sellerBuyerInfo: {\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n        marginBottom: 10,\r\n    },\r\n    infoTitle: {\r\n        fontFamily: 'Helvetica-Bold',\r\n        fontSize: 12,\r\n    },\r\n    infoText: {\r\n        fontFamily: 'Helvetica',\r\n        fontSize: 12,\r\n    },\r\n    table: {\r\n        display: 'table',\r\n        width: 'auto',\r\n        marginTop: 10,\r\n        borderStyle: 'solid',\r\n        borderWidth: 1,\r\n        borderColor: '#bfbfbf',\r\n    },\r\n    tableRow: {\r\n        margin: 'auto',\r\n        flexDirection: 'row',\r\n    },\r\n    tableColHeader: {\r\n        width: '25%',\r\n        borderStyle: 'solid',\r\n        borderWidth: 1,\r\n        borderColor: '#bfbfbf',\r\n        backgroundColor: '#f0f0f0',\r\n        textAlign: 'center',\r\n        fontFamily: 'Helvetica-Bold',\r\n        fontSize: 12,\r\n        paddingTop: 5,\r\n        paddingBottom: 5,\r\n    },\r\n    tableCol: {\r\n        width: '25%',\r\n        borderStyle: 'solid',\r\n        borderWidth: 1,\r\n        borderColor: '#bfbfbf',\r\n        textAlign: 'center',\r\n        fontFamily: 'Helvetica',\r\n        fontSize: 10,\r\n        paddingTop: 5,\r\n        paddingBottom: 5,\r\n    },\r\n    tableCellHeader: {\r\n        margin: 'auto',\r\n        marginTop: 5,\r\n        marginBottom: 5,\r\n        flexDirection: 'row',\r\n    },\r\n    total: {\r\n        fontFamily: 'Helvetica-Bold',\r\n        fontSize: 14,\r\n        marginTop: 30,\r\n        textAlign: 'right',\r\n        paddingRight: 50,\r\n    },\r\n\r\n    page: {\r\n        fontFamily: 'Helvetica',\r\n        fontSize: 12,\r\n        padding: 40,\r\n    },\r\n    header: {\r\n        flexDirection: 'row',\r\n        alignItems: 'center',\r\n        borderBottom: '1pt solid #000',\r\n        paddingBottom: 10,\r\n        marginBottom: 10,\r\n    },\r\n    logo: {\r\n        width: 50,\r\n        height: 50,\r\n        marginRight: 10,\r\n    },\r\n    title: {\r\n        fontSize: 20,\r\n        marginLeft: 10,\r\n    },\r\n    company: {\r\n        fontSize: 14,\r\n        marginTop: 5,\r\n        marginLeft: 10,\r\n    },\r\n});\r\n\r\n// Componente del ticket\r\nexport default function CorteDocument({ totales, logo, company, seller, buyer }) {\r\n    console.log('Received for print ', totales)\r\n    return <PDFViewer height={500} width={550}>\r\n        <Document>\r\n            <Page size=\"A4\" style={styles.page}>\r\n                <View>\r\n                    <View style={styles.header}>\r\n                        <Image style={styles.logo} src={logo} />\r\n                        <View>\r\n                            <Text style={styles.title}>Corte</Text>\r\n                            {/* <Text style={styles.company}>Hospital: </Text> */}\r\n                            <Text style={styles.company}>{new Date().toLocaleString()} </Text>\r\n                        </View>\r\n                    </View>\r\n                    <View style={styles.sellerBuyerInfo}>\r\n                        <View>\r\n                            <Text style={styles.infoTitle}>Ingresos Totales:</Text>\r\n                            <Text style={styles.infoText}>{totales.ingresosTotales}</Text>\r\n                        </View>\r\n                        <View>\r\n                            <Text style={styles.infoTitle}>Sin pagar:</Text>\r\n                            <Text style={styles.infoText}>{totales.totalPendiente}</Text>\r\n                        </View>\r\n                    </View>\r\n                    <View style={styles.table}>\r\n                        <View style={styles.tableRow}>\r\n                            <Text style={styles.tableColHeader}>Cobros</Text>\r\n                            <Text style={styles.tableColHeader}>Pagados</Text>\r\n                            <Text style={styles.tableColHeader}>Precio Unitario</Text>\r\n                            <Text style={styles.tableColHeader}>Pendientes</Text>\r\n                        </View>\r\n                        {/* {totales.map((item) => ( */}\r\n                        <View style={styles.tableRow} key={totales.totalCobros}>\r\n                            <Text style={styles.tableCol}>{totales.totalPagados}</Text>\r\n                            <Text style={styles.tableCol}>1</Text>\r\n                            <Text style={styles.tableCol}>${totales.totalPendientes}</Text>\r\n                            <Text style={styles.tableCol}>\r\n                                Another Text\r\n                            </Text>\r\n                        </View>\r\n                        {/* ))} */}\r\n                    </View>\r\n                    <Text style={styles.total}>\r\n                        Total:\r\n                    </Text>\r\n                </View>\r\n            </Page>\r\n        </Document>\r\n\r\n    </PDFViewer>\r\n}","import { useEffect, useState } from \"react\";\r\nimport { Button, Modal, Typography, Table } from 'antd'\r\nimport * as FileSaver from 'file-saver';\r\nimport XLSX from \"sheetjs-style\";\r\nimport { sendDataBody, getData, usuario, deleteData } from '../../resources'\r\nimport CorteDocument from \"./corteForPrint\";\r\nconst { Text } = Typography;\r\n\r\nexport default function Detalles(props) {\r\n    const [pacientesData, setPacientesData] = useState([])\r\n    const [isPrinting, setIsPrinting] = useState(false)\r\n\r\n    const [totales, setTotales] = useState({})\r\n    const handleOk = () => { props.setIsModalOpen(false) };\r\n\r\n    useEffect(() => { return getPacientesData() }, [])\r\n\r\n    // Here creates the main data\r\n    useEffect(() => {\r\n        sendDataBody(`balances/ingresos/corte`, props.corte).then(rs => {\r\n            console.log(rs)\r\n            let totalIngresos = 0;\r\n            let totalPendiente = 0;\r\n            let totalCobros = rs.length;\r\n            let totalPagados = 0;\r\n            let totalPendientes = 0;\r\n            let listOfDeudors = [];\r\n            rs.forEach(c => {\r\n                if (c && c.estado === 'pagado') {\r\n                    totalIngresos += c.monto;\r\n                    totalPagados++\r\n                } else {\r\n                    totalPendiente += c.monto;\r\n                    totalPendientes++;\r\n                    listOfDeudors.push(c)\r\n                }\r\n            });\r\n            const totales = {\r\n                ingresosTotales: totalIngresos,\r\n                deudasTotales: totalPendiente,\r\n                cobrosTotales: totalCobros,\r\n                pagados: totalPagados,\r\n                pendientes: totalPendientes,\r\n                listOfDeudors: listOfDeudors\r\n            }\r\n            setTotales(totales)\r\n        })\r\n\r\n\r\n    }, [props.corte])\r\n\r\n\r\n\r\n    // Give me the patients to match names\r\n    const getPacientesData = () => { getData(`mispacientes/${usuario._id}`).then((rs) => { setPacientesData(rs); }) }\r\n    const MatchPatient = ({ paciente }) => {\r\n        const patient = pacientesData.find((p) => paciente === p._id)\r\n        return <div>{patient ? patient.name : <Text disabled>Paciente eliminado o no existente</Text>} <p style={{ fontSize: 10 }}>Tomado de la cita</p></div>\r\n    }\r\n    const columns = [\r\n        {\r\n            title: 'Paciente',\r\n            key: 'cita.paciente',\r\n            dataIndex: 'cita',\r\n            render: (_, record) => {\r\n                if (record.cita) return <MatchPatient paciente={record.cita.usuario} />\r\n                else if (record.paciente) return <>{record.paciente.name}</>\r\n                else return <Text type=\"secondary\"> Sin Paciente</Text>\r\n            },\r\n        },\r\n        {\r\n            title: 'Monto',\r\n            dataIndex: 'monto',\r\n            key: 'monto',\r\n            render: (_, { monto }) => <>${monto}</>\r\n        },\r\n        {\r\n            title: 'Fecha y Hora',\r\n            dataIndex: 'createdAt',\r\n            key: 'createdAt',\r\n            render: (_, { createdAt }) => { return <>{new Date(createdAt).toLocaleString()}</> }\r\n        },\r\n\r\n    ];\r\n\r\n\r\n    const filetype = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8';\r\n    const fileExtextension = '.xlsx';\r\n\r\n    const exportToExcel = async () => {\r\n        const ws = XLSX.utils.json_to_sheet([totales]);\r\n        const wb = { Sheets: { 'data': ws }, SheetNames: ['data'] };\r\n        const excelBuffer = XLSX.write(wb, { bookType: 'xlsx', type: 'array' });\r\n        const data = new Blob([excelBuffer], { type: filetype })\r\n        FileSaver.saveAs(data, 'corte' + new Date().toLocaleDateString() + fileExtextension)\r\n    }\r\n\r\n    return <Modal width={600} title=\"Detalles del corte\" open={props.isModalOpen} onCancel={handleOk} destroyOnClose\r\n        footer={[\r\n            <Button onClick={() => setIsPrinting(!isPrinting)}>{isPrinting ? \"Cancelar Impresion\" : \"Imprimir PDF\"}</Button>,\r\n            <Button onClick={() => exportToExcel()}>Exportar a excel</Button>,\r\n            <Button onClick={handleOk}>Cerrar</Button>\r\n        ]}\r\n    >\r\n        {isPrinting\r\n            ?\r\n            <CorteDocument totales={totales} logo=\"https://api.recreamed.com/images/bd71d914-1f11-4bea-81e5-81b55e11a4e1.jpg\" company='Hospital: ' seller='Médico: ' buyer='Paciente: ' /> :\r\n            <div>\r\n\r\n                <h5>Ingresos </h5>\r\n                <h5>Pagados: {totales.pagados}</h5>\r\n                <h5>Total: <span style={{ color: '#3277a8' }}>${totales.ingresosTotales}</span></h5>\r\n                <br />\r\n                <h5>Pendientes</h5>\r\n                <h5>Total: <span style={{ color: '#eb3d43' }}>${totales.deudasTotales}</span></h5>\r\n\r\n                {\r\n                    totales.listOfDeudors && totales.listOfDeudors.length > 0 && <Table dataSource={totales.listOfDeudors} columns={columns} bordered={false} size='small' />\r\n                }\r\n\r\n            </div>\r\n        }\r\n\r\n    </ Modal>\r\n}\r\n","import { useEffect, useState } from 'react'\r\nimport { Button, Table, Space, Popconfirm } from 'antd'\r\nimport { getData, sendDataBody, usuario } from '../../resources'\r\nimport Loading from '../../loading'\r\nimport Detalles from './details.corte'\r\n\r\nexport default function Cortes() {\r\n\r\n    const [balance, setBalance] = useState({})\r\n    const [cortesData, setCortesData] = useState([])\r\n    const [loading, setLoading] = useState(true)\r\n    // For details modal\r\n    const [corteForDetails, setCorteForDetails] = useState({})\r\n    const [isModalOpen, setIsModalOpen] = useState(false)\r\n    const showModal = (corte) => { setCorteForDetails(corte); setIsModalOpen(true) };\r\n\r\n\r\n    useEffect(() => {\r\n        return getCortesData()\r\n    }, [])\r\n\r\n    const getCortesData = () => {\r\n        getData(`cortes/${usuario._id}`).then((rs) => {\r\n            setCortesData(rs.reverse())\r\n        }).finally(() => setLoading(false))\r\n    }\r\n\r\n    const createCorte = () => {\r\n        const newCorte = {\r\n            medico: usuario._id,\r\n            fecha_inicio: cortesData.length === 0 ? new Date() : cortesData.at(0).fecha_cierre,\r\n            fecha_cierre: new Date(),\r\n            comentario: ''\r\n        }\r\n        console.log('ready to send ', newCorte)\r\n        sendDataBody('cortes/add', newCorte).then((rs) => {\r\n            console.log(rs);\r\n            getCortesData()\r\n        })\r\n    }\r\n\r\n\r\n    const columns = [\r\n        {\r\n            title: 'fecha y hora de Inicio',\r\n            dataIndex: 'fecha_inicio',\r\n            key: 'fecha_inicio',\r\n            render: (_, { fecha_inicio }) => <> {new Date(fecha_inicio).toLocaleString()}</>\r\n        },\r\n        {\r\n            title: 'Fecha y hora de Cierre',\r\n            dataIndex: 'fecha_cierre',\r\n            key: 'fecha_cierre',\r\n            render: (_, { fecha_cierre }) => <> {new Date(fecha_cierre).toLocaleString()}</>\r\n        },\r\n        {\r\n            title: 'Comentario',\r\n            dataIndex: 'comentario',\r\n            key: 'comentario',\r\n        },\r\n        {\r\n            title: 'Acciones',\r\n            key: 'Acciones',\r\n            render: (_, record) => (\r\n                <Space size=\"middle\">\r\n                    <Button onClick={() => { showModal(record) }}>Ver Detalles</Button>\r\n                    {/* <Button onClick={() => console.log(record)}>Editar</Button> */}\r\n                    {/* <Button onClick={() => deleteData(`cortes/remove/${record._id}`)}>Eliminar</Button> */}\r\n                </Space>)\r\n        }\r\n    ];\r\n\r\n    if (loading) return <Loading />\r\n\r\n    return <div className='mainContainer'>\r\n        <div className='fila'>\r\n            <h4>Cortes</h4>\r\n            <Popconfirm\r\n                placement='bottomRight'\r\n                title=\"Crear Corte\"\r\n                description=\"Seguro que quiere crear un corte de caja hasta la fecha y hora actuales?\"\r\n                onConfirm={createCorte}\r\n                onCancel={() => console.log('Cancel create corte')}\r\n                okText=\"Si\"\r\n                cancelText=\"No\"\r\n            >\r\n                <Button type='primary' style={{ marginLeft: 12 }}>{cortesData.length === 0 ? 'Generar Primer Corte' : 'Generar Corte'}</Button>\r\n            </Popconfirm>\r\n        </div>\r\n        <br />\r\n        <Table columns={columns} dataSource={cortesData} />\r\n\r\n        <Detalles corte={corteForDetails} isModalOpen={isModalOpen} setIsModalOpen={setIsModalOpen} />\r\n    </div>\r\n}","import React from 'react'\r\nimport { Button } from 'antd'\r\nimport { Container, Nav, Navbar } from \"react-bootstrap\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport Citas from './citas/citas'\r\nimport Expedientes from './expedientes/expedientes'\r\nimport Perfil from './perfil/perfil'\r\nimport Home from './home/home'\r\nimport icon from '../assets/Icon.png';\r\nimport { Footer, logout } from '../resources'\r\nimport { usuario } from '../resources'\r\nimport MainPacientes from './pacientes/main.pacientes';\r\nimport Escalas from '../escalas/escalasMenu';\r\nimport Balances from './balances/balances';\r\nimport Stripe from './stripe/stripe';\r\nimport Cortes from './cortes/main.cortes';\r\n\r\nfunction Navigator() {\r\n  console.log(\"DoctorApp\", usuario.name)\r\n  return <Navbar bg=\"primary\" variant=\"dark\" expand=\"lg\">\r\n    <Container>\r\n      <img\r\n        src={icon}\r\n        width=\"40\"\r\n        height=\"35\"\r\n        className=\"d-inline-block align-top\"\r\n        alt=\"Recreamed logo\"\r\n        style={{ marginRight: 6 }}\r\n      />\r\n      <Navbar.Brand href=\"#home\" style={{ fontFamily: 'Poppins', color: 'White' }}>\r\n        Bienvenido {usuario.name}\r\n      </Navbar.Brand>\r\n      <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n      <Navbar.Collapse id=\"basic-navbar-nav\">\r\n        <Nav className=\"me-auto\">\r\n          {/* <Nav.Link href=\"/\">Inicio</Nav.Link> */}\r\n          {/* <Nav.Link href=\"/pacientesdash\">PacientesDash</Nav.Link> */}\r\n          <Nav.Link href=\"/pacientes\" >Pacientes</Nav.Link>\r\n          <Nav.Link href=\"/citas\">Citas</Nav.Link>\r\n          <Nav.Link href=\"/escalas\">Escalas</Nav.Link>\r\n          <Nav.Link href=\"/balances\">Ingresos</Nav.Link>\r\n          <Nav.Link href=\"/cortes\">Cortes</Nav.Link>\r\n          {/* <Nav.Link href=\"/expedientes\">Expedientes</Nav.Link> */}\r\n          {/* <Nav.Link href=\"/recetas\">Recetas</Nav.Link> */}\r\n          {/* <Nav.Link href=\"/notas\">Notas</Nav.Link> */}\r\n          {/* <Nav.Link href=\"/historial\">Historiales</Nav.Link> */}\r\n          <Nav.Link href=\"/perfil\">Mi Perfil</Nav.Link>\r\n          {/* <Nav.Link href=\"/stripe\">Stripe</Nav.Link> */}\r\n        </Nav>\r\n      </Navbar.Collapse>\r\n\r\n      <Navbar.Brand href=\"#home\" className=\"justify-content-end\">\r\n        <Button ghost onClick={logout} style={{ marginLeft: 10 }}>Cerrar Sesion</Button>\r\n      </Navbar.Brand>\r\n\r\n    </Container>\r\n  </Navbar>\r\n\r\n}\r\n\r\nexport default function DoctorApp() {\r\n\r\n  return (\r\n    <Router>\r\n      <Navigator />\r\n      <Switch>\r\n\r\n        <Route path=\"/pacientes\">\r\n          <MainPacientes />\r\n        </Route>\r\n\r\n        <Route path=\"/citas\">\r\n          <Citas />\r\n        </Route>\r\n\r\n        <Route path=\"/expedientes\">\r\n          <Expedientes />\r\n        </Route>\r\n\r\n        {/* <Route path=\"/Recetas\">\r\n          <Recetas />\r\n        </Route> */}\r\n\r\n        <Route path=\"/perfil\">\r\n          <Perfil />\r\n        </Route>\r\n\r\n        <Route path=\"/balances\">\r\n          <Balances />\r\n        </Route>\r\n\r\n        <Route path=\"/cortes\">\r\n          <Cortes />\r\n        </Route>\r\n\r\n        {/* Teporaty stripe */}\r\n        {/* <Route path=\"/stripe\">\r\n          <Stripe/>\r\n        </Route> */}\r\n\r\n        <Route path=\"/escalas\">\r\n          {/* This is taken from escalas directory*/}\r\n          <Escalas />\r\n        </Route>\r\n\r\n        <Route path=\"/\">\r\n          <MainPacientes />\r\n        </Route>\r\n\r\n      </Switch>\r\n\r\n      <Footer />\r\n    </Router>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { Form, Input, Button, message } from 'antd'\r\nimport { InputNumber, Select } from 'antd';\r\nimport { S_API, usuario, estados } from '../../resources'\r\n\r\nconst { Option } = Select;\r\n\r\nexport default function Register() {\r\n\r\n  const [form] = Form.useForm();\r\n\r\n  const onFinish = (values) => {\r\n    values.avatar = 'https://';\r\n    values.estatus = '1';\r\n    values.rol = 'Paciente';\r\n    values.password = values.telefono;\r\n    values.universidad = '';\r\n    values.certificacion = '';\r\n    values.cedula = '';\r\n    values.horarios = [];\r\n    values.medicos_asignados = [usuario._id];\r\n\r\n    delete values.prefix;\r\n\r\n    console.log(values)\r\n    fetch(S_API + 'register', {\r\n      method: 'POST',\r\n      body: JSON.stringify(values),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => { console.log('Success:', response); message.success(response.message || response.error); })\r\n      .catch(error => console.error('Error:', error))\r\n  };\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo);\r\n  };\r\n\r\n  const prefixSelector = (\r\n    <Form.Item name=\"prefix\" noStyle>\r\n      <Select\r\n        style={{\r\n          width: 70,\r\n        }}\r\n      >\r\n        <Option value=\"+52\">+52</Option>\r\n      </Select>\r\n    </Form.Item>\r\n  );\r\n  const suffixSelector = (\r\n    <Form.Item name=\"suffix\" noStyle>\r\n      <Select\r\n        style={{\r\n          width: 70,\r\n        }}\r\n      >\r\n        <Option value=\"USD\">$</Option>\r\n        <Option value=\"CNY\">¥</Option>\r\n      </Select>\r\n    </Form.Item>\r\n  );\r\n  return (\r\n    <div>\r\n      <h4>Registrar Paciente</h4>\r\n      <br />\r\n      <Form\r\n        // {...formItemLayout}\r\n        labelCol={{ span: 6 }} wrapperCol={{ span: 16 }}\r\n        form={form}\r\n        name=\"register\"\r\n        onFinish={onFinish}\r\n        initialValues={{\r\n          residence: ['zhejiang', 'hangzhou', 'xihu'],\r\n          prefix: '52',\r\n        }}\r\n        scrollToFirstError\r\n      >\r\n        <Form.Item\r\n          name=\"email\"\r\n          label=\"Correo\"\r\n          rules={[\r\n            {\r\n              type: 'email',\r\n              message: 'The input is not valid E-mail!',\r\n            },\r\n            {\r\n              required: true,\r\n              message: 'Please input your E-mail!',\r\n            },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        {/* <Form.Item name=\"password\" label=\"Contraseña\" rules={[{ required: true, message: 'Por favor ingrese su contraseña!', },]} hasFeedback >\r\n          <Input.Password />\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"confirm\"\r\n          label=\"Confirmar contraseña\"\r\n          dependencies={['password']}\r\n          hasFeedback\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Please confirm your password!',\r\n            },\r\n            ({ getFieldValue }) => ({\r\n              validator(_, value) {\r\n                if (!value || getFieldValue('password') === value) {\r\n                  return Promise.resolve();\r\n                }\r\n                return Promise.reject(new Error('Las contraseñas deben coincidir!'));\r\n              },\r\n            }),\r\n          ]}\r\n        >\r\n          <Input.Password />\r\n        </Form.Item> */}\r\n\r\n        <Form.Item\r\n          name=\"telefono\"\r\n          label=\"Telefono\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Please input your phone number!',\r\n            },\r\n          ]}\r\n        >\r\n          <Input\r\n            addonBefore={prefixSelector}\r\n            style={{\r\n              width: '100%',\r\n            }}\r\n          />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"name\"\r\n          label=\"Nombre\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Ingresa Nombre y apellidos',\r\n            },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n\r\n\r\n        <Form.Item\r\n          name=\"calle\"\r\n          label=\"Calle\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Ingresa calle',\r\n              whitespace: true,\r\n            },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"numexterior\"\r\n          label=\"Num Exterior\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Ingresa numero exterior',\r\n            },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"numinterior\"\r\n          label=\"Num Interior\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Ingresa numinterior',\r\n            },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label=\"Colonia\"\r\n          name=\"colonia\"\r\n          rules={[{ required: true, message: 'Please input your colobnia!' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"estado\" label=\"Estado\" rules={[{ required: true, message: 'Apellido materno', },]}>\r\n          <Select placeholder=\"Elije tu estado\" showSearch>\r\n            {estados.map(e => <Option value={e}>{e}</Option>)}\r\n          </Select>\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"municipio\"\r\n          label=\"Municipio\"\r\n          rules={[{ required: true, message: 'Ingresa tu municipio' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item name=\"codigopostal\" label=\"Codigo Postal\" rules={[{ required: true, message: 'Ingresa codigopostal', },]}>\r\n          <InputNumber addonAfter={suffixSelector} style={{ width: '100%', }} />\r\n        </Form.Item>\r\n        {/* <Form.Item\r\n          name=\"certificacion\"\r\n          label=\"Certificacion\"\r\n          rules={[{ required: true, message: 'Ingresa tu certificacion' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item> */}\r\n        {/* <Form.Item\r\n          name=\"universidad\"\r\n          label=\"Universidad\" rules={[{ required: true, message: 'Ingresa tu universidad' }]} >\r\n          <Input />\r\n        </Form.Item> */}\r\n\r\n        <Form.Item >\r\n          <Button type=\"primary\" htmlType=\"submit\">\r\n            Registrar\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n","import React, { Component, useState, useEffect } from 'react'\r\nimport { Table } from 'antd'\r\nimport { API } from '../../resources'\r\nimport Loading from '../../loading'\r\nimport { usuario } from '../../resources'\r\n\r\n\r\nexport default function Dash() {\r\n\r\n  const [pacientesData, setPacientesData] = useState([])\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const [view, setview] = useState('tabla')\r\n  const views = {\r\n    'tabla': 'tabla'\r\n  }\r\n\r\n  useEffect(() => {\r\n    getPacientesData()\r\n  }, [])\r\n\r\n  const getPacientesData = () => {\r\n    fetch(API + `mispacientes/${usuario._id}`)\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        console.log(data); setPacientesData(data);\r\n      })\r\n      .finally(() => setIsLoading(false))\r\n  }\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Nombre',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      render: (text)=><a href=\"detalles\">{text}</a>\r\n    },\r\n    // {\r\n    //   title: 'Edad',\r\n    //   dataIndex: 'age',\r\n    //   key: 'age',\r\n    // },\r\n    {\r\n      title: 'Medico',\r\n      dataIndex: 'id_medicoasignado',\r\n      key: 'id_medicoasignado',\r\n    },\r\n    {\r\n      title: 'Municipio',\r\n      dataIndex: 'municipio',\r\n      key: 'municipio',\r\n    },\r\n    {\r\n      title: 'Calle',\r\n      dataIndex: 'calle',\r\n      key: 'calle',\r\n    },\r\n    {\r\n      title: 'N Exterior',\r\n      dataIndex: 'numexterior',\r\n      key: 'numexterior',\r\n    },\r\n    {\r\n      title: 'Telefono',\r\n      dataIndex: 'telefono',\r\n      key: 'telefono',\r\n    },\r\n\r\n  ];\r\n\r\n  const tablaPacientes = () => {\r\n\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h4>Pacientes</h4>\r\n      {\r\n        isLoading ? <Loading /> :\r\n          <Table dataSource={pacientesData} columns={columns} />\r\n      }\r\n      \r\n    </div>\r\n  )\r\n\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Button, Form, Input, Select, message } from 'antd';\r\nimport { API } from '../../resources';\r\nimport { usuario } from '../../resources';\r\nconst { Option } = Select;\r\n\r\n\r\nexport default function MovePatients() {\r\n    const [pacientesData, setPacientesData] = useState([]);\r\n    const [medicosData, setMedicosData] = useState([]);\r\n\r\n    useEffect(() => {\r\n        getPacientesData()\r\n        getMedicosData()\r\n    }, [])\r\n\r\n    const getPacientesData = () => {\r\n        fetch(API + `mispacientes/${usuario._id}`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                console.log(\"Pacientes: \", data);\r\n                setPacientesData(data);\r\n                // setILoading(false);\r\n            });\r\n    }\r\n\r\n    const getMedicosData = () => {\r\n        fetch(API + `users_by_rol/Medico`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                console.log(data);\r\n                setMedicosData(data);\r\n                // setILoading(false);\r\n            });\r\n    }\r\n\r\n    const onFinish = (values) => {\r\n        // console.log('Valores:', values);\r\n        const userFound = pacientesData.find(p => p._id === values.id_usuario);\r\n        let userMedicos = userFound.medicos_asignados;\r\n        userMedicos.push(values.medico);\r\n        const postBody = { medicos_asignados: userMedicos }\r\n        fetch(API + `users/updateMedicos/${values.id_usuario}`, { \r\n            method: 'PUT',\r\n            body: JSON.stringify(postBody),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then(res => res.json())\r\n            .then(response => { console.log('Success:', response); message.success(response.message || response.error); })\r\n            .catch(error => console.error('Error:', error))\r\n    };\r\n\r\n    const onFinishFailed = (errorInfo) => {\r\n        console.log('Failed:', errorInfo);\r\n    };\r\n\r\n\r\n\r\n    //Select paciente widget\r\n    function onChange(value) {\r\n        console.log(`selected ${value}`);\r\n    }\r\n    function onSearch(val) {\r\n        console.log('search:', val);\r\n    }\r\n    //End of select paciente widget\r\n    return (\r\n        <div>\r\n            <h4> Asignar pacientes a otro médico </h4>\r\n            <br />\r\n            <Form name=\"expediente\" labelCol={{ span: 8 }} wrapperCol={{ span: 12 }} onFinish={onFinish} onFinishFailed={onFinishFailed} autoComplete=\"off\" >\r\n\r\n                <Form.Item label=\"Paciente\" name=\"id_usuario\" rules={[{ required: true, message: 'Selecciona Usuario' }]} >\r\n                    <Select\r\n                        showSearch\r\n                        placeholder=\"Select a person\"\r\n                        optionFilterProp=\"children\"\r\n                        onChange={onChange}\r\n                        onSearch={onSearch}\r\n                    >\r\n                        {\r\n                            pacientesData.map(p => <Option value={p._id}>{p.name}</Option>)\r\n                        }\r\n                    </Select>\r\n                </Form.Item>\r\n                <Form.Item label=\"Medico\" name=\"medico\" rules={[{ required: true, message: 'Ingresa RFC' }]} >\r\n                    <Select\r\n                        showSearch\r\n                        placeholder=\"Select a person\"\r\n                        optionFilterProp=\"children\"\r\n                        onChange={onChange}\r\n                        onSearch={onSearch}\r\n                    >\r\n                        {\r\n                            medicosData.map(p => <Option value={p._id}>{p.name}</Option>)\r\n                        }\r\n                    </Select>\r\n                </Form.Item>\r\n\r\n                <Form.Item wrapperCol={{ offset: 8, span: 16 }}>\r\n                    <Button type=\"primary\" htmlType=\"submit\" form='expediente'>\r\n                        Guardar\r\n                    </Button>\r\n                </Form.Item>\r\n            </Form>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\n\r\nexport default function DetallesPaciente() {\r\n  return (\r\n    <div>DetallesPaciente</div>\r\n  )\r\n}\r\n","import { React, Component } from 'react';\r\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\r\nimport { Layout, Menu } from 'antd';\r\nimport { UserOutlined, UserAddOutlined, MenuOutlined, SwapOutlined } from '@ant-design/icons';\r\n\r\nimport Register from './register.patient';\r\nimport Dash from './dash.patients';\r\nimport MovePatients from './move.patients';\r\nimport DetallesPaciente from './detalles.paciente';\r\n\r\nconst { Header, Content, Footer, Sider } = Layout;\r\n\r\nclass SideMenu extends Component {\r\n  handleClick = e => {\r\n    console.log('click ', e);\r\n  };\r\n\r\n  state = {\r\n    collapsed: false,\r\n  };\r\n\r\n  onCollapse = (collapsed) => {\r\n    this.setState({ collapsed });\r\n  }\r\n  toggle = () => {\r\n    this.setState({\r\n      collapsed: !this.state.collapsed,\r\n    });\r\n  }\r\n  render() {\r\n    return (\r\n      <Router>\r\n        <Layout style={{ minHeight: '100vh' }}>\r\n          <Sider\r\n            theme=\"light\"\r\n            collapsible\r\n            collapsed={this.state.collapsed}\r\n            onCollapse={this.onCollapse}>\r\n            <div className=\"logo\" />\r\n            <Menu defaultSelectedKeys={['1']} mode=\"inline\">\r\n              <Menu.Item icon={ <UserOutlined /> } key=\"1\">\r\n                <span>Pacientes</span>\r\n                <Link to=\"/pacientes\" />\r\n              </Menu.Item>\r\n              <Menu.Item icon={ <UserAddOutlined /> } key=\"2\">\r\n                <span>Registrar Paciente</span>\r\n                <Link to=\"/registrar\" />\r\n              </Menu.Item>\r\n              <Menu.Item icon={ <SwapOutlined />} key=\"3\">\r\n                <span>Re-asignar Paciente</span>\r\n                <Link to=\"/mover\" />\r\n              </Menu.Item>\r\n              <Menu.Item icon={ <SwapOutlined />} key=\"4\">\r\n                <span>Detalles</span>\r\n                <Link to=\"/detalles\" />\r\n              </Menu.Item>\r\n            </Menu>\r\n          </Sider>\r\n          <Layout>\r\n\r\n            <Header style={{ background: '#fff', padding: 0, paddingLeft: 16 }}>\r\n              <MenuOutlined className=\"trigger\" style={{ cursor: 'pointer' }} onClick={this.toggle} />\r\n            </Header>\r\n\r\n            <Content style={{ margin: '24px 16px', padding: 24, background: '#fff', minHeight: 280 }}>\r\n              <Route exact path=\"/registrar\" component={Register} />\r\n              <Route path=\"/pacientes\" component={Dash} />\r\n              <Route path=\"/detalles\" component={DetallesPaciente} />\r\n              <Route path=\"/mover\" component={MovePatients} />\r\n            </Content>\r\n\r\n            <Footer style={{ textAlign: 'center' }}>\r\n              RECREAMED ©2021 Created by Realidad Creativa\r\n            </Footer>\r\n          </Layout>\r\n\r\n        </Layout>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SideMenu\r\n\r\n\r\n","import React, { Component } from 'react'\r\n// import {Card } from 'antd'\r\nimport SideMenu from './side.patients';\r\n\r\nexport class Patients extends Component {\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div>\r\n                            <SideMenu />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Patients\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Modal, Form, Select, Input, Button, message, Switch, DatePicker } from 'antd'\r\nimport { sendDataBody, updateData, ids_hospitales } from '../../resources';\r\n\r\nexport function CreateCitaForm(props) {\r\n\r\n    // const [medicosLoading, setMedicosLoading] = useState(true)\r\n    const [medicos, setMedicos] = useState([])//Set Medicos for select\r\n    // const [medicosData, setMedicosData] = useState([]) // List of all Medicos\r\n    const [servicios, setServicios] = useState([])\r\n\r\n    const [errorMessage, setErrorMessage] = useState(\"\")\r\n    const [enableCreateCita, setEnableCreateCita] = useState(true)\r\n    // Body of cita\r\n    const [isOnline, setIsOnline] = useState(false)\r\n    const [costo, setCosto] = useState(0)\r\n\r\n    const [costoBaseCita, setCostoBaseCita] = useState(0)\r\n    const [usesCostoBase, setUsesCostoBase] = useState(false)\r\n\r\n\r\n    useEffect(() => {\r\n        // getDoctorsData()\r\n        console.log('Received Cita for edit', props.cita)\r\n        if (props.cita && props.cita.usuario) {\r\n            handlePatientChange(props.cita.usuario)\r\n\r\n            handleMedicochange(props.cita.medico)\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (props.cita && props.cita.medico) handleMedicochange(props.cita.medico)\r\n    }, [medicos])\r\n\r\n\r\n\r\n\r\n    // Form Methods\r\n    const onFinish = (values) => {\r\n        values.sucursal = props.hospital;\r\n        delete values.tratamiento;\r\n        values.servicio = values.servicio.title;\r\n        // delete values.servicio;\r\n\r\n        // Handle if its updating or creating cita\r\n        console.log('cita ready', values)\r\n        if (props.cita) {\r\n            updateData(`citas/update/${props.cita._id}`, values).then((response) => {\r\n                // message.success(response.message || response.error);\r\n                props.setIsModalOpen(false);\r\n                props.setEditingCita(false);\r\n            }).finally(() => { props.getCitasData(); })\r\n        } else {\r\n            sendDataBody('citas/add', values).then((response) => {\r\n                message.success(response.message || response.error);\r\n                createBalance(response.id_nueva_cita, values.medico, values.fecha_hora, values.servicio)\r\n            }).finally(() => { props.getCitasData(); props.setIsModalOpen(false) })\r\n        }\r\n    }\r\n\r\n    const createBalance = (_cita, medico, _fecha_hora, _concepto) => {\r\n        const balanceBody = {\r\n            tipo: 'ingreso',\r\n            medico: medico,\r\n            cita: _cita,\r\n            monto: costo,\r\n            forma_de_pago: 'efectivo',\r\n            fecha_hora: _fecha_hora,\r\n            estado: 'pendiente',\r\n            concepto: _concepto\r\n        }\r\n        console.log('Balance ready to send: ', balanceBody)\r\n        sendDataBody('balances/add', balanceBody).then((rs) => { message.success(rs.message || rs.error); console.log(rs) })\r\n    }\r\n\r\n\r\n    const onFinishFailed = (errorInfo) => {\r\n        console.log('Failed:', errorInfo);\r\n    };\r\n\r\n    const handlePatientChange = (value) => {\r\n        const found = props.pacientesData.find((p) => p._id === value);\r\n        if (found) {\r\n            setEnableCreateCita(true)\r\n            let { medicos_asignados } = found\r\n            medicos_asignados.forEach((m) => {\r\n                m.label = m.name; m.value = m._id\r\n            });\r\n\r\n            console.log('Found', found)\r\n            console.log('meds', medicos_asignados)\r\n            setMedicos(medicos_asignados);\r\n\r\n        } else {\r\n            setEnableCreateCita(false)\r\n            setErrorMessage(\"Usuario no encontrado\")\r\n        }\r\n    };\r\n\r\n    const onSearchPatient = (value) => { };\r\n\r\n    const handleMedicochange = (_id) => {\r\n        console.log('selected', _id)\r\n        console.log('all medics handle med chang', medicos)\r\n        // Populate the \"servicio\" select\r\n        if (medicos.length > 0) {\r\n            let found = medicos.find((m) => m._id === _id)\r\n            if (found && found.configuracion.tratamientos_ofrecidos) {\r\n                setErrorMessage(\"\")\r\n                setEnableCreateCita(true)\r\n                if (props.enableCreateCita) props.setEditingCita(false)\r\n                let { configuracion: { tratamientos_ofrecidos } } = found;\r\n                console.log(\"found tr\", tratamientos_ofrecidos)\r\n                tratamientos_ofrecidos.forEach(t => {\r\n                    t.label = `${t.tratamiento} - $${t.costo}`; t.value = t.costo; t.title = t.tratamiento;\r\n                });\r\n                const { configuracion: { costo_cita = 0 } } = found;\r\n                setCostoBaseCita(costo_cita)\r\n                setServicios(tratamientos_ofrecidos)\r\n            }\r\n            else {\r\n                setEnableCreateCita(false);\r\n                setErrorMessage(\"No se puede crear la cita para este médico, no cuenta con servicios\")\r\n                if (props.enableCreateCita) props.enableCreateCita(false)\r\n            }\r\n            //   \r\n\r\n        }\r\n    }\r\n\r\n    const onSwitch = (checked) => {\r\n        setIsOnline(checked)\r\n    };\r\n\r\n    // Handle change for select servicio\r\n    const handleServicioChange = (selected) => {\r\n\r\n        setCosto(selected.value)\r\n        console.log(`selected service`, selected);\r\n    };\r\n\r\n    const onSwitchCosoBase = (checked) => {\r\n        // if(checked)se\r\n        console.log(`switch to ${checked}`);\r\n        setUsesCostoBase(checked)\r\n    };\r\n\r\n    const timeOptions = [\r\n        { label: 'Media Hora', value: 30 },\r\n        { label: 'Una Hora', value: 60 },\r\n        { label: 'Una Hora y Media', value: 90 },\r\n        { label: 'Dos Horas', value: 120 },\r\n        { label: 'Dos Horas Y Media', value: 150 },\r\n        { label: 'Tres Horas', value: 180 },\r\n        { label: 'Cuatro Horas', value: 210 },\r\n        { label: 'Cuatro Horas y Media', value: 240 },\r\n        { label: 'Cinco Horas', value: 270 },\r\n        { label: 'Cinco Horas y Media', value: 300 },\r\n    ]\r\n\r\n    return <Form name=\"nueva_cita_admin\" labelCol={{ span: 8 }} wrapperCol={{ span: 12 }} onFinish={onFinish} onFinishFailed={onFinishFailed} autoComplete=\"off\"\r\n        initialValues={props.cita ? props.cita : { isOnline: false, tratamiento: 'Sin servicio', fecha_hora: props.fecha_hora, duracion: 60 }}>\r\n\r\n        <div>{errorMessage}</div>\r\n\r\n        <Form.Item label=\"Paciente\" name=\"usuario\" rules={[{ required: true, message: 'Selecciona Usuario' }]} >\r\n            <Select options={props.pacientesData} onChange={handlePatientChange} optionFilterProp=\"children\" onSearch={onSearchPatient} showSearch\r\n                filterOption={(input, option) => (option?.label ?? '').toLowerCase().includes(input.toLowerCase())} />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Medico\" name=\"medico\" rules={[{ required: true, message: 'Selecciona Medico' }]} >\r\n            <Select options={medicos} onChange={handleMedicochange} />\r\n        </Form.Item>\r\n\r\n\r\n        <Form.Item label=\"VideoLlamada\" name=\"isOnline\" >\r\n            <Switch onChange={onSwitch} />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Comentarios\" name=\"comentarios\" rules={[{ required: false, message: 'Ingresa Comentarios' }]} >\r\n            <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Fecha y Hora\" name=\"fecha_hora\" rules={[{ required: false, message: 'Selecciona Fecha y Hora' }]} >\r\n            <DatePicker showTime format=\"DD/MM/YYYY HH:mm\" use12Hours={true} />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Duracion\" name=\"duracion\" rules={[{ required: true, message: 'Selecciona la duracion de la cita' }]} >\r\n            <Select options={timeOptions} />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Servicio\" name=\"servicio\" rules={[{ required: true, message: 'Selecciona Medico' }]} >\r\n            <Select options={servicios} onChange={handleServicioChange} labelInValue />\r\n        </Form.Item>\r\n\r\n        <Form.Item label={`costo de la cita $${costoBaseCita}`} >\r\n            <Switch onChange={onSwitchCosoBase} />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n            wrapperCol={{\r\n                offset: 8,\r\n                span: 16,\r\n            }}\r\n        >\r\n            <div className='fila'>\r\n                <h6>Costo Total: ${usesCostoBase ? (costo + costoBaseCita) : costo} </h6>\r\n            </div>\r\n        </Form.Item>\r\n\r\n        {\r\n            // Only if updating cita\r\n            props.cita && <div>\r\n\r\n\r\n                <Form.Item\r\n                    wrapperCol={{\r\n                        offset: 8,\r\n                        span: 16,\r\n                    }}\r\n                >\r\n                    <Button type=\"primary\" htmlType=\"submit\" form='nueva_cita_admin' disabled={!enableCreateCita}>\r\n                        Guardar\r\n                    </Button>\r\n                </Form.Item>\r\n            </div>\r\n        }\r\n\r\n    </Form>\r\n}\r\n\r\nexport default function CreateCita(props) {\r\n\r\n    const [enableCreate, setEnableCreate] = useState(true)\r\n    // Handle Modal Visibility\r\n    const handCreateleOk = () => { props.setIsModalOpen(false) }\r\n    const handCreateleCancel = () => { props.setIsModalOpen(false) }\r\n\r\n\r\n    return (\r\n        <Modal title=\"Nueva Cita\" open={props.isOpenModal} onOk={handCreateleOk} onCancel={handCreateleCancel} destroyOnClose\r\n            footer={[\r\n                <Button onClick={handCreateleCancel}>Cancelar</Button>,\r\n                <Button type=\"primary\" htmlType=\"submit\" form='nueva_cita_admin' disabled={!enableCreate}>\r\n                    Guardar\r\n                </Button>\r\n            ]}\r\n        >\r\n            {/* <CreateCitaForm setIsModalOpen={props.setIsModalOpen} hospital={props.hospital} fecha_hora={props.fecha_hora} getCitasData={props.getCitasData} pacientesData={props.pacientesData} setEnableCreateCita={setEnableCreate} /> */}\r\n            <CreateCitaForm {...props} />\r\n\r\n        </Modal>\r\n    )\r\n}\r\n\r\n\r\n    // Create the respective balance for cita\r\n    // const createBalance = (_cita, monto) => {\r\n    //     const balanceBody = {\r\n    //         medico: medico,\r\n    //         cita: _cita,\r\n    //         monto: monto,\r\n    //         forma_de_pago: 'efectivo',\r\n    //         estado: 'pendiente',\r\n    //     }\r\n    //     console.log('Balance ready to send: ', balanceBody)\r\n    //     sendDataBody('balances/add', balanceBody).then((rs) => console.log(rs))\r\n    // }","import React, { useState, useEffect } from 'react';\r\nimport { Modal, Button, Popconfirm } from \"antd\";\r\nimport { deleteData, getData, sendDataBody, ids_hospitales } from '../../resources';\r\nimport { Calendar, dayjsLocalizer } from 'react-big-calendar';\r\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\r\n\r\nimport CreateCita, { CreateCitaForm } from './create-cita-for-medic';\r\nimport dayjs from 'dayjs';\r\n\r\nconst localizer = dayjsLocalizer(dayjs)\r\n\r\nexport default function HospitalTab(props) {\r\n    const [citaForEdit, setCitaForEdit] = useState({})\r\n    const [citasData, setCitasData] = useState([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const showModal = () => { setIsModalOpen(true) }\r\n    const handleOk = () => { setIsModalOpen(false); setEditingCita(false) }\r\n    const handleCancel = () => { setIsModalOpen(false); setEditingCita(false) }\r\n    const [editingCita, setEditingCita] = useState(false)\r\n\r\n    // Tools for createCita Modal\r\n    const [fecha_hora, setFecha_hora] = useState('')\r\n    const [isCreateModalOpen, setIsCreateModalOpen] = useState(false)\r\n    // for pass to create cita model\r\n    const [pacientesData, setPacientesData] = useState([])\r\n    const [medicosData, setMedicosData] = useState([])\r\n\r\n    const findPatientsOfMyMedicos = (pacientesData) => {\r\n        let dl = [];\r\n        // Check on each horario of each medico of medicos asignados of patient to see if share sucursal with my horarios as admin\r\n        pacientesData.forEach(paciente => {\r\n            paciente.medicos_asignados.forEach(med => {\r\n                med.horarios.forEach(h => {\r\n                    if (h.sucursal === props.id_hospital && !dl.includes(paciente)) { paciente.label = paciente.name; paciente.value = paciente._id; dl.push(paciente) }\r\n                })\r\n            });\r\n        });\r\n        return dl;\r\n    }\r\n\r\n    const getPacientesData = () => {\r\n        // First of all, get pacientes data for pass to the create cita component\r\n        getData('users_by_rol/Paciente').then((rs) => {\r\n            setPacientesData(findPatientsOfMyMedicos(rs))\r\n        })\r\n    }\r\n\r\n    useEffect(() => {  getPacientesData(); getCitasData() }, [])\r\n\r\n    const getCitasData = () => {\r\n        getData(`citas/sucursal/${props.id_hospital}`).then((rs) => {\r\n            rs.forEach(cita => {\r\n                cita.start = new Date(Date.parse(cita.fecha_hora));\r\n                const endDate = new Date(Date.parse(cita.fecha_hora));\r\n                endDate.setTime(endDate.getTime() + 1 * (cita.duracion ?? 60) * 60 * 1000)\r\n                cita.end = new Date(Date.parse(endDate));\r\n                cita.title = cita.usuario?.name;\r\n                cita.key = cita._id;\r\n            });\r\n            setCitasData(rs)\r\n        }).finally(() => setLoading(false))\r\n    }\r\n\r\n    // Select cita to show details and show confirm button\r\n    const selectEvent = (e) => {\r\n        if (!e.doctor) e.doctor = e.medico; // For details\r\n        if (!e.paciente) e.paciente = e.usuario; // For details\r\n        if (e.medico && e.medico._id) e.medico = e.medico._id;  // For edit\r\n        if (e.usuario && e.usuario._id) e.usuario = e.usuario._id;  // For edit\r\n        e.fecha_hora = dayjs(e.fecha_hora) //For edit\r\n        console.log('Fecha al editar: ', e.fecha_hora)\r\n        setCitaForEdit(e)\r\n        if (citaForEdit) showModal()\r\n    }\r\n\r\n    const handleSlotSelection = ({ start, end, action }) => {\r\n        // setFecha_hora(new Date(start).toISOString())\r\n        setFecha_hora(dayjs(start))\r\n        console.log('Fecha al crear: ', dayjs(start))\r\n        setIsCreateModalOpen(true)\r\n        return { style: { backgroundColor: 'red' } };\r\n    };\r\n    // Delete button\r\n    const confirm = (e) => {\r\n        deleteData(`citas/remove/${citaForEdit._id}`).then((rs) => { getCitasData(); handleCancel() })\r\n        deleteData(`balances/remove/cita/${citaForEdit._id}`)\r\n    };\r\n\r\n    const cancel = (e) => { };\r\n\r\n    return loading ? <p>Cargando...</p> : <div>\r\n        <br />\r\n        <h6>Citas del hospital {props.hospital}</h6>\r\n        <br />\r\n        <Calendar\r\n            scrollToTime={new Date(Date.now())}\r\n            selectable='true'\r\n            localizer={localizer}\r\n            events={citasData}\r\n            startAccessor=\"start\"\r\n            endAccessor=\"end\"\r\n            style={{ height: 500 }}\r\n            messages={{\r\n                next: \"Sig\",\r\n                previous: \"Ant\",\r\n                today: \"Hoy\",\r\n                month: \"Mes\",\r\n                week: \"Semana\",\r\n                day: \"Día\"\r\n            }}\r\n            defaultView=\"week\"\r\n            onDoubleClickEvent={(e) => console.log(e)}\r\n            onSelectEvent={selectEvent}\r\n            onSelecting={(e) => console.log(e)}\r\n            // onSelectSlot={handleSlotSelection}\r\n            onSelectSlot={handleSlotSelection}\r\n        />\r\n\r\n\r\n        <Modal title=\"Detalles Cita\" open={isModalOpen} onOk={handleOk} onCancel={handleCancel} destroyOnClose\r\n            footer={[\r\n                // <Popconfirm\r\n                //     title=\"Eliminar Cita\"\r\n                //     description=\"Seguro que quiere eliminar la cita?\"\r\n                //     onConfirm={confirm}\r\n                //     onCancel={cancel}\r\n                //     okText=\"Si\"\r\n                //     cancelText=\"No\"\r\n                // >\r\n                //     <Button danger>Eliminar</Button>\r\n                // </Popconfirm>\r\n                //,\r\n\r\n                <Button onClick={() => setEditingCita(!editingCita)}>{editingCita ? \"Cancelar\" : \"Modificar\"}</Button>,\r\n                <Button onClick={handleCancel}>Cerrar</Button>\r\n            ]}>\r\n\r\n            {\r\n                editingCita ?\r\n                    <CreateCitaForm cita={citaForEdit} setIsModalOpen={setIsModalOpen} getCitasData={getCitasData} setEditingCita={setEditingCita} hospital={props.id_hospital} pacientesData={pacientesData} />\r\n                    : <div>{citaForEdit && <div>\r\n                        <p><strong>Medico </strong>{citaForEdit.doctor ? citaForEdit.doctor.name : 'Sin medico'}</p>\r\n                        <p><strong>Paciente </strong>{citaForEdit.paciente ? citaForEdit.paciente.name : 'Sin paciente'}</p>\r\n                        <p><strong>Fecha </strong>{new Date(citaForEdit.fecha_hora).toLocaleDateString()}</p>\r\n                        <p><strong>Hora </strong>{new Date(citaForEdit.fecha_hora).toLocaleTimeString()}</p>\r\n                        <p><strong>Servicio </strong>{citaForEdit.servicio}</p>\r\n                        <p><strong>Comentarios </strong>{citaForEdit.comentarios}</p>\r\n                        {/* <Button type='primary' onClick={confirmService}>Confirmar Servicio</Button>, */}\r\n                    </div>\r\n                    }\r\n                    </div>\r\n            }\r\n        </Modal>\r\n\r\n        <CreateCita setIsModalOpen={setIsCreateModalOpen} isOpenModal={isCreateModalOpen} hospital={props.id_hospital} fecha_hora={fecha_hora} getCitasData={getCitasData} pacientesData={pacientesData} setEditingCita={setEditingCita}/>\r\n    </div>\r\n}","import React from 'react'\r\nimport { Tabs } from 'antd'\r\nimport { myHospitals } from '../../resources'\r\nimport HospitalTab from './hospital-tab.citas';\r\n\r\nexport default function Citas() {\r\n\r\n    // Create items for TABS\r\n    myHospitals.forEach(h => {\r\n        h.label = h.nombre;\r\n        h.key = h._id;\r\n        h.children = <HospitalTab hospital={h.nombre} id_hospital={h._id} />\r\n    });\r\n\r\n    return (\r\n        <div className='mainContainer'>\r\n            <h4>Citas</h4>\r\n            <Tabs defaultActiveKey=\"1\" items={myHospitals} />\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { API, getDataWithTrigger } from '../../resources';\r\nimport { getData } from '../../resources';\r\nimport { Button, Modal, Form, Input, Select, message } from 'antd';\r\nconst { Option } = Select;\r\n\r\nexport default function CreateExpedient(props) {\r\n    //PacientesData ya viene en props\r\n    const [historiasData, sethistoriasData] = useState([])\r\n    const [historiasLoading, sethistoriasLoading] = useState(true)\r\n    const [notasData, setNotasData] = useState([])\r\n    const [notasLoading, setNotasLoading] = useState(true)\r\n    const [recetasData, setRecetasData] = useState([])\r\n    const [recetasLoading, setRecetasLoading] = useState(true)\r\n\r\n    useEffect(() => {\r\n        getData('historias').then(rs => {sethistoriasData(rs); sethistoriasLoading(false)});\r\n        getData('notas').then(rs => {setNotasData(rs); setNotasLoading(false)});\r\n        getData('recetas').then(rs => {setRecetasData(rs); setRecetasLoading(false)});\r\n    }, [])\r\n\r\n\r\n    //Save expedient\r\n    const onFinish = (values) => {\r\n        console.log('Valores:', values);\r\n        fetch(API + 'expedientes/add', {\r\n            method: 'POST',\r\n            body: JSON.stringify(values),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then(res => res.json())\r\n            .then(response => { console.log('Success:', response); message.success(response.message || response.error); })\r\n            .catch(error => console.error('Error:', error))\r\n        // getExpedientesData() \r\n    };\r\n    const handleOk = () => {\r\n\r\n    };\r\n\r\n    const handleCancel = () => {\r\n        props.setIsModalVisible(false);\r\n    };\r\n\r\n    const onFinishFailed = (errorInfo) => {\r\n        console.log('Failed:', errorInfo);\r\n    };\r\n    return (\r\n        <Modal title=\"Nuevo expediente\" visible={props.isModalVisible} onCancel={handleCancel}\r\n        footer={[\r\n            \r\n        ]}\r\n        >\r\n            <Form name=\"expediente\" labelCol={{ span: 6 }} wrapperCol={{ span: 12 }} onFinish={onFinish} onFinishFailed={onFinishFailed} autoComplete=\"off\" >\r\n                <Form.Item label=\"Paciente\" name=\"usuario\" rules={[{ required: true, message: 'Ingresa RFC' }]} >\r\n                    <Select\r\n                        defaultValue={props.pacientesData[0] && props.pacientesData[0]._id}\r\n                        placeholder='Selecciona un paciente'\r\n                        style={{ width: 200 }}\r\n                    // onChange={handleChange}\r\n                    >\r\n                        {\r\n                            props.pacientesData.map(p => <Option value={p._id}>{p.name}</Option>)\r\n                        }\r\n\r\n                    </Select>\r\n                </Form.Item>\r\n                <Form.Item label=\"Historia Clinica\" name=\"historia\" rules={[{ required: true, message: 'Ingresa RFC' }]} >\r\n                    {\r\n                        historiasLoading ? <Input /> :\r\n                            <Select\r\n                                placeholder='Selecciona una Historia'\r\n                                style={{ width: 200 }}\r\n                            // onChange={handleChange}\r\n                            >\r\n                                {\r\n                                   historiasData.map(h => <Option key={h._id} value={h._id}>{h.historial}</Option>)\r\n                                }\r\n\r\n                            </Select>\r\n                    }\r\n\r\n                </Form.Item>\r\n                <Form.Item label=\"Notas Medicas\" name=\"nota\" rules={[{ required: true, message: 'Ingresa RFC' }]} >\r\n                {\r\n                        notasLoading ? <Input /> :\r\n                            <Select\r\n                                placeholder='Selecciona una Nota'\r\n                                style={{ width: 200 }}\r\n                            // onChange={handleChange}\r\n                            >\r\n                                {\r\n                                   notasData.map(n => <Option key={n._id} value={n._id}>{n.createdAt}</Option>)\r\n                                }\r\n\r\n                            </Select>\r\n                    }\r\n                </Form.Item>\r\n                <Form.Item label=\"Receta\" name=\"receta\" rules={[{ required: true, message: 'Ingresa RFC' }]} >\r\n                {\r\n                        recetasLoading ? <Input /> :\r\n                            <Select\r\n                                placeholder='Selecciona una Receta'\r\n                                style={{ width: 200 }}\r\n                            // onChange={handleChange}\r\n                            >\r\n                                {\r\n                                   recetasData.map(r => <Option key={r._id} value={r._id}>{r.prescripcion}</Option>)\r\n                                }\r\n\r\n                            </Select>\r\n                    }\r\n                </Form.Item>\r\n\r\n                <Form.Item wrapperCol={{ offset: 8, span: 16 }}>\r\n                    <Button type=\"primary\" htmlType=\"submit\" form='expediente'>\r\n                        Guardar\r\n                    </Button>\r\n                </Form.Item>\r\n               \r\n                <Form.Item wrapperCol={{ offset: 8, span: 16 }}>\r\n                    <Button type=\"primary\" htmlType=\"submit\" form='expediente'>\r\n                        Cancelar\r\n                    </Button>\r\n                </Form.Item>\r\n            </Form>\r\n        </Modal>\r\n    )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Form, Input, Button, message, Select, Upload, Space } from 'antd';\r\nimport { API, usuario } from '../../resources';\r\nimport { MinusCircleOutlined, PlusOutlined, UploadOutlined, InboxOutlined } from '@ant-design/icons';\r\nimport { diagnosticos } from '../../assets/diagnosticos2';\r\nconst { Option, OptGroup } = Select;\r\nconst { Dragger } = Upload;\r\nconst { TextArea } = Input;\r\n\r\nconst handleChange = (value) => {\r\n    // Select diagnostic\r\n    console.log(`selected ${value}`);\r\n};\r\n\r\nconst onFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo);\r\n};\r\n\r\n\r\n//List of Estudios styles\r\nconst formItemLayout = {\r\n    labelCol: {\r\n        xs: {\r\n            span: 24,\r\n        },\r\n        sm: {\r\n            span: 4,\r\n        },\r\n    },\r\n    wrapperCol: {\r\n        xs: {\r\n            span: 24,\r\n        },\r\n        sm: {\r\n            span: 20,\r\n        },\r\n    },\r\n};\r\nconst formItemLayoutWithOutLabel = {\r\n    wrapperCol: {\r\n        xs: {\r\n            span: 24,\r\n            offset: 0,\r\n        },\r\n        sm: {\r\n            span: 20,\r\n            offset: 4,\r\n        },\r\n    },\r\n};\r\n\r\n\r\n\r\nexport function NuevaNota(props) {\r\n    const [estudiosFiles, setEstudiosFiles] = useState([])\r\n\r\n    useEffect(() => {\r\n        console.log('Received nota on props: ', props.nota)\r\n    }, [])\r\n\r\n    // const [pacientesData, setPacientesData] = useState([]);\r\n    const onFinishTest = (values) => {\r\n        // Create Nota\r\n        values.id_medico = usuario._id;\r\n        values.id_usuario = props.paciente;\r\n        values.recetas = [];\r\n        values.estudios = estudiosFiles;\r\n\r\n        console.log('Estudios ready to send: ', values.estudios)\r\n        console.log('ready to send: ', values)\r\n    }\r\n    const onFinish = async (values) => {\r\n        // Create Nota\r\n        values.id_medico = usuario._id;\r\n        values.id_usuario = props.paciente;\r\n        values.recetas = [];\r\n        values.estudios = estudiosFiles;\r\n        console.log('ready To send: ', values)\r\n        const newNota = await fetch(API + 'notas/add', {\r\n            method: 'POST',\r\n            body: JSON.stringify(values),\r\n            headers: { 'Content-Type': 'application/json' }\r\n        }).then(res => res.json())\r\n            .then(response => {\r\n                message.success(response.message || response.error);\r\n                // response.message && response.message === ''\r\n                return response;\r\n            })\r\n            .catch(error => console.error('Error:', error))\r\n\r\n        // Add new nota to received notas\r\n        props.prevExpNotas.push(newNota.id_nota)\r\n        //Update nota at expedient\r\n        fetch(API + 'expedientes/updateNotas/' + props.id_expediente, {\r\n            method: 'PUT',\r\n            body: JSON.stringify({ \"notas\": props.prevExpNotas }),\r\n            headers: { 'Content-Type': 'application/json' }\r\n        }).then(res => res.json())\r\n            .then(response => {\r\n                console.log('Update Exp:', response);\r\n                message.success(response.message || response.error);\r\n            })\r\n            .catch(error => console.error('Error:', error))\r\n    };\r\n\r\n    const onFinishEdit = (values) => {\r\n        // Create Nota\r\n        console.log('ready To send: ', values)\r\n        fetch(API + 'notas/update/' + props.nota._id, {\r\n            method: 'PUT',\r\n            body: JSON.stringify(values),\r\n            headers: { 'Content-Type': 'application/json' }\r\n        }).then(res => res.json())\r\n            .then(response => {\r\n                message.success(response.message || response.error);\r\n                if (response.message && response.message === 'Nota Updated') props.setIsModalVisible(false)\r\n                console.log(response);\r\n            })\r\n            .catch(error => console.error('Error:', error))\r\n    };\r\n\r\n    // Upload File\r\n    const dragDropProps = {\r\n        name: 'file',\r\n        multiple: true,\r\n        action: API + 'notas/estudios/upload', // Production\r\n\r\n        onChange(info) {\r\n            const { status } = info.file;\r\n\r\n            if (status !== 'uploading') {\r\n                console.log(info.file, info.fileList);\r\n            }\r\n\r\n            if (status === 'done') {\r\n                message.success(`${info.file.name} file uploaded successfully.`);\r\n                console.log('New Files: ', info.file.response.file)\r\n                setEstudiosFiles([...estudiosFiles, info.file.response.file])\r\n            } else if (status === 'error') {\r\n                message.error(`${info.file.name} file upload failed.`);\r\n            }\r\n        },\r\n\r\n        onDrop(e) {\r\n            console.log('Dropped files', e.dataTransfer.files);\r\n        },\r\n    };\r\n\r\n\r\n    // Get value Of upload\r\n    const getFile = (e) => {\r\n        console.log('Upload event:', e);\r\n\r\n        if (Array.isArray(e)) {\r\n            return e;\r\n        }\r\n        return e && e.file.response.file;\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h4 style={{ marginLeft: 20 }}>Detalles de la nota</h4>\r\n            {/* <p>Expediente received: {props.id_expediente}</p>\r\n            <p>Paciente received: {props.paciente}</p>\r\n            <p>Medico received: {usuario._id}</p>\r\n            <p>prevExpNotas received: {props.prevExpNotas}</p>\r\n            *La nota lleva el id del medico, obtenido de la sesion */}\r\n            {/* <p>Diag [0].clasificacion {diagnosticos[0]['clasificacion']}</p> */}\r\n\r\n            <br />\r\n            <Dragger {...dragDropProps}>\r\n                <p className=\"ant-upload-drag-icon\">\r\n                    <InboxOutlined />\r\n                </p>\r\n                <p className=\"ant-upload-text\">Arrastra los archivos de estudio aquí, o da click para buscar</p>\r\n                <p className=\"ant-upload-hint\">\r\n                    Selecciona archivos en pdf o imagen que sean menores a 2 MB para poder subirlos\r\n                </p>\r\n            </Dragger>\r\n            <Form name=\"basic\" labelCol={{ span: 8 }} wrapperCol={{ span: 14 }} initialValues={props.nota ? props.nota : { remember: true, estudios: [] }} onFinish={props.nota ? onFinishEdit : onFinish} onFinishFailed={onFinishFailed} autoComplete=\"off\" style={{ marginTop: 12 }} >\r\n\r\n                <Form.Item label=\"Edad\" name=\"edad\" rules={[{ required: true, message: 'Ingresa RFC' }]} >\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item label=\"Talla\" name=\"talla\" rules={[{ required: false, message: 'Ingresa RFC' }]} >\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item label=\"Peso\" name=\"peso\" rules={[{ required: false, message: 'Ingresa RFC' }]} >\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item label=\"IMC\" name=\"imc\" rules={[{ required: false, message: 'Ingresa RFC' }]} >\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item label=\"Temperatura\" name=\"temperatura\" rules={[{ required: false, message: 'Ingresa RFC' }]} >\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item label=\"Presion Arterial\" name=\"presion_arterial\" rules={[{ required: false, message: 'Ingresa RFC' }]} >\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item label=\"Frecuencia Cariaca\" name=\"frecuencia_cardiaca\" rules={[{ required: false, message: 'Ingresa RFC' }]} >\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item label=\"Frecuencia respiratoria\" name=\"frecuencia_respiratoria\" rules={[{ required: false, message: 'Ingresa RFC' }]} >\r\n                    <Input />\r\n                </Form.Item>\r\n\r\n                {/* <Form.Item label=\"Estudios\" name=\"estudios\" rules={[{ required: true, message: 'Ingresa RFC' }]} >\r\n                    <Input />\r\n                </Form.Item> */}\r\n\r\n                {/* \r\n                <Form.List\r\n                    name=\"estudios\"\r\n                    rules={[\r\n                        {\r\n                            validator: async (_, names) => {\r\n                                if (!names || names.length < 1) {\r\n                                    return Promise.reject(new Error('Ingresa al menos un estudio'));\r\n                                }\r\n                            },\r\n                        },\r\n                    ]}\r\n                >\r\n                    {(fields, { add, remove }, { errors }) => (\r\n                        <>\r\n                            {fields.map((field, index) => (\r\n                                <Form.Item\r\n                                    {...(index === 0 ? formItemLayout : formItemLayoutWithOutLabel)}\r\n                                    label={index === 0 ? 'Estudio' : ''}\r\n                                    required={false}\r\n                                    key={field.key}\r\n                                    getValueFromEvent={getFile}\r\n                                >\r\n                                    <Form.Item\r\n                                        {...field}\r\n                                        validateTrigger={['onChange', 'onBlur']}\r\n                                        rules={[\r\n                                            {\r\n                                                required: true,\r\n                                                whitespace: true,\r\n                                                message: \"Ingresa estudios\",\r\n                                            },\r\n                                        ]}\r\n                                        noStyle\r\n                                    >\r\n                                        <Upload {...UploadProps}>\r\n                                            <Button icon={<UploadOutlined />}>Click to Upload</Button>\r\n                                        </Upload>\r\n                                    </Form.Item>\r\n                                    {fields.length > 1 ? (\r\n                                        <MinusCircleOutlined\r\n                                            className=\"dynamic-delete-button\"\r\n                                            onClick={() => remove(field.name)}\r\n                                        />\r\n                                    ) : null}\r\n                                </Form.Item>\r\n                            ))}\r\n                            <Form.Item>\r\n                                <Button\r\n                                    type=\"dashed\"\r\n                                    onClick={() => add()}\r\n                                    style={{\r\n                                        // width: '100%',\r\n                                        position: 'relative',\r\n                                        alignItems: 'center',\r\n                                        justifyContent: 'flex-end'\r\n                                    }}\r\n                                    icon={<PlusOutlined />}\r\n                                >\r\n                                    Agregar Estudios\r\n                                </Button>\r\n                                <Form.ErrorList errors={errors} />\r\n                            </Form.Item>\r\n                        </>\r\n                    )}\r\n                </Form.List>\r\n */}\r\n\r\n                <Form.Item label=\"Observaciones\" name=\"Observaciones\" rules={[{ required: true, message: 'Ingresa Observaciones' }]} >\r\n                    <TextArea rows={4} />\r\n                </Form.Item>\r\n\r\n                <Form.Item label=\"Diagnostico\" name=\"diagnostico\" rules={[{ required: true, message: 'Selecciona Diagnostico' }]} >\r\n                    <Select\r\n                        showSearch\r\n                        style={{ width: 400 }}\r\n                        onChange={handleChange}\r\n                    >\r\n                        {\r\n                            Object.keys(diagnosticos).map((k) => {\r\n                                return <OptGroup label={k}>\r\n                                    {Object.keys(diagnosticos[k]).map((sk) => {\r\n                                        return <Option value={sk}>{diagnosticos[k][sk]}</Option>\r\n                                    })}\r\n                                </OptGroup>\r\n\r\n                            })\r\n                        }\r\n                    </Select>\r\n                </Form.Item>\r\n\r\n                <Form.Item wrapperCol={{ offset: 8, span: 16 }}>\r\n                    <Space>\r\n                        <Button onClick={() => props.setIsModalVisible(false)}>\r\n                            Cancelar\r\n                        </Button>\r\n                        <Button type=\"primary\" htmlType=\"submit\">\r\n                            Guardar\r\n                        </Button>\r\n                    </Space>\r\n\r\n                </Form.Item>\r\n            </Form>\r\n        </div>\r\n    )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/william_h.ad9b5c4d.jpg\";","import React from 'react';\r\nimport { Page, Text, View, Document, StyleSheet, Image } from '@react-pdf/renderer';\r\nimport { PDFViewer } from '@react-pdf/renderer';\r\nimport William from '../../assets/logos/william_h.jpg'\r\nimport Logo from '../../assets/Logo.png'\r\nimport { usuario, IMAGE_API } from '../../resources';\r\n\r\nexport default function RecetaDocument(props) {\r\n    // Create styles\r\n    const styles = StyleSheet.create({\r\n        page: {\r\n            flexDirection: 'column',\r\n            backgroundColor: 'white'\r\n        },\r\n        block: {\r\n            flexDirection: 'row'\r\n        },\r\n        section: {\r\n            margin: 10,\r\n            padding: 10,\r\n            flexGrow: 1\r\n        },\r\n        image: {\r\n            // marginVertical: 15,\r\n            // marginHorizontal: 10,\r\n            width: 132\r\n        },\r\n        footText: {\r\n            fontSize: 14\r\n        }\r\n    });\r\n    // Create Document Component\r\n    function Receta() {\r\n        return <Document>\r\n            <Page size=\"A4\" style={styles.page}>\r\n\r\n                <View style={styles.block}>\r\n                    <View style={styles.section}>\r\n                        <Image style={styles.image} src={IMAGE_API + props.logoHospital} />\r\n                    </View>\r\n                    <View style={[styles.section, { alignItems: 'center' }]}>\r\n                        <Text style={styles.footText}>{usuario.name}</Text>\r\n                        <Text style={styles.footText}>Cédula Profesional: {usuario.cedula}</Text>\r\n                        <Text style={styles.footText}>Certificación: {usuario.certificacion}</Text>\r\n                        <Text style={styles.footText}>{usuario.universidad}</Text>\r\n                    </View>\r\n                </View>\r\n\r\n                <View style={{ margin: 35, flexGrow: 1 }}>\r\n                    <View style={styles.section}>\r\n                        <Text style={{ lineHeight: 2 }}>{props.receta.prescripcion}</Text>\r\n                        {/* <Text>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Hic veniam totam praesentium sapiente, provident, quidem deleniti magni ea fuga laborum dignissimos saepe sed voluptatibus voluptates? Iste consequuntur qui ab facere.</Text> */}\r\n                    </View>\r\n                </View>\r\n\r\n                <View style={{ color: 'black', width: '90%', backgroundColor: 'black', borderBottomColor: '#9bb4df', borderBottomWidth: 1, marginHorizontal: 20 }}></View>\r\n                <View style={styles.block}>\r\n                    <View style={styles.section}>\r\n                        {/* <Text style={styles.footText}>José Rubén Romero #103, Bosque Camelinas</Text>\r\n                        <Text style={styles.footText}>Morelia, Mich. CP 58290</Text>\r\n                        <Text style={styles.footText}>Tel. (443) 3235088, Cel (443) 356 7822</Text> */}\r\n                        <Text style={styles.footText}>Pagina de la clinica, Correo@clinica.com</Text>\r\n                    </View>\r\n                    <View style={styles.section}>\r\n                        <Image style={styles.image} src={Logo} />F\r\n                        <Text style={{ fontSize: 10, marginLeft: 20 }}>www.recreamed.com</Text>\r\n                    </View>\r\n                </View>\r\n            </Page>\r\n\r\n\r\n        </Document>\r\n    }\r\n    return <div>\r\n        <PDFViewer height={500} width={550}>\r\n            <Receta />\r\n        </PDFViewer>\r\n    </div>\r\n\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { Card, Button, Row, Col, Modal, Form, Input, message } from 'antd';\r\nimport { API, sendDataBody, updateData, usuario } from '../../resources';\r\nimport { PlusOutlined, FormOutlined, PrinterOutlined } from '@ant-design/icons';\r\nimport RecetaDocument from './detalleRecetaForPrint';\r\nconst { TextArea } = Input;\r\n//Los IDS de las recetas son tomados y enviados desde el expediente\r\n// Estan siendo agregadas y actualizadas directamente al expediente desde el form de detallenota->Agregar Receta\r\nexport default function DetalleReceta(props) {\r\n\r\n    const [recetaData, setRecetaData] = useState([]);\r\n    const [recetaLoading, setRecetaLoading] = useState(true);\r\n    const [recetaForEdit, setRecetaForEdit] = useState({});\r\n    const [isModalVisible, setIsModalVisible] = useState(false); // Modal For Add REcipe\r\n    const [isEditingModalVisible, setIsEditingModalVisible] = useState(false); // Modal For Edit Recipe\r\n    const [isPrintingModalVisible, setIsPrintingModalVisible] = useState(false)\r\n\r\n    // Add Recipe Modal\r\n    const showModal = () => { setIsModalVisible(true); };\r\n    const handleOk = () => { setIsModalVisible(false); };\r\n    const handleCancel = () => { setIsModalVisible(false); };\r\n    // Edit Recipe Modal\r\n    const showEditModal = () => { console.log('BeforeEdit'); setIsEditingModalVisible(true); };\r\n    const handleEditOk = () => { setIsEditingModalVisible(false); };\r\n    const handleEditCancel = () => { setIsEditingModalVisible(false); };\r\n    // Print Receta Modal\r\n    const showPrintModal = () => { setIsPrintingModalVisible(true); };\r\n    const handlePrintOk = () => { setIsPrintingModalVisible(false); setIsLogoSelected(false)};\r\n    const handlePrintCancel = () => { setIsPrintingModalVisible(false);setIsLogoSelected(false)};\r\n    // Select logo for print in receta. Switches the modal view into select logo hospital/pdf recipe for print\r\n    const [logoHospital, setLogoHospital] = useState(null)\r\n    const [isLogoSelected, setIsLogoSelected] = useState(false)\r\n\r\n    useEffect(() => {\r\n        props.recetas ?\r\n            getRecetasData()\r\n            :\r\n            finifhGet()\r\n    }, [props.recetas])\r\n\r\n    const getRecetasData = () => {\r\n        sendDataBody('recetas/getMany', { 'ids': props.recetas }).then((response) => {\r\n            setRecetaData(response);\r\n            setRecetaLoading(false)\r\n        })\r\n        // fetch(API + 'recetas/getMany', {\r\n        //     method: 'POST',\r\n        //     headers: { 'Content-Type': 'application/json' },\r\n        //     body: JSON.stringify({ 'ids': props.recetas })\r\n        // }).then(res => res.json())\r\n        //     .then(response => {\r\n        //         // console.log('Recetas Received:', response);\r\n        //         setRecetaData(response);\r\n        //         setRecetaLoading(false)\r\n        //     })\r\n        //     .catch(error => console.error('Error:', error))\r\n    }\r\n\r\n    const finifhGet = () => { setRecetaData([]); setRecetaLoading(false); }\r\n\r\n    // New Receta\r\n    const onFinish = async (values) => {\r\n        values.id_nota = props.id_nota;\r\n        console.log('new Receta:', values);\r\n        console.log('new Recetas:', values);\r\n\r\n        const newReceta = await fetch(API + 'recetas/add', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(values)\r\n        }).then(res => res.json())\r\n            .then(response => {\r\n                console.log('Success:', response);\r\n                message.info(response.message || response.error)\r\n                response.message === 'Receta creada correctamente' ? setIsModalVisible(false) : console.log(response.error);\r\n                return response;\r\n            })\r\n            .catch(error => console.error('Error:', error))\r\n\r\n        props.recetas.push(newReceta.id_receta)\r\n        console.log('New Recetas: ', props.recetas);\r\n\r\n        // Update nota.recetas\r\n        fetch(API + 'notas/updateRecetas/' + props.id_nota, {\r\n            method: 'PUT',\r\n            body: JSON.stringify({ \"recetas\": props.recetas }),\r\n            headers: { 'Content-Type': 'application/json' }\r\n        }).then(res => res.json())\r\n            .then(response => {\r\n                console.log('Update Exp:', response);\r\n                message.success(response.message || response.error);\r\n            })\r\n            .catch(error => console.error('Error:', error))\r\n\r\n    };\r\n\r\n    const onFinishFailed = (errorInfo) => {\r\n        console.log('Failed:', errorInfo);\r\n    };\r\n    // End of Form\r\n\r\n    // Set Edit Receta and open modal\r\n    const editReceta = (r) => {\r\n        setRecetaForEdit(r)\r\n        console.log(r);\r\n        showEditModal();\r\n    }\r\n    // Send data for update Receta\r\n    const updateReceta = (values) => {\r\n        console.log('update', values);\r\n        updateData(`recetas/update/${recetaForEdit._id}`, values).then((rs) => {\r\n            // message.success(rs);\r\n            setIsEditingModalVisible(false)\r\n            getRecetasData()\r\n        })\r\n    }\r\n    // Print Receta\r\n    const printReceta = async (r) => {\r\n        await setRecetaForEdit(r)\r\n        setIsPrintingModalVisible(true)\r\n        console.log(r);\r\n    }\r\n\r\n\r\n    const gridStyle = {\r\n        width: '100%',\r\n        height: '32',\r\n        textAlign: 'center',\r\n        display: 'inline-flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n    };\r\n\r\n\r\n\r\n    return <div>\r\n        <Card bordered={false} title={<>Recetas <Button onClick={() => setIsModalVisible(true)} size='small' type=\"primary\" shape=\"circle\" icon={<PlusOutlined />} /></>} >\r\n            \r\n            {\r\n                recetaLoading ? <h5>Cargando Receta...</h5> :\r\n                    recetaData.length > 0 ?\r\n\r\n                        recetaData.map((r) => {\r\n                            return <><Card.Grid key={r._id} style={gridStyle}>\r\n                                <p style={{ whiteSpace: 'pre' }}> Prescripcion : {r.prescripcion} </p>\r\n                                <Button style={{ marginLeft: 8 }} onClick={() => editReceta(r)} size='small' type=\"primary\" shape=\"circle\" icon={<FormOutlined />} />\r\n                                <Button style={{ marginLeft: 8 }} onClick={() => printReceta(r)} size='small' type=\"primary\" shape=\"circle\" icon={<PrinterOutlined />} />\r\n                            </Card.Grid></>\r\n                        })\r\n                        :\r\n                        <h6>No hay una receta asignada</h6>\r\n            }\r\n        </Card>\r\n\r\n        <Modal title=\"Nueva Receta\" visible={isModalVisible} onOk={handleOk} onCancel={handleCancel}\r\n            footer={[\r\n                <Button type=\"primary\" htmlType=\"submit\" form='create_receta_medic'>\r\n                    Guardar\r\n                </Button>,\r\n                <Button onClick={handleCancel}>Cancelar</Button>\r\n            ]}>\r\n            <Form\r\n                name=\"create_receta_medic\"\r\n                labelCol={{ span: 8 }}\r\n                wrapperCol={{ span: 16 }}\r\n                initialValues={{ remember: true }}\r\n                onFinish={onFinish}\r\n                onFinishFailed={onFinishFailed}\r\n                autoComplete=\"off\"\r\n            >\r\n                <Form.Item\r\n                    label=\"Prescripcion\"\r\n                    name=\"prescripcion\"\r\n                    rules={[{ required: true, message: 'Ingresa la prescripcion' }]}\r\n                >\r\n                    <TextArea rows={4} />\r\n                </Form.Item>\r\n\r\n            </Form>\r\n        </Modal>\r\n\r\n        <Modal title=\"Editar Receta\" visible={isEditingModalVisible} onOk={handleEditOk} onCancel={handleEditCancel} destroyOnClose\r\n            footer={[\r\n                <Button type=\"primary\" htmlType=\"submit\" form='update_receta_medic'>\r\n                    Actualizar\r\n                </Button>,\r\n                <Button onClick={handleEditCancel}>Cancelar</Button>\r\n            ]}>\r\n            {\r\n                Object.keys(recetaForEdit).map((k) => {\r\n                    return <p>{k} : {recetaForEdit[k]}</p>\r\n                })\r\n            }\r\n            <Form\r\n                name=\"update_receta_medic\"\r\n                labelCol={{ span: 8 }}\r\n                wrapperCol={{ span: 16 }}\r\n                initialValues={{ prescripcion: recetaForEdit.prescripcion }}\r\n                onFinish={updateReceta}\r\n                onFinishFailed={onFinishFailed}\r\n                autoComplete=\"off\"\r\n            >\r\n                <Form.Item\r\n                    label=\"Prescripcion\"\r\n                    name=\"prescripcion\"\r\n                    rules={[{ required: true, message: 'Ingresa la prescripcion' }]}\r\n                >\r\n                    <TextArea rows={4} />\r\n                </Form.Item>\r\n\r\n            </Form>\r\n        </Modal>\r\n\r\n        <Modal title=\"Imprimir Receta\" visible={isPrintingModalVisible} onOk={handlePrintOk} onCancel={handlePrintCancel} width={600}>\r\n            {\r\n                isLogoSelected ? // Si ya hay logo seleccionado, se pasa a la receta y se muestra en pdf\r\n                    <RecetaDocument receta={recetaForEdit} logoHospital={logoHospital} />\r\n                    :\r\n                    <div>\r\n                        <Card title='Selecciona un hospital' bordered={false}>\r\n                            {\r\n                                usuario.horarios.map((h) => {\r\n                                    return <Card.Grid style={{ width: '100%' }} onClick={() => {setLogoHospital(h.sucursal.logo); setIsLogoSelected(true)}}>\r\n                                        <Row align=\"middle\">\r\n                                            <Col span={6} offset={4}><img width={64} src={'https://api.recreamed.com/images/' + h.sucursal.logo} alt=\"Logo\" /></Col>\r\n                                            <Col span={10}>{h.sucursal.nombre} <br /> {h.horario}</Col>\r\n                                        </Row>\r\n                                    </Card.Grid>\r\n                                })\r\n                            }\r\n                        </Card>\r\n                    </div>\r\n            }\r\n        </Modal>\r\n    </div>\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Card, Collapse, Button, Tabs, Row, Col, Modal, Space } from 'antd';\r\nimport { getData, API } from '../../resources';\r\nimport { PlusOutlined, ExperimentOutlined, DownloadOutlined, EditOutlined } from '@ant-design/icons';\r\nimport { NuevaNota } from './nuevaNota';\r\nimport DetalleReceta from './detalleReceta';\r\nconst { TabPane } = Tabs;\r\nconst { Panel } = Collapse;\r\n\r\nexport default function DetalleNota(props) {\r\n\r\n    const [notaData, setNotaData] = useState(\"\");\r\n    const [notaLoading, setnotaLoading] = useState(true);\r\n    const [view, setView] = useState('detalles');\r\n    const [notaForEdit, setNotaForEdit] = useState(\"\")\r\n    // Add Nota Modal\r\n    const [isModalVisible, setIsModalVisible] = useState(false);\r\n    const showModal = () => { setIsModalVisible(true) };\r\n    const handleOk = () => { setIsModalVisible(false) };\r\n    const handleCancel = () => { setIsModalVisible(false) };\r\n    // End of Add Nota Modal\r\n    // Edit Nota Modal\r\n    const [isEditModalVisible, setIsEditModalVisible] = useState(false);\r\n    const showEditModal = () => { setIsEditModalVisible(true) };\r\n    const handleEditOk = () => { setIsEditModalVisible(false) };\r\n    const handleEditCancel = () => { setIsEditModalVisible(false) };\r\n    const editarNota = async (n) => { await setNotaForEdit(n); setIsEditModalVisible(true) }\r\n    // End of Edit Nota Modal\r\n\r\n\r\n    useEffect(() => {\r\n        // console.log('Paciente received to detailNota: ', props.paciente)\r\n        props.paciente ?\r\n            getData(`notas/${props.paciente}`).then(rs => { console.log('NotasData: ', rs); setNotaData(rs); setnotaLoading(false) })\r\n            :\r\n            finishGet()\r\n    }, [props.paciente])\r\n\r\n    const finishGet = () => { setNotaData([]); setnotaLoading(false); }\r\n\r\n    const gridStyle = {\r\n        // width: '50%',\r\n        width: '100%',\r\n        height: '32',\r\n        textAlign: 'center',\r\n        display: 'inline-flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    };\r\n\r\n    const NotaGridStyle = {\r\n        width: '25%',\r\n        textAlign: 'center',\r\n        border: '1px solid rgba(255, 255, 255, 255)'\r\n    };\r\n    const EstudioGridStyle = {\r\n        width: '50%',\r\n        // height: '32',\r\n        textAlign: 'center',\r\n        display: 'inline-flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    };\r\n\r\n\r\n    const NotaView = () => {\r\n        switch (view) {\r\n            case 'detalles':\r\n                return <>{\r\n                    notaData.length > 0 ?\r\n                        Object.keys(notaData[0]).map(k => {\r\n                            return <><Card.Grid key={k} style={gridStyle}>{k}</Card.Grid><Card.Grid style={gridStyle} size='small'>{notaData[0][k]}</Card.Grid></>\r\n                        })\r\n                        :\r\n                        <h6>No hay una nota asignada</h6>\r\n                }</>\r\n            case 'adding':\r\n                return <>Adding\r\n                    <NuevaNota id_expediente={props.id_expediente} paciente={props.paciente} prevExpNotas={props.prevExpNotas} />\r\n                    <Button onClick={() => setView('detalles')} >Cancelar</Button>\r\n                </>\r\n            case 'editing':\r\n                return <>Editing\r\n                    <Button onClick={() => setView('detalles')} >Cancelar</Button>\r\n                </>\r\n            default:\r\n                <>Notas del paciente</>\r\n        }\r\n    }\r\n\r\n\r\n\r\n    return <div>\r\n\r\n        <Space>\r\n            <h5>Notas </h5>\r\n            <Button onClick={showModal} size='small' type=\"primary\" shape=\"circle\" icon={<PlusOutlined />} />\r\n        </Space>\r\n\r\n        <Tabs tabPosition='top' onTabClick={(k, e) => { console.log('OnTABClickNota', k); }}>\r\n\r\n            {notaLoading ? <h5>Cargando Nota...</h5> :\r\n\r\n                notaData.map((nota, i) => {\r\n                    let index = i + 1;\r\n                    return <TabPane tab={`Nota ${index}`} key={nota._id} style={{ width: '100%' }}>\r\n                        <Row>\r\n                            {/* Mitad de la pantalla para NOTA*/}\r\n                            <Col span={12}>\r\n                                <Collapse bordered={false}>\r\n                                    <Panel header=\"Detalles de la nota\" key=\"1\">\r\n                                        <Card >\r\n                                            <Card.Grid style={NotaGridStyle}>Edad: {nota.edad}</Card.Grid>\r\n                                            <Card.Grid style={NotaGridStyle}>Talla: {nota.talla}</Card.Grid>\r\n                                            <Card.Grid style={NotaGridStyle}>Peso: {nota.peso}</Card.Grid>\r\n                                            <Card.Grid style={NotaGridStyle}>IMC: {nota.imc}</Card.Grid>\r\n                                            <Card.Grid style={NotaGridStyle}>Temperatura: {nota.temperatura}</Card.Grid>\r\n                                            <Card.Grid style={NotaGridStyle}>Presion Arterial : {nota.presion_arterial}</Card.Grid>\r\n                                            <Card.Grid style={NotaGridStyle}>Frecuencia Cardiaca : {nota.frecuencia_cardiaca}</Card.Grid>\r\n                                            <Card.Grid style={NotaGridStyle}>Frecuencia Respiratoria : {nota.frecuencia_respiratoria}</Card.Grid>\r\n                                        </Card>\r\n                                    </Panel>\r\n                                </Collapse>\r\n\r\n                                <Card title='Observaciones'>\r\n                                    {nota.Observaciones}\r\n                                </Card>\r\n\r\n                                <Card title='Diagnostico'>\r\n                                    {nota.diagnostico}\r\n                                </Card>\r\n\r\n                                <Card title='Estudios'>\r\n                                    {nota.estudios.map((e) => {\r\n                                        return <Card.Grid style={EstudioGridStyle}>\r\n                                            <a href={`${API}notas/estudios/download/${e}`}><ExperimentOutlined />{e}<DownloadOutlined /> </a>\r\n                                        </Card.Grid>\r\n                                    })}\r\n                                </Card>\r\n                                <Button style={{ float: 'right' }} onClick={() => { editarNota(nota) }} size='small' type=\"primary\" icon={<EditOutlined />} >Editar Nota</Button>\r\n                            </Col>\r\n                            <Col span={12}>\r\n                                <DetalleReceta recetas={nota.recetas} id_nota={nota._id} />\r\n                            </Col>\r\n                        </Row>\r\n                    </TabPane>\r\n                })\r\n            }\r\n\r\n        </Tabs>\r\n\r\n\r\n        <Modal title=\"Nueva Nota\" visible={isModalVisible} onOk={handleOk} onCancel={handleCancel} width={680} footer={[]} destroyOnClose>\r\n            <NuevaNota id_expediente={props.id_expediente} paciente={props.paciente} prevExpNotas={props.prevExpNotas} setIsModalVisible={setIsModalVisible} />\r\n        </Modal>\r\n\r\n        <Modal title=\"Editar Nota\" visible={isEditModalVisible} onOk={handleEditOk} onCancel={handleEditCancel} width={680} footer={[]} destroyOnClose>\r\n            <NuevaNota nota={notaForEdit} setIsModalVisible={setIsEditModalVisible} />\r\n        </Modal>\r\n\r\n    </div>\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Card, Space, Button, Input, Form, message } from 'antd';\r\nimport { getData, API } from '../../resources';\r\nimport { FormOutlined } from '@ant-design/icons';\r\n\r\nexport default function DetalleHistoria(props) {\r\n    const { TextArea } = Input;\r\n    const [historiaData, setHistoriaData] = useState(\"\")\r\n    const [notaLoading, setHistoriaLoading] = useState(true)\r\n    const [editing, setEditing] = useState(false)\r\n\r\n    useEffect(() => {\r\n        //     console.log(\"Props IDHistoria: \", props.historia)\r\n        props.historia ?\r\n            getHistoriaData()\r\n            :\r\n            finifhGet()\r\n    }, [props.historia])\r\n\r\n    const finifhGet = () => { setHistoriaData([]); setHistoriaLoading(false); }\r\n\r\n    const getHistoriaData = () => {\r\n        getData(`historia/${props.historia}`).then(rs => { console.log('DetalleHistoria: ', rs); setHistoriaData(rs); setHistoriaLoading(false) })\r\n    }\r\n\r\n    const gridStyle = {\r\n        width: '100%',\r\n        // height: '40',\r\n        textAlign: 'center',\r\n        // display: 'inline-flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        marginTop: 15\r\n    };\r\n\r\n    const updateHistoria = (values) => {\r\n        setEditing(false)\r\n        fetch(API + 'historias/update/' + historiaData[0]._id, {\r\n            method: 'PUT',\r\n            body: JSON.stringify(values),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then(res => res.json())\r\n            .then(response => {\r\n                console.log('Success:', response);\r\n                message.success(response.message || response.error);\r\n            })\r\n            .finally(() => {\r\n                getHistoriaData()\r\n                setEditing(false)\r\n            })\r\n        console.log('New Historia', values);\r\n    }\r\n\r\n\r\n    const HistoriaDetails = () => {\r\n        return <Card.Grid style={gridStyle} >{\r\n            editing ?\r\n                <>\r\n                    <Form name='historiaForm' initialValues={{ historial: historiaData[0].historial }} onFinish={updateHistoria}>\r\n                        <Form.Item name='historial'>\r\n                            <TextArea rows={4} />\r\n                        </Form.Item>\r\n                        <Space>\r\n                            <Form.Item>\r\n                                <Button type=\"primary\" htmlType=\"submit\">Guardar</Button>\r\n                            </Form.Item>\r\n                            <Form.Item>\r\n                                <Button onClick={() => setEditing(false)}>Cancelar</Button>\r\n                            </Form.Item>\r\n                        </Space>\r\n\r\n\r\n                    </Form>\r\n                </>\r\n                :\r\n                <p style={{ whiteSpace: 'pre', textAlign: 'left' }}>{historiaData[0].historial}</p>\r\n        }</Card.Grid>\r\n    }\r\n\r\n\r\n    return <div>\r\n        <Card bordered={false}>\r\n            <Space>\r\n                <h5>Historia Clinica</h5>\r\n                <Button onClick={() => setEditing(true)} size='small' disabled={!props.historia} type=\"primary\" shape=\"circle\" icon={<FormOutlined />} />\r\n            </Space>\r\n            {\r\n                notaLoading ? <h5>Cargando Historia...</h5> :\r\n                    historiaData.length > 0 ?\r\n                        <HistoriaDetails />\r\n                        :\r\n                        <h6>No hay una historia asignada</h6>\r\n            }\r\n        </Card>\r\n    </div>\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Button, Select, Space } from 'antd';\r\nimport { API } from '../../resources';\r\nimport CreateExpedient from './createExpedient';\r\nimport DetalleNota from './detalleNota'\r\nimport DetalleHistoria from './detalleHistoria';\r\nimport html2canvas from 'html2canvas';\r\nimport { jsPDF } from \"jspdf\";\r\n\r\n\r\nexport default function Expedientes(props) {\r\n    const [isModalVisible, setIsModalVisible] = useState(false);\r\n    const [expedientesData, setExpedientesData] = useState([]);\r\n    const [expedientesLoading, setExpedientesLoading] = useState(true);\r\n    const [historia, setHistoria] = useState(\"\");\r\n    const [notas, setNotas] = useState(\"\");\r\n\r\n\r\n    useEffect(() => {\r\n        getExpedientesData(props.paciente)\r\n    }, [props.paciente])\r\n\r\n\r\n    const getExpedientesData = (id_paciente) => {\r\n        fetch(API + `expedientes/${id_paciente}`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                // console.log(\"GetExpData: \", data);\r\n                setExpedientesData(data);\r\n                if (typeof data != \"undefined\") {\r\n                    setNotas(data.notas); setHistoria(data.historia);\r\n                } else { setNotas(null); setHistoria(null) }\r\n            })\r\n            .finally(() => setExpedientesLoading(false))\r\n    }\r\n\r\n    const printDocument = () => {\r\n        const input = document.getElementById('expedient-export');\r\n        html2canvas(input)\r\n            .then((canvas) => {\r\n                const imgData = canvas.toDataURL('image/png');\r\n                const pdf = new jsPDF();\r\n                pdf.addImage(imgData, 'JPEG', 0, 0);\r\n                // pdf.output('dataurlnewwindow');\r\n                pdf.save(\"expediente.pdf\");\r\n            })\r\n            ;\r\n    }\r\n\r\n\r\n    return <div id='expedient-export' >\r\n\r\n        <Space size='middle'><h4>Expediente </h4><h3> </h3></Space>\r\n\r\n        <DetalleHistoria historia={historia} />\r\n\r\n        <DetalleNota notas={notas} id_expediente={expedientesData._id} prevExpNotas={expedientesData.notas} paciente={props.paciente} />\r\n\r\n        <CreateExpedient isModalVisible={isModalVisible} setIsModalVisible={setIsModalVisible} pacientesData={[]} />\r\n\r\n        <Button onClick={printDocument}>Exportar a pdf</Button>\r\n\r\n        <div>\r\n            SOAP\r\n        </div>\r\n\r\n    </div>;\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Form, Input, Button, message, Space, Row, Col, Upload } from 'antd'\r\nimport { MinusCircleOutlined, PlusOutlined, InboxOutlined } from '@ant-design/icons';\r\nimport { InputNumber, Select } from 'antd';\r\nimport { S_API, getData, API } from '../resources'\r\nconst { Option } = Select;\r\nconst { Dragger } = Upload;\r\n\r\n\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    xs: {\r\n      span: 24,\r\n    },\r\n    sm: {\r\n      span: 8,\r\n    },\r\n  },\r\n  wrapperCol: {\r\n    xs: {\r\n      span: 24,\r\n    },\r\n    sm: {\r\n      span: 14,\r\n    },\r\n  },\r\n};\r\nconst tailFormItemLayout = {\r\n  wrapperCol: {\r\n    xs: {\r\n      span: 24,\r\n      offset: 0,\r\n    },\r\n    sm: {\r\n      span: 16,\r\n      offset: 8,\r\n    },\r\n  },\r\n};\r\nexport default function PerfilEdit(props) {\r\n\r\n  const [form] = Form.useForm();\r\n\r\n  const [sucursales, setSucursales] = useState([]);\r\n  const [sucursalesLoading, setSucursalesLoading] = useState(true);\r\n  const [avatar, setAvatar] = useState(props.perfil.avatar)\r\n\r\n  //Start upload props Upload File\r\n  const dragDropProps = {\r\n    name: 'file',\r\n    multiple: false,\r\n    action: API + 'imagenes/upload',\r\n\r\n    onChange(info) {\r\n      const { status } = info.file;\r\n\r\n      if (status !== 'uploading') {\r\n        console.log(info.file, info.fileList);\r\n      }\r\n\r\n      if (status === 'done') {\r\n        message.success(`${info.file.name} file uploaded successfully.`);\r\n        console.log('New Files: ', info.file.response.file)\r\n        setAvatar(info.file.response.file)\r\n      } else if (status === 'error') {\r\n        message.error(`${info.file.name} file upload failed.`);\r\n      }\r\n    },\r\n\r\n    onDrop(e) {\r\n      console.log('Dropped files', e.dataTransfer.files);\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log('received Medic: ', props.perfil);\r\n    getData('sucursales').then((rs) => { setSucursales(rs); setSucursalesLoading(false) })\r\n  }, [])\r\n\r\n\r\n\r\n  const onFinish = (values) => {\r\n    values.avatar = avatar;\r\n    values.estatus = '1';\r\n    values.rol = 'Medico';\r\n    delete values.confirm;\r\n    delete values.prefix;\r\n\r\n    console.log('ready to send', values)\r\n    fetch(S_API + 'register', {\r\n      method: 'POST',\r\n      body: JSON.stringify(values),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log('Success:', response);\r\n        response.message && response.message === 'Usuario creado correctamente' ?\r\n          window.location.href = 'doctores' : message.error(response.error);\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  };\r\n\r\n  const onFinishEdit = (values) => {\r\n    values.avatar = avatar;\r\n    // values.estatus = '1';\r\n    // values.rol = 'Medico';\r\n    // delete values.confirm;\r\n    // delete values.prefix;\r\n\r\n    console.log('ready to send', values)\r\n    fetch(API + 'users/updateUser/' + props.perfil._id, {\r\n      method: 'PUt',\r\n      body: JSON.stringify(values),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log('Success:', response);\r\n        response.message && response.message === 'Usuario actualizado correctamente' ?\r\n          props.setEditing(false) : message.error(response.error);\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  };\r\n\r\n  const prefixSelector = (\r\n    <Form.Item name=\"prefix\" noStyle>\r\n      <Select\r\n        style={{\r\n          width: 70,\r\n        }}\r\n      >\r\n        <Option value=\"+52\">+52</Option>\r\n      </Select>\r\n    </Form.Item>\r\n  );\r\n  const suffixSelector = (\r\n    <Form.Item name=\"suffix\" noStyle>\r\n      <Select\r\n        style={{\r\n          width: 70,\r\n        }}\r\n      >\r\n        <Option value=\"USD\">$</Option>\r\n        <Option value=\"CNY\">¥</Option>\r\n      </Select>\r\n    </Form.Item>\r\n  );\r\n\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo);\r\n  };\r\n  return (\r\n    <div>\r\n      <h4>Editar perfil</h4>\r\n      <br />\r\n      <Dragger {...dragDropProps}>\r\n        <p className=\"ant-upload-drag-icon\">\r\n          <InboxOutlined />\r\n        </p>\r\n        <p className=\"ant-upload-text\">Arrastra la imagen de perfil o click ara buscar</p>\r\n        <p className=\"ant-upload-hint\">\r\n          Selecciona archivos en formato png, jpeg o webp\r\n        </p>\r\n      </Dragger>\r\n      <br />\r\n      <Form\r\n        {...formItemLayout}\r\n        form={form}\r\n        name=\"register\"\r\n        onFinish={onFinishEdit}\r\n        // initialValues={{ horarios: [{ sucursal: '', horario: '' }], prefix: '+52' }}\r\n        initialValues={props.perfil}\r\n        scrollToFirstError\r\n      >\r\n\r\n        <Row>\r\n\r\n          <Col span={11}>\r\n            <Form.Item name=\"name\" label=\"Nombre\" rules={[{ required: true, message: 'Ingresa Nombre y apellidos' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item name=\"email\" label=\"Correo\" rules={[{ type: 'email', message: 'Ingresa un corrreo electronico valido' }, { required: true, message: 'Please input your E-mail!' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            {/* <Form.Item name=\"password\" label=\"Contraseña\" rules={[{ required: true, message: 'Por favor ingrese su contraseña!', },]} hasFeedback >\r\n              <Input.Password />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"confirm\" label=\"Confirmar contraseña\" dependencies={['password']} hasFeedback\r\n              rules={[\r\n                {\r\n                  required: true,\r\n                  message: 'Please confirm your password!',\r\n                },\r\n                ({ getFieldValue }) => ({\r\n                  validator(_, value) {\r\n                    if (!value || getFieldValue('password') === value) {\r\n                      return Promise.resolve();\r\n                    }\r\n                    return Promise.reject(new Error('Las contraseñas deben coincidir!'));\r\n                  },\r\n                }),\r\n              ]}\r\n            >\r\n              <Input.Password />\r\n            </Form.Item> */}\r\n\r\n            <Form.Item name=\"telefono\" label=\"Telefono\" rules={[{ required: true, message: 'Ingresa el numero de telefono correcto' },]}>\r\n              <Input addonBefore={prefixSelector} style={{ width: '100%', }} />\r\n            </Form.Item>\r\n\r\n\r\n            <Form.Item label=\"horarios\" rules={[{ required: true, message: 'Ingresa al menos un horario', },]}>\r\n              <Form.List name=\"horarios\" label=\"horarios list\"\r\n              >\r\n                {(fields, { add, remove }) => (\r\n                  <>\r\n                    {fields.map(({ key, name, ...restField }) => (\r\n                      <Space key={key} style={{ display: 'flex', marginBottom: 8 }} align=\"baseline\">\r\n                        <Form.Item\r\n                          {...restField}\r\n                          name={[name, 'sucursal']}\r\n                          rules={[{ required: true, message: 'Elije Sucursal' }]}\r\n                        >\r\n                          <Select placeholder=\"Elije Sucursal\" style={{ width: '120px' }} >\r\n                            {sucursalesLoading ? \"Cargando\" :\r\n                              sucursales.map(s => <Option value={s._id}>{s.nombre}</Option>)\r\n                            }\r\n                          </Select>\r\n                        </Form.Item>\r\n                        <Form.Item\r\n                          {...restField}\r\n                          name={[name, 'horario']}\r\n                          rules={[{ required: true, message: 'Missing last name' }]}\r\n                        >\r\n                          <Input placeholder=\"Horario\" />\r\n                        </Form.Item>\r\n                        <MinusCircleOutlined onClick={() => remove(name)} />\r\n                      </Space>\r\n                    ))}\r\n                    <Form.Item>\r\n                      <Button type=\"dashed\" onClick={() => add()} block icon={<PlusOutlined />}>\r\n                        Agregar Horario\r\n                      </Button>\r\n                    </Form.Item>\r\n                  </>\r\n                )}\r\n              </Form.List>\r\n            </Form.Item>\r\n\r\n\r\n\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item name=\"cedula\" label=\"Cedula\" rules={[{ required: false, message: 'Ingresa cedula' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            {/* Not Necesary For Medic. He'll be in hospital direction */}\r\n            {/* <Form.Item name=\"calle\" label=\"Calle\" rules={[{ required: true, message: 'Ingresa calle', whitespace: true }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"numexterior\" label=\"Num Exterior\" rules={[{ required: true, message: 'Ingresa numero exterior' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"numinterior\" label=\"Num Interior\" rules={[{ required: true, message: 'Ingresa numinterior' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item label=\"Colonia\" name=\"colonia\" rules={[{ required: true, message: 'Please input your colobnia!' }]}            >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"estado\" label=\"Estado\" rules={[{ required: true, message: 'Apellido materno', },]}>\r\n              <Select placeholder=\"Elije tu estado\">\r\n                {estados.map(e => <Option value={e}>{e}</Option>)}\r\n              </Select>\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"municipio\" label=\"Municipio\" rules={[{ required: true, message: 'Ingresa tu municipio' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"codigopostal\" label=\"Codigo Postal\" rules={[{ required: true, message: 'Ingresa codigopostal', },]}>\r\n              <InputNumber addonAfter={suffixSelector} style={{ width: '100%', }} />\r\n            </Form.Item> */}\r\n\r\n            <Form.Item name=\"certificacion\" label=\"Certificacion\" rules={[{ required: false, message: 'Ingresa tu certificacion' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"universidad\" label=\"Universidad\" rules={[{ required: false, message: 'Ingresa tu universidad' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item {...tailFormItemLayout}>\r\n              <Button type=\"primary\" htmlType=\"submit\">\r\n                Guardar\r\n              </Button>\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n\r\n\r\n\r\n\r\n\r\n        {/* <Form.Item\r\n          name=\"agreement\"\r\n          valuePropName=\"checked\"\r\n          rules={[\r\n            {\r\n              validator: (_, value) =>\r\n                value ? Promise.resolve() : Promise.reject(new Error('Should accept agreement')),\r\n            },\r\n          ]}\r\n          {...tailFormItemLayout}\r\n        >\r\n          <Checkbox>\r\n            He leído y acepto los <a href=\"https://recreamed.com\">terminos y condiciones</a>\r\n          </Checkbox>\r\n        </Form.Item> */}\r\n\r\n\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Row, Col, Space, Button, Divider, Image } from 'antd';\r\nimport { Avatar, Card } from 'antd';\r\nimport { UserOutlined } from '@ant-design/icons';\r\nimport { API, usuario } from '.././resources';\r\nimport Loading from '.././loading';\r\nimport { PlusOutlined, FormOutlined } from '@ant-design/icons';\r\nimport PerfilEdit from './perfilEdit';\r\n\r\nexport default function Perfil() {\r\n\r\n    const [profileData, setProfileData] = useState([]);\r\n    const [profileForEdit, setProfileForEdit] = useState([]);\r\n    const [editing, setEditing] = useState(false)\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [visible, setVisible] = useState(false)\r\n\r\n    useEffect(() => {\r\n        getProfileData()\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        getProfileData()\r\n    }, [editing])\r\n\r\n    const getProfileData = () => {\r\n        fetch(API + 'userByMail/' + usuario.email)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                console.log(data);\r\n                setProfileData(data[0]);\r\n                setIsLoading(false);\r\n            });\r\n    }\r\n\r\n    const editPerfil = async (p) => {\r\n        p.horarios.forEach((h) => { h.sucursal = h.sucursal._id })\r\n        console.log('Horarios before edit profile: ', p.horarios);\r\n        await setProfileForEdit(p)\r\n        setEditing(true);\r\n        console.log('Editar medico: ', p)\r\n    }\r\n\r\n    const DetailsProfile = () => {\r\n        return <Row>\r\n            <Col span={8} offset={4}>\r\n                {\r\n                    // Profile Pic\r\n                    profileData.avatar.length > 9 ?\r\n                        <Image style={{ borderRadius: 12 }} width={256} src={'https://api.recreamed.com/images/' + profileData.avatar} />\r\n                        :\r\n                        <Avatar size={128} icon={<UserOutlined />} className='btnIconCentered' />\r\n                }\r\n                <br /><br /><br />\r\n                <p className='nombre'> {profileData.name} </p>\r\n                <p className='datos'>{profileData.rol} </p>\r\n                <p className='datos'>Correo: {profileData.email} </p>\r\n                <p className='datos'>Telefono: {profileData.telefono} </p>\r\n            </Col>\r\n            {/* <Col span={8}>\r\n                <p>Estado: {profileData.estado}</p>\r\n                <p>Municipio: {profileData.municipio}</p>\r\n                <p>Colonia: {profileData.colonia}</p>\r\n                <p>Calle: {profileData.calle}</p>\r\n                <p>Codigo Postal:{profileData.codigopostal} </p>\r\n            </Col> */}\r\n            <Col span={8}>\r\n                <Card title='Horarios' style={{ borderRadius: 12 }}>\r\n                    {\r\n                        profileData.horarios.map((h) => {\r\n                            return <Card.Grid style={{ width: '100%' }} >\r\n                                <Row align=\"middle\">\r\n                                    <Col span={6} offset={4}><img width={64} src={'https://api.recreamed.com/images/' + h.sucursal.logo} alt=\"Logo\" /></Col>\r\n                                    <Col span={10}>{h.sucursal.nombre} <br /> {h.horario}</Col>\r\n                                </Row>\r\n                            </Card.Grid>\r\n                        })\r\n                    }\r\n                </Card>\r\n                <br />\r\n                <br />\r\n                <br />\r\n            </Col>\r\n        </Row>\r\n    }\r\n\r\n    return (\r\n        <div className='mainContainer'>\r\n\r\n            <Space>\r\n                <h4>Mi Perfil</h4>\r\n                <Button onClick={() => editPerfil(profileData)} type=\"primary\" shape=\"circle\" icon={<FormOutlined />} className='btnIconCentered' />\r\n            </Space> <br /><br />\r\n            {isLoading ? <Loading /> :\r\n                <Card style={{ borderRadius: 16 }}>\r\n                    {\r\n                        editing ?\r\n\r\n                            <>\r\n                                <PerfilEdit perfil={profileData} setEditing={setEditing} />\r\n                                <Button onClick={() => setEditing(false)}>Cancelar</Button>\r\n                            </> :\r\n                            <DetailsProfile />\r\n                    }\r\n                </Card>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","import React, { Component } from 'react'\r\nimport { Row, Col, Statistic, Card } from 'antd'\r\n// import { Pie, Line } from '@ant-design/charts';\r\nimport './home.css'\r\n\r\nexport class Home extends Component {\r\n\r\n    dataPie = [\r\n        {\r\n            type: 'F01',\r\n            value: 9,\r\n        },\r\n        {\r\n            type: 'F05',\r\n            value: 4,\r\n        },\r\n        {\r\n            type: 'F09',\r\n            value: 7,\r\n        },\r\n        {\r\n            type: 'F13',\r\n            value: 2,\r\n        },\r\n        {\r\n            type: 'F16',\r\n            value: 12,\r\n        },\r\n        {\r\n            type: 'F22',\r\n            value: 3,\r\n        },\r\n    ];\r\n\r\n    configPie = {\r\n        appendPadding: 10,\r\n        data: this.dataPie,\r\n        angleField: 'value',\r\n        colorField: 'type',\r\n        height: 450,\r\n        radius: 0.8,\r\n        label: {\r\n            type: 'inner',\r\n            offset: '-0.5',\r\n            content: '{name} {percentage}',\r\n            style: {\r\n                fill: '#fff',\r\n                fontSize: 14,\r\n                textAlign: 'center',\r\n            },\r\n        },\r\n    };\r\n\r\n    dataLine = [\r\n        { mes: 'Junio', consultas: 24 },\r\n        { mes: 'Julio', consultas: 17 },\r\n        { mes: 'Agosto', consultas: 22 },\r\n        { mes: 'Septiembre', consultas: 15 },\r\n        { mes: 'Octubre', consultas: 18 }\r\n    ];\r\n\r\n    configLine = {\r\n        data: this.dataLine,\r\n        height: 410,\r\n        xField: 'mes',\r\n        yField: 'consultas',\r\n        color: '#01B075',\r\n        point: {\r\n            size: 5,\r\n            shape: 'diamond',\r\n            color: '#01B075'\r\n        },\r\n        label: {\r\n            style: {\r\n                fill: '#aaa',\r\n                fontSize: 16,\r\n                stroke: '#01B075'\r\n            },\r\n        },\r\n    };\r\n    render() {\r\n        return (\r\n            <>\r\n\r\n                <br />\r\n                <div className=\"contenedor\">\r\n                    <Row gutter={30}>\r\n                        <Col xs={24} sm={12} lg={6}>\r\n                            <Card className=\"cardsContenedor\" hoverable bordered={false}>\r\n                                <Statistic title=\"Total Hospitales\" value=\"4\" valueStyle={{ color: 'white' }} style={{ backgroundColor: '#4BA6FE', borderRadius: 12 }} className=\"cardsContenido\" />\r\n                            </Card>\r\n                        </Col>\r\n                        <Col xs={24} sm={12} lg={6}>\r\n                            <Card className=\"cardsContenedor\" hoverable bordered={false}>\r\n                                <Statistic title=\"Total Medicos\" value=\"14\" valueStyle={{ color: 'white' }} style={{ backgroundColor: '#FF838A', borderRadius: 12 }} className=\"cardsContenido\" />\r\n                            </Card>\r\n                        </Col>\r\n\r\n                        <Col xs={24} sm={12} lg={6}>\r\n                            <Card className=\"cardsContenedor\" hoverable bordered={false}>\r\n                                <Statistic title=\"Total Pacientes\" value=\"241\" valueStyle={{ color: 'white' }} style={{ backgroundColor: '#18D0C2', borderRadius: 12 }} className=\"cardsContenido\" />\r\n                            </Card>\r\n                        </Col>\r\n                        <Col xs={24} sm={12} lg={6}>\r\n                            <Card className=\"cardsContenedor\" hoverable bordered={false}>\r\n                                <Statistic title=\"Citas Hoy\" value={47} valueStyle={{ color: 'white' }} style={{ backgroundColor: '#847DFC', borderRadius: 12 }} className=\"cardsContenido\" />\r\n                            </Card>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row gutter={20}>\r\n                        <Col xs={24} md={12} style={{textAlign:'center'}}>\r\n                            <h5 style={{color: '#1F263C'}}>Diagnosticos</h5>\r\n                        </Col>\r\n                        <Col xs={24} md={12} style={{textAlign:'center'}}>\r\n                            <h5>Citas</h5>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row gutter={20}>\r\n                        <Col xs={24} md={12} className=\"graficaCircular\">\r\n                            {/* <Pie {...this.configPie} style={{ backgroundColor: '#1F263C', borderRadius: 12 }} /> */}\r\n                        </Col>\r\n\r\n                        <Col xs={24} md={12}>\r\n                            {/* <Line {...this.configLine} style={{ backgroundColor: '#1F263C', padding: '20px', borderRadius: 12 }} /> */}\r\n                        </Col>\r\n                    </Row>\r\n\r\n                </div>\r\n\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Home\r\n","import React from 'react'\r\nimport { Form, Input, Button } from 'antd';\r\nconst { TextArea } = Input;\r\n\r\n\r\nconst onFinish = (values) => {\r\n    console.log('Success:', values);\r\n};\r\n\r\nconst onFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo);\r\n};\r\n\r\nexport function Historial() {\r\n    return (\r\n        <div className='mainContainer'>\r\n            <h4>Historial de los pacientes del medico</h4>\r\n            <h4>Historial Clinico</h4>\r\n            <Form name=\"basic\" labelCol={{ span: 6 }} wrapperCol={{ span: 12 }} initialValues={{ remember: true }} onFinish={onFinish} onFinishFailed={onFinishFailed} autoComplete=\"off\" >\r\n\r\n                <Form.Item label=\"Paciente\" name=\"username\" rules={[{ required: true, message: 'Please input your username!' }]} >\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item label=\"comentarios\" name=\"id_paciente\" rules={[{ required: true, message: 'Ingresa RFC' }]} >\r\n                    <TextArea rows={4} />\r\n                </Form.Item>\r\n\r\n                <Form.Item wrapperCol={{ offset: 8, span: 16 }}>\r\n                    <Button type=\"primary\" htmlType=\"submit\">\r\n                        Guardar\r\n                    </Button>\r\n                </Form.Item>\r\n            </Form>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Form, Input, Button, message, Space, Divider, Upload, Switch } from 'antd'\r\nimport { InputNumber, Select } from 'antd';\r\nimport { S_API, API, getData } from '../../resources'\r\nimport { usuario, estados } from '../../resources'\r\nimport { UploadOutlined, PlusOutlined, MinusCircleOutlined } from '@ant-design/icons'\r\n\r\n\r\nconst { Option } = Select;\r\n\r\nconst id_sucursales = usuario && usuario.horarios.map(function (item) {\r\n  return item['sucursal']['_id'];\r\n})\r\n\r\nexport default function Register(props) {\r\n\r\n  const [form] = Form.useForm();\r\n  const [avatar, setAvatar] = useState(props.paciente ? props.paciente.avatar : 'noimg.jpg')\r\n  const [medicosData, setMedicosData] = useState([])\r\n\r\n  useEffect(() => {\r\n    getData('users_by_rol/Medico').then((rs) => {\r\n      setMedicosData(findMyDoctors(rs))\r\n    })\r\n  }, [])\r\n\r\n  // EScoger solo los medicos que compartan siucursal y darlse formato pára el select\r\n  const findMyDoctors = (arr) => {\r\n    let doctorsFound = [];\r\n    arr.forEach((doctor) => {\r\n      doctor.horarios.forEach(h => {\r\n        if (id_sucursales.includes(h.sucursal._id) && !doctorsFound.includes(doctor)) {\r\n          doctor.label = doctor.name;\r\n          doctor.value = doctor._id;\r\n          doctorsFound.push(doctor)\r\n        }\r\n      })\r\n    })\r\n    return doctorsFound;\r\n  }\r\n\r\n  async function addHistoria() {\r\n    return await fetch(API + 'historias/add', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        historial: \"Historia clinica al \" + new Date()\r\n      })\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log('Story Created: ', response);\r\n        return response\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  }\r\n\r\n  const createPAtientData = async (usr) => {\r\n    const historia = await addHistoria();\r\n    console.log('historia on Register: ', historia);\r\n    const postBody = {\r\n      usuario: usr,\r\n      historia: historia.id_historia,\r\n      notas: [],\r\n      recetas: []\r\n    }\r\n    console.log('postBodyForExpedient: ', postBody);\r\n    await fetch(API + 'expedientes/add', {\r\n      method: 'POST',\r\n      body: JSON.stringify(postBody),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log('Success:', response);\r\n        message.success(response.message || response.error);\r\n        // if (response.message && response.message === 'Expediente creado correctamente') {\r\n        //   props.setAdding(false)\r\n        // }\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  }\r\n\r\n  const onFinish = async (values) => {\r\n\r\n    // Register patient\r\n    values.avatar = avatar;\r\n    values.estatus = '1';\r\n    values.rol = 'Paciente';\r\n    values.password = '' + values.telefono;\r\n    values.universidades = [];\r\n    values.certificacion = '';\r\n    values.cedula = '';\r\n    values.horarios = [];\r\n    // values.medicos_asignados = props.paciente ? props.paciente.medicos_asignados : [usuario._id];\r\n    values.responsable = props.paciente ? props.paciente.responsable : { nombre: values.res_name, telefono: values.res_phone }\r\n\r\n    delete values.prefix;\r\n    delete values.res_name;\r\n    delete values.res_phone;\r\n\r\n    const url = props.paciente ? API + 'users/updateUser/' + props.paciente._id : S_API + 'register';\r\n\r\n    console.log(values)\r\n    console.log('url: ', url);\r\n\r\n    await fetch(url, {\r\n      method: props.paciente ? 'PUT' : 'POST',\r\n      body: JSON.stringify(values),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        message.success(response.message || response.error);\r\n        props.paciente ? console.log('Editing, not creating patient') : createPAtientData(response.user_id);\r\n        response.message === 'Usuario creado correctamente' ?\r\n          window.location.reload(false) : console.log(response)\r\n        // props.setAdding(false) : console.log(response);\r\n        response.message === 'Usuario actualizado correctamente' ?\r\n          props.setAdding(false) : console.log(response);\r\n\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  };\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo);\r\n    errorInfo.errorFields.forEach((p) => {\r\n      message.error('Ingrese el campo ' + p.name)\r\n    })\r\n  };\r\n\r\n\r\n  //Start upload props Upload File\r\n  const dragDropProps = {\r\n    name: 'file',\r\n    multiple: false,\r\n    action: API + 'imagenes/upload',\r\n\r\n    onChange(info) {\r\n      const { status } = info.file;\r\n\r\n      if (status !== 'uploading') {\r\n        console.log(info.file, info.fileList);\r\n      }\r\n\r\n      if (status === 'done') {\r\n        message.success(`${info.file.name} file uploaded successfully.`);\r\n        console.log('New Files: ', info.file.response.file)\r\n        setAvatar(info.file.response.file)\r\n      } else if (status === 'error') {\r\n        message.error(`${info.file.name} file upload failed.`);\r\n      }\r\n    },\r\n\r\n    // onDrop(e) {\r\n    //   console.log('Dropped files', e.dataTransfer.files);\r\n    // },\r\n  };\r\n  return (\r\n    <div className='mainContainer'>\r\n      {\r\n        props.paciente ? <h4>Editar paciente</h4> : <h4>Registrar Paciente</h4>\r\n      }\r\n\r\n      <br />\r\n\r\n\r\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n        <Upload {...dragDropProps}>\r\n          <Button type=\"dashed\" icon={<UploadOutlined style={{ fontSize: 24, color: '#0d6efd' }} />} style={{ width: 400, height: 80 }} block>Selecciona la foto de perfil</Button>\r\n        </Upload>\r\n      </div>\r\n      <br />\r\n      <Form\r\n        // {...formItemLayout}\r\n        labelCol={{ span: 6 }} wrapperCol={{ span: 16 }}\r\n        form={form}\r\n        name=\"register\"\r\n        onFinish={onFinish}\r\n        onFinishFailed={onFinishFailed}\r\n        initialValues={props.paciente}\r\n        scrollToFirstError\r\n      >\r\n\r\n        <Form.Item\r\n          name=\"name\"\r\n          label=\"Nombre\"\r\n          rules={[{ required: true, message: 'Ingresa Nombre y apellidos' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"email\"\r\n          label=\"Correo\"\r\n          rules={[{ type: 'email', message: 'Ingresa un correo electronico vaido!' }, { required: true, message: 'Ingresa un correo electronico' }]}>\r\n          <Input />\r\n        </Form.Item>\r\n\r\n\r\n        <Form.Item\r\n          name=\"telefono\"\r\n          label=\"Telefono\"\r\n          rules={[{ required: true, message: 'Ingresa tu numero de telefono' }]}\r\n        >\r\n          <InputNumber\r\n            // addonBefore={prefixSelector}\r\n            style={{ width: '100%' }}\r\n          />\r\n        </Form.Item>\r\n\r\n        {/* Start Adding Medicos ASignados */}\r\n        <Form.Item name=\"medicos_asignados\" label=\"Medicos Asignados\" rules={[{ required: true, message: 'Agrega al mennos un medico' }]} >\r\n          <Form.List name=\"medicos_asignados\" >\r\n            {(fields, { add, remove }, { errors }) => (\r\n              <>\r\n                {fields.map((field, index) => (\r\n                  <Form.Item label='' required={false} key={field.key}>\r\n                    <Form.Item {...field} noStyle\r\n                      validateTrigger={['onChange', 'onBlur']}\r\n                      rules={[{ required: true, whitespace: true, message: \"Selecciona un Medico o elimina este campo\" }]}\r\n                    >\r\n                      <Select options={medicosData} placeholder=\"Selecciona Medico\" style={{ width: fields.length > 1 ? '90%' : '100%' }} />\r\n                    </Form.Item>\r\n                    {fields.length > 1 ? (\r\n                      <MinusCircleOutlined\r\n                        className=\"dynamic-delete-button\"\r\n                        onClick={() => remove(field.name)}\r\n                      />\r\n                    ) : null}\r\n                  </Form.Item>\r\n                ))}\r\n                <Form.Item>\r\n                  <Button type=\"dashed\" onClick={() => add()} icon={<PlusOutlined />}>\r\n                    Agregar Medico\r\n                  </Button>\r\n\r\n                  <Form.ErrorList errors={errors} />\r\n                </Form.Item>\r\n              </>\r\n            )}\r\n          </Form.List>\r\n        </Form.Item>\r\n        {/* End of Adding Medicos ASignados */}\r\n\r\n        <Divider>Responsable (opcional) </Divider>\r\n        <Form.Item name=\"res_name\" label=\"Nombre Responsable\" >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item name=\"res_phone\" label=\"Telefono Responsable\">\r\n          <Input />\r\n        </Form.Item>\r\n        <Divider />\r\n\r\n        <Form.Item\r\n          name=\"calle\"\r\n          label=\"Calle\"\r\n          rules={[{ required: false, message: 'Ingresa calle', whitespace: true }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"numexterior\"\r\n          label=\"Num Exterior\"\r\n          rules={[{ required: false, message: 'Ingresa numero exterior' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"numinterior\"\r\n          label=\"Num Interior\"\r\n          rules={[{ required: false, message: 'Ingresa numinterior' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label=\"Colonia\"\r\n          name=\"colonia\"\r\n          rules={[{ required: false, message: 'Ingresa ' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"estado\"\r\n          label=\"Estado\"\r\n          rules={[{ required: false, message: 'Apellido materno', },]}>\r\n          <Select placeholder=\"Elije tu estado\" showSearch>\r\n            {estados.map(e => <Option value={e}>{e}</Option>)}\r\n          </Select>\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"municipio\"\r\n          label=\"Municipio\"\r\n          rules={[{ required: false, message: 'Ingresa tu municipio' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"codigopostal\"\r\n          label=\"Codigo Postal\"\r\n          rules={[{ required: false, message: 'Ingresa codigopostal', },]}>\r\n          <InputNumber style={{ width: '100%', }} />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"sexo\" label=\"sexo\" rules={[{ required: false, message: 'Selecciona una opcion' }]}>\r\n          <Select placeholder=\"Elije el sexo\" >\r\n            <Option value=\"H\">H</Option>\r\n            <Option value=\"M\">M</Option>\r\n            <Option value=\"Otro\">Otro</Option>\r\n          </Select>\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"edad\" label=\"Edad\" rules={[{ required: false, message: 'Ingresa edad' }]} >\r\n          <InputNumber min={1} max={120} />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"diagnostico\" label=\"Diagnostico\" rules={[{ required: false, message: 'Ingresa el diagnostico' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"peso\" label=\"Peso\" rules={[{ required: false, message: 'Ingresa el peso' }]} >\r\n          <InputNumber min={1} max={200} />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"talla\" label=\"Talla\" rules={[{ required: false, message: 'Ingresa la talla' }]} >\r\n          <InputNumber min={1} max={200} />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"ocupacion\" label=\"Ocupacion\" rules={[{ required: false, message: 'Ingresa ocupacion' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"estado_civil\" label=\"Estado Civil\" rules={[{ required: false, message: 'Ingresa estado civil' }]} >\r\n          <Select placeholder=\"Elije el estado civil\" >\r\n            <Option value=\"Soltero\">Soltero</Option>\r\n            <Option value=\"Casado\">Casado</Option>\r\n            <Option value=\"Divorciado\">Divorciado</Option>\r\n            <Option value=\"Separación en proceso judicial\">Separación en proceso judicial</Option>\r\n            <Option value=\"Viudo\">Viudo</Option>\r\n            <Option value=\"Concubinato\">Concubinato</Option>\r\n          </Select>\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"escolaridad\" label=\"Escolaridad\" rules={[{ required: false, message: 'Ingresa escolaridad' }]} >\r\n          <Select placeholder=\"Elije escolaridad\" >\r\n            <Option value=\"Ninguno\">Ninguno</Option>\r\n            <Option value=\"Preescolar\">Preescolar</Option>\r\n            <Option value=\"Primaria\">Primaria</Option>\r\n            <Option value=\"Secundaria\">Secundaria</Option>\r\n            <Option value=\"Medio Superior\">Medio Superior</Option>\r\n            <Option value=\"Superior\">Superior</Option>\r\n            <Option value=\"Posgrado\">Posgrado</Option>\r\n          </Select>\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"lugar_de_nacimiento\" label=\"Lugar De Nacimiento\" rules={[{ required: false, message: 'Ingresa el lugar de nacimiento' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"ciudad\" label=\"Ciudad de residencia\" rules={[{ required: false, message: 'Ingresa ciudad' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"fuma\" label=\"Fuma\" rules={[{ required: false, message: 'Ingresa tu universidad' }]} >\r\n          <Switch defaultChecked={false} />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"alcohol\" label=\"Alcohol\" rules={[{ required: false, message: 'Ingresa tu universidad' }]} >\r\n          <Switch defaultChecked={false} />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"drogas\" label=\"Drogas\" rules={[{ required: false, message: 'Selecciona una opcion' }]} >\r\n          <Select placeholder=\"Elije una opcion\" >\r\n            <Option value=\"Antes\">Antes</Option>\r\n            <Option value=\"Ahora\">Ahora</Option>\r\n            <Option value=\"Nunca\">Nunca</Option>\r\n          </Select>\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"cuales_drogas\" label=\"Cuales Drogas\" rules={[{ required: false, message: 'Selecciona una opcion' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"enfermedades_familiares\" label=\"Enfermedades Familiares\" rules={[{ required: false, message: 'Ingresa tu universidad' }]} >\r\n          <Form.List name=\"enfermedades_familiares\" >\r\n            {(fields, { add, remove }, { errors }) => (\r\n              <>\r\n                {fields.map((field, index) => (\r\n                  <Form.Item label='' required={false} key={field.key}>\r\n                    <Form.Item {...field} noStyle\r\n                      validateTrigger={['onChange', 'onBlur']}\r\n                      rules={[{ required: true, whitespace: true, message: \"Ingresa la enfermedad o elimina este campo\" }]}\r\n                    >\r\n                      <Input placeholder=\"Ingresa enfermedad\" style={{ width: fields.length > 1 ? '90%' : '100%' }} />\r\n                    </Form.Item>\r\n                    {fields.length > 1 ? (\r\n                      <MinusCircleOutlined\r\n                        className=\"dynamic-delete-button\"\r\n                        onClick={() => remove(field.name)}\r\n                      />\r\n                    ) : null}\r\n                  </Form.Item>\r\n                ))}\r\n                <Form.Item>\r\n                  <Button type=\"dashed\" onClick={() => add()} icon={<PlusOutlined />}>\r\n                    Agregar Enfermedad Familiar\r\n                  </Button>\r\n\r\n                  <Form.ErrorList errors={errors} />\r\n                </Form.Item>\r\n              </>\r\n            )}\r\n          </Form.List>\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"enfermedades_medicas\" label=\"Enfermedades Medicas\" rules={[{ required: false, message: 'Ingresa tu universidad' }]} >\r\n          <Form.List name=\"enfermedades_medicas\">\r\n            {(fields, { add, remove }, { errors }) => (\r\n              <>\r\n                {fields.map((field, index) => (\r\n                  <Form.Item label='' required={false} key={field.key}>\r\n                    <Form.Item {...field} noStyle\r\n                      validateTrigger={['onChange', 'onBlur']}\r\n                      rules={[{ required: true, whitespace: true, message: \"Ingresa la enfermedad o elimina este campo\" }]}\r\n                    >\r\n                      <Input placeholder=\"Ingresa enfermedad\" style={{ width: fields.length > 1 ? '90%' : '100%' }} />\r\n                    </Form.Item>\r\n                    {fields.length > 1 ? (\r\n                      <MinusCircleOutlined\r\n                        className=\"dynamic-delete-button\"\r\n                        onClick={() => remove(field.name)}\r\n                      />\r\n                    ) : null}\r\n                  </Form.Item>\r\n                ))}\r\n                <Form.Item>\r\n                  <Button type=\"dashed\" onClick={() => add()} icon={<PlusOutlined />}>\r\n                    Agregar Enfermedad Medica\r\n                  </Button>\r\n\r\n                  <Form.ErrorList errors={errors} />\r\n                </Form.Item>\r\n              </>\r\n            )}\r\n          </Form.List>\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"tratamiento_actual\" label=\"Tratamiento actual\" rules={[{ required: false, message: 'Ingresa tu universidad' }]} >\r\n          <Form.List name=\"tratamiento_actual\" >\r\n            {(fields, { add, remove }, { errors }) => (\r\n              <>\r\n                {fields.map((field, index) => (\r\n                  <Form.Item\r\n                    // label={`Tratamiento ${index + 1}`} \r\n                    label=''\r\n                    required={false} key={field.key}>\r\n                    <Form.Item {...field} noStyle\r\n                      validateTrigger={['onChange', 'onBlur']}\r\n                      rules={[{ required: true, whitespace: true, message: \"Ingresa la enfermedad o elimina este campo\" }]}\r\n                    >\r\n                      <Input placeholder=\"Ingresa enfermedad\" style={{ width: fields.length > 1 ? '90%' : '100%' }} />\r\n                    </Form.Item>\r\n                    {fields.length > 1 ? (\r\n                      <MinusCircleOutlined\r\n                        className=\"dynamic-delete-button\"\r\n                        onClick={() => remove(field.name)}\r\n                      />\r\n                    ) : null}\r\n                  </Form.Item>\r\n                ))}\r\n                <Form.Item>\r\n                  <Button type=\"dashed\" onClick={() => add()} icon={<PlusOutlined />}>\r\n                    Agregar Tratamiento\r\n                  </Button>\r\n\r\n                  <Form.ErrorList errors={errors} />\r\n                </Form.Item>\r\n              </>\r\n            )}\r\n          </Form.List>\r\n        </Form.Item>\r\n\r\n        <Form.Item labelCol={{ span: 6 }} wrapperCol={{ offset: 6, span: 16 }}>\r\n          <Space>\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              {props.paciente ? 'Guardar' : 'Registrar'}\r\n            </Button>\r\n            {\r\n              props.setAdding && <Button onClick={() => props.setAdding(false)}>Cancelar</Button>\r\n            }\r\n          </Space>\r\n\r\n        </Form.Item>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { getData, deleteData } from '../../resources'\r\nimport { Table, Avatar, Space, Button, Popconfirm, Modal, Card, Input } from 'antd'\r\nimport { UserOutlined, EditOutlined, SearchOutlined } from '@ant-design/icons'\r\nimport Register from './register.user'\r\n\r\nexport default function HospitalTab(props) {\r\n    const [value, setValue] = useState(''); // For search input\r\n    const [pacientesData, setPacientesData] = useState([])\r\n    const [paciente, setPaciente] = useState({});\r\n    const [isModalVisible, setIsModalVisible] = useState(false);\r\n    const [loading, setLoading] = useState(true)\r\n    const [editingProfile, setEditingProfile] = useState(false)\r\n    const showModal = () => { setIsModalVisible(true); };\r\n    const handleOk = () => { setIsModalVisible(false); };\r\n    const handleCancel = () => { setIsModalVisible(false); setEditingProfile(false) };\r\n    const [searchText, setSearchText] = useState('');//For search input\r\n\r\n    useEffect(() => {\r\n        getPacientesData()\r\n    }, [])\r\n\r\n    const getPacientesData = () => {\r\n        getData('users_by_rol/Paciente').then((rs) => setPacientesData(rs)).finally(() => setLoading(false))\r\n    }\r\n\r\n    const deleteUser = (id_paciente) => {\r\n        const newPatients = pacientesData.filter((p) => p._id !== id_paciente)\r\n        deleteData(`users/remove/${id_paciente}`).then((rs) => {\r\n            setPacientesData(newPatients)\r\n        })\r\n    }\r\n\r\n    const columns = [\r\n        {\r\n            title: 'Rol',\r\n            dataIndex: 'rol',\r\n            key: 'rol',\r\n            onFilter: (value, record) => record.rol === \"Medico\",\r\n        },\r\n        {\r\n            title: 'Avatar',\r\n            dataIndex: 'avatar',\r\n            key: 'avatar',\r\n            render: (_, { avatar }) => {\r\n                return avatar.length > 9 ?\r\n                    <img width={48} src={'https://api.recreamed.com/images/' + avatar} alt='ProfilePic' /> :\r\n                    <Avatar size={48} className='btnIconCentered' icon={<UserOutlined />} />\r\n            }\r\n        },\r\n        {\r\n            title: 'Nombre',\r\n            dataIndex: 'name',\r\n            key: 'name',\r\n        },\r\n        {\r\n            title: 'Medicos Asignados',\r\n            dataIndex: 'medicos_asignados',\r\n            key: 'medicos_asignados',\r\n            render: (_, { medicos_asignados }) => <ul>{\r\n                medicos_asignados.map((m) => <li key={m._id}>{m.name}</li>)\r\n            }</ul>\r\n        },\r\n        {\r\n            title: 'Correo',\r\n            dataIndex: 'email',\r\n            key: 'email',\r\n        },\r\n        {\r\n            title: 'Telefono',\r\n            dataIndex: 'telefono',\r\n            key: 'telefono',\r\n        },\r\n        {\r\n            title: 'Acciones',\r\n            key: 'detalles',\r\n            render: (text, record) => (\r\n                <Space size=\"middle\">\r\n                    <Button onClick={() => { setPaciente(record); showModal(); }}>Detalles</Button>\r\n                    <Popconfirm\r\n                        title=\"Borrar Paciente\"\r\n                        description=\"Esta seguro que quiere eliminar al paciente?\"\r\n                        onConfirm={() => deleteUser(record._id)}\r\n                        onCancel={(e) => console.log(e)}\r\n                        okText=\"Si\"\r\n                        cancelText=\"No\"\r\n                    >\r\n                        <Button danger>Eliminar</Button>\r\n                    </Popconfirm>\r\n                </Space>\r\n            )\r\n        }\r\n    ];\r\n\r\n    // Populate table\r\n    // Find my patients by medico asignado\r\n    const findPatientsOfMyMedicos = (id_hospital) => {\r\n        let dl = [];\r\n        // Check on each horario of each medico of medicos asignados of patient to see if share sucursal with my horarios as admin\r\n        pacientesData.forEach(paciente => {\r\n            paciente.medicos_asignados.forEach(med => {\r\n                med.horarios.forEach(h => {\r\n                    // if (ids_hospitales.includes(h.sucursal) && !dl.includes(paciente)) { console.log(paciente); dl.push(paciente) }\r\n                    if (h.sucursal === id_hospital && !dl.includes(paciente) && paciente.name.toLowerCase().includes(searchText.toLowerCase())) { console.log(paciente); dl.push(paciente) }\r\n                })\r\n            });\r\n        });\r\n        return dl;\r\n    }\r\n    const pacientesDataFiltered = findPatientsOfMyMedicos(props.id_hospital); // Get medicos data before render TAble\r\n    // Fill Modal\r\n    const gridStyle = {\r\n        width: '50%',\r\n        height: '50px',\r\n        textAlign: 'center',\r\n        display: 'inline-flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    };\r\n    function DetalleUsuario() {\r\n        const datosSimples = [\r\n            \"rol\",\r\n            \"name\",\r\n            \"email\",\r\n            \"telefono\",\r\n            \"calle\",\r\n            \"municipio\",\r\n            \"estado\",\r\n            \"codigopostal\",\r\n            \"alcohol\",\r\n            \"ciudad\",\r\n            \"colonia\",\r\n            \"cuales_drogas\",\r\n            \"diagnostico\",\r\n            \"drogas\", \"edad\",\r\n            \"escolaridad\",\r\n            \"estado_civil\",\r\n            \"fuma\", \"lugar_de_nacimiento\",\r\n            \"numexterior\",\r\n            \"numinterior\",\r\n            \"ocupacion\",\r\n            \"peso\", \"sexo\",\r\n            \"talla\"\r\n        ]\r\n\r\n        return <div>\r\n            {\r\n                editingProfile ? <Register paciente={paciente} setAdding={setEditingProfile} /> :\r\n                    <Card bordered={false} title={<Space><h4>Detalles del paciente </h4> <Button type='primary' ghost onClick={setEditingProfile} shape=\"circle\" icon={<EditOutlined />} title='Editar' className='btnIconCentered' /></Space>}>\r\n                        {\r\n                            datosSimples.map(k => <><Card.Grid style={gridStyle}>{k}</Card.Grid><Card.Grid style={gridStyle} size='small'>{paciente[k]}</Card.Grid></>)\r\n                        }\r\n                    </Card>\r\n            }\r\n        </div>\r\n    }\r\n\r\n    const handleSearch = e => {\r\n        setValue(e.target.value)\r\n        setSearchText(e.target.value);\r\n    };\r\n\r\n    if (loading) return <p>Cargando...</p>\r\n\r\n    return <div>\r\n        <h6>Pacientes de {props.hospital}</h6>\r\n\r\n        <Input\r\n            style={{ width: '20em' }}\r\n            placeholder=\"Buscar Paciente\"\r\n            value={value}\r\n            onChange={handleSearch}\r\n            addonAfter={<SearchOutlined />}\r\n        />\r\n        <div className='borderedTable'>\r\n            <Table dataSource={pacientesDataFiltered} columns={columns} pagination={false} size='small' />\r\n        </div>\r\n\r\n        <Modal width={800} open={isModalVisible} onOk={handleOk} onCancel={handleCancel} destroyOnClose>\r\n            <DetalleUsuario />\r\n        </Modal>\r\n    </div >\r\n}\r\n","import React from 'react'\r\nimport { myHospitals } from '../../resources'\r\nimport { Tabs } from 'antd'\r\nimport HospitalTab from './dash.patients.hospital-tab'\r\n\r\n\r\nconst onChange = (key) => { console.log(key) }\r\n\r\nexport default function Dash() {\r\n\r\n    // Create items for TABS\r\n    myHospitals.forEach(h => {\r\n        h.label = h.nombre;\r\n        h.key = h._id;\r\n        h.children = <HospitalTab hospital={h.nombre} id_hospital={h._id} />\r\n    });\r\n\r\n    return (\r\n        <div className='mainContainer'>\r\n\r\n            <h4>Pacientes de los diferentes hospitaels</h4>\r\n\r\n            <Tabs defaultActiveKey=\"1\" items={myHospitals} onChange={onChange} />\r\n\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { Tabs } from 'antd'\r\nimport Register from './register.user';\r\nimport Dash from './dash.patients.main'\r\n\r\nexport default function Users() {\r\n    const items = [\r\n        { label: 'Pacientes', key: 'item-1', children: <Dash /> },\r\n        { label: 'Registrar', key: 'item-2', children: <Register /> },\r\n    ];\r\n    return (\r\n        <div >\r\n            <Tabs items={items} tabPosition='left' />\r\n        </div>\r\n    )\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { Button, Modal, Form, Input, Select, message, DatePicker, InputNumber } from 'antd';\r\nimport { getData, sendDataBody, updateData } from '../../resources';\r\n// ADMIN CREATE INGRESO\r\nexport default function CreateBalance(props) {\r\n\r\n    const isCreating = !props.balanceForEdit;\r\n\r\n    const [pacientesData, setPacientesData] = useState([])\r\n    const [loading, setLoading] = useState(true)\r\n\r\n    const handleOk = () => { props.setIsModalOpen(false) };\r\n    const handleCancel = () => { props.setIsModalOpen(false); props.setBalanceForEdit(null) };\r\n\r\n    useEffect(() => {\r\n        // console.log('receivd for edit nm', props.balanceForEdit)\r\n        // console.log('receivd for edit nm', nombreDoctor)\r\n        if (props.balanceForEdit && props.balanceForEdit.medico) {\r\n            getPacientesData(props.balanceForEdit.medico)\r\n        }\r\n\r\n    }, [props.balanceForEdit])\r\n\r\n\r\n    // Start of filtering patients to show in select\r\n    const getPacientesData = (medico) => {\r\n        // if (props.balanceForEdi) {\r\n        getData(`mispacientes/${medico}`).then((rs) => {\r\n            if (rs) {\r\n                rs.forEach(patient => {\r\n                    patient.value = patient._id; patient.label = patient.name;\r\n                });\r\n                console.log('Pacientes: ', rs)\r\n                setPacientesData(rs)\r\n            }\r\n        }).finally(() => { setLoading(false) })\r\n        // }\r\n    }\r\n    // End of filtering patients to show in select\r\n\r\n    // Form methods\r\n    const onFinish = (values) => {\r\n        // if (Object.keys(props.balanceForEdit).length === 0 || !props.balanceForEdit) {\r\n        //     values.medico = props.medico;\r\n        //     values.tipo = 'ingreso';\r\n        //     values.fecha_hora = new Date();\r\n        // }\r\n\r\n        values.estado = 'pendiente';\r\n        values.tipo = props.tipo;\r\n        console.log('Ready to send:', values);\r\n        console.log('For Edit: ', props.balanceForEdit);\r\n        if (!props.balanceForEdit || Object.keys(props.balanceForEdit).length === 0) {\r\n            sendDataBody(`balances/add`, values).then((rs) => { console.log(rs); message.success(rs.message || rs.error) }).finally(() => { props.getIngresos(); props.setIsModalOpen(false) })\r\n        } else {\r\n            updateData(`/balances/update/${props.balanceForEdit._id}`, values).then((rs) => {\r\n                console.log(rs); props.setBalanceForEdit({}); props.getIngresos(); props.setIsModalOpen(false);\r\n            })\r\n        }\r\n        \r\n    };\r\n\r\n    const onFinishFailed = (errorInfo) => { console.log('Failed:', errorInfo) };\r\n\r\n    const handleDoctorChange = (value) => { getPacientesData(value) };\r\n\r\n    // const EditingForm = () => {\r\n    //     const { doctor: { name: nombreDoctor }, monto, forma_de_pago, fecha_hora, concepto } = props.balanceForEdit;\r\n\r\n    // }\r\n\r\n    return (\r\n        <Modal title={props.balanceForEdit ? \"Editar Estado\" : 'Agregar Ingreso'} open={props.isModalOpen} onOk={handleOk} onCancel={handleCancel} destroyOnClose\r\n            footer={[\r\n                <Button type=\"primary\" htmlType=\"submit\" form='edit_balance'>\r\n                    Guardar\r\n                </Button>,\r\n                <Button onClick={handleCancel}>\r\n                    Cancelar\r\n                </Button>\r\n            ]}>\r\n\r\n            <Form\r\n                name=\"edit_balance\"\r\n                labelCol={{ span: 8 }}\r\n                wrapperCol={{ span: 16 }}\r\n                initialValues={props.balanceForEdit}\r\n                onFinish={onFinish}\r\n                onFinishFailed={onFinishFailed}\r\n                autoComplete=\"off\"\r\n            >\r\n                {\r\n                    isCreating ? <div> <Form.Item label=\"Monto\" name=\"monto\" rules={[{ required: true, message: 'Ingresa el monto' }]} >\r\n                        <Input />\r\n                    </Form.Item>\r\n\r\n                        <Form.Item label=\"Concepto\" name=\"concepto\" rules={[{ required: true, message: 'Ingresa el concepto' }]}>\r\n                            <Input />\r\n                        </Form.Item>\r\n\r\n                        <Form.Item label=\"Medico\" name=\"medico\" >\r\n                            <Select options={props.medicosData} onChange={handleDoctorChange} />\r\n                        </Form.Item>\r\n\r\n                        <Form.Item label=\"Paciente\" name=\"paciente\" >\r\n                            <Select options={pacientesData} />\r\n                        </Form.Item>\r\n\r\n\r\n\r\n\r\n                        <Form.Item\r\n                            label=\"Fecha y Hora\"\r\n                            name=\"fecha_hora\"\r\n                            rules={[{ required: true, message: 'Selecciona Fecha y Hora' }]}\r\n                        >\r\n                            <DatePicker showTime format=\"DD-MM-YYYY HH:mm\" />\r\n                        </Form.Item></div> : <div></div>\r\n                }\r\n\r\n                <Form.Item label=\"abono\" name=\"abono\" rules={[{ required: true, message: 'Ingresa el abobo' }]} >\r\n                    <InputNumber style={{ width: '100%' }} />\r\n                </Form.Item>\r\n\r\n                <Form.Item label=\"Forma de Pago\" name=\"forma_de_pago\" >\r\n                    <Select\r\n                        options={[\r\n                            {\r\n                                value: 'efectivo',\r\n                                label: 'Efectivo',\r\n                            },\r\n                            {\r\n                                value: 'tarjeta',\r\n                                label: 'Tarjeta',\r\n                            },\r\n                            {\r\n                                value: 'transferencia',\r\n                                label: 'Transferencia',\r\n                            },\r\n                        ]}\r\n                    />\r\n                </Form.Item>\r\n\r\n\r\n\r\n                {/* <Form.Item\r\n                    label=\"Estado\"\r\n                    name=\"estado\"\r\n                    rules={[{ required: true, message: 'Selecciona el estado' }]}\r\n                >\r\n                    <Select\r\n                        // onChange={handleDoctorChange}\r\n                        options={[\r\n                            {\r\n                                value: 'pendiente',\r\n                                label: 'Pendiente',\r\n                            },\r\n                            {\r\n                                value: 'pagado',\r\n                                label: 'Pagado',\r\n                            },\r\n                            {\r\n                                value: 'pago parcial',\r\n                                label: 'Pago parcial',\r\n                            },\r\n                        ]}\r\n                    />\r\n                </Form.Item> */}\r\n\r\n            </Form>\r\n\r\n        </Modal>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Document, Page, Text, View, StyleSheet, Image } from '@react-pdf/renderer';\r\nimport { PDFViewer } from '@react-pdf/renderer';\r\n\r\n\r\n// Estilo para el ticket\r\nconst styles = StyleSheet.create({\r\n    titleContainer: {\r\n        flexDirection: 'row',\r\n        justifyContent: 'center',\r\n        marginBottom: 10,\r\n    },\r\n    reportTitle: {\r\n        fontSize: 18,\r\n        textAlign: 'center',\r\n        fontFamily: 'Helvetica-Bold',\r\n        textTransform: 'uppercase',\r\n    },\r\n    subtitle: {\r\n        fontSize: 14,\r\n        textAlign: 'center',\r\n        fontFamily: 'Helvetica',\r\n        marginBottom: 20,\r\n    },\r\n    text: {\r\n        margin: 10,\r\n        fontSize: 12,\r\n        textAlign: 'justify',\r\n        fontFamily: 'Helvetica',\r\n    },\r\n    sellerBuyerInfo: {\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n        marginBottom: 10,\r\n    },\r\n    infoTitle: {\r\n        fontFamily: 'Helvetica-Bold',\r\n        fontSize: 12,\r\n    },\r\n    infoText: {\r\n        fontFamily: 'Helvetica',\r\n        fontSize: 12,\r\n    },\r\n    table: {\r\n        display: 'table',\r\n        width: 'auto',\r\n        marginTop: 10,\r\n        borderStyle: 'solid',\r\n        borderWidth: 1,\r\n        borderColor: '#bfbfbf',\r\n    },\r\n    tableRow: {\r\n        margin: 'auto',\r\n        flexDirection: 'row',\r\n    },\r\n    tableColHeader: {\r\n        width: '25%',\r\n        borderStyle: 'solid',\r\n        borderWidth: 1,\r\n        borderColor: '#bfbfbf',\r\n        backgroundColor: '#f0f0f0',\r\n        textAlign: 'center',\r\n        fontFamily: 'Helvetica-Bold',\r\n        fontSize: 12,\r\n        paddingTop: 5,\r\n        paddingBottom: 5,\r\n    },\r\n    tableCol: {\r\n        width: '25%',\r\n        borderStyle: 'solid',\r\n        borderWidth: 1,\r\n        borderColor: '#bfbfbf',\r\n        textAlign: 'center',\r\n        fontFamily: 'Helvetica',\r\n        fontSize: 10,\r\n        paddingTop: 5,\r\n        paddingBottom: 5,\r\n    },\r\n    tableCellHeader: {\r\n        margin: 'auto',\r\n        marginTop: 5,\r\n        marginBottom: 5,\r\n        flexDirection: 'row',\r\n    },\r\n    total: {\r\n        fontFamily: 'Helvetica-Bold',\r\n        fontSize: 14,\r\n        marginTop: 30,\r\n        textAlign: 'right',\r\n        paddingRight: 50,\r\n    },\r\n\r\n    page: {\r\n        fontFamily: 'Helvetica',\r\n        fontSize: 12,\r\n        padding: 40,\r\n    },\r\n    header: {\r\n        flexDirection: 'row',\r\n        alignItems: 'center',\r\n        borderBottom: '1pt solid #000',\r\n        paddingBottom: 10,\r\n        marginBottom: 10,\r\n    },\r\n    logo: {\r\n        width: 80,\r\n        height: 'auto',\r\n        marginRight: 10,\r\n\r\n    },\r\n    title: {\r\n        fontSize: 20,\r\n        marginLeft: 10,\r\n    },\r\n    company: {\r\n        fontSize: 14,\r\n        marginTop: 5,\r\n        marginLeft: 10,\r\n    },\r\n});\r\n\r\n// Componente del ticket\r\nexport default function Ticket({ ingreso, logo, hospital, seller, buyer }) {\r\n    console.log('Received for print ', ingreso)\r\n    console.log('Received logo ', logo)\r\n\r\n    const { usuario: { name: userName } = {} } = ingreso\r\n    const { cita: { usuario: { name: citaName } = {} } = {} } = ingreso\r\n\r\n    return <PDFViewer height={500} width={550}>\r\n        <Document>\r\n            <Page size=\"A4\" style={styles.page}>\r\n                <View>\r\n                    <View style={styles.header}>\r\n                        <Image style={styles.logo} src={logo} />\r\n                        <View>\r\n                            <Text style={styles.title}>Nota de Venta</Text>\r\n                            <Text style={styles.company}>{hospital} </Text>\r\n                            <Text style={styles.company}>{new Date(ingreso.createdAt).toLocaleString()} </Text>\r\n                        </View>\r\n                    </View>\r\n                    <View style={styles.sellerBuyerInfo}>\r\n                        <View>\r\n                            <Text style={styles.infoTitle}>Medico:</Text>\r\n                            <Text style={styles.infoText}>{ingreso.doctor.name}</Text>\r\n                        </View>\r\n                        <View>\r\n                            <Text style={styles.infoTitle}>Paciente:</Text>\r\n                            {userName && <Text style={styles.infoText}>{userName}</Text>}\r\n                            {citaName && <Text style={styles.infoText}>{citaName}</Text>}\r\n                        </View>\r\n                    </View>\r\n                    <View style={styles.table}>\r\n                        <View style={styles.tableRow}>\r\n                            <Text style={styles.tableColHeader}>Concepto</Text>\r\n                            <Text style={styles.tableColHeader}>Cantidad</Text>\r\n                            <Text style={styles.tableColHeader}>Precio Unitario</Text>\r\n                            <Text style={styles.tableColHeader}>Subtotal</Text>\r\n                        </View>\r\n                        {/* {ingresos.map((item) => ( */}\r\n                        <View style={styles.tableRow} key={ingreso.id}>\r\n                            <Text style={styles.tableCol}>{ingreso.concepto}</Text>\r\n                            <Text style={styles.tableCol}>1</Text>\r\n                            <Text style={styles.tableCol}>${ingreso.monto.toFixed(2)}</Text>\r\n                            <Text style={styles.tableCol}>\r\n                                {/* ${(item.monto * item.quantity).toFixed(2)} */}\r\n                                ${ingreso.monto.toFixed(2)}\r\n                            </Text>\r\n                        </View>\r\n                        {/* ))} */}\r\n                    </View>\r\n                    <Text style={styles.total}>\r\n                        Total: ${ingreso.monto}\r\n                        {/* Total: ${ingresos.reduce((acc, item) => acc + item.monto * 1, 0).toFixed(2)} */}\r\n                    </Text>\r\n                </View>\r\n            </Page>\r\n        </Document>\r\n\r\n    </PDFViewer>\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { Table, Tag, Button, Typography, Card, Modal, Row, Col } from 'antd';\r\nimport { CheckCircleTwoTone } from '@ant-design/icons'\r\nimport { getData, usuario, sendDataBody, ids_hospitales, deleteData } from '../../resources';\r\nimport CreateBalance from './create-ingreso';\r\nimport Loading from '../../loading';\r\nimport Ticket from './ticket-for-print';\r\nimport moment from 'moment/moment';\r\n\r\nconst { Text } = Typography;\r\n\r\nexport default function Ingresos() {\r\n    const [loading, setLoading] = useState(true)\r\n    const [medicosData, setMedicosData] = useState({}) // Populate the main select component\r\n    const [medico, setMedico] = useState(null)\r\n    const [ingresosData, setIngresosData] = useState([])\r\n    const [ingresoForEdit, setIngresoForEdit] = useState({})\r\n    const [ingresoForPrint, setIngresoForPrint] = useState([])\r\n\r\n    // Select logo for print in receta. Switches the modal view into select logo hospital/pdf recipe for print\r\n    const [logoHospital, setLogoHospital] = useState(null)\r\n    const [nombreHospital, setNombreHospital] = useState(null)\r\n    const [isLogoSelected, setIsLogoSelected] = useState(false)\r\n\r\n    // Modal For Edit Balance\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const showModal = () => { setIsModalOpen(true) };\r\n\r\n    // Modal For Ticket\r\n    const [isTicketModalOpen, setIsTicketModalOpen] = useState(false);\r\n    const showTicketModal = () => { setIsTicketModalOpen(true) };\r\n    const handleTicketOk = () => { setIsTicketModalOpen(false); setIsLogoSelected(false) };\r\n    const handleTicketCancel = () => { setIsTicketModalOpen(false); setIsLogoSelected(false) };\r\n\r\n    // Modal For Add/Edit Gasto\r\n    const [isEgresoModalOpen, setIsEgresoModalOpen] = useState(false)\r\n    const showEgresoModal = () => { setIsEgresoModalOpen(true) };\r\n\r\n    useEffect(() => {\r\n        getIngresos()\r\n    }, [])\r\n\r\n    const getIngresos = async () => {\r\n        const medicos = await sendDataBody('users/getMany/hospitals', { ids_hospitales: ids_hospitales })\r\n\r\n        medicos.forEach(m => { m.label = m.name; m.value = m._id; })// to pass to create modal\r\n        setMedicosData(medicos) // to pass to create modal\r\n\r\n        const promises = medicos.map(medico => getData(`balances/medico/${medico._id}`));\r\n\r\n        Promise.all(promises)\r\n            .then(resultados => {\r\n                const ingresos = resultados.flat(); // concatenar todos los arrays de ingresos\r\n                console.log(ingresos);\r\n                // Doctor is for details, medico is for edit. Usuario is for details, paciente id for Edit\r\n                ingresos.forEach((i) => { i.doctor = i.medico; i.medico = i.medico._id; if (i.paciente) { i.usuario = i.paciente; i.paciente = i.paciente._id; } })\r\n                setIngresosData(ingresos.sort((a, b) => a.fecha_hora < b.fecha_hora))\r\n                setLoading(false)\r\n            })\r\n            .catch(error => {\r\n                console.error(error);\r\n            });\r\n    }\r\n\r\n    const handleEditIngreso = (record) => {\r\n        record.fecha_hora = moment.utc(record.fecha_hora)\r\n        setIngresoForEdit(record);\r\n        showModal()\r\n    }\r\n\r\n    const columns = [\r\n        {\r\n            title: 'Médico',\r\n            dataIndex: 'medico',\r\n            key: 'createdAt',\r\n            render: (_, { doctor }) => { return <>{doctor.name}</> }\r\n        },\r\n        {\r\n            title: 'Tipo',\r\n            dataIndex: 'tipo',\r\n            key: 'tipo',\r\n            render: (_, { tipo }) => {\r\n                let color = (tipo && tipo === 'ingreso') ? 'geekblue' : 'volcano';\r\n                return tipo ? <Tag color={color} >{tipo.toUpperCase()}</Tag> : <Tag color={color}>Indefinido</Tag>\r\n            },\r\n        },\r\n        {\r\n            title: 'Fecha',\r\n            dataIndex: 'fecha_hora',\r\n            key: 'fecha_hora',\r\n            render: (_, { fecha_hora }) => { return <>{new Date(fecha_hora).toLocaleString()}</> },\r\n            defaultSortOrder: 'descend',\r\n            sorter: (a, b) => a.fecha_hora > b.fecha_hora,\r\n        },\r\n        {\r\n            title: 'Monto',\r\n            dataIndex: 'monto',\r\n            key: 'monto',\r\n            render: (_, { monto }) => { return <>${monto}</> }\r\n        },\r\n        {\r\n            title: 'Abono',\r\n            dataIndex: 'abono',\r\n            key: 'abono',\r\n            render: (_, { abono }) => { return abono && <>${abono}</> }\r\n\r\n        },\r\n        {\r\n            title: 'Adeudo',\r\n            dataIndex: 'adeudo',\r\n            key: 'adeudo',\r\n            render: (_, record) => { return <>${record.monto - record.abono}</> }\r\n        },\r\n        {\r\n            title: 'Forma de pago',\r\n            key: 'forma_de_pago',\r\n            dataIndex: 'forma_de_pago',\r\n            render: (_, { forma_de_pago }) => {\r\n                let color = forma_de_pago === 'efectivo' ? 'green' : 'geekblue';\r\n                return <Tag color={color} >{forma_de_pago.toUpperCase()}</Tag>\r\n            },\r\n        },\r\n        {\r\n            title: 'Paciente',\r\n            key: 'usuario',\r\n            dataIndex: 'usuario',\r\n            render: (_, record) => {\r\n                // if (record.cita) return <>{record.cita.usuario}</>\r\n                if (record.cita) return <>{record.cita.usuario.name}</> //when populate is ready\r\n                else if (record.usuario) return <>{record.usuario.name}</>\r\n                else return <Text type=\"secondary\"> Sin Paciente</Text>\r\n            }\r\n        },\r\n        {\r\n            title: 'Factura',\r\n            key: 'Factura',\r\n            dataIndex: 'factura',\r\n            render: (_, { factura }) => { return factura && <CheckCircleTwoTone /> }\r\n\r\n        },\r\n        {\r\n            title: 'Estado',\r\n            key: 'Estado',\r\n            dataIndex: 'estado',\r\n            // render: (_, { estado }) => {\r\n            //     let color = estado === 'pagado' ? 'geekblue' : 'green';\r\n            //     if (estado === 'pendiente' || estado === 'sin pagar') color = 'volcano';\r\n            //     return <Tag color={color}> {estado.toUpperCase()} </Tag>\r\n            // }\r\n            render: (_, { abono, monto }) => {\r\n                const pagado = abono === monto;\r\n                let color = pagado ? 'green' : 'volcano';\r\n                return <Tag color={color}> {pagado ? 'PAGADO' : 'PENDIENTE'} </Tag>\r\n            }\r\n\r\n        },\r\n        {\r\n            title: 'Acciones',\r\n            key: 'Editar',\r\n            render: (_, record) => <div style={{ display: 'flex', gap: 2, flexDirection: 'column' }}>\r\n                {/* <Button onClick={() => { deleteData(`balances/remove/${record._id}`).then(()=>getIngresos()) }}>Eliminar</Button> */}\r\n                <Button size='small' onClick={() => handleEditIngreso(record)}>Editar Estado</Button>\r\n                <Button size='small' onClick={() => { setIngresoForPrint(record); showTicketModal() }}>Imprimir Nota</Button>\r\n            </div>\r\n        },\r\n    ];\r\n\r\n    const ingresos = [\r\n        { id: 1, product: 'Ketamina 1', quantity: 1, price: 1200 },\r\n    ];\r\n\r\n    if (loading) return <Loading />\r\n\r\n    return (\r\n        <div className='mainContainer'>\r\n            <h4>Ingresos de todos los medicos</h4>\r\n            <br />\r\n\r\n            {/* <Button onClick={showModal} type='primary' style={{ marginBottom: 22 }} >Agregar Nuevo Ingreso</Button> */}\r\n            <Button ghost onClick={showEgresoModal} type='primary' style={{ marginBottom: 22, marginLeft: 6 }} >Agregar Nuevo Gasto</Button>\r\n\r\n            <Table columns={columns} dataSource={ingresosData}\r\n            // scroll={{ x: 950, y: \"calc(100vh - 220px)\" }}\r\n            />\r\n\r\n            <div style={{ height: 200 }}></div>\r\n\r\n            {/* Ingreso */}\r\n            <CreateBalance tipo='ingreso' balanceForEdit={ingresoForEdit} setBalanceForEdit={setIngresoForEdit} setIsModalOpen={setIsModalOpen} isModalOpen={isModalOpen} getIngresos={getIngresos} medico={medico} medicosData={medicosData} />\r\n\r\n            {/* Gasto */}\r\n            <CreateBalance tipo='egreso' setBalanceForEdit={setIngresoForEdit} setIsModalOpen={setIsEgresoModalOpen} isModalOpen={isEgresoModalOpen} getIngresos={getIngresos} medicosData={medicosData} />\r\n\r\n            {/* Ticket */}\r\n            <Modal title=\"Imprimir Nota de Venta\" open={isTicketModalOpen} onOk={handleTicketOk} onCancel={handleTicketCancel} width={600}>\r\n\r\n                {\r\n                    isLogoSelected ? // Si ya hay logo seleccionado, se pasa a la receta y se muestra en pdf\r\n                        <Ticket ingreso={ingresoForPrint} logo={'https://api.recreamed.com/images/' + logoHospital} hospital={nombreHospital} seller='Médico: ' buyer='Paciente: ' />\r\n                        :\r\n                        <div>\r\n                            <Card title='Selecciona un hospital' bordered={false}>\r\n                                {\r\n                                    usuario.horarios.map((h) => {\r\n                                        return <Card.Grid style={{ width: '100%' }} onClick={() => { console.log(h.sucursal); setLogoHospital(h.sucursal.logo); setNombreHospital(h.sucursal.nombre); setIsLogoSelected(true) }} key={h._id}>\r\n                                            <Row align=\"middle\">\r\n                                                <Col span={6} offset={4}><img width={64} src={'https://api.recreamed.com/images/' + h.sucursal.logo} alt=\"Logo\" /></Col>\r\n                                                <Col span={10}>{h.sucursal.nombre} <br /> {h.horario}</Col>\r\n                                            </Row>\r\n                                        </Card.Grid>\r\n                                    })\r\n                                }\r\n                            </Card>\r\n                        </div>\r\n                }\r\n\r\n            </Modal>\r\n        </div >\r\n    )\r\n}\r\n","export const catalogo_efectos = {\r\n    \"Ritmo Cardiaco Elevado\": false,\r\n    \"Sentimientos de Ansiedad\": true,\r\n    \"Debilidad o Mareos ligeros\": false,\r\n    \"Sedacion o Somnolencia\": false,\r\n    \"Nauseas\": false,\r\n    \"Vision Borrosa\": false,\r\n    \"Aumento de la Presión Arterial\": false,\r\n    \"Mareos\": false,\r\n    \"Dolor de cabeza\": false\r\n}\r\n\r\n\r\nexport const desrealizacion = {\r\n    \"1. ¿Parece que las cosas se mueven en cámara lenta ?\": [\r\n        \"No en absoluto\",\r\n        \"Leve, las cosas parecen un poco más lentas, pero no muy notable.\",\r\n        \"Moderado, las cosas se mueven aproximadamente el doble que normalmente.\",\r\n        \"Grave, las cosas se mueven tan lentamente que apenas se mueven.\",\r\n        \"Extremo, las cosas se mueven tan lentamente, que tengo la percepción de que todo se  detiene, como si el tiempo se detuviera.\"\r\n    ],\r\n    \"2. ¿Te parecen irreales las cosas, como si estuvieras en un sueño?\": [\r\n        \"No en absoluto.\",\r\n        \"Leve, las cosas se ven un poco irreales, pero soy muy consciente de donde estoy.\",\r\n        \"Moderado, las cosas parecen un sueño, aunque sé que estoy despierto.\",\r\n        \"Grave, las cosas se parecen mucho a un sueño, aunque sé que estoy aquí, tengo el sentimiento de que pudiera estar dormido.\",\r\n        \"Extremo, siento que nada es real, como si tuviera que pellizcarme para despertar, o preguntarle a alguien si esto es un sueño.\"\r\n    ]\r\n}\r\n\r\nexport const despersonalizacion = {\r\n    \"3. ¿Te sientes desconectado de tu propio cuerpo?\": [\r\n        \"No, en absoluto\",\r\n        \"Leve, Me siento un poco desconectado de mi mismo, pero básicamente estoy completamente aquí.\",\r\n        \"Moderado, Me siento algo desprendido de mi propio cuerpo, pero básicamente todo unido.\",\r\n        \"Grave, me siento desprendido de mi propio cuerpo, pero no muy alejado de mi cuerpo, y siento como si estuviera yo ahí.\",\r\n        \"Extremo, Me siento como si estuviera completamente fuera de mi cuerpo, como si estuviera viendo mi propio cuerpo desde muy lejos, como si estuviera otra persona ahí.\"\r\n    ],\r\n    \"4. Sientes que ha cambiado el sentido de tu propio cuerpo?: por ejemplo, tu cuerpo se siente inusualmente largo o inusualmente pequeño?\": [\r\n        \"No, en absoluto\",\r\n        \"Leve, Tengo un vago sentimiento de que algo en mi cuerpo ha cambiado, pero no puedo decir exactamente que es.\",\r\n        \"Moderado, Siento como que mi cuerpo ha aumentado o disminuido ligeramente de tamaño, o se siente como si no fuera mi cuerpo.\",\r\n        \"Grave, Siento como si mi cuerpo ha aumentado el doble de si tamaño normal, o disminuido el doble de su tamaño normal.\",\r\n        \"Extremo, siento como si mi cuerpo se hubiera hinchado al menos diez veces de su tamaño normal o como si fuera diez veces más pequeño, o como si mis brazos se hubieran convertido como palillos de dientes.\"\r\n    ]\r\n}\r\n\r\nexport const amnesia = {\r\n    \"5. Te has distraído, o has perdido el rastro de alguna manera de lo que esta pasando durante esta experiencia?\": [\r\n        \"No en absoluto\",\r\n        \"Leve, He tenido algunos episodios de haber perdido la noción sobre lo que está pasando, pero he seguido todo la mayor parte del tiempo.\",\r\n        \"Moderado, He perdido al menos un minuto de tiempo, o perdido completamente la noción de lo que está pasando ahora.\",\r\n        \"Grave, He perdido varios segmentos de tiempo de un minuto o más.\",\r\n        \"Extremo, he perdido largos segmentos de tiempo de al menos 15 minutos o más.\"\r\n    ],\r\n    \"6. Tiene lagunas (vacios) en su memoria?\": [\r\n        \"No en lo absoluto\",\r\n        \"Leve, Hay algunas cosas recientes que no puedo recordar.\",\r\n        \"Moderado, Han habido algunas lagunas (vacios)  en mi memoria que duraron unos minutos\",\r\n        \"Grave, Han habido largas lagunas (vacios) en mi memoria que duraron más de algunos minutos.\",\r\n        \"Extremo, No puedo reconstruir lo que está pasando de un momento al siguiente, debido a largas lagunas (vacios)  en mi memoria.\"\r\n    ]\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { catalogo_efectos, desrealizacion, despersonalizacion, amnesia } from './ketamina_catalog'\r\nimport { Form, Switch, Button, Radio, Space, Slider, Select, message } from 'antd'\r\nimport { getData, sendDataBody } from '../../resources';\r\nimport logo from \"../../assets/Logo.png\";\r\nconst { Option } = Select;\r\n\r\nexport default function KetaminaEncuesta(props) {\r\n  // For check if the encuesta existts on db\r\n  const [encuestaNotExists, setEncuestaNotExists] = useState(null)\r\n  const [checking, setChecking] = useState(true)\r\n  const [pacienteData, setPacienteData] = useState({})\r\n  const [medicoData, setMedicoData] = useState({})\r\n\r\n  useEffect(() => {\r\n    checkEncuesta()\r\n  }, [])\r\n\r\n  const checkEncuesta = () => {\r\n\r\n    getData('getuser/' + props.idpaciente).then((rs) => { setPacienteData(rs) })\r\n    getData('getuser/' + props.idmedico).then((rs) => { setMedicoData(rs) })\r\n\r\n\r\n    getData(`encuestas/uuid/${props.token}`).then(rs => {\r\n      console.log(rs);\r\n      setEncuestaNotExists(rs.message === 'The survey does not exist')\r\n    }).then(() => { setChecking(false); console.log('Not exists: ', encuestaNotExists); })\r\n  }\r\n\r\n  const onFinish = (values) => {\r\n\r\n    Object.keys(values).forEach((k) => {\r\n      const nk = k.replace(/ /g, \"_\")\r\n      values[nk] = values[k];\r\n      if (k.includes(' ')) delete values[k];\r\n    })\r\n\r\n    const body = {\r\n      usuario: props.idpaciente,\r\n      medico: props.idmedico,\r\n      respuestas_ketamina: values,\r\n      tipo: 'ketamina',\r\n      uuid: props.token\r\n    }\r\n\r\n    console.log('Efectos Form:', values);\r\n    sendDataBody('encuestas/add', body).then((rs) => {\r\n      console.log(rs)\r\n      message.success(rs.message)\r\n    }).then(() => checkEncuesta())\r\n  };\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo);\r\n  };\r\n  const marks = { 0: '0', 10: '10' };\r\n\r\n  if (checking) return <div style={{ paddingTop: 180 }}>\r\n    <div style={{ margin: 'auto', width: '40%', textAlign: 'center' }}>\r\n      <h3 >Cargando</h3>\r\n    </div>\r\n  </div>\r\n\r\n  if (!encuestaNotExists) return <div style={{ paddingTop: 180 }}>\r\n    <div style={{ margin: 'auto', width: '40%', textAlign: 'center' }}>\r\n      <h3 >Gracias por contestar la encuesta</h3>\r\n      <img width={256} src={logo} alt=\"recreamedLogo\" style={{ margin: 'auto' }} />\r\n    </div>\r\n  </div>\r\n\r\n  return (\r\n    <div className='mainContainer'>\r\n      <h4>Lista de verificación para Efectos Secundarios de Ketamina</h4>\r\n      <br />\r\n      <h5>Medico: {medicoData.name}</h5>\r\n      <h5>Paciente: {pacienteData.name}</h5>\r\n      <br />\r\n      <Form\r\n        layout='vertical'\r\n        name=\"efectos_form\"\r\n        // labelCol={{ span: 8 }}\r\n        // wrapperCol={{ span: 16 }}\r\n        initialValues={{ ...catalogo_efectos, ketamina: 0, ketaminaiv: 0, ketaminaivb: 0 }}\r\n        onFinish={onFinish}\r\n        onFinishFailed={onFinishFailed}\r\n        autoComplete=\"off\"\r\n      >\r\n\r\n        {\r\n          Object.keys(catalogo_efectos).map((efk, i) => {\r\n            return <Form.Item\r\n              label={efk}\r\n              name={efk}\r\n              rules={[{ required: false, message: 'Selecciona una respuesta' }]}\r\n            >\r\n              <Switch checkedChildren=\"Si\" unCheckedChildren=\"No\" defaultChecked={false} />\r\n            </Form.Item>\r\n          })\r\n        }\r\n        <h4>Escala de 6 elementos simplificada de síntomas disociativos administrada por el médico  (CADSS)</h4>\r\n\r\n        <h5>Desrealizacion</h5>\r\n        {\r\n          Object.keys(desrealizacion).map((pr, index) => {\r\n            return <Form.Item\r\n              label={pr}\r\n              name={'desrealizacion_' + index}\r\n              rules={[{ required: true, message: 'Selecciona una respuesta' }]}\r\n            >\r\n              <Radio.Group>\r\n                <Space direction=\"vertical\">\r\n                  {\r\n                    desrealizacion[pr].map((rs, i) => <Radio value={i}>{rs}</Radio>)\r\n                  }\r\n                </Space>\r\n              </Radio.Group>\r\n            </Form.Item>\r\n          })\r\n        }\r\n\r\n\r\n        <h5>Despersonalizacion</h5>\r\n        {\r\n          Object.keys(despersonalizacion).map((pr, index) => {\r\n            return <Form.Item\r\n              label={pr}\r\n              name={'despersonalizacion_' + index}\r\n              rules={[{ required: true, message: 'Selecciona una respuesta' }]}\r\n            >\r\n              <Radio.Group>\r\n                <Space direction=\"vertical\">\r\n                  {\r\n                    despersonalizacion[pr].map((rs, i) => <Radio value={i}>{rs}</Radio>)\r\n                  }\r\n                </Space>\r\n              </Radio.Group>\r\n            </Form.Item>\r\n          })\r\n        }\r\n\r\n        <h5>Amnesia</h5>\r\n        {\r\n          Object.keys(amnesia).map((pr, i) => {\r\n            return <Form.Item\r\n              label={pr}\r\n              name={'amnesia_' + i}\r\n              rules={[{ required: true, message: 'Selecciona una respuesta' }]}\r\n            >\r\n              <Radio.Group>\r\n                <Space direction=\"vertical\">\r\n                  {\r\n                    amnesia[pr].map((rs, i) => <Radio value={i}>{rs}</Radio>)\r\n                  }\r\n                </Space>\r\n              </Radio.Group>\r\n            </Form.Item>\r\n          })\r\n        }\r\n\r\n        <Form.Item\r\n          label=\"a)\tEn general mi gusto por la ketamina IV es:\"\r\n          name=\"ketamina\"\r\n\r\n        // rules={[{ required: true, message: 'Selecciona una opcion' }]}\r\n        >\r\n          <Slider min={0} max={10} marks={marks} dots defaultValue={0} />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label=\"a.)\tEn general, cuánto anhela, apetece el tratamiento de la ketamina IV para otros efectos además de los efectos antidepresivos? \"\r\n          name=\"ketaminaiv\"\r\n        // rules={[{ required: true, message: 'Selecciona una opcion' }]}\r\n        >\r\n          <Slider min={0} max={10} marks={marks} dots defaultValue='0' />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label=\"b.)\tCuánto desea usar la ketamina IV en cantidades mayores con más frecuencia de lo que su psiquiatra le esta prescribiendo por razones distintas a esperar más efecto antidepresivo?  \"\r\n          name=\"ketaminaivb\"\r\n        // rules={[{ required: true, message: 'Selecciona una opcion' }]}\r\n        >\r\n          <Slider min={0} max={10} marks={marks} dots />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          wrapperCol={{\r\n            offset: 8,\r\n            span: 16,\r\n          }}\r\n        >\r\n          <Button type=\"primary\" htmlType=\"submit\">\r\n            Guardar\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n\r\n    </div>\r\n  )\r\n}\r\n","export const depresion_catalog = [\r\n\r\n\r\n    {\r\n        \"n\": 1,\r\n        \"pregunta\": \"Conciliar el sueño\",\r\n        \"respuestas\": [\r\n            'Nunca tardé más de 30 minutos en dormirme.',\r\n            'Tardé por lo menos 30 minutos en dormirme, menos de la mitad de las veces.',\r\n            'Tardé por lo menos 30 minutos en dormirme, más de la mitad de las veces.',\r\n            'Tardé más de 60 minutos en dormirme, más de la mitad de la veces']\r\n    },\r\n    {\r\n        \"n\": 2,\r\n        \"pregunta\": \"Al dormir durante la noche\",\r\n        \"respuestas\": [\r\n            \"No me desperté durante la noche.\",\r\n            \"Tuve el sueño liviano e intranquilo; me desperté unas cuantas veces todas las noches por corto tiempo.\",\r\n            \"Me desperté al menos una vez cada noche, pero volví a dormirme fácilmente.\",\r\n            \"Me desperté más de una vez cada noche y me quedé despierto/a durante 20 minutos o más, más de la mitad de las veces\"]\r\n    },\r\n    {\r\n        \"n\": 3,\r\n        \"pregunta\": \" Despertarse demasiado temprano\",\r\n        \"respuestas\": [\r\n            'La mayoría de las veces me desperté no más de 30 minutos antes de lo necesario.',\r\n            'Más de la mitad de las veces me desperté más de 30 minutos antes de lo necesario.',\r\n            'Casi siempre me desperté por lo menos una hora antes de lo necesario, pero finalmente me dormí nuevamente',\r\n            'Me desperté por lo menos una hora antes de lo necesario y no pude volver a dormirme']\r\n    },\r\n    {\r\n        \"n\": 4,\r\n        \"pregunta\": \" Dormir demasiado\",\r\n        \"respuestas\": [\r\n            'Dormí no más de 7-8 horas por noche, sin haber dormido la siesta durante el día.',\r\n            'Dormí no más de 10 horas en un período de 24 horas, incluyendo las siestas.',\r\n            'Dormí no más de 12 horas en un período de 24 horas, incluyendo las siestas.',\r\n            'Dormí más de 12 horas en un período de 24 horas, incluyendo las siestas.']\r\n    },\r\n    {\r\n        \"n\": 5,\r\n        \"pregunta\": \"Sensación de tristeza\",\r\n        \"respuestas\": [\r\n            'No me sentí triste.',\r\n            'Me sentí triste menos de la mitad de las veces.',\r\n            'Me sentí triste más de la mitad de las veces.',\r\n            'Me sentí triste casi todo el tiempo.']\r\n    }\r\n]\r\n\r\nexport const disminucion_apetito = [\r\n    'Mi apetito no disminuyó.',\r\n    'Comí con considerable menor frecuencia o menor cantidad de comida de lo habitual.',\r\n    'Comí mucho menos de lo habitual y sólo haciendo un esfuerzo.',\r\n    'Casi no comí dentro de un período de 24 horas, y sólo haciendo un tremendo esfuerzo o cuando los demás me convencieron de comer'\r\n]\r\n\r\nexport const aumento_apetito = [\r\n    'Mi apetito no aumentó.',\r\n    'Sentí la necesidad de comer con más frecuencia de lo habitual.',\r\n    'A menudo comí con más frecuencia y/o más cantidad de comida de lo habitual.',\r\n    'Me sentí impulsado/a a comer de más, tanto en las comidas como entre las comidas.',\r\n]\r\n\r\nexport const perdida_peso = [\r\n    'No he perdido peso.',\r\n    'Siento que tuve una leve pérdida de peso.',\r\n    'He perdido 1 kg o más.',\r\n    'He perdido 2 kg o más.',\r\n]\r\n\r\nexport const aumento_peso = [\r\n    'No he aumentado de peso.',\r\n    'Siento que tuve un leve aumento de peso.',\r\n    'He aumentado 1 kg o más.',\r\n    'He aumentado 2 kg o más.'\r\n]\r\n\r\nexport const depresion_catalog2 = [\r\n    {\r\n        \"n\": 10,\r\n        \"pregunta\": \"Concentración/Toma de decisiones\",\r\n        \"respuestas\": [\r\n            'No hubo cambio en mi capacidad habitual para concentrarme o tomar decisiones.',\r\n            'A veces me sentí indeciso/a o me di cuenta de que me distraía.',\r\n            'La mayor parte del tiempo tuve que esforzarme para mantener la atención o para tomar decisiones.',\r\n            'No me pude concentrar suficientemente bien para leer ni tampoco pude tomar decisiones sin importancia']\r\n    },\r\n    {\r\n        \"n\": 11,\r\n        \"pregunta\": \"Percepción de mí mismo/a\",\r\n        \"respuestas\": [\r\n            'Me consideré que valgo tanto y que tengo los mismos derechos que las demás personas.',\r\n            'Me sentí más culpable de lo habitual.',\r\n            'En gran medida, creí que le causé problemas a otras personas.',\r\n            'Pensé casi constantemente en mis defectos, tanto en los importantes como en los triviales.',]\r\n    },\r\n    {\r\n        \"n\": 12,\r\n        \"pregunta\": \"Pensamientos de muerte o suicidio\",\r\n        \"respuestas\": [\r\n            'No pensé en el suicidio o la muerte.',\r\n            'Sentí que mi vida estaba vacía y me pregunté si valía la pena vivir.',\r\n            'Pensé en el suicidio o la muerte varias veces en la semana durante varios minutos.',\r\n            'Pensé en el suicidio o la muerte varias veces al día con cierto detalle, o hice planes de cómo suicidarme, o realmente intenté quitarme la vida.']\r\n    },\r\n    {\r\n        \"n\": 13,\r\n        \"pregunta\": \"Interés general\",\r\n        \"respuestas\": [\r\n            'No hubo cambio de lo habitual en cuanto a mi interés en otras personas o actividades.',\r\n            'Noté que estaba menos interesado / a en la gente o en las actividades.',\r\n            'Me di cuenta que sólo me interesaban una o dos de las actividades que solía hacer.',\r\n            'No tuve prácticamente ningún interés en las actividades que solía hacer.']\r\n    },\r\n    {\r\n        \"n\": 14,\r\n        \"pregunta\": \"Nivel de energía\",\r\n        \"respuestas\": [\r\n            'No hubo cambio en mi nivel de energía habitual.',\r\n            'Me cansé más fácilmente de lo habitual.',\r\n            'Tuve que hacer un gran esfuerzo para empezar o terminar mis actividades diarias habituales(porejemplo: hacer las compras, estudiar, cocinar o ir a trabajar).',\r\n            'Realmente, no pude realizar la mayoría de mis actividades diarias habituales porque simplementeno tuve energías.']\r\n    },\r\n    {\r\n        \"n\": 15,\r\n        \"pregunta\": \" Sensación de estar más lento/a\",\r\n        \"respuestas\": [\r\n            'Pensé, hablé y me moví a mi nivel de velocidad habitual.',\r\n            'Me di cuenta de que mi pensamiento estaba más lento de lo habitual o que mi voz sonabamonótona y achatada.',\r\n            'Tardé varios segundos para responder la mayoría de las preguntas y estoy seguro / a de que mipensamiento estaba más lento de lo habitual.',\r\n            'Con frecuencia no pude responder preguntas si no era haciendo un extremo esfuerzo.']\r\n    },\r\n    {\r\n        \"n\": 16,\r\n        \"pregunta\": \" Sensación de inquietud\",\r\n        \"respuestas\": [\r\n            'No me sentí inquieto/a.',\r\n            'Con frecuencia me sentí intranquilo/a, me apretaba las manos o necesitaba cambiar la posición enla que estaba sentado/a.',\r\n            'Tuve impulsos de estar en movimiento y me sentí bastante inquieto/a.',\r\n            'Por momentos, me resultó imposible quedarme sentado/a y comencé a dar vueltas.']\r\n    },\r\n]","import React, { useState, useEffect } from 'react'\r\nimport { Form, Switch, Button, Radio, Space, Row, Col, Select, message, Divider } from 'antd'\r\nimport { depresion_catalog, depresion_catalog2, disminucion_apetito, perdida_peso, aumento_apetito, aumento_peso } from './depresion_catalog'\r\nimport { Card } from 'react-bootstrap'\r\nimport { getData, sendDataBody } from '../../../resources';\r\nimport logo from \"../../../assets/Logo.png\";\r\n\r\nexport default function DepresionEncuesta(props) {\r\n\r\n\r\n  const [pesoEnabled, setPesoEnabled] = useState(false)\r\n  const [apetitoEnabled, setApetitoEnabled] = useState(false)\r\n  // For check if the encuesta existts on db\r\n  const [encuestaNotExists, setEncuestaNotExists] = useState(null)\r\n  const [checking, setChecking] = useState(true)\r\n  const [pacienteData, setPacienteData] = useState({})\r\n  const [medicoData, setMedicoData] = useState({})\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    checkEncuesta()\r\n  }, [])\r\n\r\n  const checkEncuesta = () => {\r\n\r\n    getData('getuser/' + props.idpaciente).then((rs) => { setPacienteData(rs) })\r\n    getData('getuser/' + props.idmedico).then((rs) => { setMedicoData(rs) })\r\n\r\n\r\n    getData(`encuestas/uuid/${props.token}`).then(rs => {\r\n      console.log(rs);\r\n      setEncuestaNotExists(rs.message === 'The survey does not exist')\r\n    }).then(() => { setChecking(false); console.log('Not exists: ', encuestaNotExists); })\r\n  }\r\n\r\n  const onFinish = (values) => {\r\n    let _score = 0;\r\n    let high1_4 = 0;\r\n    let high6_9 = 0;\r\n    console.log('Sintomatologia:', values);\r\n    // El mayor de la 1 a la 4\r\n    for (var i = 1; i < 5; i++) {\r\n      if (values[i] > high1_4) high1_4 = values[i]\r\n    }\r\n    // El mayor de la 6 a la 9\r\n    for (var i = 6; i < 10; i++) {\r\n      if (values[i] > high6_9) high6_9 = values[i]\r\n    }\r\n    // console.log('6-9', high6_9)\r\n    // Suma de la 10 a la 14\r\n    for (var i = 10; i < 15; i++) {\r\n      _score += values[i]\r\n    }\r\n    // Suma el mayor enre 15 y 16 y sumarlo\r\n    values[15] > values[16] ? _score += values[15] : _score += values[16];\r\n\r\n    // Sumar la 5 y el resto\r\n    _score = _score + high1_4 + values[5] + high6_9;\r\n\r\n    console.log('score: ', _score);\r\n    const body = {\r\n      usuario: props.idpaciente,\r\n      medico: props.idmedico,\r\n      score: _score,\r\n      tipo: 'depresion',\r\n      uuid: props.token\r\n    }\r\n\r\n    console.log('Efectos body:', body);\r\n    sendDataBody('encuestas/add', body).then((rs) => {\r\n      console.log(rs)\r\n      message.success(rs.message)\r\n    }).then(() => checkEncuesta())\r\n  };\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo);\r\n    errorInfo.errorFields.map((p) => {\r\n      message.error('Conteste la pregunta ' + p.name)\r\n    })\r\n  };\r\n  const handleChange = (value) => {\r\n    // console.log(`selected ${value}`);\r\n  };\r\n\r\n  // Loading state\r\n  if (checking) return <div style={{ paddingTop: 180 }}>\r\n    <div style={{ margin: 'auto', width: '40%', textAlign: 'center' }}>\r\n      <h3 >Cargando</h3>\r\n    </div>\r\n  </div>\r\n\r\n  if (!encuestaNotExists) return <div style={{ paddingTop: 180 }}>\r\n    <div style={{ margin: 'auto', width: '40%', textAlign: 'center' }}>\r\n      <h3 >Gracias por contestar la encuesta</h3>\r\n      <img width={256} src={logo} alt=\"recreamedLogo\" style={{ margin: 'auto' }} />\r\n    </div>\r\n  </div>\r\n\r\n  return (\r\n    <div className='mainContainer'>\r\n      <h4>Encuesta de sintomatologia depresiva QUIDS (QUICK INVENTORY OF DEPRESSIVE SYMPTOMATOLOGY)</h4>\r\n      <br />\r\n      <h5>Medico: {medicoData.name}</h5>\r\n      <h5>Paciente: {pacienteData.name}</h5>\r\n      <br />\r\n\r\n      <Form\r\n        name=\"basic\"\r\n        layout='vertical'\r\n        // labelCol={{ span: 8 }}\r\n        // wrapperCol={{ span: 16 }}\r\n        initialValues={{ remember: true }}\r\n        onFinish={onFinish}\r\n        onFinishFailed={onFinishFailed}\r\n        autoComplete=\"off\"\r\n      >\r\n\r\n\r\n        {\r\n          depresion_catalog.map((p) => {\r\n            return <Form.Item\r\n              label={p.n + '. ' + p.pregunta}\r\n              name={p.n}\r\n              rules={[{ required: true, message: `Selecciona una opcion` }]}\r\n            >\r\n              <Radio.Group>\r\n                <Space direction=\"vertical\">\r\n                  {\r\n                    p.respuestas.map((r, i) => <Radio value={i}> {r} </Radio>)\r\n                  }\r\n                </Space>\r\n              </Radio.Group>\r\n            </Form.Item>\r\n          })\r\n        }\r\n\r\n        {/*Apetito*/}\r\n        <Card>\r\n          <Form.Item\r\n          // wrapperCol={{ offset: 8, span: 16 }} \r\n          >\r\n            Disminucion apetito <Switch onChange={() => setApetitoEnabled(!apetitoEnabled)} /> Aumento Apetito\r\n          </Form.Item>\r\n          <Row>\r\n            <Col md={10}>\r\n              <Form.Item\r\n                label='Disminucion Apetito'\r\n                name='6'\r\n                rules={[{ required: !apetitoEnabled, message: `Selecciona una opcion` }]}\r\n              >\r\n                <Radio.Group disabled={apetitoEnabled}>\r\n                  <Space direction=\"vertical\">\r\n                    {\r\n                      disminucion_apetito.map((s, i) => <Radio value={i}> {s} </Radio>)\r\n                    }\r\n                  </Space>\r\n                </Radio.Group>\r\n              </Form.Item>\r\n            </Col>\r\n\r\n            <Col>\r\n              <Form.Item\r\n                label='Aumento Apetito'\r\n                name='6'\r\n                rules={[{ required: apetitoEnabled, message: `Selecciona una opcion` }]}\r\n              >\r\n\r\n                <Radio.Group disabled={!apetitoEnabled}>\r\n                  <Space direction=\"vertical\">\r\n                    {\r\n                      aumento_apetito.map((s, i) => <Radio value={i}> {s} </Radio>)\r\n                    }\r\n                  </Space>\r\n                </Radio.Group>\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n        </Card>\r\n\r\n\r\n\r\n        {/* Peso */}\r\n        <Card>\r\n          <Form.Item\r\n          // wrapperCol={{ offset: 8, span: 16 }} \r\n          >\r\n            Disminucion de Peso <Switch onChange={() => setPesoEnabled(!pesoEnabled)} /> Aumento de Peso\r\n          </Form.Item>\r\n          <Row>\r\n            <Col md={10}>\r\n              <Form.Item\r\n                label='Perdida de Peso'\r\n                name='8'\r\n                rules={[{ required: !pesoEnabled, message: `Selecciona una opcion` }]}\r\n              >\r\n                <Radio.Group disabled={pesoEnabled}>\r\n                  <Space direction=\"vertical\">\r\n                    {\r\n                      perdida_peso.map((s, i) => <Radio value={i}> {s} </Radio>)\r\n                    }\r\n                  </Space>\r\n                </Radio.Group>\r\n              </Form.Item>\r\n            </Col>\r\n\r\n            <Col>\r\n              <Form.Item\r\n                label='Aumento Peso'\r\n                name='8'\r\n                rules={[{ required: pesoEnabled, message: `Selecciona una opcion` }]}\r\n              >\r\n\r\n                <Radio.Group disabled={!pesoEnabled}>\r\n                  <Space direction=\"vertical\">\r\n                    {\r\n                      aumento_peso.map((s, i) => <Radio value={i}> {s} </Radio>)\r\n                    }\r\n                  </Space>\r\n                </Radio.Group>\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n        </Card>\r\n\r\n        <br />\r\n\r\n        {\r\n          depresion_catalog2.map((p) => {\r\n            return <Form.Item\r\n              label={p.n + '. ' + p.pregunta}\r\n              name={p.n}\r\n              rules={[{ required: true, message: `Selecciona una opcion` }]}\r\n            >\r\n              <Radio.Group>\r\n                <Space direction=\"vertical\">\r\n                  {\r\n                    p.respuestas.map((r, i) => <Radio value={i}> {r} </Radio>)\r\n                  }\r\n                </Space>\r\n              </Radio.Group>\r\n            </Form.Item>\r\n          })\r\n        }\r\n\r\n\r\n\r\n        <Form.Item\r\n          wrapperCol={{ offset: 8, span: 16 }}\r\n        >\r\n          <Button type=\"primary\" htmlType=\"submit\">\r\n            Guardar\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n\r\n    </div>\r\n  )\r\n}\r\n","export const depresion2_catalog = [\r\n    {\r\n        \"n\": 1,\r\n        \"pregunta\": \". Humor deprimido (tristeza, depresión, desamparo, inutilidad)\",\r\n        \"respuestas\": [\r\n            \"0. Ausente\",\r\n            \"1. Estas sensaciones se indican solamente al ser preguntado\",\r\n            \"2. Estas sensaciones se relatan oral y espontáneamente\",\r\n            \"3. Sensaciones no comunicadas verbalmente, es decir, por la expresión facial,la postura, la voz y la tendencia al llanto.\",\r\n            \"4. El paciente manifiesta estas sensaciones en su comunicación verbal y no verbal de forma espontánea\",\r\n        ]\r\n    },\r\n    {\r\n        \"n\": 2,\r\n        \"pregunta\": \"2. Sensación de culpabilidad\",\r\n        \"respuestas\": [\r\n            \"0. Ausente\",\r\n            \"1. Se culpa a sí mismo, cree haber decepcionado a la gente\",\r\n            \"2. Ideas de culpabilidad, o meditación sobre errores pasados o malas acciones\",\r\n            \"3. La enfermedad actual es un castigo. Ideas delirantes de culpabilidad\",\r\n            \"4. Oye voces acusatorias o de denuncia y/o experimenta alucinaciones visuales amenazadoras\",\r\n        ]\r\n    },\r\n    {\r\n        \"n\": 3,\r\n        \"pregunta\": \"3. Suicidio\",\r\n        \"respuestas\": [\r\n            \"0. Ausente\",\r\n            \"1. Le parece que la vida no merece la pena ser vivida\",\r\n            \"2. Desearía estar muerto o tiene pensamientos sobre la posibilidad de morirse\",\r\n            \"3. Ideas de suicidio o amenazas\",\r\n            \"4. Intentos de suicidio(cualquier intento serio se califica 4)\",\r\n        ]\r\n    },\r\n    {\r\n        \"n\": 4, \"pregunta\": \" 4. Insomnio precoz\", \"respuestas\": [\r\n            \"0. Ausente\",\r\n            \"1. Dificultades ocasionales para dormirse, por ejemplo, más de media hora\",\r\n            \"2. Dificultades para dormirse cada noche\",\r\n        ]\r\n    },\r\n    {\r\n        \"n\": 5, \"pregunta\": \"5. Insomnio medio\", \"respuestas\": [\r\n            \"0. Ausente\",\r\n            \"1. El paciente se queja de estar inquieto durante la noche\",\r\n            \"2. Está despierto durante la noche; cualquier ocasión de levantarse de la cama se califica 2(excepto si está justificada: orinar, tomar o dar medicación, etc.)\",\r\n        ]\r\n    },\r\n    {\r\n        \"n\": 6,\r\n        \"pregunta\": \"6. Insomnio tardío \",\r\n        \"respuestas\": [\r\n            \"0. Ausente\",\r\n            \"1. Se despierta a primeras horas de la madrugada pero vuelve a dormirse\",\r\n            \"2. No puede volver a dormirse si se levanta de la cama\",\r\n        ]\r\n    },\r\n    {\r\n        \"n\": 7, \"pregunta\": \"7. Trabajo y actividades\", \"respuestas\": [\r\n            \"0. Ausente\",\r\n            \"1. Ideas y sentimientos de incapacidad.Fatiga o debilidad relacionadas con su actividad, trabajo o aficiones\",\r\n            \"2. Pérdida de interés en su actividad, aficiones, o trabajo, manifestado directamente por el enfermo o indirectamente por desatención, indecisión y vacilación\",\r\n            \"3. Disminución del tiempo dedicado a actividades o descenso en la productividad\",\r\n            \"4. Dejó de trabajar por la presente enfermedad\",\r\n        ]\r\n    },\r\n    {\r\n        \"n\": 8, \"pregunta\": \" 8. Inhibición(lentitud de pensamiento y de palabra, empeoramiento de la concentración, actividad motora disminuida)\",\r\n        \"respuestas\": [\r\n            \"0. Palabra y pensamiento normales\",\r\n            \"1. Ligero retraso en el diálogo\",\r\n            \"2. Evidente retraso en el diálogo\",\r\n            \"3. Diálogo difícil\",\r\n            \"4. Torpeza absoluta\",\r\n        ]\r\n    },\r\n    {\r\n        \"n\": 9, \"pregunta\": \" 9. Agitación\", \"respuestas\": [\r\n            \"0. Ninguna\",\r\n            \"1. “Juega” con sus manos, cabello, etc.\",\r\n            \"2. Se retuerce las manos, se muerde las uñas, los labios, se tira de los cabellos, etc.\",\r\n        ]\r\n    },\r\n    {\r\n        \"n\": 10, \"pregunta\": \"10. Ansiedad psíquica\", \"respuestas\": [\r\n            \"0. No hay dificultad\",\r\n            \"1. Tensión subjetiva e irritabilidad\",\r\n            \"2. Preocupación por pequeñas cosas\",\r\n            \"3. Actitud aprensiva aparente en la expresión o en el habla\",\r\n            \"4. Terrores expresados sin preguntarle\",\r\n        ]\r\n    },\r\n    {\r\n        \"n\": 11, \"pregunta\": \"11. Ansiedad somática\", \"respuestas\": [\r\n            \"0. Ausente\",\r\n            \"1. Ligera\",\r\n            \"2. Moderada\",\r\n            \"3. Grave\",\r\n            \"4. Incapacitante\\nSignos fisiológicos concomitantes de la ansiedad como: \\n -Gastrointestinales: boca seca, flatulencia, diarrea, eructos, retortijones\\n- Cardiovasculares: palpitaciones, cefalalgias\\n- Respiratorios: hiperventilación, suspiros\\n- Frecuencia urinaria\\n- Sudoración\"\r\n        ]\r\n    },\r\n    {\r\n        \"n\": 12, \"pregunta\": \"12. Síntomas somáticos gastrointestinales\",\r\n        \"respuestas\": [\r\n            \"0. Ninguno\",\r\n            \"1. Pérdida del apetito, pero come sin necesidad de que lo estimulen. Sensación de pesadez en el abdomen\",\r\n            \"2. Dificultad en comer si no se le insiste.Solicita o necesita laxantes o medicación intestinal para sus síntomas gastrointestinales.\",\r\n        ]\r\n    },\r\n    {\r\n        \"n\": 13, \"pregunta\": \"13. Síntomas somáticos generales\",\r\n        \"respuestas\": [\r\n            \"0. Ninguno\",\r\n            \"1. Pesadez en las extremidades, espalda o cabeza.Dorsalgias, cefalalgias, algias musculares.Pérdida de energía y fatigabilidad.\",\r\n            \"2. Cualquier síntoma bien definido se califica 2\",\r\n        ]\r\n    },\r\n    {\r\n        \"n\": 14, \"pregunta\": \"14. Síntomas genitales \",\r\n        \"respuestas\": [\r\n            \"0. Ausente\",\r\n            \"1. Débil\",\r\n            \"2. Grave\",\r\n            \"3. Incapacitante\\nSíntomas como\\n- Pérdida de la libido\\n- Trastornos menstruales\",\r\n        ]\r\n    },\r\n    {\r\n        \"n\": 15, \"pregunta\": \"15. Hipocondría\",\r\n        \"respuestas\": [\r\n            \"0. No la hay\",\r\n            \"1. Preocupado de sí mismo(corporalmente)\",\r\n            \"2. Preocupado por su salud\",\r\n            \"3. Se lamenta constantemente, solicita ayudas, etc.\",\r\n            \"4. Ideas delirantes hipocondríacas\",\r\n        ]\r\n    },\r\n    {\r\n        \"n\": 16, \"pregunta\": \"16. Pérdida de peso, según manifestaciones del paciente (primera evaluación)\",\r\n        respuestas: [\r\n            \"0. No hay pérdida de peso\",\r\n            \"1. Probable pérdida de peso asociada con la enfermedad actual\",\r\n            \"2. Pérdida de peso definida(según el enfermo)\",\r\n        ]\r\n    },\r\n    {\r\n        \"n\": \"B16\", \"pregunta\": \"16 B. Pérdida de peso, según pesaje hecho por el psiquiatra(evaluaciones siguientes)\",\r\n        \"respuestas\": [\r\n            \"0. Pérdida de peso inferior a 500 g en una semana\",\r\n            \"1. Pérdida de peso de más de 500 g en una semana\",\r\n            \"2. Pérdida de peso de más de 1 kg en una semana(por término medio)\",\r\n        ]\r\n    },\r\n    {\r\n        \"n\": 17, \"pregunta\": \"17. Insight(conciencia de enfermedad)\",\r\n        \"respuestas\": [\r\n            \"0. Se da cuenta de que está deprimido y enfermo\",\r\n            \"1. Se da cuenta de su enfermedad pero atribuye la causa a la mala alimentación, clima, exceso de trabajo, virus, etc.\",\r\n            \"2. Niega que esté enfermo\",\r\n        ]\r\n    },\r\n\r\n]\r\n\r\nexport const catalog2 = [\r\n    {\r\n        n: 1, pregunta: \"1. Tristeza observada\",\r\n        descripcion: \"Representa el abatimiento, la melancolía y la desesperación (algo más que una simple tristeza normal y pasajera) que se refleja en la manera de hablar, la expresión facial y la postura. Evalúe el grado de incapacidad para animarse.\",\r\n        respuestas: [\r\n            \"0. Sin tristeza\",\r\n            \"1.\",\r\n            \"2. Parece decaído/a pero se anima sin dificultad\",\r\n            \"3.\",\r\n            \"4. Parece triste y desgraciado/a la mayor parte del tiempo\",\r\n            \"5.\",\r\n            \"6. Parece siempre desgraciado/a. Extremadamente abatido/a\",\r\n        ]\r\n    },\r\n    {\r\n        n: 2, pregunta: \"2. Tristeza declarada por el paciente\",\r\n        descripcion: \"Representa un estado de ánimo depresivoque se siente, sin tener en cuenta si se refleja en la apariencia o no.Incluye tristeza,abatimiento o el sentimiento de que no hayesperanza y nada ni nadie puede ayudarle.Evalúe de acuerdo con la intensidad, la duración y la medida en que el estado de ánimo se ve influido por los acontecimientos.\",\r\n        respuestas: [\r\n            \"0. Tristeza esporádica según las circunstancias\",\r\n            \"1.\",\r\n            \"2. Triste o decaído / a, pero se anima sin dificultad\",\r\n            \"3.\",\r\n            \"4. Sentimientos generalizados de tristeza o melancolía.El estado\",\r\n            \"de ánimo todavía se ve influido por circunstancias externas\",\r\n            \"5.\",\r\n            \"6. Abatimiento, desdicha o tristeza continuada o invariable\",\r\n        ]\r\n    },\r\n    {\r\n        n: 3, pregunta: \"3. Tensión interna\",\r\n        descripcion: \"Representa sentimientos de malestar mal definido, irritabilidad, confusión interna y tensión mental hasta llegar al pánico, terror o angustia.Evalúe de acuerdo con la intensidad, frecuencia, duración y la medida en que se busca consuelo.\",\r\n        respuestas: [\r\n            \"0. Apacible.Sólo tensión interna pasajera\",\r\n            \"1.\",\r\n            \"2. Sentimientos ocasionales de nerviosismo y malestar indefinido\",\r\n            \"3.\",\r\n            \"4. Sentimientos continuados de tensión interna o pánico intermitente que el sujeto sólo puede dominar con alguna dificultad\",\r\n            \"5.\",\r\n            \"6. Terror o angustia tenaz.Pánico irresistible\",\r\n        ]\r\n    },\r\n    {\r\n        n: 4,\r\n        pregunta: \"4. Sueño reducido\", descripcion: \"Representa la reducción de la duración o profundidad del sueño comparada con las pautas normales del sujeto cuando se encuentra bien.\",\r\n        respuestas: [\r\n            \"0. Duerme como siempre\",\r\n            \"1.\",\r\n            \"2. Ligera dificultad para dormirse o sueño ligeramente reducido, sueño ligero o perturbado\",\r\n            \"3.\",\r\n            \"4. Sueño reducido o interrumpido durante al menos 2 h\",\r\n            \"5.\",\r\n            \"6. Menos de 2 o 3 h de sueño\",\r\n        ]\r\n    },\r\n    {\r\n        n: 5,\r\n        pregunta: \"5. Apetito reducido\", descripcion: \"Representa la sensación de pérdida de apetito comparada con el que tiene cuando se encuentra bien.Evalúe según la pérdida del deseo por la comida o la necesidad de forzarse a sí mismo/a para comer.\",\r\n        respuestas: [\r\n            \"0. Apetito normal o aumentado\",\r\n            \"1.\",\r\n            \"2. Apetito ligeramente reducido\",\r\n            \"3.\",\r\n            \"4. Sin apetito.La comida es insípida\",\r\n            \"5.\",\r\n            \"6. Necesita persuasión para comer algo \",\r\n        ]\r\n    },\r\n    {\r\n        n: 6,\r\n        pregunta: \"6. Dificultades para concentrarse\",\r\n        descripcion: \"Representa las dificultades para centrar los pensamientos en algo hasta llegar a la falta de concentración incapacitante.Evalúe según la intensidad, frecuencia y grado de incapacidad resultante.\",\r\n        respuestas: [\r\n            \"0. Ninguna dificultad para concentrarse\",\r\n            \"1.\",\r\n            \"2. Dificultades ocasionales para centrar los pensamientos\",\r\n            \"3.\",\r\n            \"4. Dificultades para concentrarse y seguir una idea que reduce la\",\r\n            \"capacidad de leer o mantener una conversación\",\r\n            \"5.\",\r\n            \"6. Incapaz de leer o mantener una conversación si no es con gran dificultad\",\r\n        ]\r\n    },\r\n    {\r\n        n: 7, pregunta: \"7. Lasitud\", descripcion: \"Representa la dificultad para empezar algo o la lentitud para iniciar y realizar las actividades diarias.\",\r\n        respuestas: [\r\n            \"0. Casi sin dificultad para empezar algo.Sin apatía\",\r\n            \"1.\",\r\n            \"2. Dificultades para empezar actividades\",\r\n            \"3.\",\r\n            \"4. Dificultades para empezar actividades rutinarias sencillas que\",\r\n            \"se llevan a cabo con esfuerzo\",\r\n            \"5.\",\r\n            \"6. Lasitud total.Incapaz de hacer nada sin ayuda\",\r\n        ]\r\n    },\r\n    {\r\n        n: 8, pregunta: \"8. Incapacidad para sentir\", descripcion: \"Representa la experiencia subjetiva de un menor interés por el entorno o por actividades que habitualmente dan placer.La capacidad para reaccionar con la emoción adecuada a las circunstancias o personas se ve reducida.\",\r\n        respuestas: [\r\n            \"0. Interés normal por el entorno y por otras personas\",\r\n            \"1.\",\r\n            \"2. Menor capacidad para disfrutar de las cosas que normalmente le interesan\",\r\n            \"3.\",\r\n            \"4. Pérdida de interés por el entorno.Pérdida de sentimientos\",\r\n            \"respecto a los amigos y conocidos\",\r\n            \"5.\",\r\n            \"6. La experiencia de estar emocionalmente paralizado, incapacidad para sentir enfado, pena o placer y una total o incluso dolorosa falta de sentimientos hacia los parientes próximos y amigos\",\r\n        ]\r\n    },\r\n    {\r\n        n: 9, pregunta: \"9. Pensamientos pesimistas\", descripcion: \"Representa los pensamientos de culpabilidad, inferioridad, autorreproche, pecado, remordimiento y ruina.\",\r\n        respuestas: [\r\n            \"0. Sin pensamientos pesimistas\",\r\n            \"1.\",\r\n            \"2. Ideas variables de fracaso, autorreproche o autodesprecio\",\r\n            \"3.\",\r\n            \"4. Autoacusaciones persistentes o ideas definidas, pero aún\",\r\n            \"racionales, de culpabilidad o pecado.Cada vez más pesimista\",\r\n            \"respecto al futuro\",\r\n            \"5.\",\r\n            \"6. Alucinaciones de ruina, remordimiento o pecado irredimible. Autoacusaciones que son absurdas e inquebrantables\",\r\n        ]\r\n    },\r\n    {\r\n        n: 10, pregunta: \"10. Pensamientos suicidas\", descripcion: \"Representa el sentimiento de que no vale la pena vivir, que desearía que le llegara una muerte natural, pensamientos suicidas y preparativos para el suicidio.Los intentos de suicidio en sí no deberían influir en la evaluación.\",\r\n        respuestas: [\r\n            \"0. Disfruta de la vida o la acepta tal como viene\",\r\n            \"1.\",\r\n            \"2. Cansado de vivir.Sólo pensamientos suicidas pasajeros\",\r\n            \"3.\",\r\n            \"4. Probablemente estaría mejor muerto / a.Los pensamientos\",\r\n            \"suicidas son habituales, y se considera el suicidio como una posible solución, pero sin ninguna intención o plan específico\",\r\n            \"5.\",\r\n            \"6. Planes explícitos de suicidio cuando se presente una oportunidad.Preparativos activos para el suicidio\",\r\n        ]\r\n    }\r\n]\r\n\r\nexport const catalog3 = [\r\n    \"Tener poco interés o disfrutar poco haciendo las cosas\",\r\n    \"Sentirse desanimado/a, deprimido/a o sin esperanza\",\r\n    \"Tener problemas para dormir o para mantenerse dormido, o dormir demasiado\",\r\n    \"Sentirse cansado/a o tener poca energía\",\r\n    \"Tener poco apetito o comer en exceso\",\r\n    \"Sentirse mal consigo mismo/a-o sentirse fracasado/a, o pensar que se ha decepcionado a sí mismo o a los que le rodean\",\r\n    \"Tener dificultades para concentrarse en cosas tales como leer el periódico o ver la televisión\",\r\n    \"Moverse o hablar tan lentamente que los demás lo han notado. O bien al contrario, estar tan agitado/a o inquieto/a que se mueve mucho más de lo habitual\",\r\n    \"Tener pensamientos sobre estar muerto/a o sobre hacerse daño a sí mismo de alguna manera\",\r\n\r\n]\r\n\r\nexport const preg10 = \"Si usted se identificó con cualquier problema en este cuestionario, ¿le ha sido difícil cumplir con su trabajo, atender su casa, o relacionarse con otras personas debido a estos problemas?\"","import React, { useState, useEffect } from 'react'\r\nimport { Form, Switch, Button, Radio, Space, Row, Col, Select, message, Divider } from 'antd'\r\nimport { Card } from 'react-bootstrap'\r\nimport { getData, sendDataBody } from '../../../resources';\r\nimport logo from \"../../../assets/Logo.png\";\r\nimport { depresion2_catalog, catalog2, catalog3, preg10 } from './depresion2_catalog'\r\nconst { Option } = Select;\r\n\r\nexport default function Depresion2Encuesta(props) {\r\n    const [pesoEnabled, setPesoEnabled] = useState(false)\r\n    const [apetitoEnabled, setApetitoEnabled] = useState(false)\r\n    // For check if the encuesta existts on db\r\n    const [encuestaNotExists, setEncuestaNotExists] = useState(null)\r\n    const [checking, setChecking] = useState(true)\r\n    const [pacienteData, setPacienteData] = useState({})\r\n    const [medicoData, setMedicoData] = useState({})\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        checkEncuesta()\r\n    }, [])\r\n\r\n    const checkEncuesta = () => {\r\n\r\n        getData('getuser/' + props.idpaciente).then((rs) => { setPacienteData(rs) })\r\n        getData('getuser/' + props.idmedico).then((rs) => { setMedicoData(rs) })\r\n\r\n\r\n        getData(`encuestas/uuid/${props.token}`).then(rs => {\r\n            console.log(rs);\r\n            setEncuestaNotExists(rs.message === 'The survey does not exist')\r\n        }).then(() => { setChecking(false); console.log('Not exists: ', encuestaNotExists); })\r\n    }\r\n\r\n    const onFinish = (values) => {\r\n        let primeros = 0, segundos = 0, terceros = 0;\r\n        console.log('Sintomatologia gpc:', values);\r\n\r\n        for (let i = 1; i < 17; i++) { primeros += values[i] }\r\n\r\n        for (let i = 1; i < 11; i++) {\r\n            const pos = `2_${i}`\r\n            segundos += values[pos]\r\n        }\r\n        for (let i = 1; i < 10; i++) {\r\n            const pos = `3_${i}`\r\n            terceros += values[pos]\r\n        }\r\n\r\n\r\n        const respuestas = {\r\n            hrsd: primeros,\r\n            madrs: segundos,\r\n            phq: terceros\r\n        }\r\n\r\n\r\n        console.log('repuestas: ', respuestas);\r\n        const body = {\r\n            usuario: props.idpaciente,\r\n            medico: props.idmedico,\r\n            respuestas_depresion2_gpc: respuestas,\r\n            tipo: 'depresion_gpc',\r\n            uuid: props.token\r\n        }\r\n\r\n        console.log('Efectos body:', body);\r\n        sendDataBody('encuestas/add', body).then((rs) => {\r\n          console.log(rs)\r\n          message.success(rs.message)\r\n        }).then(() => checkEncuesta())\r\n    };\r\n\r\n    const onFinishFailed = (errorInfo) => {\r\n        console.log('Failed:', errorInfo);\r\n        errorInfo.errorFields.map((p) => {\r\n            message.error('Conteste la pregunta ' + p.name)\r\n        })\r\n    };\r\n    const handleChange = (value) => {\r\n        // console.log(`selected ${value}`);\r\n    };\r\n\r\n    // Loading state\r\n    if (checking) return <div style={{ paddingTop: 180 }}>\r\n        <div style={{ margin: 'auto', width: '40%', textAlign: 'center' }}>\r\n            <h3 >Cargando</h3>\r\n        </div>\r\n    </div>\r\n\r\n    if (!encuestaNotExists) return <div style={{ paddingTop: 180 }}>\r\n        <div style={{ margin: 'auto', width: '40%', textAlign: 'center' }}>\r\n            <h3 >Gracias por contestar la encuesta</h3>\r\n            <img width={256} src={logo} alt=\"recreamedLogo\" style={{ margin: 'auto' }} />\r\n        </div>\r\n    </div>\r\n\r\n    // Depreison GPC\r\n    return (\r\n        <div className='mainContainer'>\r\n            <h4>Encuesta de las versiones validadas en español de las escalas HRSD, MADRS y PHQ-9</h4>\r\n            <br />\r\n            <h5>Medico: {medicoData.name}</h5>\r\n            <h5>Paciente: {pacienteData.name}</h5>\r\n            <br />\r\n\r\n            <Form\r\n                name=\"basic\"\r\n                layout='vertical'\r\n                // labelCol={{ span: 8 }}\r\n                // wrapperCol={{ span: 16 }}\r\n                initialValues={{ remember: true }}\r\n                onFinish={onFinish}\r\n                onFinishFailed={onFinishFailed}\r\n                autoComplete=\"off\"\r\n            >\r\n                <h4>Versión validada en español de la HRSD1</h4>\r\n\r\n                {\r\n                    depresion2_catalog.map((p) => {\r\n                        return <Form.Item\r\n                            key={p.n}\r\n                            label={p.pregunta}\r\n                            name={p.n}\r\n                            rules={[{ required: true, message: `Selecciona una opcion` }]}\r\n                        >\r\n                            <Radio.Group>\r\n                                <Space direction=\"vertical\">\r\n                                    {\r\n                                        p.respuestas.map((r, i) => <Radio value={i}> {r} </Radio>)\r\n                                    }\r\n                                </Space>\r\n                            </Radio.Group>\r\n                        </Form.Item>\r\n                    })\r\n                }\r\n                <h4>Versión validada en español de la escala Montgomery-Asberg Depression Rating Scale (MADRS)1</h4>\r\n                {\r\n                    catalog2.map((p) => {\r\n                        return <Form.Item\r\n                            key={p.n}\r\n                            label={p.pregunta}\r\n                            name={'2_' + p.n}\r\n                            rules={[{ required: true, message: `Selecciona una opcion` }]}\r\n                        >\r\n                            <Radio.Group>\r\n                                <Space direction=\"vertical\">\r\n                                    {\r\n                                        p.respuestas.map((r, i) => <Radio value={i}> {r} </Radio>)\r\n                                    }\r\n                                </Space>\r\n                            </Radio.Group>\r\n                        </Form.Item>\r\n                    })\r\n                }\r\n                <h4>Cuestionario sobre la Salud del Paciente (PHQ-9)108 ©1999 Pfizer Inc.</h4>\r\n                <h5>Durante  las  últimas  2  semanas,  ¿con  qué  frecuencia  le  han  molestado  cada  uno  de  los  siguientes problemas?</h5>\r\n                {\r\n                    catalog3.map((p, i) => {\r\n                        return <Form.Item\r\n                            key={i}\r\n                            label={p}\r\n                            name={'3_' + (i + 1)}\r\n                            rules={[{ required: true, message: `Selecciona una opcion` }]}\r\n                        >\r\n                            <Radio.Group>\r\n                                <Space direction=\"vertical\">\r\n                                    <Radio value={0}> Nunca </Radio>\r\n                                    <Radio value={1}> Varios Dias </Radio>\r\n                                    <Radio value={2}> Más de la mitad de los días </Radio>\r\n                                    <Radio value={3}> Todos o casi todos los días </Radio>\r\n                                </Space>\r\n                            </Radio.Group>\r\n                        </Form.Item>\r\n                    })\r\n                }\r\n\r\n                <Form.Item\r\n                    label={preg10}\r\n                    name='4_1'\r\n                    rules={[{ required: true, message: `Selecciona una opcion` }]}\r\n                >\r\n                    <Radio.Group>\r\n                        <Space direction=\"vertical\">\r\n                            <Radio value=\"0\"> Nada en absoluto </Radio>\r\n                            <Radio value=\"1\"> Algo difícil </Radio>\r\n                            <Radio value=\"2\"> Muy difícil </Radio>\r\n                            <Radio value=\"3\"> Extremadamente difícil </Radio>\r\n                        </Space>\r\n                    </Radio.Group>\r\n                </Form.Item>\r\n\r\n                <Form.Item\r\n                    wrapperCol={{ offset: 8, span: 16 }}\r\n                >\r\n                    <Button type=\"primary\" htmlType=\"submit\">\r\n                        Guardar\r\n                    </Button>\r\n                </Form.Item>\r\n            </Form>\r\n\r\n        </div >\r\n    )\r\n}\r\n","export const dolor_catalog = [\r\n    {\r\n        'n': 1,\r\n        'tipo': 'multiple',\r\n        'pregunta': '1. Indique en el diagrama las zonas donde siente dolor sombreando la parte afectada. Marque una cruz en la zona que más le duele.',\r\n        'respuestas': ['Delante Derecha', 'Delante Izquierda', 'Detras Derecha', 'Detras Izquierda']\r\n    },\r\n    {\r\n        'n': 2,\r\n        'tipo': 'metrica',\r\n        'pregunta': '2. Por favor, evalúe su dolor rodeando con un círculo el número que mejor describa la intensidad máxima de su dolor en la última semana',\r\n    },\r\n    {\r\n        'n': 3,\r\n        'tipo': 'metrica',\r\n        'pregunta': '3. Por favor, evalúe su dolor rodeando con un círculo el número que mejor describa la intensidad mínima de su dolor en la última semana',\r\n    },\r\n    {\r\n        'n': 4,\r\n        'tipo': 'metrica',\r\n        'pregunta': '4. Por  favor,  evalúe  su  dolor  rodeando  con  un  círculo  el  número  que  mejor  describa  la  intensidad  mediade  su  dolor.',\r\n    },\r\n    {\r\n        'n': 5,\r\n        'tipo': 'metrica',\r\n        'pregunta': '5. Por favor, evalúe su dolor rodeando con un círculo el número que mejor describa la intensidad de su dolor ahora mismo',\r\n    },\r\n    {\r\n        'n': 6,\r\n        'tipo': 'texto',\r\n        'pregunta': '6. ¿Qué tipo de cosas le alivia el dolor (p. ej., caminar, estar de pie, levantar algo)?',\r\n    },\r\n    {\r\n        'n': 7,\r\n        'tipo': 'texto',\r\n        'pregunta': '7. ¿Qué tipo de cosas empeora el dolor (p. ej., caminar, estar de pie, levantar algo)?',\r\n    },\r\n    {\r\n        'n': 8,\r\n        'tipo': 'texto',\r\n        'pregunta': '8. ¿Qué tratamiento o medicación está recibiendo para el dolor?',\r\n    },\r\n    {\r\n        'n': 9,\r\n        'tipo': 'metrica',\r\n        'pregunta': '9. En la última semana, ¿hasta qué punto le han aliviado los tratamientos o medicación para el dolor? Por favor, rodee con un círculo el porcentaje que corresponda al grado de alivio que ha sentido'\r\n    },\r\n    {\r\n        'n': 10,\r\n        'tipo': 'seleccion',\r\n        'pregunta': '10. Si toma medicación, ¿cuánto tarda en volver a sentir dolor?',\r\n        'respuestas': ['La medicación para el dolor no me ayuda nada', '1h', '2h', '3h', '4h', 'De 5 a 12h', 'Más de 12h', 'No tomo medicación para el dolor']\r\n    },\r\n    {\r\n        'n': 11,\r\n        'tipo': 'multiple',\r\n        'pregunta': '11. Marque con una cruz la casilla que considere adecuada para cada una de las respuestas.',\r\n        'respuestas': ['A. Los efectos del tratamiento (p. ej., medicación, operación, radiación, prótesis)', 'B. Mi enfermedad principal (la enfermedad que actualmente se está tratando y evaluando)', 'C.  Una situación no relacionada con mi enfermedad principal (p. ej., artrosis)']\r\n    },\r\n    {\r\n        'n': 12,\r\n        'tipo': 'multiple',\r\n        'pregunta': '12. Para cada una de las siguientes palabras, marque con una cruz «sí» o «no» si ese adjetivo se aplica a su dolor.',\r\n        'respuestas': ['Dolorido/continuo', 'Palpitante', 'Irradiante', 'Punzante', 'Fatigoso (pesado)', 'Penetrante', 'Persistente', 'Mortificante (calambre)', 'Agudo', 'Sensible', 'Quemante', 'Agotador', 'Entumecido (adormecido)', 'Penoso', 'Insoportable']\r\n    },\r\n    {\r\n        'n': 13,\r\n        'tipo': 'titulo',\r\n        'pregunta': '13. Rodee con un círculo el número que mejor describa hasta qué punto el dolor le ha afectado en los siguientes aspectos de la vida, durante la última semana.',\r\n    },\r\n    {\r\n        'n': 'A13',\r\n        'tipo': 'metrica',\r\n        'pregunta': '13 A. Actividades en general',\r\n    },\r\n    {\r\n        'n': 'B13',\r\n        'tipo': 'metrica',\r\n        'pregunta': '13 B. Estado de ánimo',\r\n    },\r\n    {\r\n        'n': 'C13',\r\n        'tipo': 'metrica',\r\n        'pregunta': '13 C. Capacidad de caminar',\r\n    },\r\n    {\r\n        'n': 'D13',\r\n        'tipo': 'metrica',\r\n        'pregunta': '13 D. Trabajo habitual (incluye tanto el trabajo fuera de casa como las tareas domésticas)',\r\n    },\r\n    {\r\n        'n': 'E13',\r\n        'tipo': 'metrica',\r\n        'pregunta': '13 E. Relaciones con otras personas',\r\n    },\r\n    {\r\n        'n': 'F13',\r\n        'tipo': 'metrica',\r\n        'pregunta': '13 F. Sueño',\r\n    },\r\n    {\r\n        'n': 'G13',\r\n        'tipo': 'metrica',\r\n        'pregunta': '13 G. Disfrutar de la vida',\r\n    },\r\n    {\r\n        'n': 14,\r\n        'tipo': 'seleccion',\r\n        'pregunta': '14. Prefiero tomar mi medicación para el dolor:',\r\n        'respuestas': ['De forma regular', 'Sólo cuando lo necesito', 'No tomo medicación para el dolor']\r\n    },\r\n    {\r\n        'n': 15,\r\n        'tipo': 'seleccion',\r\n        'pregunta': '15. Tomo mi medicación para el dolor (en un período de un día)',\r\n        'respuestas': ['No todos los días', '1 a 2 veces al día', '3 a 4 veces al día', '5 a 6 veces al día', 'Más de 6 veces al día']\r\n    },\r\n    {\r\n        'n': 16,\r\n        'tipo': 'seleccion',\r\n        'pregunta': '16. ¿Cree que necesita una medicación más fuerte para el dolor?',\r\n        'respuestas': ['Si', 'No', 'No lo sé']\r\n    },\r\n    {\r\n        'n': 17,\r\n        'tipo': 'seleccion',\r\n        'pregunta': '17. ¿Cree que debería tomar más dosis de la medicación para el dolor que las que le ha recetado el médico?',\r\n        'respuestas': ['Si', 'No', 'No lo sé']\r\n    },\r\n    {\r\n        'n': 18,\r\n        'tipo': 'seleccion',\r\n        'pregunta': '18. ¿Está preocupado/a porque toma demasiada medicación para el dolor?',\r\n        'respuestas': ['Si', 'No', 'No lo sé']\r\n    },\r\n    {\r\n        'n': 'B18',\r\n        'tipo': 'texto',\r\n        'pregunta': '18 B.Si la respuesta es «sí», ¿por qué?'\r\n    },\r\n    {\r\n        'n': 19,\r\n        'tipo': 'seleccion',\r\n        'pregunta': '19. ¿Tiene problemas con los efectos secundarios de su medicación para el dolor?',\r\n        'respuestas': ['Si', 'No']\r\n    },\r\n    {\r\n        'n': 'B19',\r\n        'tipo': 'texto',\r\n        'pregunta': '19 B.¿Qué efectos secundarios?'\r\n    },\r\n    {\r\n        'n': 20,\r\n        'tipo': 'seleccion',\r\n        'pregunta': '20. ¿Cree que necesita recibir más información sobre su medicación para el dolor?',\r\n        'respuestas': ['Si', 'No']\r\n    },\r\n    {\r\n        'n': 21,\r\n        'tipo': 'multiple',\r\n        'pregunta': '21. Otros métodos que uso para aliviar mi dolor son (por favor, marque con una cruz todo lo que se le aplique):',\r\n        'respuestas': ['Compresas calientes', 'Distracción', 'Compresas frías', 'Biofeedback', 'Técnicas de relajación', 'Hipnosis']\r\n    },\r\n    {\r\n        'n': 'B21',\r\n        'tipo': 'texto',\r\n        'pregunta': '21 B.Si su respuesta es otros, por favor, especifique'\r\n    },\r\n    {\r\n        'n': 22,\r\n        'tipo': 'texto',\r\n        'pregunta': '22. Otras medicaciones no recetadas por mi médico y que tomo para el dolor son:'\r\n    },\r\n]\r\n\r\n// export const initialDolorValues = dolor_catalog.map(p => ({ p.n: p.user, liked: p.liked }));\r\n\r\n\r\nexport const initialDolorValues = dolor_catalog.filter(({ tipo }) => tipo === 'metrica').reduce(\r\n    (obj, item) => Object.assign(obj, { [item.n]: 0 }), {}\r\n);","import React, { useState, useEffect } from 'react'\r\nimport { dolor_catalog, initialDolorValues } from './dolor_catalog';\r\nimport { Form, Input, Button, Slider, Checkbox, Radio, message } from 'antd';\r\nimport { getData, sendDataBody } from '../../resources';\r\nimport logo from \"../../assets/Logo.png\";\r\n\r\nexport default function DolorEncuesta(props) {\r\n    // For check if the encuesta existts on db\r\n    const [encuestaNotExists, setEncuestaNotExists] = useState(null)\r\n    const [checking, setChecking] = useState(true)\r\n    const [pacienteData, setPacienteData] = useState({})\r\n    const [medicoData, setMedicoData] = useState({})\r\n\r\n    useEffect(() => {\r\n        checkEncuesta()\r\n    }, [])\r\n\r\n\r\n    const checkEncuesta = () => {\r\n\r\n        getData('getuser/' + props.idpaciente).then((rs) => { setPacienteData(rs) })\r\n        getData('getuser/' + props.idmedico).then((rs) => { setMedicoData(rs) })\r\n\r\n\r\n        getData(`encuestas/uuid/${props.token}`).then(rs => {\r\n            console.log(rs);\r\n            setEncuestaNotExists(rs.message === 'The survey does not exist')\r\n        }).then(() => { setChecking(false); console.log('Not exists: ', encuestaNotExists); })\r\n    }\r\n\r\n    const onFinish = (values) => {\r\n        const body = {\r\n            usuario: props.idpaciente,\r\n            medico: props.idmedico,\r\n            respuestas_dolor: values,\r\n            tipo: 'dolor',\r\n            uuid: props.token\r\n        }\r\n        console.log('Body:', body);\r\n        // sendDataBody('encuestas/add', body).then((rs) => {\r\n        //     console.log('add enc resp', rs)\r\n        //     message.success(rs.message)\r\n        // }).then(() => checkEncuesta())\r\n    };\r\n    const onFinishFailed = (errorInfo) => {\r\n        console.log('init', initialDolorValues)\r\n        console.log('Failed:', errorInfo);\r\n        errorInfo.errorFields.map((p) => {\r\n            message.error('Conteste la pregunta ' + p.name)\r\n        })\r\n    };\r\n    const onChange = (checkedValues) => {\r\n        console.log('checked = ', checkedValues);\r\n    };\r\n\r\n    const marks = { 0: '0', 10: '10' };\r\n\r\n    // Loading state\r\n    if (checking) return <div style={{ paddingTop: 180 }}>\r\n        <div style={{ margin: 'auto', width: '40%', textAlign: 'center' }}>\r\n            <h3 >Cargando</h3>\r\n        </div>\r\n    </div>\r\n\r\n    if (!encuestaNotExists) return <div style={{ paddingTop: 180 }}>\r\n        <div style={{ margin: 'auto', width: '40%', textAlign: 'center' }}>\r\n            <h3 >Gracias por contestar la encuesta</h3>\r\n            <img width={256} src={logo} alt=\"recreamedLogo\" style={{ margin: 'auto' }} />\r\n        </div>\r\n    </div>\r\n    return (\r\n        <div className='mainContainer'>\r\n            <h4>Encuesta de Dolor</h4>\r\n            <br />\r\n            <h5>Medico: {medicoData.name}</h5>\r\n            <h5>Paciente: {pacienteData.name}</h5>\r\n            <br />\r\n            <Form\r\n                layout='vertical'\r\n                name=\"basic\"\r\n                // labelCol={{ span: 24 }}\r\n                // wrapperCol={{ span: 24 }}\r\n                initialValues={initialDolorValues}\r\n                onFinish={onFinish}\r\n                onFinishFailed={onFinishFailed}\r\n                autoComplete=\"off\"\r\n            >\r\n                {\r\n                    dolor_catalog.map((p) => {\r\n                        let input;\r\n                        switch (p.tipo) {\r\n                            case 'metrica':\r\n                                input = <Slider defaultValue={0} min={0} max={10} marks={marks} />\r\n                                break;\r\n                            case 'multiple':\r\n                                input = <Checkbox.Group options={p.respuestas} defaultValue={['Apple']} onChange={onChange} />\r\n                                break;\r\n                            case 'seleccion':\r\n                                input = <Radio.Group>\r\n                                    {p.respuestas.map((r, i) => { return <Radio value={i}>{r}</Radio> })}\r\n                                </Radio.Group>;\r\n                                break;\r\n                            case 'texto':\r\n                                input = < Input />;\r\n                                break;\r\n                            default:\r\n                                input = < Input />;\r\n                        }\r\n\r\n                        return p.tipo !== 'titulo' ? <Form.Item\r\n                            key={p.n}\r\n                            label={p.pregunta}\r\n                            name={p.n}\r\n                            rules={[{ required: true, message: 'Conteste correctamente' }]}\r\n                        >\r\n                            {input}\r\n                        </Form.Item> : <h5>{`${p.n}.  ${p.pregunta}`}</h5>\r\n                    })\r\n                }\r\n\r\n\r\n                <Form.Item\r\n                    wrapperCol={{\r\n                        offset: 8,\r\n                        span: 16,\r\n                    }}\r\n                >\r\n                    <Button type=\"primary\" htmlType=\"submit\">\r\n                        Guardar\r\n                    </Button>\r\n                </Form.Item>\r\n            </Form>\r\n        </div>\r\n    )\r\n}\r\n","// La Evaluación Del Trastorno Por Estrés Postraumático: Aproximación A Las Propiedades Psicométricas De La Escala De Trauma De Davidson\r\n// Escala Trastorno Por Estrés Postraumático+608-2094-1-CE\r\n// tabla al final de la hoja en bco ngro agregada penultima\r\nexport const post_catalog = [\r\n    \"1.He tenido alguna vez imágenes, recuerdos o pensamientos dolorosos del acontecimiento.+\",\r\n    \"2.He tenido alguna vez pesadillas sobre el acontecimiento.\",\r\n    \"3.He sentido que el acontecimiento estaba ocurriendo de nuevo, como si lo estuviera reviviendo \",\r\n    \"4.Hay cosas que me lo han hecho recordar.  \",\r\n    \"5.He tenido sensaciones físicas por recuerdos del acontecimiento. (Como transpiración, temblores, palpitaciones, mareos, náuseas o diarrea) \",\r\n    \"6.He estado evitando pensamientos o sentimientos sobre el acontecimiento.\",\r\n    \"7.He estado evitando hacer cosas o estar en situaciones que me recordaran el acontecimiento. \",\r\n    \"8.He sido incapaz de recordar partes importantes del acontecimiento. \",\r\n    \"9.He tenido dificultad para disfrutar de las cosas. 10.Me  he sentido distante o alejado de la gente. \",\r\n    \"10.Me  he sentido distante o alejado de la gente.\",\r\n    \"11.He sido incapaz de tener sentimientos de tristeza o de afecto.\",\r\n    \"12.He tenido dificultad para imaginar una vida larga y cumplir mis objetivos.\",\r\n    \"13.He tenido dificultad para iniciar o mantener el sueño.\",\r\n    \"14.He  estado irritable o he tenido accesos de ira. \",\r\n    \"15.He tenido dificultades para concentrarme\",\r\n    \"16.Me he sentido nervioso, fácilmente distraído, o como “en guardia”. \",\r\n    \"17.He estado nervioso o me he asustado fácilmente\",\r\n]","import React, { useState, useEffect } from 'react'\r\nimport { Form, Switch, Button, Radio, Space, Row, Col, Select, message, Input } from 'antd'\r\nimport { Card } from 'antd'\r\nimport { getData, sendDataBody } from '../../../resources';\r\nimport logo from \"../../../assets/Logo.png\";\r\nimport { post_catalog } from './p_t_catalog'\r\nconst { Option } = Select;\r\n\r\nexport default function PostTraumaticoEncuesta(props) {\r\n    const [pesoEnabled, setPesoEnabled] = useState(false)\r\n    const [apetitoEnabled, setApetitoEnabled] = useState(false)\r\n    // For check if the encuesta existts on db\r\n    const [encuestaNotExists, setEncuestaNotExists] = useState(null)\r\n    const [checking, setChecking] = useState(true)\r\n    const [pacienteData, setPacienteData] = useState({})\r\n    const [medicoData, setMedicoData] = useState({})\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        checkEncuesta()\r\n    }, [])\r\n\r\n    const checkEncuesta = () => {\r\n\r\n        getData('getuser/' + props.idpaciente).then((rs) => { setPacienteData(rs) })\r\n        getData('getuser/' + props.idmedico).then((rs) => { setMedicoData(rs) })\r\n\r\n\r\n        getData(`encuestas/uuid/${props.token}`).then(rs => {\r\n            console.log(rs);\r\n            setEncuestaNotExists(rs.message === 'The survey does not exist')\r\n        }).then(() => { setChecking(false); console.log('Not exists: ', encuestaNotExists); })\r\n    }\r\n\r\n    const onFinish = (values) => {\r\n        // console.log('OriginalsF: ', values);\r\n        Object.keys(values).map(k => {\r\n            // values[k] = Object.values(values[k]);\r\n            let newArr = [];\r\n            Object.values(values[k]).forEach(str => {\r\n                newArr.push(Number(str));\r\n            })\r\n            values[k] = newArr;\r\n        }\r\n        )\r\n        console.log('Values: ', values);\r\n        const body = {\r\n            usuario: props.idpaciente,\r\n            medico: props.idmedico,\r\n            respuestas_ept1_davidson: values,\r\n            tipo: 'post_traumatico',\r\n            uuid: props.token\r\n        }\r\n\r\n        console.log('Post Traum Body:', body);\r\n        sendDataBody('encuestas/add', body).then((rs) => {\r\n          console.log(rs)\r\n          message.success(rs.message)\r\n        }).then(() => checkEncuesta())\r\n    };\r\n\r\n    const onFinishFailed = (errorInfo) => {\r\n        console.log('Failed:', errorInfo);\r\n        errorInfo.errorFields.map((p) => {\r\n            message.error('Conteste la pregunta ' + p.name)\r\n        })\r\n    };\r\n    const handleChange = (value) => {\r\n        // console.log(`selected ${value}`);\r\n    };\r\n\r\n    // Loading state\r\n    if (checking) return <div style={{ paddingTop: 180 }}>\r\n        <div style={{ margin: 'auto', width: '40%', textAlign: 'center' }}>\r\n            <h3 >Cargando</h3>\r\n        </div>\r\n    </div>\r\n\r\n    if (!encuestaNotExists) return <div style={{ paddingTop: 180 }}>\r\n        <div style={{ margin: 'auto', width: '40%', textAlign: 'center' }}>\r\n            <h3 >Gracias por contestar la encuesta</h3>\r\n            <img width={256} src={logo} alt=\"recreamedLogo\" style={{ margin: 'auto' }} />\r\n        </div>\r\n    </div>\r\n\r\n    return (\r\n        <div className='mainContainer'>\r\n            <h4>La Evaluación Del Trastorno Por Estrés Postraumático: Aproximación A Las Propiedades Psicométricas De La Escala De Trauma De Davidson</h4>\r\n            <br />\r\n            <h5>Medico: {medicoData.name}</h5>\r\n            <h5>Paciente: {pacienteData.name}</h5>\r\n            <br />\r\n\r\n            <Form\r\n                name=\"basic\"\r\n                layout='vertical'\r\n                // labelCol={{ span: 8 }}\r\n                // wrapperCol={{ span: 16 }}\r\n                initialValues={{ remember: true }}\r\n                onFinish={onFinish}\r\n                onFinishFailed={onFinishFailed}\r\n                autoComplete=\"off\"\r\n            >\r\n\r\n\r\n                {\r\n                    post_catalog.map((p, i) => {\r\n                        return <Form.Item label={p}>\r\n                            <Input.Group compact>\r\n                                <Form.Item\r\n                                    label='Frecuencia'\r\n                                    name={[i + 1, 'Frecuencia']}\r\n                                    noStyle\r\n                                    rules={[{ required: true, message: 'Selecciona Frecuencia' },\r\n                                    ]}\r\n                                >\r\n                                    <Space direction=\"vertical\">\r\n                                        <Card style={{ padding: 6 }}>\r\n                                            <p style={{ color: \"#5fa1c4\" }}>Frecuencia: </p>\r\n                                            <Radio.Group>\r\n                                                <Space direction=\"vertical\">\r\n                                                    <Radio value={0}> Nunca </Radio>\r\n                                                    <Radio value={1}> A Veces </Radio>\r\n                                                    <Radio value={2}> 2-3 Veces </Radio>\r\n                                                    <Radio value={3}> 4-6 Veces </Radio>\r\n                                                    <Radio value={4}> A diario </Radio>\r\n                                                </Space>\r\n                                            </Radio.Group>\r\n                                        </Card>\r\n                                    </Space>\r\n                                </Form.Item>\r\n                                <Form.Item\r\n                                    label='Gravedad'\r\n                                    name={[i + 1, 'Gravedad']}\r\n                                    noStyle\r\n                                    rules={[{ required: true, message: 'Selecciona Gravedad' }]}\r\n                                >\r\n                                    <Space direction=\"vertical\">\r\n                                        <Card style={{ padding: 6 }}>\r\n                                            <p style={{ color: \"#5fa1c4\" }}>Gravedad: </p>\r\n                                            <Radio.Group >\r\n                                                <Space direction=\"vertical\">\r\n                                                    <Radio value={0}> Nada </Radio>\r\n                                                    <Radio value={1}> Leve </Radio>\r\n                                                    <Radio value={2}> Moderada </Radio>\r\n                                                    <Radio value={3}> Marcada </Radio>\r\n                                                    <Radio value={4}> Extrema </Radio>\r\n                                                </Space>\r\n                                            </Radio.Group>\r\n                                        </Card>\r\n                                    </Space>\r\n                                </Form.Item>\r\n                            </Input.Group>\r\n                        </Form.Item>\r\n                    })\r\n                }\r\n\r\n\r\n\r\n                <Form.Item\r\n                    wrapperCol={{ offset: 8, span: 16 }}\r\n                >\r\n                    <Button type=\"primary\" htmlType=\"submit\">\r\n                        Guardar\r\n                    </Button>\r\n                </Form.Item>\r\n            </Form>\r\n\r\n        </div >\r\n    )\r\n}\r\n","export const p_t_clinico_catalog = [\r\n    {\r\n        n: 'Acontecimiento 1',\r\n        criterio: 'A',\r\n        pregunta: \"¿Qué sucedió?(¿Qué edad tenía? ¿Quién más estuvo implicado? ¿Cuántas veces leocurrió? ¿Peligró su vida? ¿Sufrió alguna lesión grave?)\\n¿Cómo respondió usted emocionalmente?(¿Estaba muy ansioso/a o asustado/a?¿Horrorizado/a? ¿Indefenso? ¿Cómo fue? ¿Estaba aturdido/a, o en un estado deshock tal que no sentía nada en absoluto? ¿A qué se parecía? ¿Cómo fue? ¿Quénotaron otras personas sobre su respuesta emocional? Y después del aconteci-miento ¿cómo respondió emocionalmente?)\\nDescriba (p. ej., tipo de acontecimiento, víctima, causante, edad, frecuencia):\",\r\n\r\n    },\r\n    {\r\n        n: 'Acontecimiento 2',\r\n        criterio: 'B',\r\n        pregunta: \"¿Qué sucedió?(¿Qué edad tenía? ¿Quién más estuvo implicado? ¿Cuántas veces leocurrió? ¿Peligró su vida? ¿Sufrió alguna lesión grave?)\\n¿Cómo respondió usted emocionalmente?(¿Estaba muy ansioso/a o asustado/a?¿Horrorizado/a? ¿Indefenso? ¿Cómo fue? ¿Estaba aturdido/a, o en un estado deshock tal que no sentía nada en absoluto? ¿A qué se parecía? ¿Cómo fue? ¿Quénotaron otras personas sobre su respuesta emocional? Y después del aconteci-miento, ¿cómo respondió emocionalmente?)\\nDescriba (p. ej., tipo de acontecimiento, víctima, causante, edad, frecuencia):\",\r\n\r\n    },\r\n    {\r\n        n: 'Acontecimiento 3',\r\n        criterio: 'C',\r\n        pregunta: \"¿Qué sucedió?(¿Qué edad tenía? ¿Quién más estuvo implicado? ¿Cuántas veces le ocurrió? ¿Peligró su vida? ¿Sufrió alguna lesión grave?)\\n¿Cómo respondió usted emocionalmente?(¿Estaba muy ansioso/a o asustado/a?¿Horrorizado/a? ¿Indefenso? ¿Cómo fue? ¿Estaba aturdido/a, o en un estado deshock tal que no sentía nada en absoluto? ¿A qué se parecía? ¿Cómo fue? ¿Quénotaron otras personas sobre su respuesta emocional? Y después del aconteci-miento, ¿cómo respondió emocionalmente?)\\nDescriba (p. ej., tipo de acontecimiento, víctima, causante, edad, frecuencia):\",\r\n    }\r\n]\r\n\r\nexport const p_t_clinico_catalog_2 = [\r\n    [\r\n        {p: \"\",r: [\"\",\"\",\"\"]},\r\n        \"¿Alguna vez se ha disgustado cuando algo le ha recordado el acontecimiento? (Algo le ha desenca-denado malestar relacionado con elaconteci-miento) ¿Qué clase de recuerdos le han disgus-tado? ¿Con qué frecuencia durante el últimomes?0.  Nunca1.  Una o dos veces2.  Una o dos veces por semana3.  Varias veces por semana4.  Diariamente o casi todos los díasDescripción/Ejemplos: \",\r\n        \"¿Cuánto malestar o molestia le han causado estosrecuerdos? ¿Fue capaz de quitárselos de la mente yde pensar en otra cosa? ¿Cuánto esfuerzo tuvo quehacer? ¿Cuánto interfirieron estos recuerdos en suvida?\"\r\n    ],\r\n    [\r\n        \"\",\r\n        \"\"\r\n    ]\r\n]\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Form, Switch, Button, Radio, Space, Row, Col, Select, message, Input } from 'antd'\r\nimport { Card } from 'antd'\r\nimport { getData, sendDataBody } from '../../../resources';\r\nimport { p_t_clinico_catalog } from './p_t_clinico_catalog'\r\nimport logo from \"../../../assets/Logo.png\";\r\nconst { TextArea } = Input;\r\nexport default function PTClinicoEncuesta(props) {\r\n    const [pesoEnabled, setPesoEnabled] = useState(false)\r\n    const [apetitoEnabled, setApetitoEnabled] = useState(false)\r\n    // For check if the encuesta existts on db\r\n    const [encuestaNotExists, setEncuestaNotExists] = useState(null)\r\n    const [checking, setChecking] = useState(true)\r\n    const [pacienteData, setPacienteData] = useState({})\r\n    const [medicoData, setMedicoData] = useState({})\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        checkEncuesta()\r\n    }, [])\r\n\r\n    const checkEncuesta = () => {\r\n\r\n        getData('getuser/' + props.idpaciente).then((rs) => { setPacienteData(rs) })\r\n        getData('getuser/' + props.idmedico).then((rs) => { setMedicoData(rs) })\r\n\r\n\r\n        getData(`encuestas/uuid/${props.token}`).then(rs => {\r\n            console.log(rs);\r\n            setEncuestaNotExists(rs.message === 'The survey does not exist')\r\n        }).then(() => { setChecking(false); console.log('Not exists: ', encuestaNotExists); })\r\n    }\r\n\r\n    const onFinish = (values) => {\r\n\r\n\r\n        console.log('Vals EPTClinic: ', values);\r\n        const body = {\r\n            usuario: props.idpaciente,\r\n            medico: props.idmedico,\r\n            score: values,\r\n            tipo: 'depresion',\r\n            uuid: props.token\r\n        }\r\n\r\n        console.log('Efectos body:', body);\r\n        sendDataBody('encuestas/add', body).then((rs) => {\r\n            console.log(rs)\r\n            message.success(rs.message)\r\n        }).then(() => checkEncuesta())\r\n    };\r\n\r\n    const onFinishFailed = (errorInfo) => {\r\n        console.log('Failed:', errorInfo);\r\n        errorInfo.errorFields.map((p) => {\r\n            message.error('Conteste la pregunta ' + p.name)\r\n        })\r\n    };\r\n    const handleChange = (value) => {\r\n        // console.log(`selected ${value}`);\r\n    };\r\n\r\n    // Loading state\r\n    if (checking) return <div style={{ paddingTop: 180 }}>\r\n        <div style={{ margin: 'auto', width: '40%', textAlign: 'center' }}>\r\n            <h3 >Cargando</h3>\r\n        </div>\r\n    </div>\r\n\r\n    if (!encuestaNotExists) return <div style={{ paddingTop: 180 }}>\r\n        <div style={{ margin: 'auto', width: '40%', textAlign: 'center' }}>\r\n            <h3 >Gracias por contestar la encuesta</h3>\r\n            <img width={256} src={logo} alt=\"recreamedLogo\" style={{ margin: 'auto' }} />\r\n        </div>\r\n    </div>\r\n\r\n    const Radios = (props) => {\r\n        const l = props.letra;\r\n        const n = props.numero;\r\n        return <div>\r\n\r\n            <h6>A(1)</h6>\r\n\r\n            <Form.Item label='¿Amenaza vital?' name={`Ac${n}_A1_1`} rules={[{ required: true, message: `Selecciona una opcion` }]} >\r\n                <Radio.Group name={props.nombre} key={props.nombre} >\r\n                    <Radio value=\"No\">No</Radio>\r\n                    <Radio value=\"Si\">Si</Radio>\r\n                    <Radio value=\"Sujeto\">Sujeto</Radio>\r\n                    <Radio value=\"Otro\">Otro</Radio>\r\n                </Radio.Group>\r\n            </Form.Item>\r\n\r\n            <Form.Item label='¿Lesion Grave?' name={`Ac${n}_A1_2`} rules={[{ required: true, message: `Selecciona una opcion` }]} >\r\n                <Radio.Group name={props.nombre} key={props.nombre} >\r\n                    <Radio value=\"No\">No</Radio>\r\n                    <Radio value=\"Si\">Si</Radio>\r\n                    <Radio value=\"Sujeto\">Sujeto</Radio>\r\n                    <Radio value=\"Otro\">Otro</Radio>\r\n                </Radio.Group>\r\n            </Form.Item>\r\n\r\n            <Form.Item label='¿Amenaza de la integridad física?' name={`Ac${props.n}_A2`} rules={[{ required: true, message: `Selecciona una opcion` }]} >\r\n                <Radio.Group name={props.nombre} key={props.nombre} >\r\n                    <Radio value=\"No\">No</Radio>\r\n                    <Radio value=\"Si\">Si</Radio>\r\n                    <Radio value=\"Sujeto\">Sujeto</Radio>\r\n                    <Radio value=\"Otro\">Otro</Radio>\r\n                </Radio.Group>\r\n            </Form.Item>\r\n\r\n            <h6>{l}(2)</h6>\r\n            <Form.Item label='¿Miedo intenso/indefensión/horror?' name={`Ac${props.n}_CritA`} rules={[{ required: true, message: `Selecciona una opcion` }]} >\r\n                <Radio.Group name={props.nombre} key={props.nombre} >\r\n                    <Radio value=\"No\">No</Radio>\r\n                    <Radio value=\"Si\">Si</Radio>\r\n                    <Radio value=\"Durante\">Durante</Radio>\r\n                    <Radio value=\"Despues\">Despues</Radio>\r\n                </Radio.Group>\r\n            </Form.Item>\r\n\r\n            <h6>Criterio A</h6>\r\n            <Form.Item label='¿Se cumple?' name={`Ac${props.n}_A1_3`} rules={[{ required: true, message: `Selecciona una opcion` }]} >\r\n                <Radio.Group name={props.nombre} key={props.nombre} >\r\n                    <Radio value=\"No\">No</Radio>\r\n                    <Radio value=\"Probable\">Probable</Radio>\r\n                    <Radio value=\"Si\">Si</Radio>\r\n                </Radio.Group>\r\n            </Form.Item>\r\n\r\n        </div>\r\n\r\n\r\n    }\r\n\r\n    return (\r\n        <div className='mainContainer'>\r\n            <h4>Escala para el Trastorno por Estrés Postraumático Administradapor el Clínico (Clinician Administered PTSD Scale, CAPS)</h4>\r\n            <br />\r\n            <h5>Medico: {medicoData.name}</h5>\r\n            <h5>Paciente: {pacienteData.name}</h5>\r\n            <br />\r\n\r\n            <Form\r\n                name=\"basic\"\r\n                layout='vertical'\r\n                // labelCol={{ span: 8 }}\r\n                // wrapperCol={{ span: 16 }}\r\n                initialValues={{ remember: true }}\r\n                onFinish={onFinish}\r\n                onFinishFailed={onFinishFailed}\r\n                autoComplete=\"off\"\r\n            >\r\n\r\n                {\r\n                    p_t_clinico_catalog.map((p) => {\r\n                        return <div>\r\n\r\n                            <h5>{p.n}</h5>\r\n                            <Row>\r\n                                <Col span={12} style={{ padding: 6 }}>\r\n                                    <Form.Item\r\n                                        label={p.pregunta}\r\n                                        name=\"Ac1\"\r\n                                        rules={[{ required: true, message: `Selecciona una opcion` }]}\r\n                                    >\r\n                                        <TextArea />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                                <Col span={12}>\r\n                                    <Card>\r\n                                        <Radios letra={p.criterio} />\r\n                                    </Card>\r\n                                </Col>\r\n\r\n\r\n                            </Row>\r\n                        </div>\r\n                    })\r\n                }\r\n\r\n                <Form.Item wrapperCol={{ offset: 8, span: 16 }} >\r\n                    <Button type=\"primary\" htmlType=\"submit\">\r\n                        Guardar\r\n                    </Button>\r\n                </Form.Item>\r\n            </Form>\r\n\r\n        </div>\r\n    )\r\n}\r\n","export const catalog_ept_mexicana = [\r\n    \"1. Me supera emocionalmente este trabajo. \",\r\n    \"2. Me siento inútil y desilusionado frente al trabajo que desarrollo. \",\r\n    \"3. Me siento emocionalmente sin fuerzas. \",\r\n    \"4. No tengo ganas de ir a trabajar. \",\r\n    \"5. Me siento agotado física y mentalmente.\",\r\n    \"6. Si algo he aprendido en mi trabajo como profesional de emergencias, es que las cosas no suceden como deberían. \",\r\n    \"7. Me he llegado a cuestionar mis propias creencias después de algunas intervenciones. \",\r\n    \"8. Mi trabajo me ha hecho ver que el mundo es injusto. \",\r\n    \"9. Este trabajo me ha enseñado que la vida termina dándole a uno lo que se merece. \",\r\n    \"10. Recuerdo hasta el nombre de algunos pacientes.\",\r\n    \"11. A veces, pienso en aquellos pacientes que han fallecido mientras los atendía. \",\r\n    \"12. Guardo imágenes muy reales de aquellos accidentes que más me afectaron.\",\r\n    \"13. En ocasiones me emociono debido a este trabajo.\",\r\n    \"14. Durante algunas intervenciones llego a experimentar sentimientos de todo tipo. \",\r\n]","import React, { useState, useEffect } from 'react'\r\nimport { Form, Switch, Button, Radio, Space, Row, Col, Select, message, Divider } from 'antd'\r\nimport { getData, sendDataBody } from '../../../resources';\r\nimport logo from \"../../../assets/Logo.png\";\r\nimport { catalog_ept_mexicana } from './p_t_mexicana_catalog';\r\n\r\nexport default function PTMexicanaEncuesta(props) {\r\n\r\n    const [pesoEnabled, setPesoEnabled] = useState(false)\r\n    const [apetitoEnabled, setApetitoEnabled] = useState(false)\r\n    // For check if the encuesta existts on db\r\n    const [encuestaNotExists, setEncuestaNotExists] = useState(null)\r\n    const [checking, setChecking] = useState(true)\r\n    const [pacienteData, setPacienteData] = useState({})\r\n    const [medicoData, setMedicoData] = useState({})\r\n\r\n\r\n    useEffect(() => {\r\n        checkEncuesta()\r\n    }, [])\r\n\r\n    const checkEncuesta = () => {\r\n\r\n        getData('getuser/' + props.idpaciente).then((rs) => { setPacienteData(rs) })\r\n        getData('getuser/' + props.idmedico).then((rs) => { setMedicoData(rs) })\r\n\r\n\r\n        getData(`encuestas/uuid/${props.token}`).then(rs => {\r\n            console.log(rs);\r\n            setEncuestaNotExists(rs.message === 'The survey does not exist')\r\n        }).then(() => { setChecking(false); console.log('Not exists: ', encuestaNotExists); })\r\n    }\r\n\r\n    const onFinish = (values) => {\r\n\r\n        console.log('vals depres MX: ', values);\r\n        const body = {\r\n            usuario: props.idpaciente,\r\n            medico: props.idmedico,\r\n            respuestas_ept_3mx: values,\r\n            tipo: 'post_traumatico_mx',\r\n            uuid: props.token\r\n        }\r\n        sendDataBody('encuestas/add', body).then((rs) => {\r\n            console.log(rs)\r\n            message.success(rs.message)\r\n        }).then(() => checkEncuesta())\r\n    };\r\n\r\n    const onFinishFailed = (errorInfo) => {\r\n        console.log('Failed:', errorInfo);\r\n        errorInfo.errorFields.map((p) => {\r\n            message.error('Conteste la pregunta ' + p.name)\r\n        })\r\n    };\r\n    const handleChange = (value) => {\r\n        // console.log(`selected ${value}`);\r\n    };\r\n\r\n    // Loading state\r\n    if (checking) return <div style={{ paddingTop: 180 }}>\r\n        <div style={{ margin: 'auto', width: '40%', textAlign: 'center' }}>\r\n            <h3 >Cargando</h3>\r\n        </div>\r\n    </div>\r\n\r\n    if (!encuestaNotExists) return <div style={{ paddingTop: 180 }}>\r\n        <div style={{ margin: 'auto', width: '40%', textAlign: 'center' }}>\r\n            <h3 >Gracias por contestar la encuesta</h3>\r\n            <img width={256} src={logo} alt=\"recreamedLogo\" style={{ margin: 'auto' }} />\r\n        </div>\r\n    </div>\r\n\r\n    return (\r\n        <div className='mainContainer'>\r\n            <h4>Validación mexicana de la Escala de Estrés Traumático Secundario  </h4>\r\n            <br />\r\n            <h5>Medico: {medicoData.name}</h5>\r\n            <h5>Paciente: {pacienteData.name}</h5>\r\n            <br />\r\n\r\n            <Form\r\n                name=\"p_t_mx\"\r\n                layout='vertical'\r\n                // labelCol={{ span: 8 }}\r\n                // wrapperCol={{ span: 16 }}\r\n                initialValues={{ remember: true }}\r\n                onFinish={onFinish}\r\n                onFinishFailed={onFinishFailed}\r\n                autoComplete=\"off\"\r\n            >\r\n\r\n                {\r\n                    catalog_ept_mexicana.map((p, i) => {\r\n                        return <Form.Item\r\n                            key={i}\r\n                            label={p}\r\n                            name={i + 1}\r\n                            rules={[{ required: true, message: `Selecciona una opcion` }]}\r\n                        >\r\n                            <Radio.Group>\r\n                                <Space direction=\"vertical\">\r\n                                    <Radio value={1}>Totalmente en desacuerdo.</Radio>\r\n                                    <Radio value={2}>En desacuerdo. </Radio>\r\n                                    <Radio value={3}>De acuerdo. </Radio>\r\n                                    <Radio value={4}>Totalmente de acuerdo. </Radio>\r\n                                </Space>\r\n                            </Radio.Group>\r\n                        </Form.Item>\r\n                    })\r\n                }\r\n\r\n                <br />\r\n\r\n                <Form.Item\r\n                    wrapperCol={{ offset: 8, span: 16 }}\r\n                >\r\n                    <Button type=\"primary\" htmlType=\"submit\">\r\n                        Guardar\r\n                    </Button>\r\n                </Form.Item>\r\n            </Form>\r\n\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\n\r\nimport { useParams } from \"react-router-dom\";\r\nimport KetaminaEncuesta from '../escalas/ketamina/ketaminaEncuesta'\r\nimport DepresionEncuesta from '../escalas/depresion/depresion_1/depresionEncuesta';\r\nimport Depresion2Encuesta from '../escalas/depresion/depresion_2/depresion2_encuesta';\r\nimport DolorEncuesta from '../escalas/dolor/dolorEncuesta';\r\nimport PostTraumaticoEncuesta from '../escalas/estres_post_traumatico/post_traumatico/p_t_encuesta';\r\nimport PTClinicoEncuesta from '../escalas/estres_post_traumatico/p_t_clinico/p_t_clinico_encuesta';\r\nimport PTMexicanaEncuesta from '../escalas/estres_post_traumatico/p_t_mexicana/p_t_mexicana_encuesta';\r\n\r\n// Ketamina\r\nexport function KetaminaPublic() {\r\n    let { idmedico, idpaciente, key } = useParams();\r\n    console.log(key)\r\n    return (\r\n        <div>\r\n            <KetaminaEncuesta idmedico={idmedico} idpaciente={idpaciente} token={key} />\r\n        </div>\r\n    )\r\n}\r\n\r\n// Depresion 1 \r\nexport function DepresionQidsPublic() {\r\n    let { idmedico, idpaciente, key } = useParams();\r\n    console.log(key)\r\n    return (\r\n        <div>\r\n            <DepresionEncuesta idmedico={idmedico} idpaciente={idpaciente} token={key} />\r\n        </div>\r\n    )\r\n}\r\n\r\n// Depresion 2 gpc \r\nexport function DepresionEspanolPublic() {\r\n    let { idmedico, idpaciente, key } = useParams();\r\n    console.log(key)\r\n    return (\r\n        <div>\r\n            <Depresion2Encuesta idmedico={idmedico} idpaciente={idpaciente} token={key} />\r\n        </div>\r\n    )\r\n}\r\n\r\n// Dolor\r\nexport function HeadachePublic() {\r\n    let { idmedico, idpaciente, key } = useParams();\r\n    console.log(key)\r\n    return (\r\n        <div>\r\n            <DolorEncuesta idmedico={idmedico} idpaciente={idpaciente} token={key} />\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n// Post Trauma 1 \r\nexport function PostTraumaticoPublic() {\r\n    let { idmedico, idpaciente, key } = useParams();\r\n    console.log(key)\r\n    return (\r\n        <div>\r\n            <PostTraumaticoEncuesta idmedico={idmedico} idpaciente={idpaciente} token={key} />\r\n        </div>\r\n    )\r\n}\r\n\r\n// Post Trauma 2 Clinico Hoja Verde\r\nexport function PostTraumaticoClinicoPublic() {\r\n    let { idmedico, idpaciente, key } = useParams();\r\n    console.log(key)\r\n    return (\r\n        <div>\r\n            <PTClinicoEncuesta idmedico={idmedico} idpaciente={idpaciente} token={key} />\r\n        </div>\r\n    )\r\n}\r\n\r\n// Post Trauma Mexicana\r\nexport function PostTraumaticoMX() {\r\n    let { idmedico, idpaciente, key } = useParams();\r\n    console.log(key)\r\n    return (\r\n        <div>\r\n            <PTMexicanaEncuesta idmedico={idmedico} idpaciente={idpaciente} token={key} />\r\n        </div>\r\n    )\r\n}\r\n","import { Table } from 'antd';\r\nimport React from 'react'\r\n\r\nconst dataSource = [\r\n    {\r\n        key: '1',\r\n        name: '25/04/2023',\r\n        age: '8:00',\r\n        address: '16:00',\r\n    },\r\n    {\r\n        key: '1',\r\n        name: '25/04/2023',\r\n        age: '8:00',\r\n        address: '16:00',\r\n    },\r\n    {\r\n        key: '1',\r\n        name: '25/04/2023',\r\n        age: '8:00',\r\n        address: '16:00',\r\n    }\r\n];\r\n\r\nconst columns = [\r\n    {\r\n        title: 'Fecha',\r\n        dataIndex: 'name',\r\n        key: 'name',\r\n    },\r\n    {\r\n        title: 'Hora de entrada',\r\n        dataIndex: 'age',\r\n        key: 'age',\r\n    },\r\n    {\r\n        title: 'Hora de salida',\r\n        dataIndex: 'address',\r\n        key: 'address',\r\n    },\r\n];\r\n\r\nexport default function Horarios() {\r\n    return (\r\n        <div className='mainContainer'>\r\n            <h4>Horarios de: 6334b651YNSDFN739FJNKSJD </h4>\r\n\r\n            <Table dataSource={dataSource} columns={columns} />\r\n            <div style={{height: 200}}></div>\r\n        </div>\r\n\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { Button } from 'antd'\r\nimport { Container, Nav, Navbar } from \"react-bootstrap\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport Patients from './pacientesDash/main.patients'\r\nimport Citas from './citas/main.citas'\r\nimport Expedientes from './expedientes/expedientes'\r\n// import Recetas from './recetas'\r\nimport Perfil from './perfil'\r\nimport Home from './home/home'\r\nimport icon from '../assets/Icon.png';\r\nimport { Footer, logout } from '../resources'\r\nimport { usuario } from '../resources'\r\nimport { Historial } from './historial';\r\nimport MainPacientes from './pacientes/main.pacientes';\r\nimport Escalas from '../escalas/escalasMenu';\r\nimport Ingresos from './ingresos/ingresos';\r\nimport { KetaminaPublic, DepresionQidsPublic, DepresionEspanolPublic, HeadachePublic, PostTraumaticoPublic, PostTraumaticoClinicoPublic, PostTraumaticoMX } from '../session/public_escalas_routes';\r\nimport Horarios from './horarios/horarios';\r\n// import { KetaminaPublic, DepresionQidsPublic, DepresionEspanolPublic,HeadachePublic, PostTraumaticoPublic, PostTraumaticoClinicoPublic, PostTraumaticoMX } from './session/public_escalas_routes';\r\n\r\nfunction Navigator() {\r\n  console.log(\"DoctorApp\", usuario.name)\r\n  return <Navbar bg=\"primary\" variant=\"dark\" expand=\"lg\">\r\n    <Container>\r\n      <img\r\n        src={icon}\r\n        width=\"40\"\r\n        height=\"35\"\r\n        className=\"d-inline-block align-top\"\r\n        alt=\"Recreamed logo\"\r\n        style={{ marginRight: 6 }}\r\n      />\r\n      <Navbar.Brand href=\"#home\" style={{ fontFamily: 'Poppins', color: 'White' }}>\r\n        Bienvenido {usuario.name}\r\n      </Navbar.Brand>\r\n      <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n      <Navbar.Collapse id=\"basic-navbar-nav\">\r\n        <Nav className=\"me-auto\">\r\n          <Nav.Link href=\"/\">Inicio</Nav.Link>\r\n          {/* <Nav.Link href=\"/pacientesdash\">PacientesDash</Nav.Link> */}\r\n          <Nav.Link href=\"/pacientes\" >Pacientes</Nav.Link>\r\n          <Nav.Link href=\"/citas\">Citas</Nav.Link>\r\n          <Nav.Link href=\"/escalas\">Escalas</Nav.Link>\r\n          {/* <Nav.Link href=\"/horarios\">Horarios</Nav.Link> */}\r\n          <Nav.Link href=\"/balances\">Balances</Nav.Link>\r\n          {/* <Nav.Link href=\"/expedientes\">Expedientes</Nav.Link> */}\r\n          {/* <Nav.Link href=\"/recetas\">Recetas</Nav.Link> */}\r\n          {/* <Nav.Link href=\"/notas\">Notas</Nav.Link> */}\r\n          {/* <Nav.Link href=\"/historial\">Historiales</Nav.Link> */}\r\n          <Nav.Link href=\"/perfil\">Mi Perfil</Nav.Link>\r\n        </Nav>\r\n      </Navbar.Collapse>\r\n      <Navbar.Collapse className=\"justify-content-end\">\r\n        <Button onClick={logout} ghost>Cerrar Sesion</Button>\r\n      </Navbar.Collapse>\r\n    </Container>\r\n  </Navbar>\r\n\r\n}\r\n\r\nexport default function RecepcionApp() {\r\n\r\n  return (\r\n    <Router>\r\n\r\n      <Navigator />\r\n\r\n      <Switch>\r\n\r\n        <Route path=\"/pacientesdash\">\r\n          <Patients />\r\n        </Route>\r\n\r\n        <Route path=\"/pacientes\">\r\n          <MainPacientes />\r\n        </Route>\r\n\r\n        <Route path=\"/citas\">\r\n          <Citas />\r\n        </Route>\r\n\r\n        <Route path=\"/expedientes\">\r\n          <Expedientes />\r\n        </Route>\r\n\r\n        {/* <Route path=\"/Recetas\">\r\n          <Recetas />\r\n        </Route> */}\r\n\r\n        <Route path=\"/perfil\">\r\n          <Perfil />\r\n        </Route>\r\n\r\n        <Route path=\"/historial\">\r\n          <Historial />\r\n        </Route>\r\n\r\n        <Route path=\"/balances\">\r\n          <Ingresos />\r\n        </Route>\r\n\r\n        <Route path=\"/horarios\">\r\n          <Horarios />\r\n        </Route>\r\n\r\n        <Route path=\"/escalas\">\r\n          {/* This is taken from escalas directory*/}\r\n          <Escalas />\r\n        </Route>\r\n\r\n\r\n        {/* Scales Routes just like anonymous */}\r\n        <Route path=\"/ketamina_public/:idmedico/:idpaciente/:key\">\r\n          <KetaminaPublic />\r\n        </Route>\r\n        <Route path=\"/dolor_public/:idmedico/:idpaciente/:key\">\r\n          <HeadachePublic />\r\n        </Route>\r\n        <Route path=\"/depresion_qids_public/:idmedico/:idpaciente/:key\">\r\n          <DepresionQidsPublic />\r\n        </Route>\r\n        <Route path=\"/depresion_gpc_public/:idmedico/:idpaciente/:key\">\r\n          <DepresionEspanolPublic />\r\n        </Route>\r\n        <Route path=\"/post_traumatico_public/:idmedico/:idpaciente/:key\">\r\n          <PostTraumaticoPublic />\r\n        </Route>\r\n        <Route path=\"/post_traumatico_clinico_public/:idmedico/:idpaciente/:key\">\r\n          <PostTraumaticoClinicoPublic />\r\n        </Route>\r\n        <Route path=\"/post_traumatico_mx_public/:idmedico/:idpaciente/:key\">\r\n          <PostTraumaticoMX />\r\n        </Route>\r\n\r\n        {/* End of Scales Routes just like anonymous */}\r\n\r\n\r\n        <Route path=\"/\">\r\n          <MainPacientes />\r\n\r\n        </Route>\r\n\r\n      </Switch>\r\n\r\n      <Footer />\r\n    </Router>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Table, Space, Row, Col, Button, Modal, Form, Input, message, DatePicker } from 'antd';\r\nimport { Calendar, Badge } from 'antd';\r\nimport { API, getData } from '../resources';\r\nimport { usuario } from '../resources';\r\nimport Loading from '../loading'\r\n// import { API } from '../resources'\r\n// import Stripe from './stripe/stripe';\r\n\r\nexport default function MisCitas() {\r\n    const [isModalVisible, setIsModalVisible] = useState(false);\r\n    const [citasData, setCitasData] = useState([])\r\n    const [isLoading, setIsLoading] = useState(true)\r\n    const [cita, setCita] = useState({})\r\n    const [isDetailVisible, setIsDetailVisible] = useState(false);\r\n\r\n    useEffect(() => {\r\n        getCitasData()\r\n        // getData(`receta/${props.receta}`).then(rs => { setRecetaData(rs); setRecetaLoading(false) })\r\n\r\n    }, [])\r\n\r\n    const getCitasData = () => {\r\n        fetch(API + `citas/${usuario._id}`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                console.log(data); setCitasData(data);\r\n            })\r\n            .finally(() => setIsLoading(false))\r\n    }\r\n\r\n    // Add Modal\r\n    const showModal = () => { setIsModalVisible(true) };\r\n    const handleOk = () => { setIsModalVisible(false) };\r\n    const handleCancel = () => { setIsModalVisible(false) };\r\n    // Details Modal\r\n    const handleDetailOk = () => { setIsDetailVisible(false); };\r\n    const handleDetailCancel = () => { setIsDetailVisible(false); };\r\n\r\n    const columns = [\r\n        {\r\n            title: 'Fecha y Hora',\r\n            dataIndex: 'fecha_hora',\r\n            key: 'fecha_hora',\r\n            render: text => <a>{text}</a>,\r\n        },\r\n        {\r\n            title: 'Paciente',\r\n            dataIndex: 'id_usuario',\r\n            key: 'id_usuario',\r\n        },\r\n        {\r\n            title: 'Sucursal',\r\n            dataIndex: 'id_sucursal',\r\n            key: 'v',\r\n        },\r\n        {\r\n            title: 'Comentarios',\r\n            dataIndex: 'comentarios',\r\n            key: 'comentarios',\r\n        },\r\n        {\r\n            title: 'Detalles',\r\n            key: 'detalles',\r\n            render: (text, record) => (\r\n                <Space size=\"middle\">\r\n                    {/* <a href>Enlace</a> */}\r\n                    <Button>Enlace</Button>\r\n                </Space>\r\n            ),\r\n        },\r\n    ];\r\n\r\n    const onFinish = (values) => {\r\n        values.medico = usuario._id;\r\n        console.log('Valores:', values);\r\n        fetch(API + 'citas/add', {\r\n            method: 'POST',\r\n            body: JSON.stringify(values),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then(res => res.json())\r\n            .then(response => { console.log('Success:', response); message.success(response.message || response.error); })\r\n            .catch(error => console.error('Error:', error))\r\n            .finally(() => { getCitasData(); setIsModalVisible(false) })\r\n    };\r\n\r\n    const onFinishFailed = (errorInfo) => {\r\n        console.log('Failed:', errorInfo);\r\n    };\r\n\r\n    // DatePicker\r\n    function onChange(value, dateString) {\r\n        console.log('Selected Time: ', value);\r\n        console.log('Formatted Selected Time: ', dateString);\r\n    }\r\n    function onOk(value) {\r\n        console.log('onOk: ', value);\r\n    }\r\n\r\n    //Calendar Functions\r\n    const getMonthData = (value) => {\r\n        if (value.month() === 8) {\r\n            return 1394;\r\n        }\r\n    };\r\n    const monthCellRender = (value) => {\r\n        const num = getMonthData(value);\r\n        return num ? (\r\n            <div className=\"notes-month\">\r\n                <section>{num}</section>\r\n                <span>Backlog number</span>\r\n            </div>\r\n        ) : null;\r\n    };\r\n\r\n    const dateCellRender = (value) => {\r\n        // const hoy = value.format('L');\r\n        let hoy = value.format();\r\n        hoy = hoy.substring(0, 10)\r\n        return (\r\n            <ul className=\"events\">\r\n                {citasData.map((cita) => {\r\n\r\n                    cita.fecha_hora = cita.fecha_hora.substring(0, 10);\r\n                    return cita.fecha_hora === hoy ?\r\n                        <li style={{ listStyleType: 'none' }} key={cita._id}>\r\n                            <Badge status='success' text={cita.medico.name} onClick={() => { setCita(cita); setIsDetailVisible(true); }} />\r\n                        </li>\r\n                        : <></>\r\n\r\n                })\r\n                }\r\n            </ul >\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className='mainContainer'>\r\n            <Row>\r\n                <Col span={8}><h4>CALENDARIO DE CITAS</h4></Col>\r\n                <Col>\r\n                    <Button type=\"primary\" onClick={showModal}>\r\n                        Nueva Cita\r\n                    </Button>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/* {isLoading ? <Loading /> : <Table columns={columns} dataSource={citasData} />} */}\r\n\r\n            <Calendar dateCellRender={dateCellRender} monthCellRender={monthCellRender} />\r\n\r\n\r\n\r\n            <Modal title=\"Nuevo expediente\" visible={isModalVisible} onOk={handleOk} onCancel={handleCancel}>\r\n                <Form name=\"expediente\" labelCol={{ span: 8 }} wrapperCol={{ span: 12 }} onFinish={onFinish} onFinishFailed={onFinishFailed} autoComplete=\"off\" >\r\n\r\n                    <Form.Item label=\"Paciente\" name=\"usuario\" rules={[{ required: true, message: 'Ingresa RFC' }]} >\r\n                        <Input />\r\n                    </Form.Item>\r\n                    <Form.Item label=\"Sucursal\" name=\"sucursal\" rules={[{ required: true, message: 'Ingresa RFC' }]} >\r\n                        <Input />\r\n                    </Form.Item>\r\n                    <Form.Item label=\"Fecha y Hora\" name=\"fecha_hora\" rules={[{ required: true, message: 'Selecciona Fecha y Hora' }]} >\r\n                        <DatePicker showTime onChange={onChange} onOk={onOk} placeholder='Selecciona Fecha y Hora' />\r\n                    </Form.Item>\r\n                    <Form.Item label=\"Enlace a la reunion\" name=\"id_reunion\" rules={[{ required: true, message: 'Ingresa RFC' }]} >\r\n                        <Input />\r\n                    </Form.Item>\r\n                    <Form.Item label=\"Contraseña\" name=\"password_reunion\" rules={[{ required: true, message: 'Ingresa RFC' }]} >\r\n                        <Input placeholder='Opcional' />\r\n                    </Form.Item>\r\n                    <Form.Item label=\"Comentarios\" name=\"comentarios\" rules={[{ required: true, message: 'Ingresa RFC' }]} >\r\n                        <Input />\r\n                    </Form.Item>\r\n\r\n                    <Form.Item wrapperCol={{ offset: 8, span: 16 }}>\r\n                        <Button type=\"primary\" htmlType=\"submit\" form='expediente'>\r\n                            Guardar\r\n                        </Button>\r\n                    </Form.Item>\r\n                </Form>\r\n            </Modal>\r\n            <Modal title=\"Detalles de la cita\" visible={isDetailVisible} onOk={handleDetailOk} onCancel={handleDetailCancel}>\r\n                {\r\n                    cita ?\r\n                        <>\r\n                            <p>Paciente: {cita.usuario?.name}</p>\r\n                            <p>fecha y hora: {cita.fecha_hora}</p>\r\n                            <p>Sucursal: {cita.sucursal?.nombre}</p>\r\n                            <p>Comentarios: {cita.comentarios}</p>\r\n                            <p> <a href={cita.id_reunion} target='_blank' rel='noreferrer'>ir a la cita </a> </p>\r\n                        </>\r\n                        :\r\n                        <p>Sin cita seleccionada</p>\r\n                }\r\n                {/* <Stripe /> */}\r\n            </Modal>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState } from 'react'\r\nimport { Table, Tag, Space, Button, Modal } from 'antd';\r\n\r\n\r\nexport default function Recetas() {\r\n\r\n    const [isModalVisible, setIsModalVisible] = useState(false);\r\n    const showModal = () => {\r\n        setIsModalVisible(true);\r\n    };\r\n\r\n    const handleOk = () => {\r\n        setIsModalVisible(false);\r\n    };\r\n\r\n    const handleCancel = () => {\r\n        setIsModalVisible(false);\r\n    };\r\n    const columns = [\r\n        {\r\n            title: 'ID Receta',\r\n            dataIndex: 'key',\r\n            key: '_id',\r\n            render: text => <a>{text}</a>,\r\n        },\r\n        {\r\n            title: 'ID Nota',\r\n            dataIndex: 'id_nota',\r\n            key: 'id_nota',\r\n        },\r\n        {\r\n            title: 'Prescripcion',\r\n            dataIndex: 'prescripcion',\r\n            key: 'prescripcion',\r\n        },\r\n        {\r\n            title: 'Detalles',\r\n            key: 'action',\r\n            render: (text, record) => (\r\n                <Space size=\"middle\">\r\n                    <Button onClick={showModal}>Detalles</Button>\r\n                </Space>\r\n            ),\r\n        },\r\n    ];\r\n\r\n    const data = [\r\n        {\r\n            key: \"62570ab89a6437369f835be7\",\r\n            id_nota: \"62570a9a9a6437369f835be5\",\r\n            prescripcion: \"Paracetamol cada 8 horas\",\r\n            createdAt: \"2022-04-13T17:39:04.541Z\",\r\n            updatedAt: \"2022-04-13T17:39:04.541Z\",\r\n            __v: 0\r\n        },\r\n        {\r\n            key: \"62570ab89a6437369f835be8\",\r\n            id_nota: \"62570a9a9a6437369f835be5\",\r\n            prescripcion: \"Ibuprofeno\",\r\n            createdAt: \"2022-04-13T17:39:04.541Z\",\r\n            updatedAt: \"2022-04-13T17:39:04.541Z\",\r\n            __v: 0\r\n        }\r\n    ];\r\n    return (\r\n        <div className='mainContainer'>\r\n            <h4>Mis Recetas</h4>\r\n            \r\n            <Table columns={columns} dataSource={data} />\r\n\r\n            <Modal title=\"Basic Modal\" visible={isModalVisible} onOk={handleOk} onCancel={handleCancel}>\r\n\r\n                <p> _id\": \"62570ab89a6437369f835be7\",</p>\r\n                <p> id_nota\": \"62570a9a9a6437369f835be5\",</p>\r\n                <p> prescripcion\": \"Paracetamol cada 8 horas\",</p>\r\n                <p> createdAt\": \"2022-04-13T17:39:04.541Z\",</p>\r\n                <p> updatedAt\": \"2022-04-13T17:39:04.541Z\",</p>\r\n                <p> __v\": 0</p>\r\n\r\n            </Modal>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Form, Input, Button, message, Space, Row, Col, Upload } from 'antd'\r\nimport { MinusCircleOutlined, PlusOutlined, InboxOutlined } from '@ant-design/icons';\r\nimport { InputNumber, Select } from 'antd';\r\nimport { S_API, getData, API } from '../resources'\r\nconst { Option } = Select;\r\nconst { Dragger } = Upload;\r\n\r\n\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    xs: {\r\n      span: 24,\r\n    },\r\n    sm: {\r\n      span: 8,\r\n    },\r\n  },\r\n  wrapperCol: {\r\n    xs: {\r\n      span: 24,\r\n    },\r\n    sm: {\r\n      span: 14,\r\n    },\r\n  },\r\n};\r\nconst tailFormItemLayout = {\r\n  wrapperCol: {\r\n    xs: {\r\n      span: 24,\r\n      offset: 0,\r\n    },\r\n    sm: {\r\n      span: 16,\r\n      offset: 8,\r\n    },\r\n  },\r\n};\r\nexport default function PerfilEdit(props) {\r\n\r\n  const [form] = Form.useForm();\r\n\r\n  const [sucursales, setSucursales] = useState([]);\r\n  const [sucursalesLoading, setSucursalesLoading] = useState(true);\r\n  const [avatar, setAvatar] = useState(props.perfil.avatar)\r\n\r\n  //Start upload props Upload File\r\n  const dragDropProps = {\r\n    name: 'file',\r\n    multiple: false,\r\n    action: API + 'imagenes/upload',\r\n\r\n    onChange(info) {\r\n      const { status } = info.file;\r\n\r\n      if (status !== 'uploading') {\r\n        console.log(info.file, info.fileList);\r\n      }\r\n\r\n      if (status === 'done') {\r\n        message.success(`${info.file.name} file uploaded successfully.`);\r\n        console.log('New Files: ', info.file.response.file)\r\n        setAvatar(info.file.response.file)\r\n      } else if (status === 'error') {\r\n        message.error(`${info.file.name} file upload failed.`);\r\n      }\r\n    },\r\n\r\n    onDrop(e) {\r\n      console.log('Dropped files', e.dataTransfer.files);\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log('received Medic: ', props.perfil);\r\n    getData('sucursales').then((rs) => { setSucursales(rs); setSucursalesLoading(false) })\r\n  }, [])\r\n\r\n\r\n\r\n  const onFinish = (values) => {\r\n    values.avatar = avatar;\r\n    values.estatus = '1';\r\n    values.rol = 'Medico';\r\n    delete values.confirm;\r\n    delete values.prefix;\r\n\r\n    console.log('ready to send', values)\r\n    fetch(S_API + 'register', {\r\n      method: 'POST',\r\n      body: JSON.stringify(values),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log('Success:', response);\r\n        response.message && response.message === 'Usuario creado correctamente' ?\r\n          window.location.href = 'doctores' : message.error(response.error);\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  };\r\n\r\n  const onFinishEdit = (values) => {\r\n    values.avatar = avatar;\r\n    // values.estatus = '1';\r\n    // values.rol = 'Medico';\r\n    // delete values.confirm;\r\n    // delete values.prefix;\r\n\r\n    console.log('ready to send', values)\r\n    fetch(API + 'users/updateUser/' + props.perfil._id, {\r\n      method: 'PUt',\r\n      body: JSON.stringify(values),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log('Success:', response);\r\n        response.message && response.message === 'Usuario actualizado correctamente' ?\r\n          props.setEditing(false) : message.error(response.error);\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  };\r\n\r\n  const prefixSelector = (\r\n    <Form.Item name=\"prefix\" noStyle>\r\n      <Select\r\n        style={{\r\n          width: 70,\r\n        }}\r\n      >\r\n        <Option value=\"+52\">+52</Option>\r\n      </Select>\r\n    </Form.Item>\r\n  );\r\n  const suffixSelector = (\r\n    <Form.Item name=\"suffix\" noStyle>\r\n      <Select\r\n        style={{\r\n          width: 70,\r\n        }}\r\n      >\r\n        <Option value=\"USD\">$</Option>\r\n        <Option value=\"CNY\">¥</Option>\r\n      </Select>\r\n    </Form.Item>\r\n  );\r\n\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo);\r\n  };\r\n  return (\r\n    <div>\r\n      <h4>Editar perfil</h4>\r\n      <br />\r\n      <Dragger {...dragDropProps}>\r\n        <p className=\"ant-upload-drag-icon\">\r\n          <InboxOutlined />\r\n        </p>\r\n        <p className=\"ant-upload-text\">Arrastra la imagen de perfil o click ara buscar</p>\r\n        <p className=\"ant-upload-hint\">\r\n          Selecciona archivos en formato png, jpeg o webp\r\n        </p>\r\n      </Dragger>\r\n      <br />\r\n      <Form\r\n        {...formItemLayout}\r\n        form={form}\r\n        name=\"register\"\r\n        onFinish={onFinishEdit}\r\n        // initialValues={{ horarios: [{ sucursal: '', horario: '' }], prefix: '+52' }}\r\n        initialValues={props.perfil}\r\n        scrollToFirstError\r\n      >\r\n\r\n        <Row>\r\n\r\n          <Col span={11}>\r\n            <Form.Item name=\"name\" label=\"Nombre\" rules={[{ required: true, message: 'Ingresa Nombre y apellidos' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item name=\"email\" label=\"Correo\" rules={[{ type: 'email', message: 'Ingresa un corrreo electronico valido' }, { required: true, message: 'Please input your E-mail!' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            {/* <Form.Item name=\"password\" label=\"Contraseña\" rules={[{ required: true, message: 'Por favor ingrese su contraseña!', },]} hasFeedback >\r\n              <Input.Password />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"confirm\" label=\"Confirmar contraseña\" dependencies={['password']} hasFeedback\r\n              rules={[\r\n                {\r\n                  required: true,\r\n                  message: 'Please confirm your password!',\r\n                },\r\n                ({ getFieldValue }) => ({\r\n                  validator(_, value) {\r\n                    if (!value || getFieldValue('password') === value) {\r\n                      return Promise.resolve();\r\n                    }\r\n                    return Promise.reject(new Error('Las contraseñas deben coincidir!'));\r\n                  },\r\n                }),\r\n              ]}\r\n            >\r\n              <Input.Password />\r\n            </Form.Item> */}\r\n\r\n            <Form.Item name=\"telefono\" label=\"Telefono\" rules={[{ required: true, message: 'Ingresa el numero de telefono correcto' },]}>\r\n              <Input addonBefore={prefixSelector} style={{ width: '100%', }} />\r\n            </Form.Item>\r\n\r\n\r\n            <Form.Item label=\"horarios\" rules={[{ required: true, message: 'Ingresa al menos un horario', },]}>\r\n              <Form.List name=\"horarios\" label=\"horarios list\"\r\n              >\r\n                {(fields, { add, remove }) => (\r\n                  <>\r\n                    {fields.map(({ key, name, ...restField }) => (\r\n                      <Space key={key} style={{ display: 'flex', marginBottom: 8 }} align=\"baseline\">\r\n                        <Form.Item\r\n                          {...restField}\r\n                          name={[name, 'sucursal']}\r\n                          rules={[{ required: true, message: 'Elije Sucursal' }]}\r\n                        >\r\n                          <Select placeholder=\"Elije Sucursal\" style={{ width: '120px' }} >\r\n                            {sucursalesLoading ? \"Cargando\" :\r\n                              sucursales.map(s => <Option value={s._id}>{s.nombre}</Option>)\r\n                            }\r\n                          </Select>\r\n                        </Form.Item>\r\n                        <Form.Item\r\n                          {...restField}\r\n                          name={[name, 'horario']}\r\n                          rules={[{ required: true, message: 'Missing last name' }]}\r\n                        >\r\n                          <Input placeholder=\"Horario\" />\r\n                        </Form.Item>\r\n                        <MinusCircleOutlined onClick={() => remove(name)} />\r\n                      </Space>\r\n                    ))}\r\n                    <Form.Item>\r\n                      <Button type=\"dashed\" onClick={() => add()} block icon={<PlusOutlined />}>\r\n                        Agregar Horario\r\n                      </Button>\r\n                    </Form.Item>\r\n                  </>\r\n                )}\r\n              </Form.List>\r\n            </Form.Item>\r\n\r\n\r\n\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item name=\"cedula\" label=\"Cedula\" rules={[{ required: false, message: 'Ingresa cedula' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            {/* Not Necesary For Medic. He'll be in hospital direction */}\r\n            {/* <Form.Item name=\"calle\" label=\"Calle\" rules={[{ required: true, message: 'Ingresa calle', whitespace: true }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"numexterior\" label=\"Num Exterior\" rules={[{ required: true, message: 'Ingresa numero exterior' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"numinterior\" label=\"Num Interior\" rules={[{ required: true, message: 'Ingresa numinterior' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item label=\"Colonia\" name=\"colonia\" rules={[{ required: true, message: 'Please input your colobnia!' }]}            >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"estado\" label=\"Estado\" rules={[{ required: true, message: 'Apellido materno', },]}>\r\n              <Select placeholder=\"Elije tu estado\">\r\n                {estados.map(e => <Option value={e}>{e}</Option>)}\r\n              </Select>\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"municipio\" label=\"Municipio\" rules={[{ required: true, message: 'Ingresa tu municipio' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"codigopostal\" label=\"Codigo Postal\" rules={[{ required: true, message: 'Ingresa codigopostal', },]}>\r\n              <InputNumber addonAfter={suffixSelector} style={{ width: '100%', }} />\r\n            </Form.Item> */}\r\n\r\n            <Form.Item name=\"certificacion\" label=\"Certificacion\" rules={[{ required: false, message: 'Ingresa tu certificacion' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"universidad\" label=\"Universidad\" rules={[{ required: false, message: 'Ingresa tu universidad' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item {...tailFormItemLayout}>\r\n              <Button type=\"primary\" htmlType=\"submit\">\r\n                Guardar\r\n              </Button>\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n\r\n\r\n\r\n\r\n\r\n        {/* <Form.Item\r\n          name=\"agreement\"\r\n          valuePropName=\"checked\"\r\n          rules={[\r\n            {\r\n              validator: (_, value) =>\r\n                value ? Promise.resolve() : Promise.reject(new Error('Should accept agreement')),\r\n            },\r\n          ]}\r\n          {...tailFormItemLayout}\r\n        >\r\n          <Checkbox>\r\n            He leído y acepto los <a href=\"https://recreamed.com\">terminos y condiciones</a>\r\n          </Checkbox>\r\n        </Form.Item> */}\r\n\r\n\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Row, Col, Space, Button, Divider, Image } from 'antd';\r\nimport { Avatar, Card } from 'antd';\r\nimport { UserOutlined } from '@ant-design/icons';\r\nimport { API, usuario } from '.././resources';\r\nimport Loading from '.././loading';\r\nimport { PlusOutlined, FormOutlined } from '@ant-design/icons';\r\nimport PerfilEdit from './perfilEdit';\r\n\r\n\r\nexport default function Perfil() {\r\n\r\n    const [profileData, setProfileData] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [profileForEdit, setProfileForEdit] = useState([]);\r\n    const [editing, setEditing] = useState(false)\r\n\r\n    useEffect(() => {\r\n        getProfileData()\r\n    }, [])\r\n\r\n    const getProfileData = () => {\r\n        fetch(API + 'userByMail/' + usuario.email)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                console.log(data);\r\n                setProfileData(data[0]);\r\n                setIsLoading(false);\r\n            });\r\n    }\r\n\r\n    const DetailsProfile = () => {\r\n        // Two columns of 8 spaces with 4 spaces around\r\n        return <Row>\r\n            <Col span={8} offset={4}>\r\n                {\r\n                    // Profile Pic\r\n                    profileData.avatar.length > 8 ?\r\n                        <Image style={{ borderRadius: 12 }} width={256} src={'https://api.recreamed.com/images/' + profileData.avatar} />\r\n                        :\r\n                        <Avatar size={128} icon={<UserOutlined />} className='btnIconCentered' />\r\n                }\r\n                <Divider />\r\n                <p className='nombre'>{profileData.name} </p>\r\n                <p className='datos'>{profileData.email} </p>\r\n                <p className='datos'>{profileData.telefono} </p>\r\n            </Col>\r\n            <Col span={8}>\r\n                <p><span className='desc'>Estado:</span> {profileData.estado}</p>\r\n                <p><span className='desc'>Municipio:</span> {profileData.municipio}</p>\r\n                <p><span className='desc'>Colonia:</span> {profileData.colonia}</p>\r\n                <p><span className='desc'>Calle:</span> {profileData.calle}</p>\r\n                <p><span className='desc'>Codigo Postal:</span>{profileData.codigopostal} </p>\r\n            </Col>\r\n            {/* <Col span={8}>\r\n                <Card title='Horarios' style={{ borderRadius: 12 }}>\r\n                    {\r\n                        profileData.horarios.map((h) => {\r\n                            return <Card.Grid style={{ width: '100%' }} >\r\n                                <Row align=\"middle\">\r\n                                    <Col span={6} offset={4}><img width={64} src={'https://api.recreamed.com/images/' + h.sucursal.logo} alt=\"Logo\" /></Col>\r\n                                    <Col span={10}>{h.sucursal.nombre} <br /> {h.horario}</Col>\r\n                                </Row>\r\n                            </Card.Grid>\r\n                        })\r\n                    }\r\n                </Card>\r\n                <br />\r\n                <p><span className='desc'>Universidad:</span> {profileData.universidad} </p>\r\n                <p><span className='desc'>Certificacion:</span> {profileData.certificacion} </p>\r\n                <p><span className='desc'>Cedula:</span> {profileData.cedula} </p>\r\n            </Col> */}\r\n\r\n\r\n\r\n        </Row>\r\n    }\r\n    const editPerfil = async (p) => {\r\n        p.horarios.forEach((h) => { h.sucursal = h.sucursal._id })\r\n        console.log('Horarios before edit profile: ', p.horarios);\r\n        await setProfileForEdit(p)\r\n        setEditing(true);\r\n        console.log('Editar medico: ', p)\r\n    }\r\n\r\n    return (\r\n        <div className='mainContainer'>\r\n\r\n            <Space>\r\n                <h3>PERFIL</h3>\r\n                <Button onClick={() => editPerfil(profileData)} type=\"primary\" shape=\"circle\" icon={<FormOutlined />} />\r\n            </Space> <br /><br />\r\n            {isLoading ? <Loading /> :\r\n                <Card>\r\n                    {\r\n                        editing ?\r\n\r\n                            <>\r\n                                <PerfilEdit perfil={profileData} setEditing={setEditing} />\r\n                                <Button shape=\"circle\" title='Cancelar' />\r\n                                <Button onClick={() => setEditing(false)}>Cancelar</Button>\r\n                            </> :\r\n                            <DetailsProfile />\r\n                    }\r\n                </Card>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","import React, { Component } from 'react'\r\nimport { Row, Col, Statistic, Card } from 'antd'\r\n// import { Pie, Line } from '@ant-design/charts';\r\nimport './home.css'\r\n\r\nexport class Home extends Component {\r\n    \r\n    dataPie = [\r\n        {\r\n            type: 'Covid',\r\n            value: 130737,\r\n        },\r\n        {\r\n            type: 'Colesterol',\r\n            value: 21468,\r\n        },\r\n        {\r\n            type: 'Diabetes',\r\n            value: 18098,\r\n        },\r\n        {\r\n            type: 'Presion',\r\n            value: 17912,\r\n        },\r\n        {\r\n            type: 'Oseo',\r\n            value: 15282,\r\n        },\r\n        {\r\n            type: 'Migraña',\r\n            value: 11650,\r\n        },\r\n    ];\r\n\r\n    configPie = {\r\n        appendPadding: 10,\r\n        data: this.dataPie,\r\n        angleField: 'value',\r\n        colorField: 'type',\r\n        height: 450,\r\n        radius: 0.8,\r\n        label: {\r\n            type: 'inner',\r\n            offset: '-0.5',\r\n            content: '{name} {percentage}',\r\n            style: {\r\n                fill: '#fff',\r\n                fontSize: 14,\r\n                textAlign: 'center',\r\n            },\r\n        },\r\n    };\r\n\r\n    dataLine = [\r\n        { mes: 'Junio', consultas: 17945 },\r\n        { mes: 'Julio', consultas: 24011 },\r\n        { mes: 'Agosto', consultas: 46493 },\r\n        { mes: 'Septiembre', consultas: 105293 },\r\n        { mes: 'Octubre', consultas: 77190 }\r\n    ];\r\n\r\n    configLine = {\r\n        data: this.dataLine,\r\n        height: 410,\r\n        xField: 'mes',\r\n        yField: 'consultas',\r\n        color: '#01B075',\r\n        point: {\r\n            size: 5,\r\n            shape: 'diamond',\r\n            color: '#01B075'\r\n        },\r\n        label: {\r\n            style: {\r\n                fill: '#aaa',\r\n                fontSize: 16,\r\n                stroke: '#01B075'\r\n            },\r\n        },\r\n    };\r\n    render() {\r\n        return (\r\n            <>\r\n\r\n                <br />\r\n                <div className=\"contenedor\">\r\n                    <Row gutter={30}>\r\n                        <Col xs={24} sm={12} lg={6}>\r\n                            {/* <div className=\"cardsContenedor\" > */}\r\n                            <Card className=\"cardsContenedor\" hoverable bordered={false}>\r\n\r\n                                <Statistic title=\"Total Hospitales\" value=\"4\" valueStyle={{ color: 'white' }} style={{ backgroundColor: '#4BA6FE' }} className=\"cardsContenido\" />\r\n                            </Card>\r\n                        </Col>\r\n                        <Col xs={24} sm={12} lg={6}>\r\n                            <Card className=\"cardsContenedor\" hoverable bordered={false}>\r\n                                <Statistic title=\"Total Medicos\" value=\"14\" valueStyle={{ color: 'white' }} style={{ backgroundColor: '#FF838A' }} className=\"cardsContenido\" />\r\n                            </Card>\r\n                        </Col>\r\n\r\n                        <Col xs={24} sm={12} lg={6}>\r\n                            <Card className=\"cardsContenedor\" hoverable bordered={false}>\r\n\r\n                                <Statistic title=\"Total Pacientes\" value=\"241\" valueStyle={{ color: 'white' }} style={{ backgroundColor: '#18D0C2' }} className=\"cardsContenido\" />\r\n                            </Card>\r\n                        </Col>\r\n                        <Col xs={24} sm={12} lg={6}>\r\n                            <Card className=\"cardsContenedor\" hoverable bordered={false}>\r\n\r\n                                <Statistic title=\"Citas Hoy\" value={47} valueStyle={{ color: 'white' }} style={{ backgroundColor: '#847DFC' }} className=\"cardsContenido\" />\r\n                            </Card>\r\n                        </Col>\r\n                    </Row>\r\n                    <br />\r\n                    <Row gutter={20}>\r\n                        <Col xs={24} md={12} className=\"graficaCircular\">\r\n                            {/* <Pie {...this.configPie} style={{ backgroundColor: '#1F263C' }} /> */}\r\n                        </Col>\r\n\r\n                        <Col xs={24} md={12}>\r\n                            {/* <Line {...this.configLine} style={{ backgroundColor: '#1F263C', padding: '20px' }} /> */}\r\n                        </Col>\r\n                    </Row>\r\n\r\n                </div>\r\n\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Home\r\n","import React from 'react'\r\nimport { Container, Nav, Navbar } from \"react-bootstrap\";\r\nimport icon from '../assets/Icon.png';\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport { Button } from 'antd'\r\nimport MisCitas from './misCitas'\r\nimport Recetas from './recetas'\r\nimport Perfil from './perfil';\r\nimport Home from './home/home';\r\nimport { usuario } from '../resources'\r\n\r\nconst logout = () => { localStorage.removeItem('sessionToken'); localStorage.removeItem('userType'); window.location.href = '/'; }\r\n\r\nfunction Navigator() {\r\n\r\n  return <Navbar bg=\"primary\" variant=\"dark\" expand=\"lg\">\r\n    <Container>\r\n      <img\r\n        src={icon}\r\n        width=\"40\"\r\n        height=\"35\"\r\n        className=\"d-inline-block align-top\"\r\n        alt=\"Recreamed logo\"\r\n        style={{ marginRight: 6 }}\r\n      />\r\n      <Navbar.Brand href=\"#home\" style={{ fontFamily: 'Poppins', color: 'White' }}>\r\n        Bienvenido {usuario.name}\r\n      </Navbar.Brand>\r\n      <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n      <Navbar.Collapse id=\"basic-navbar-nav\">\r\n        <Nav className=\"me-auto\">\r\n          {/* <Nav.Link href=\"/\">Landing</Nav.Link> */}\r\n          <Nav.Link href=\"/citas\">Mis Citas</Nav.Link>\r\n          <Nav.Link href=\"/recetas\">Mis Recetas</Nav.Link>\r\n          <Nav.Link href=\"/perfil\">Mi Perfil</Nav.Link>\r\n        </Nav>\r\n      </Navbar.Collapse>\r\n      <Navbar.Collapse className=\"justify-content-end\">\r\n        <Button onClick={logout} ghost>Cerrar Sesion</Button>\r\n      </Navbar.Collapse>\r\n    </Container>\r\n  </Navbar>;\r\n\r\n}\r\n\r\nexport default function PatientApp() {\r\n  return (\r\n    <Router>\r\n      <Navigator />\r\n      <Switch>\r\n        <Route path=\"/citas\">\r\n          <MisCitas />\r\n        </Route>\r\n        <Route path=\"/recetas\">\r\n          <Recetas />\r\n        </Route>\r\n        <Route path=\"/perfil\">\r\n          <Perfil />\r\n        </Route>\r\n        <Route path=\"/\">\r\n        <MisCitas />\r\n        </Route>\r\n      </Switch>\r\n    </Router>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Modal, Form, Select, Input, Button, message, Switch, DatePicker } from 'antd'\r\nimport { sendDataBody, updateData, ids_hospitales } from '../../resources';\r\n\r\nexport function CreateCitaForm(props) {\r\n    // const [medicosLoading, setMedicosLoading] = useState(true)\r\n    const [medicos, setMedicos] = useState([])//Set Medicos for select\r\n    const [medicosData, setMedicosData] = useState([]) // List of all Medicos\r\n    const [servicios, setServicios] = useState([])\r\n\r\n    const [errorMessage, setErrorMessage] = useState(\"\")\r\n    const [enableCreateCita, setEnableCreateCita] = useState(true)\r\n    // Body of cita\r\n    const [isOnline, setIsOnline] = useState(false)\r\n    const [costo, setCosto] = useState(0)\r\n\r\n    const [costoBaseCita, setCostoBaseCita] = useState(0)\r\n    const [usesCostoBase, setUsesCostoBase] = useState(false)\r\n\r\n\r\n    useEffect(() => {\r\n        getDoctorsData()\r\n        console.log('Received Cita', props.cita)\r\n        if (props.cita && props.cita.usuario) handlePatientChange(props.cita.usuario)\r\n    }, [])\r\n\r\n    const getDoctorsData = () => { // First of all, get medicos\r\n        sendDataBody('users/getMany/hospitals', { ids_hospitales: ids_hospitales }).then(rs => {\r\n            // rs.forEach(m => { m.value = m._id; m.label = m.name })\r\n\r\n            // if (props.cita) {\r\n            //     const { configuracion } = rs.find((m) => m._id === props.cita.medico)\r\n            //     console.log('Found on getDctsDt: ', configuracion)\r\n            //     let { tratamientos_ofrecidos } = configuracion;\r\n            //     tratamientos_ofrecidos.forEach(t => {\r\n            //         t.label = t.tratamiento; t.value = t.tratamiento;\r\n            //     });\r\n            //     setServicios(tratamientos_ofrecidos)\r\n            // }\r\n\r\n            setMedicosData(rs)\r\n        })\r\n    }\r\n\r\n    // Form Methods\r\n    const onFinish = (values) => {\r\n        const tipo_pago = values.tipo_pago;\r\n        values.sucursal = props.hospital;\r\n        delete values.tratamiento;\r\n        delete values.servicio;\r\n        delete values.tipo_pago;\r\n\r\n        // Handle if its updating or creating cita\r\n        console.log('cita ready', values)\r\n        if (props.cita) {\r\n            updateData(`citas/update/${props.cita._id}`, values).then((response) => {\r\n                // message.success(response.message || response.error);\r\n                props.setIsModalOpen(false);\r\n                props.setEditingCita(false);\r\n            }).finally(() => { props.getCitasData(); })\r\n        } else {\r\n            sendDataBody('citas/add', values).then((response) => {\r\n                message.success(response.message || response.error);\r\n                createBalance(response.id_nueva_cita, values.medico, values.fecha_hora, tipo_pago)\r\n            }).finally(() => { props.getCitasData(); props.setIsModalOpen(false) })\r\n        }\r\n    }\r\n\r\n    const createBalance = (_cita, medico, _fecha_hora, tipo_pago) => {\r\n        const balanceBody = {\r\n            tipo: 'ingreso',\r\n            medico: medico,\r\n            cita: _cita,\r\n            monto: costo,\r\n            forma_de_pago: tipo_pago,\r\n            fecha_hora: _fecha_hora,\r\n            estado: 'pendiente'\r\n        }\r\n        console.log('Balance ready to send: ', balanceBody)\r\n        sendDataBody('balances/add', balanceBody).then((rs) => { message.success(rs.message || rs.error); console.log(rs) })\r\n    }\r\n\r\n\r\n    const onFinishFailed = (errorInfo) => {\r\n        console.log('Failed:', errorInfo);\r\n    };\r\n\r\n    const handlePatientChange = (value) => {\r\n        console.log('Entering search', value)\r\n        console.log('PatsAta', props.pacientesData)\r\n        const found = props.pacientesData.find((p) => p._id === value);\r\n        if (found) {\r\n            setEnableCreateCita(true)\r\n            let { medicos_asignados } = found\r\n            medicos_asignados.forEach((m) => {\r\n                if (medicosData.includes)\r\n                    m.label = m.name; m.value = m._id\r\n            });\r\n            console.log('Found', found)\r\n            console.log('meds', medicos_asignados)\r\n            setMedicos(medicos_asignados);\r\n            // setMedicosLoading(false)\r\n        } else {\r\n            setEnableCreateCita(false)\r\n            setErrorMessage(\"Usuario no encontrado\")\r\n        }\r\n    };\r\n    const onSearchPatient = (value) => { };\r\n\r\n    const handleMedicochange = (_id) => {\r\n        console.log('selected', _id)\r\n        console.log('all medics', medicosData)\r\n        // Populate the \"servicio\" select\r\n        if (medicos.length > 0) {\r\n            let found = medicosData.find((m) => m._id === _id)\r\n            if (found && found.configuracion.tratamientos_ofrecidos) {\r\n                setErrorMessage(\"\")\r\n                setEnableCreateCita(true)\r\n                if (props.enableCreateCita) props.setEditingCita(false)\r\n                let { configuracion: { tratamientos_ofrecidos } } = found;\r\n                // console.log(\"found tr\", found)\r\n                tratamientos_ofrecidos.forEach(t => {\r\n                    t.label = `${t.tratamiento} - $${t.costo}`; t.value = t.costo;\r\n                });\r\n                const { configuracion: { costo_cita = 0 } } = found;\r\n                setCostoBaseCita(costo_cita)\r\n                setServicios(tratamientos_ofrecidos)\r\n            }\r\n            else {\r\n                setEnableCreateCita(false);\r\n                setErrorMessage(\"No se puede crear la cita para este médico\")\r\n                if (props.enableCreateCita) props.enableCreateCita(false)\r\n            }\r\n            //   \r\n\r\n        }\r\n    }\r\n\r\n    const onSwitch = (checked) => {\r\n        setIsOnline(checked)\r\n    };\r\n\r\n    // Handle change for select servicio\r\n    const handleChange = (value) => {\r\n\r\n        setCosto(value)\r\n        console.log(`selected ${value}`);\r\n    };\r\n\r\n    const onSwitchCosoBase = (checked) => {\r\n        // if(checked)se\r\n        console.log(`switch to ${checked}`);\r\n        setUsesCostoBase(checked)\r\n    };\r\n\r\n    const timeOptions = [\r\n        { label: 'Media Hora', value: 30 },\r\n        { label: 'Una Hora', value: 60 },\r\n        { label: 'Una Hora y Media', value: 90 },\r\n        { label: 'Dos Horas', value: 120 },\r\n        { label: 'Dos Horas Y Media', value: 150 },\r\n        { label: 'Tres Horas', value: 180 },\r\n        { label: 'Cuatro Horas', value: 210 },\r\n        { label: 'Cuatro Horas y Media', value: 240 },\r\n        { label: 'Cinco Horas', value: 270 },\r\n        { label: 'Cinco Horas y Media', value: 300 },\r\n    ]\r\n\r\n    const paymentOptions = [\r\n        { value: 'efectivo', label: 'Efectivo' },\r\n        { value: 'tarjeta', label: 'Tarjeta' },\r\n        { value: 'transferencia', label: 'Transferencia' },\r\n    ]\r\n\r\n    return <Form name=\"nueva_cita_admin\" labelCol={{ span: 8 }} wrapperCol={{ span: 12 }} onFinish={onFinish} onFinishFailed={onFinishFailed} autoComplete=\"off\"\r\n        initialValues={props.cita ? props.cita : { isOnline: false, tratamiento: 'Sin servicio', fecha_hora: props.fecha_hora, duracion: 60 }}>\r\n\r\n        <div>{errorMessage}</div>\r\n\r\n        <Form.Item label=\"Paciente\" name=\"usuario\" rules={[{ required: true, message: 'Selecciona Usuario' }]} >\r\n            <Select options={props.pacientesData} onChange={handlePatientChange} optionFilterProp=\"children\" onSearch={onSearchPatient} showSearch\r\n                filterOption={(input, option) => (option?.label ?? '').toLowerCase().includes(input.toLowerCase())} />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Medico\" name=\"medico\" rules={[{ required: true, message: 'Selecciona Medico' }]} >\r\n            <Select options={medicos} onChange={handleMedicochange} />\r\n        </Form.Item>\r\n\r\n\r\n        <Form.Item label=\"VideoLlamada\" name=\"isOnline\" >\r\n            <Switch onChange={onSwitch} />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Comentarios\" name=\"comentarios\" rules={[{ required: false, message: 'Ingresa Comentarios' }]} >\r\n            <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Fecha y Hora\" name=\"fecha_hora\" rules={[{ required: false, message: 'Selecciona Fecha y Hora' }]} >\r\n            <DatePicker showTime format=\"DD/MM/YYYY HH:mm\" use12Hours={true} />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Duracion\" name=\"duracion\" rules={[{ required: true, message: 'Selecciona la duracion de la cita' }]} >\r\n            <Select options={timeOptions} />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Servicio\" name=\"servicio\" rules={[{ required: true, message: 'Selecciona Medico' }]} >\r\n            <Select options={servicios} onChange={handleChange} />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Tipo de pago\" name=\"tipo_pago\" rules={[{ required: true, message: 'Selecciona tipo de pago' }]} >\r\n            <Select options={paymentOptions} />\r\n        </Form.Item>\r\n\r\n        <Form.Item label={`costo de la cita $${costoBaseCita}`} >\r\n            <Switch onChange={onSwitchCosoBase} />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n            wrapperCol={{\r\n                offset: 8,\r\n                span: 16,\r\n            }}\r\n        >\r\n            <div className='fila'>\r\n                <h6>Costo Total: ${usesCostoBase ? (costo + costoBaseCita) : costo} </h6>\r\n            </div>\r\n        </Form.Item>\r\n\r\n        {\r\n            // Only if updating cita\r\n            props.cita && <div>\r\n\r\n\r\n                <Form.Item\r\n                    wrapperCol={{\r\n                        offset: 8,\r\n                        span: 16,\r\n                    }}\r\n                >\r\n                    <Button type=\"primary\" htmlType=\"submit\" form='nueva_cita_admin' disabled={!enableCreateCita}>\r\n                        Guardar\r\n                    </Button>\r\n                </Form.Item>\r\n            </div>\r\n        }\r\n\r\n    </Form>\r\n}\r\n\r\nexport default function CreateCita(props) {\r\n\r\n    const [enableCreate, setEnableCreate] = useState(true)\r\n    // Handle Modal Visibility\r\n    const handCreateleOk = () => { props.setIsModalOpen(false) }\r\n    const handCreateleCancel = () => { props.setIsModalOpen(false) }\r\n\r\n\r\n    return (\r\n        <Modal title=\"Nueva Cita\" open={props.isOpenModal} onOk={handCreateleOk} onCancel={handCreateleCancel} destroyOnClose\r\n            footer={[\r\n                <Button onClick={handCreateleCancel}>Cancelar</Button>,\r\n                <Button type=\"primary\" htmlType=\"submit\" form='nueva_cita_admin' disabled={!enableCreate}>\r\n                    Guardar\r\n                </Button>\r\n            ]}\r\n        >\r\n            <CreateCitaForm setIsModalOpen={props.setIsModalOpen} hospital={props.hospital} fecha_hora={props.fecha_hora} getCitasData={props.getCitasData} pacientesData={props.pacientesData} setEnableCreateCita={setEnableCreate} />\r\n\r\n        </Modal>\r\n    )\r\n}\r\n\r\n\r\n    // Create the respective balance for cita\r\n    // const createBalance = (_cita, monto) => {\r\n    //     const balanceBody = {\r\n    //         medico: medico,\r\n    //         cita: _cita,\r\n    //         monto: monto,\r\n    //         forma_de_pago: 'efectivo',\r\n    //         estado: 'pendiente',\r\n    //     }\r\n    //     console.log('Balance ready to send: ', balanceBody)\r\n    //     sendDataBody('balances/add', balanceBody).then((rs) => console.log(rs))\r\n    // }","import React, { useState, useEffect } from 'react';\r\nimport { Modal, Button, Popconfirm, message } from \"antd\";\r\nimport { getData, deleteData } from '../../resources';\r\nimport { Calendar, dayjsLocalizer } from 'react-big-calendar';\r\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\r\nimport CreateCita, { CreateCitaForm } from './create-cita-for-medic';\r\nimport dayjs from 'dayjs';\r\n\r\nconst localizer = dayjsLocalizer(dayjs)\r\n\r\nexport default function HospitalTab(props) {\r\n    const [editingCita, setEditingCita] = useState(false)\r\n    const [citaForEdit, setCitaForEdit] = useState({})\r\n    const [citasData, setCitasData] = useState([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const showModal = () => { setIsModalOpen(true) }\r\n    const handleOk = () => { setIsModalOpen(false); setEditingCita(false) }\r\n    const handleCancel = () => { setIsModalOpen(false); setEditingCita(false) }\r\n\r\n    // Tools for createCita Modal\r\n    const [fecha_hora, setFecha_hora] = useState('')\r\n    const [isCreateModalOpen, setIsCreateModalOpen] = useState(false)\r\n    // for pass to create cita model\r\n    const [pacientesData, setPacientesData] = useState([])\r\n\r\n    const findPatientsOfMyMedicos = (pacientesData) => {\r\n        let dl = [];\r\n        // Check on each horario of each medico of medicos asignados of patient to see if share sucursal with my horarios as admin\r\n        pacientesData.forEach(paciente => {\r\n            paciente.medicos_asignados.forEach(med => {\r\n                med.horarios.forEach(h => {\r\n                    if (h.sucursal === props.id_hospital && !dl.includes(paciente)) { paciente.label = paciente.name; paciente.value = paciente._id; dl.push(paciente) }\r\n                })\r\n            });\r\n        });\r\n        return dl;\r\n    }\r\n\r\n    const getPacientesData = () => {\r\n        // First of all, get pacientes data for pass to the create cita component\r\n        getData('users_by_rol/Paciente').then((rs) => {\r\n            setPacientesData(findPatientsOfMyMedicos(rs))\r\n        })\r\n    }\r\n\r\n    useEffect(() => { getPacientesData(); getCitasData() }, [])\r\n\r\n    const getCitasData = () => {\r\n        getData(`citas/sucursal/${props.id_hospital}`).then((rs) => {\r\n            console.log(`getCitasData ${props.id_hospiatl} before format admin`, rs[rs.length - 1])\r\n            rs.forEach(cita => {\r\n                cita.start = new Date(Date.parse(cita.fecha_hora));\r\n                const endDate = new Date(Date.parse(cita.fecha_hora));\r\n                endDate.setTime(endDate.getTime() + 1 * (cita.duracion ?? 60) * 60 * 1000)\r\n                cita.end = new Date(Date.parse(endDate));\r\n                cita.title = cita.usuario?.name;\r\n                cita.key = cita._id;\r\n            });\r\n            console.log(`getCitasData ${props.id_hospiatl} before format admin`, rs[rs.length - 1])\r\n            setCitasData(rs)\r\n        }\r\n        ).finally(() => setLoading(false))\r\n    }\r\n\r\n    // Select cita to show details and show confirm button\r\n    const selectEvent = (e) => {\r\n        console.log('For eedit', e)\r\n        if (!e.doctor) e.doctor = e.medico; // For details\r\n        if (!e.paciente) e.paciente = e.usuario; // For details\r\n        if (e.medico && e.medico._id) e.medico = e.medico._id;  // For edit\r\n        if (e.usuario && e.usuario._id) e.usuario = e.usuario._id;  // For edit\r\n        e.fecha_hora = dayjs(e.fecha_hora) //For edit\r\n        setCitaForEdit(e)\r\n        if (citaForEdit) showModal()\r\n    }\r\n\r\n\r\n    const handleSlotSelection = ({ start, end, action }) => {\r\n        setFecha_hora(dayjs(start))\r\n        setIsCreateModalOpen(true)\r\n        return { style: { backgroundColor: 'red' } };\r\n    };\r\n    // Delete button\r\n    const confirm = (e) => {\r\n        deleteData(`citas/remove/${citaForEdit._id}`).then((rs) => { console.log(rs); getCitasData(); handleCancel() })\r\n        deleteData(`balances/remove/cita/${citaForEdit._id}`)\r\n\r\n    };\r\n\r\n    const cancel = (e) => { console.log(e) }\r\n\r\n    return loading ? <p>Cargando...</p> : <div>\r\n        <br />\r\n        <h6>Citas del hospital {props.hospital}</h6>\r\n        <br />\r\n        <Calendar\r\n            scrollToTime={new Date(Date.now())}\r\n            selectable='true'\r\n            localizer={localizer}\r\n            events={citasData}\r\n            startAccessor=\"start\"\r\n            endAccessor=\"end\"\r\n            style={{ height: 500 }}\r\n            messages={{\r\n                next: \"Sig\",\r\n                previous: \"Ant\",\r\n                today: \"Hoy\",\r\n                month: \"Mes\",\r\n                week: \"Semana\",\r\n                day: \"Día\"\r\n            }}\r\n            defaultView=\"week\"\r\n            onDoubleClickEvent={(e) => console.log(e)}\r\n            onSelectEvent={selectEvent}\r\n            onSelecting={(e) => console.log(e)}\r\n            // onSelectSlot={handleSlotSelection}\r\n            onSelectSlot={handleSlotSelection}\r\n        />\r\n\r\n\r\n        <Modal title=\"Detalles Cita\" open={isModalOpen} onOk={handleOk} onCancel={handleCancel} destroyOnClose\r\n            footer={[\r\n                <Popconfirm\r\n                    title=\"Eliminar Cita\"\r\n                    description=\"Seguro que quiere eliminar la cita?\"\r\n                    onConfirm={confirm}\r\n                    onCancel={cancel}\r\n                    okText=\"Si\"\r\n                    cancelText=\"No\"\r\n                >\r\n                    <Button danger>Eliminar</Button>\r\n                </Popconfirm>,\r\n                <Button onClick={() => setEditingCita(!editingCita)}>{editingCita ? \"Cancelar\" : \"Modificar\"}</Button>,\r\n                <Button onClick={handleCancel}>Cerrar</Button>\r\n            ]}>\r\n\r\n\r\n            {editingCita ?\r\n                <CreateCitaForm cita={citaForEdit} setIsModalOpen={setIsModalOpen} getCitasData={getCitasData} setEditingCita={setEditingCita} hospital={props.id_hospital} pacientesData={pacientesData} />\r\n                : <div>{citaForEdit && <div>\r\n                    <p><strong>Medico </strong>{citaForEdit.doctor ? citaForEdit.doctor.name : 'Sin medico'}</p>\r\n                    <p><strong>Paciente </strong>{citaForEdit.paciente ? citaForEdit.paciente.name : 'Sin paciente'}</p>\r\n                    <p><strong>Fecha </strong>{new Date(citaForEdit.fecha_hora).toLocaleDateString()}</p>\r\n                    <p><strong>Hora </strong>{new Date(citaForEdit.fecha_hora).toLocaleTimeString()}</p>\r\n                    <p><strong>Servicio </strong>{citaForEdit.servicio}</p>\r\n                    <p><strong>Comentarios </strong>{citaForEdit.comentarios}</p>\r\n                    {/* <Button type='primary' onClick={confirmService}>Confirmar Servicio</Button>, */}\r\n                </div>\r\n                }\r\n                </div>\r\n            }\r\n        </Modal>\r\n\r\n        <CreateCita setIsModalOpen={setIsCreateModalOpen} isOpenModal={isCreateModalOpen} hospital={props.id_hospital} fecha_hora={fecha_hora} getCitasData={getCitasData} pacientesData={pacientesData} />\r\n    </div>\r\n}","import React from 'react'\r\nimport { Tabs } from 'antd'\r\nimport { myHospitals } from '../../resources'\r\nimport HospitalTab from './hospital-tab.citas';\r\n\r\nexport default function Citas() {\r\n\r\n    // Create items for TABS\r\n    myHospitals.forEach(h => {\r\n        h.label = h.nombre;\r\n        h.key = h._id;\r\n        h.children = <HospitalTab hospital={h.nombre} id_hospital={h._id} />\r\n    });\r\n\r\n    return (\r\n        <div className='mainContainer'>\r\n            <h4>Citas</h4>\r\n            <Tabs defaultActiveKey=\"1\" items={myHospitals} />\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Form, Input, Button, message, Space, Divider, Upload, Switch } from 'antd'\r\nimport { InputNumber, Select } from 'antd';\r\nimport { S_API, API, getData } from '../../resources'\r\nimport { usuario, estados } from '../../resources'\r\nimport { UploadOutlined, PlusOutlined, MinusCircleOutlined } from '@ant-design/icons'\r\n\r\n\r\nconst { Option } = Select;\r\n\r\nconst id_sucursales = usuario && usuario.horarios.map(function (item) {\r\n  return item['sucursal']['_id'];\r\n})\r\n\r\nexport default function Register(props) {\r\n\r\n  const [form] = Form.useForm();\r\n  const [avatar, setAvatar] = useState(props.paciente ? props.paciente.avatar : 'noimg.jpg')\r\n  const [medicosData, setMedicosData] = useState([])\r\n\r\n  useEffect(() => {\r\n    getData('users_by_rol/Medico').then((rs) => {\r\n      setMedicosData(findMyDoctors(rs))\r\n    })\r\n  }, [])\r\n\r\n  // EScoger solo los medicos que compartan siucursal y darlse formato pára el select\r\n  const findMyDoctors = (arr) => {\r\n    let doctorsFound = [];\r\n    arr.forEach((doctor) => {\r\n      doctor.horarios.forEach(h => {\r\n        if (id_sucursales.includes(h.sucursal._id) && !doctorsFound.includes(doctor)) {\r\n          doctor.label = doctor.name;\r\n          doctor.value = doctor._id;\r\n          doctorsFound.push(doctor)\r\n        }\r\n      })\r\n    })\r\n    return doctorsFound;\r\n  }\r\n\r\n  async function addHistoria() {\r\n    return await fetch(API + 'historias/add', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        historial: \"Historia clinica al \" + new Date()\r\n      })\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log('Story Created: ', response);\r\n        return response\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  }\r\n\r\n  const createPAtientData = async (usr) => {\r\n    const historia = await addHistoria();\r\n    console.log('historia on Register: ', historia);\r\n    const postBody = {\r\n      usuario: usr,\r\n      historia: historia.id_historia,\r\n      notas: [],\r\n      recetas: []\r\n    }\r\n    console.log('postBodyForExpedient: ', postBody);\r\n    await fetch(API + 'expedientes/add', {\r\n      method: 'POST',\r\n      body: JSON.stringify(postBody),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log('Success:', response);\r\n        message.success(response.message || response.error);\r\n        // if (response.message && response.message === 'Expediente creado correctamente') {\r\n        //   props.setAdding(false)\r\n        // }\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  }\r\n\r\n  const onFinish = async (values) => {\r\n\r\n    // Register patient\r\n    values.avatar = avatar;\r\n    values.estatus = '1';\r\n    values.rol = 'Paciente';\r\n    values.password = '' + values.telefono;\r\n    values.universidades = [];\r\n    values.certificacion = '';\r\n    values.cedula = '';\r\n    values.horarios = [];\r\n    // values.medicos_asignados = props.paciente ? props.paciente.medicos_asignados : [usuario._id];\r\n    values.responsable = props.paciente ? props.paciente.responsable : { nombre: values.res_name, telefono: values.res_phone }\r\n\r\n    delete values.prefix;\r\n    delete values.res_name;\r\n    delete values.res_phone;\r\n\r\n    const url = props.paciente ? API + 'users/updateUser/' + props.paciente._id : S_API + 'register';\r\n\r\n    console.log(values)\r\n    console.log('url: ', url);\r\n\r\n    await fetch(url, {\r\n      method: props.paciente ? 'PUT' : 'POST',\r\n      body: JSON.stringify(values),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        message.success(response.message || response.error);\r\n        props.paciente ? console.log('Editing, not creating patient') : createPAtientData(response.user_id);\r\n        response.message === 'Usuario creado correctamente' ?\r\n          window.location.reload(false) : console.log(response)\r\n        // props.setAdding(false) : console.log(response);\r\n        response.message === 'Usuario actualizado correctamente' ?\r\n          props.setAdding(false) : console.log(response);\r\n\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  };\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo);\r\n    errorInfo.errorFields.forEach((p) => {\r\n      message.error('Ingrese el campo ' + p.name)\r\n    })\r\n  };\r\n\r\n\r\n  //Start upload props Upload File\r\n  const dragDropProps = {\r\n    name: 'file',\r\n    multiple: false,\r\n    action: API + 'imagenes/upload',\r\n\r\n    onChange(info) {\r\n      const { status } = info.file;\r\n\r\n      if (status !== 'uploading') {\r\n        console.log(info.file, info.fileList);\r\n      }\r\n\r\n      if (status === 'done') {\r\n        message.success(`${info.file.name} file uploaded successfully.`);\r\n        console.log('New Files: ', info.file.response.file)\r\n        setAvatar(info.file.response.file)\r\n      } else if (status === 'error') {\r\n        message.error(`${info.file.name} file upload failed.`);\r\n      }\r\n    },\r\n\r\n    // onDrop(e) {\r\n    //   console.log('Dropped files', e.dataTransfer.files);\r\n    // },\r\n  };\r\n  return (\r\n    <div className='mainContainer'>\r\n      {\r\n        props.paciente ? <h4>Editar paciente</h4> : <h4>Registrar Paciente</h4>\r\n      }\r\n\r\n      <br />\r\n\r\n\r\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n        <Upload {...dragDropProps}>\r\n          <Button type=\"dashed\" icon={<UploadOutlined style={{ fontSize: 24, color: '#0d6efd' }} />} style={{ width: 400, height: 80 }} block>Selecciona la foto de perfil</Button>\r\n        </Upload>\r\n      </div>\r\n      <br />\r\n      <Form\r\n        // {...formItemLayout}\r\n        labelCol={{ span: 6 }} wrapperCol={{ span: 16 }}\r\n        form={form}\r\n        name=\"register\"\r\n        onFinish={onFinish}\r\n        onFinishFailed={onFinishFailed}\r\n        initialValues={props.paciente}\r\n        scrollToFirstError\r\n      >\r\n\r\n        <Form.Item\r\n          name=\"name\"\r\n          label=\"Nombre\"\r\n          rules={[{ required: true, message: 'Ingresa Nombre y apellidos' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"email\"\r\n          label=\"Correo\"\r\n          rules={[{ type: 'email', message: 'Ingresa un correo electronico vaido!' }, { required: true, message: 'Ingresa un correo electronico' }]}>\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"telefono\"\r\n          label=\"Telefono\"\r\n          rules={[{ required: true, message: 'Ingresa tu numero de telefono' },]}\r\n        >\r\n          <InputNumber maxLength={10} minLength={10} style={{ width: '100%' }} />\r\n        </Form.Item>\r\n\r\n        {/* Start Adding Medicos ASignados */}\r\n        <Form.Item name=\"medicos_asignados\" label=\"Medicos Asignados\" rules={[{ required: true, message: 'Agrega al mennos un medico' }]} >\r\n          <Form.List name=\"medicos_asignados\" >\r\n            {(fields, { add, remove }, { errors }) => (\r\n              <>\r\n                {fields.map((field, index) => (\r\n                  <Form.Item label='' required={false} key={field.key}>\r\n                    <Form.Item {...field} noStyle\r\n                      validateTrigger={['onChange', 'onBlur']}\r\n                      rules={[{ required: true, whitespace: true, message: \"Selecciona un Medico o elimina este campo\" }]}\r\n                    >\r\n                      <Select options={medicosData} placeholder=\"Selecciona Medico\" style={{ width: fields.length > 1 ? '90%' : '100%' }} />\r\n                    </Form.Item>\r\n                    {fields.length > 1 ? (\r\n                      <MinusCircleOutlined\r\n                        className=\"dynamic-delete-button\"\r\n                        onClick={() => remove(field.name)}\r\n                      />\r\n                    ) : null}\r\n                  </Form.Item>\r\n                ))}\r\n                <Form.Item>\r\n                  <Button type=\"dashed\" onClick={() => add()} icon={<PlusOutlined />}>\r\n                    Agregar Medico\r\n                  </Button>\r\n\r\n                  <Form.ErrorList errors={errors} />\r\n                </Form.Item>\r\n              </>\r\n            )}\r\n          </Form.List>\r\n        </Form.Item>\r\n        {/* End of Adding Medicos ASignados */}\r\n\r\n        <Divider>Responsable (opcional) </Divider>\r\n        <Form.Item name=\"res_name\" label=\"Nombre Responsable\" >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item name=\"res_phone\" label=\"Telefono Responsable\">\r\n          <Input />\r\n        </Form.Item>\r\n        <Divider />\r\n\r\n        <Form.Item\r\n          name=\"calle\"\r\n          label=\"Calle\"\r\n          rules={[{ required: false, message: 'Ingresa calle', whitespace: true }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"numexterior\"\r\n          label=\"Num Exterior\"\r\n          rules={[{ required: false, message: 'Ingresa numero exterior' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"numinterior\"\r\n          label=\"Num Interior\"\r\n          rules={[{ required: false, message: 'Ingresa numinterior' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label=\"Colonia\"\r\n          name=\"colonia\"\r\n          rules={[{ required: false, message: 'Ingresa ' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"estado\"\r\n          label=\"Estado\"\r\n          rules={[{ required: false, message: 'Apellido materno', },]}>\r\n          <Select placeholder=\"Elije tu estado\" showSearch>\r\n            {estados.map(e => <Option value={e}>{e}</Option>)}\r\n          </Select>\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"municipio\"\r\n          label=\"Municipio\"\r\n          rules={[{ required: false, message: 'Ingresa tu municipio' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"codigopostal\"\r\n          label=\"Codigo Postal\"\r\n          rules={[{ required: false, message: 'Ingresa codigopostal', },]}>\r\n          <InputNumber style={{ width: '100%', }} />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"sexo\" label=\"sexo\" rules={[{ required: false, message: 'Selecciona una opcion' }]}>\r\n          <Select placeholder=\"Elije el sexo\" >\r\n            <Option value=\"H\">H</Option>\r\n            <Option value=\"M\">M</Option>\r\n            <Option value=\"Otro\">Otro</Option>\r\n          </Select>\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"edad\" label=\"Edad\" rules={[{ required: false, message: 'Ingresa edad' }]} >\r\n          <InputNumber min={1} max={120} />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"diagnostico\" label=\"Diagnostico\" rules={[{ required: false, message: 'Ingresa el diagnostico' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"peso\" label=\"Peso\" rules={[{ required: false, message: 'Ingresa el peso' }]} >\r\n          <InputNumber min={1} max={200} />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"talla\" label=\"Talla\" rules={[{ required: false, message: 'Ingresa la talla' }]} >\r\n          <InputNumber min={1} max={200} />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"ocupacion\" label=\"Ocupacion\" rules={[{ required: false, message: 'Ingresa ocupacion' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"estado_civil\" label=\"Estado Civil\" rules={[{ required: false, message: 'Ingresa estado civil' }]} >\r\n          <Select placeholder=\"Elije el estado civil\" >\r\n            <Option value=\"Soltero\">Soltero</Option>\r\n            <Option value=\"Casado\">Casado</Option>\r\n            <Option value=\"Divorciado\">Divorciado</Option>\r\n            <Option value=\"Separación en proceso judicial\">Separación en proceso judicial</Option>\r\n            <Option value=\"Viudo\">Viudo</Option>\r\n            <Option value=\"Concubinato\">Concubinato</Option>\r\n          </Select>\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"escolaridad\" label=\"Escolaridad\" rules={[{ required: false, message: 'Ingresa escolaridad' }]} >\r\n          <Select placeholder=\"Elije escolaridad\" >\r\n            <Option value=\"Ninguno\">Ninguno</Option>\r\n            <Option value=\"Preescolar\">Preescolar</Option>\r\n            <Option value=\"Primaria\">Primaria</Option>\r\n            <Option value=\"Secundaria\">Secundaria</Option>\r\n            <Option value=\"Medio Superior\">Medio Superior</Option>\r\n            <Option value=\"Superior\">Superior</Option>\r\n            <Option value=\"Posgrado\">Posgrado</Option>\r\n          </Select>\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"lugar_de_nacimiento\" label=\"Lugar De Nacimiento\" rules={[{ required: false, message: 'Ingresa el lugar de nacimiento' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"ciudad\" label=\"Ciudad de residencia\" rules={[{ required: false, message: 'Ingresa ciudad' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"fuma\" label=\"Fuma\" rules={[{ required: false, message: 'Ingresa tu universidad' }]} >\r\n          <Switch defaultChecked={false} />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"alcohol\" label=\"Alcohol\" rules={[{ required: false, message: 'Ingresa tu universidad' }]} >\r\n          <Switch defaultChecked={false} />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"drogas\" label=\"Drogas\" rules={[{ required: false, message: 'Selecciona una opcion' }]} >\r\n          <Select placeholder=\"Elije una opcion\" >\r\n            <Option value=\"Antes\">Antes</Option>\r\n            <Option value=\"Ahora\">Ahora</Option>\r\n            <Option value=\"Nunca\">Nunca</Option>\r\n          </Select>\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"cuales_drogas\" label=\"Cuales Drogas\" rules={[{ required: false, message: 'Selecciona una opcion' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"enfermedades_familiares\" label=\"Enfermedades Familiares\" rules={[{ required: false, message: 'Ingresa tu universidad' }]} >\r\n          <Form.List name=\"enfermedades_familiares\" >\r\n            {(fields, { add, remove }, { errors }) => (\r\n              <>\r\n                {fields.map((field, index) => (\r\n                  <Form.Item label='' required={false} key={field.key}>\r\n                    <Form.Item {...field} noStyle\r\n                      validateTrigger={['onChange', 'onBlur']}\r\n                      rules={[{ required: true, whitespace: true, message: \"Ingresa la enfermedad o elimina este campo\" }]}\r\n                    >\r\n                      <Input placeholder=\"Ingresa enfermedad\" style={{ width: fields.length > 1 ? '90%' : '100%' }} />\r\n                    </Form.Item>\r\n                    {fields.length > 1 ? (\r\n                      <MinusCircleOutlined\r\n                        className=\"dynamic-delete-button\"\r\n                        onClick={() => remove(field.name)}\r\n                      />\r\n                    ) : null}\r\n                  </Form.Item>\r\n                ))}\r\n                <Form.Item>\r\n                  <Button type=\"dashed\" onClick={() => add()} icon={<PlusOutlined />}>\r\n                    Agregar Enfermedad Familiar\r\n                  </Button>\r\n\r\n                  <Form.ErrorList errors={errors} />\r\n                </Form.Item>\r\n              </>\r\n            )}\r\n          </Form.List>\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"enfermedades_medicas\" label=\"Enfermedades Medicas\" rules={[{ required: false, message: 'Ingresa tu universidad' }]} >\r\n          <Form.List name=\"enfermedades_medicas\">\r\n            {(fields, { add, remove }, { errors }) => (\r\n              <>\r\n                {fields.map((field, index) => (\r\n                  <Form.Item label='' required={false} key={field.key}>\r\n                    <Form.Item {...field} noStyle\r\n                      validateTrigger={['onChange', 'onBlur']}\r\n                      rules={[{ required: true, whitespace: true, message: \"Ingresa la enfermedad o elimina este campo\" }]}\r\n                    >\r\n                      <Input placeholder=\"Ingresa enfermedad\" style={{ width: fields.length > 1 ? '90%' : '100%' }} />\r\n                    </Form.Item>\r\n                    {fields.length > 1 ? (\r\n                      <MinusCircleOutlined\r\n                        className=\"dynamic-delete-button\"\r\n                        onClick={() => remove(field.name)}\r\n                      />\r\n                    ) : null}\r\n                  </Form.Item>\r\n                ))}\r\n                <Form.Item>\r\n                  <Button type=\"dashed\" onClick={() => add()} icon={<PlusOutlined />}>\r\n                    Agregar Enfermedad Medica\r\n                  </Button>\r\n\r\n                  <Form.ErrorList errors={errors} />\r\n                </Form.Item>\r\n              </>\r\n            )}\r\n          </Form.List>\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"tratamiento_actual\" label=\"Tratamiento actual\" rules={[{ required: false, message: 'Ingresa tu universidad' }]} >\r\n          <Form.List name=\"tratamiento_actual\" >\r\n            {(fields, { add, remove }, { errors }) => (\r\n              <>\r\n                {fields.map((field, index) => (\r\n                  <Form.Item\r\n                    // label={`Tratamiento ${index + 1}`} \r\n                    label=''\r\n                    required={false} key={field.key}>\r\n                    <Form.Item {...field} noStyle\r\n                      validateTrigger={['onChange', 'onBlur']}\r\n                      rules={[{ required: true, whitespace: true, message: \"Ingresa la enfermedad o elimina este campo\" }]}\r\n                    >\r\n                      <Input placeholder=\"Ingresa enfermedad\" style={{ width: fields.length > 1 ? '90%' : '100%' }} />\r\n                    </Form.Item>\r\n                    {fields.length > 1 ? (\r\n                      <MinusCircleOutlined\r\n                        className=\"dynamic-delete-button\"\r\n                        onClick={() => remove(field.name)}\r\n                      />\r\n                    ) : null}\r\n                  </Form.Item>\r\n                ))}\r\n                <Form.Item>\r\n                  <Button type=\"dashed\" onClick={() => add()} icon={<PlusOutlined />}>\r\n                    Agregar Tratamiento\r\n                  </Button>\r\n\r\n                  <Form.ErrorList errors={errors} />\r\n                </Form.Item>\r\n              </>\r\n            )}\r\n          </Form.List>\r\n        </Form.Item>\r\n\r\n        <Form.Item labelCol={{ span: 6 }} wrapperCol={{ offset: 6, span: 16 }}>\r\n          <Space>\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              {props.paciente ? 'Guardar' : 'Registrar'}\r\n            </Button>\r\n            {\r\n              props.setAdding && <Button onClick={() => props.setAdding(false)}>Cancelar</Button>\r\n            }\r\n          </Space>\r\n\r\n        </Form.Item>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { getData, deleteData } from '../../resources'\r\nimport { Table, Avatar, Space, Button, Popconfirm, Modal, Card, Input } from 'antd'\r\nimport { UserOutlined, EditOutlined, SearchOutlined } from '@ant-design/icons'\r\nimport Register from './register.user'\r\n\r\nexport default function HospitalTab(props) {\r\n    const [value, setValue] = useState(''); // For search input\r\n    const [pacientesData, setPacientesData] = useState([])\r\n    const [searchText, setSearchText] = useState('');//For search input\r\n    const [paciente, setPaciente] = useState({});\r\n    const [isModalVisible, setIsModalVisible] = useState(false);\r\n    const [editingProfile, setEditingProfile] = useState(false)\r\n    const showModal = () => { setIsModalVisible(true); };\r\n    const handleOk = () => { setIsModalVisible(false); };\r\n    const handleCancel = () => { setIsModalVisible(false); setEditingProfile(false) };\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            const response = await getData('users_by_rol/Paciente');\r\n            // const data = await response.json();\r\n            setPacientesData(response);\r\n        };\r\n        fetchData();\r\n    }, []);\r\n\r\n    const deleteUser = (id_paciente) => {\r\n        const newPatients = pacientesData.filter((p) => p._id !== id_paciente)\r\n        deleteData(`users/remove/${id_paciente}`).then((rs) => {\r\n            setPacientesData(newPatients)\r\n        })\r\n    }\r\n\r\n    const columns = [\r\n        {\r\n            title: 'Rol',\r\n            dataIndex: 'rol',\r\n            key: 'rol',\r\n            onFilter: (value, record) => record.rol === \"Medico\",\r\n        },\r\n        {\r\n            title: 'Avatar',\r\n            dataIndex: 'avatar',\r\n            key: 'avatar',\r\n            render: (_, { avatar }) => {\r\n                return avatar.length > 9 ?\r\n                    <img width={64} src={'https://api.recreamed.com/images/' + avatar} alt='ProfilePic' /> :\r\n                    <Avatar size={64} icon={<UserOutlined />} className='btnIconCentered' />\r\n            }\r\n        },\r\n        {\r\n            title: 'Nombre',\r\n            dataIndex: 'name',\r\n            key: 'name',\r\n        },\r\n        {\r\n            title: 'Medicos Asignados',\r\n            dataIndex: 'medicos_asignados',\r\n            key: 'medicos_asignados',\r\n            render: (_, { medicos_asignados }) => <ul>{\r\n                medicos_asignados.map((m) => <li key={m._id}>{m.name}</li>)\r\n            }</ul>\r\n        },\r\n        {\r\n            title: 'Correo',\r\n            dataIndex: 'email',\r\n            key: 'email',\r\n        },\r\n        {\r\n            title: 'Telefono',\r\n            dataIndex: 'telefono',\r\n            key: 'telefono',\r\n        },\r\n        {\r\n            title: 'Acciones',\r\n            key: 'detalles',\r\n            render: (text, record) => (\r\n                <Space size=\"middle\">\r\n                    <Button onClick={() => { setPaciente(record); showModal(); }}>Detalles</Button>\r\n                    <Popconfirm\r\n                        title=\"Borrar Paciente\"\r\n                        description=\"Esta seguro que quiere eliminar al paciente?\"\r\n                        onConfirm={() => deleteUser(record._id)}\r\n                        onCancel={(e) => console.log(e)}\r\n                        okText=\"Si\"\r\n                        cancelText=\"No\"\r\n                    >\r\n                        <Button danger>Eliminar</Button>\r\n                    </Popconfirm>\r\n                </Space>\r\n            )\r\n        }\r\n    ];\r\n\r\n    // Populate table\r\n    // Find my patients by medico asignado\r\n    const findPatientsOfMyMedicos = (id_hospital) => {\r\n        let dl = [];\r\n        // Check on each horario of each medico of medicos asignados of patient to see if share sucursal with my horarios as admin\r\n        pacientesData.forEach(paciente => {\r\n            paciente.medicos_asignados.forEach(med => {\r\n                med.horarios.forEach(h => {\r\n                    // if (ids_hospitales.includes(h.sucursal) && !dl.includes(paciente)) { console.log(paciente); dl.push(paciente) }\r\n                    // if (h.sucursal === id_hospital && !dl.includes(paciente) ) { console.log(paciente); dl.push(paciente) }\r\n                    if (h.sucursal === id_hospital && !dl.includes(paciente) && paciente.name.toLowerCase().includes(searchText.toLowerCase())) { console.log(paciente); dl.push(paciente) }\r\n                })\r\n            });\r\n        });\r\n        return dl;\r\n    }\r\n\r\n    const pacientesDataFiltered = findPatientsOfMyMedicos(props.id_hospital); // Get medicos data before render TAble\r\n\r\n    // Fill Modal\r\n    const gridStyle = {\r\n        width: '50%',\r\n        height: '50px',\r\n        textAlign: 'center',\r\n        display: 'inline-flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    };\r\n    function DetalleUsuario() {\r\n        const datosSimples = [\r\n            \"rol\",\r\n            \"name\",\r\n            \"email\",\r\n            \"telefono\",\r\n            \"calle\",\r\n            \"municipio\",\r\n            \"estado\",\r\n            \"codigopostal\",\r\n            \"alcohol\",\r\n            \"ciudad\",\r\n            \"colonia\",\r\n            \"cuales_drogas\",\r\n            \"diagnostico\",\r\n            \"drogas\", \"edad\",\r\n            \"escolaridad\",\r\n            \"estado_civil\",\r\n            \"fuma\", \"lugar_de_nacimiento\",\r\n            \"numexterior\",\r\n            \"numinterior\",\r\n            \"ocupacion\",\r\n            \"peso\", \"sexo\",\r\n            \"talla\"\r\n        ]\r\n\r\n        return <div>\r\n            {\r\n                editingProfile ? <Register paciente={paciente} setAdding={setEditingProfile} /> :\r\n                    <Card bordered={false} title={<Space><h4>Detalles del paciente </h4> <Button type='primary' ghost onClick={setEditingProfile} shape=\"circle\" icon={<EditOutlined />} title='Editar' className='btnIconCentered' /></Space>}>\r\n                        {\r\n                            datosSimples.map(k => <><Card.Grid style={gridStyle}>{k}</Card.Grid><Card.Grid style={gridStyle} size='small'>{paciente[k]}</Card.Grid></>)\r\n                        }\r\n                    </Card>\r\n            }\r\n        </div>\r\n    }\r\n\r\n    const handleSearch = e => {\r\n        setValue(e.target.value)\r\n        setSearchText(e.target.value);\r\n    };\r\n\r\n    return <div>\r\n        <h6>Pacientes de {props.hospital}</h6>\r\n\r\n        <Input\r\n            style={{ width: '20em' }}\r\n            placeholder=\"Buscar Paciente\"\r\n            value={value}\r\n            onChange={handleSearch}\r\n            addonAfter={<SearchOutlined />}\r\n        />\r\n\r\n        <Table dataSource={pacientesDataFiltered} columns={columns} pagination={false} />\r\n\r\n        <Modal width={800} open={isModalVisible} onOk={handleOk} onCancel={handleCancel} destroyOnClose>\r\n            <DetalleUsuario />\r\n        </Modal>\r\n    </div>\r\n}\r\n","import React from 'react'\r\nimport { myHospitals } from '../../resources'\r\nimport { Tabs } from 'antd'\r\nimport HospitalTab from './dash.patients.hospital-tab'\r\n\r\n\r\nconst onChange = (key) => { console.log(key) }\r\n\r\nexport default function Dash() {\r\n\r\n    // Create items for TABS\r\n    myHospitals.forEach(h => {\r\n        h.label = h.nombre;\r\n        h.key = h._id;\r\n        h.children = <HospitalTab hospital={h.nombre} id_hospital={h._id} />\r\n    });\r\n\r\n    return (\r\n        <div className='mainContainer'>\r\n\r\n            <h4>Pacientes de los diferentes hospitaels</h4>\r\n            \r\n            <Tabs defaultActiveKey=\"1\" items={myHospitals} onChange={onChange} />\r\n\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { Tabs } from 'antd'\r\nimport Register from './register.user';\r\nimport Dash from './dash.patients.main'\r\n\r\nexport default function Users() {\r\n    const items = [\r\n        { label: 'Pacientes', key: 'item-1', children: <Dash /> },\r\n        { label: 'Registrar', key: 'item-2', children: <Register /> },\r\n    ];\r\n    return (\r\n        <div >\r\n            <Tabs items={items} tabPosition='left' />\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\nimport { Form, Input, Button, message } from 'antd'\r\nimport { InputNumber, Select } from 'antd';\r\nimport { S_API,estados } from '../../resources'\r\nconst { Option } = Select;\r\n\r\nexport default function Register() {\r\n\r\n  const [form] = Form.useForm();\r\n\r\n  const onFinish = (values) => {\r\n    values.avatar = 'https://';\r\n    values.estatus = '1';\r\n    values.rol = 'Medico';\r\n    delete values.confirm;\r\n    delete values.prefix;\r\n    delete values.agreement;\r\n\r\n    console.log(values)\r\n    fetch(S_API + 'register', {\r\n      method: 'POST',\r\n      body: JSON.stringify(values),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => { console.log('Success:', response); message.success(response.message || response.error); })\r\n      .catch(error => console.error('Error:', error))\r\n  };\r\n\r\n  const prefixSelector = (\r\n    <Form.Item name=\"prefix\" noStyle>\r\n      <Select\r\n        style={{\r\n          width: 70,\r\n        }}\r\n      >\r\n        <Option value=\"+52\">+52</Option>\r\n      </Select>\r\n    </Form.Item>\r\n  );\r\n  const suffixSelector = (\r\n    <Form.Item name=\"suffix\" noStyle>\r\n      <Select\r\n        style={{\r\n          width: 70,\r\n        }}\r\n      >\r\n        <Option value=\"USD\">$</Option>\r\n        <Option value=\"CNY\">¥</Option>\r\n      </Select>\r\n    </Form.Item>\r\n  );\r\n\r\n\r\n  \r\n  return (\r\n    <div className='mainContainer'>\r\n      <h1>Registrar doctor</h1>\r\n      <br />\r\n      {/* <Form name=\"basic\" labelCol={{ span: 6 }} wrapperCol={{ span: 16 }} initialValues={{ remember: true }} onFinish={onFinish} onFinishFailed={onFinishFailed} autoComplete=\"off\" >\r\n        <Form.Item label=\"Hospital\" name=\"Hospital\" rules={[{ required: true, message: 'Please input your username!' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item label=\"Nombre\" name=\"username\" rules={[{ required: true, message: 'Please input your username!' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item label=\"Apellido Paterno\" name=\"rfc\" rules={[{ required: true, message: 'Ingresa RFC' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item label=\"Apellido Materno\" name=\"calle\" rules={[{ required: true, message: 'Avenida Madero esquina con Santiago Tapia' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item label=\"Cedula\" name=\"nint\" rules={[{ required: true, message: '74B' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item label=\"Calle\" name=\"next\" rules={[{ required: true, message: '12' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item label=\"Numero\" name=\"colonia\" rules={[{ required: true, message: 'Centro' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item label=\"Colonia\" name=\"cp\" rules={[{ required: true, message: '58000' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item label=\"Telefono\" name=\"ciudad_municipio\" rules={[{ required: true, message: 'Ingresa ciudad/municipio' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item label=\"Correo\" name=\"estado\" rules={[{ required: true, message: 'Ingresa estado' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item wrapperCol={{ offset: 8, span: 16 }}>\r\n          <Button type=\"primary\" htmlType=\"submit\">\r\n            Guardar\r\n          </Button>\r\n        </Form.Item>\r\n      </Form> */}\r\n      <Form\r\n        // {...formItemLayout}\r\n        labelCol={{ span: 6 }} wrapperCol={{ span: 16 }}\r\n        form={form}\r\n        name=\"register\"\r\n        onFinish={onFinish}\r\n        initialValues={{\r\n          residence: ['zhejiang', 'hangzhou', 'xihu'],\r\n          prefix: '52',\r\n        }}\r\n        scrollToFirstError\r\n      >\r\n        <Form.Item\r\n          name=\"email\"\r\n          label=\"Correo\"\r\n          rules={[\r\n            {\r\n              type: 'email',\r\n              message: 'The input is not valid E-mail!',\r\n            },\r\n            {\r\n              required: true,\r\n              message: 'Please input your E-mail!',\r\n            },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"password\" label=\"Contraseña\" rules={[{ required: true, message: 'Por favor ingrese su contraseña!', },]} hasFeedback >\r\n          <Input.Password />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"confirm\"\r\n          label=\"Confirmar contraseña\"\r\n          dependencies={['password']}\r\n          hasFeedback\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Please confirm your password!',\r\n            },\r\n            ({ getFieldValue }) => ({\r\n              validator(_, value) {\r\n                if (!value || getFieldValue('password') === value) {\r\n                  return Promise.resolve();\r\n                }\r\n                return Promise.reject(new Error('Las contraseñas deben coincidir!'));\r\n              },\r\n            }),\r\n          ]}\r\n        >\r\n          <Input.Password />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"telefono\"\r\n          label=\"Telefono\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Please input your phone number!',\r\n            },\r\n          ]}\r\n        >\r\n          <Input\r\n            addonBefore={prefixSelector}\r\n            style={{\r\n              width: '100%',\r\n            }}\r\n          />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"id_sucursal\"\r\n          label=\"Id Sucursal\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Ingresa el ID de la sucursal',\r\n            },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"id_medicoasignado\"\r\n          label=\"Id Medico Asignado\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Ingresa el ID del medico ',\r\n            },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"name\"\r\n          label=\"Nombre\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Ingresa Nombre y apellidos',\r\n            },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"cedula\"\r\n          label=\"Cedula\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Ingresa cedula',\r\n            },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"calle\"\r\n          label=\"Calle\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Ingresa calle',\r\n              whitespace: true,\r\n            },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"numexterior\"\r\n          label=\"Num Exterior\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Ingresa numero exterior',\r\n            },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"numinterior\"\r\n          label=\"Num Interior\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Ingresa numinterior',\r\n            },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label=\"Colonia\"\r\n          name=\"colonia\"\r\n          rules={[{ required: true, message: 'Please input your colobnia!' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"estado\" label=\"Estado\" rules={[{ required: true, message: 'Apellido materno', },]}>\r\n          <Select placeholder=\"Elije tu estado\" showSearch>\r\n            {estados.map(e => <Option value={e}>{e}</Option>)}\r\n          </Select>\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"municipio\"\r\n          label=\"Municipio\"\r\n          rules={[{ required: true, message: 'Ingresa tu municipio' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item name=\"codigopostal\" label=\"Codigo Postal\" rules={[{ required: true, message: 'Ingresa codigopostal', },]}>\r\n          <InputNumber addonAfter={suffixSelector} style={{ width: '100%', }} />\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"certificacion\"\r\n          label=\"Certificacion\"\r\n          rules={[{ required: true, message: 'Ingresa tu certificacion' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"universidad\"\r\n          label=\"Universidad\" rules={[{ required: true, message: 'Ingresa tu universidad' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item wrapperCol={{ offset: 6, span: 16 }}>\r\n          <Button type=\"primary\" htmlType=\"submit\">\r\n            Registrar\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Table, Avatar } from 'antd'\r\nimport { UserOutlined } from '@ant-design/icons'\r\nimport { getData } from '../../resources'\r\nimport Loading from '../../loading'\r\n\r\nexport default function HospitalTab(props) {\r\n  const [doctorsData, setDoctorsData] = useState([])\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  // Before all, get DoctorsData\r\n  useEffect(() => { getDoctorsData() }, [])\r\n  const getDoctorsData = () => {\r\n    getData('users_by_rol/Medico').then((rs) => { setDoctorsData(rs) }).finally(() => setLoading(false))\r\n  }\r\n  const columns = [\r\n    {\r\n      title: 'Avatar',\r\n      dataIndex: 'avatar',\r\n      key: 'avatar',\r\n      render: (_, { avatar }) => {\r\n        return avatar.length > 9 ?\r\n          <img width={64} src={'https://api.recreamed.com/images/' + avatar} alt='ProfilePic' /> :\r\n          <Avatar size={64} icon={<UserOutlined />} className='btnIconCentered' />\r\n      }\r\n    },\r\n    {\r\n      title: 'Nombre',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n    },\r\n    {\r\n      title: 'Correo',\r\n      dataIndex: 'email',\r\n      key: 'email',\r\n    },\r\n    {\r\n      title: 'Telefono',\r\n      dataIndex: 'telefono',\r\n      key: 'telefono',\r\n    },\r\n  ];\r\n  const myDoctors = (id_hospital) => {\r\n    let doctorsFound = [];\r\n    doctorsData.forEach(doctor => {\r\n      doctor.horarios.forEach(horario => {\r\n        if (!doctorsFound.includes(doctor) && horario.sucursal._id === id_hospital) doctorsFound.push(doctor)\r\n      });\r\n    });\r\n    console.log(`Founds for ${id_hospital}: `, doctorsFound)\r\n    return doctorsFound;\r\n  }\r\n  const doctoresData = myDoctors(props.id_hospital); // Get medicos data before render TAble\r\n  // Filter doctors of each hospital\r\n\r\n\r\n  if (loading) return <Loading />\r\n\r\n  return <div>\r\n    <h6>Doctores del hospital {props.hospital}</h6>\r\n    \r\n    <Table dataSource={doctoresData} columns={columns} />\r\n  </div>\r\n}\r\n","import React from 'react'\r\nimport { Tabs } from 'antd'\r\nimport { myHospitals } from '../../resources'\r\nimport HospitalTab from './dash.doctors.hospitalTab';\r\n\r\nexport default function Dash() {\r\n\r\n    // Create items for TABS\r\n    myHospitals.forEach(h => {\r\n        h.label = h.nombre;\r\n        h.key = h._id;\r\n        h.children = <HospitalTab hospital={h.nombre} id_hospital={h._id} />\r\n    });\r\n\r\n    return (\r\n        <div>\r\n            <h4 className='spacedTitle'>Recepcionistas de los diferentes hospitales</h4>\r\n            <Tabs defaultActiveKey=\"1\" items={myHospitals} />\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport { Tabs } from 'antd'\r\nimport { TeamOutlined, UserAddOutlined } from '@ant-design/icons';\r\nimport Register from './register.doctor';\r\nimport Dash from './dash.doctors.main';\r\n\r\nconst items = [\r\n    { key: '1', label: <><TeamOutlined /> Medicos</>, children: <Dash /> },\r\n    { key: '2', label: <><UserAddOutlined /> Registrar Medico</>, children: <Register /> },\r\n];\r\nconst onChange = (key) => { console.log(key) }\r\n\r\nexport default function Doctors() {\r\n    return (\r\n        <div>\r\n            <Tabs defaultActiveKey=\"1\" items={items} onChange={onChange} tabPosition='left' />\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\n\r\nexport default function Sucursal() {\r\n  return (\r\n    <div>Perfil de la sucursal</div>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Form, Input, Button, message, Space, Row, Col, Upload } from 'antd'\r\nimport { MinusCircleOutlined, PlusOutlined, InboxOutlined } from '@ant-design/icons';\r\nimport { Select } from 'antd';\r\nimport { getData, API } from '../../resources'\r\nconst { Option } = Select;\r\nconst { Dragger } = Upload;\r\n\r\n\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    xs: {\r\n      span: 24,\r\n    },\r\n    sm: {\r\n      span: 8,\r\n    },\r\n  },\r\n  wrapperCol: {\r\n    xs: {\r\n      span: 24,\r\n    },\r\n    sm: {\r\n      span: 14,\r\n    },\r\n  },\r\n};\r\nconst tailFormItemLayout = {\r\n  wrapperCol: {\r\n    xs: {\r\n      span: 24,\r\n      offset: 0,\r\n    },\r\n    sm: {\r\n      span: 16,\r\n      offset: 8,\r\n    },\r\n  },\r\n};\r\nexport default function PerfilEdit(props) {\r\n\r\n  const [form] = Form.useForm();\r\n\r\n  const [sucursales, setSucursales] = useState([]);\r\n  const [sucursalesLoading, setSucursalesLoading] = useState(true);\r\n  const [avatar, setAvatar] = useState(props.perfil.avatar)\r\n\r\n  //Start upload props Upload File\r\n  const dragDropProps = {\r\n    name: 'file',\r\n    multiple: false,\r\n    action: API + 'imagenes/upload',\r\n\r\n    onChange(info) {\r\n      const { status } = info.file;\r\n\r\n      if (status !== 'uploading') {\r\n        console.log(info.file, info.fileList);\r\n      }\r\n\r\n      if (status === 'done') {\r\n        message.success(`${info.file.name} file uploaded successfully.`);\r\n        console.log('New Files: ', info.file.response.file)\r\n        setAvatar(info.file.response.file)\r\n      } else if (status === 'error') {\r\n        message.error(`${info.file.name} file upload failed.`);\r\n      }\r\n    },\r\n\r\n    onDrop(e) {\r\n      console.log('Dropped files', e.dataTransfer.files);\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log('received Medic: ', props.perfil);\r\n    getData('sucursales').then((rs) => { setSucursales(rs); setSucursalesLoading(false) })\r\n  },[])\r\n\r\n\r\n\r\n  // const onFinish = (values) => {\r\n  //   values.avatar = avatar;\r\n  //   values.estatus = '1';\r\n  //   values.rol = 'Medico';\r\n  //   delete values.confirm;\r\n  //   delete values.prefix;\r\n\r\n  //   console.log('ready to send', values)\r\n  //   fetch(S_API + 'register', {\r\n  //     method: 'POST',\r\n  //     body: JSON.stringify(values),\r\n  //     headers: {\r\n  //       'Content-Type': 'application/json'\r\n  //     }\r\n  //   }).then(res => res.json())\r\n  //     .then(response => {\r\n  //       console.log('Success:', response);\r\n  //       response.message && response.message === 'Usuario creado correctamente' ?\r\n  //         window.location.href = 'doctores' : message.error(response.error);\r\n  //     })\r\n  //     .catch(error => console.error('Error:', error))\r\n  // };\r\n\r\n  const onFinishEdit = (values) => {\r\n    values.avatar = avatar;\r\n    // values.estatus = '1';\r\n    // values.rol = 'Medico';\r\n    // delete values.confirm;\r\n    // delete values.prefix;\r\n\r\n    console.log('ready to send', values)\r\n    fetch(API + 'users/updateUser/' + props.perfil._id, {\r\n      method: 'PUt',\r\n      body: JSON.stringify(values),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log('Success:', response);\r\n        response.message && response.message === 'Usuario actualizado correctamente' ?\r\n          props.setEditing(false) : message.error(response.error);\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  };\r\n\r\n  const prefixSelector = (\r\n    <Form.Item name=\"prefix\" noStyle>\r\n      <Select\r\n        style={{\r\n          width: 70,\r\n        }}\r\n      >\r\n        <Option value=\"+52\">+52</Option>\r\n      </Select>\r\n    </Form.Item>\r\n  );\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h4>Editar perfil</h4>\r\n      <br />\r\n      <Dragger {...dragDropProps}>\r\n        <p className=\"ant-upload-drag-icon\">\r\n          <InboxOutlined />\r\n        </p>\r\n        <p className=\"ant-upload-text\">Arrastra la imagen de perfil o click ara buscar</p>\r\n        <p className=\"ant-upload-hint\">\r\n          Selecciona archivos en formato png, jpeg o webp\r\n        </p>\r\n      </Dragger>\r\n      <br />\r\n      <Form\r\n        {...formItemLayout}\r\n        form={form}\r\n        name=\"register\"\r\n        onFinish={onFinishEdit}\r\n        // initialValues={{ horarios: [{ sucursal: '', horario: '' }], prefix: '+52' }}\r\n        initialValues={props.perfil}\r\n        scrollToFirstError\r\n      >\r\n\r\n        <Row>\r\n\r\n          <Col span={11}>\r\n            <Form.Item name=\"name\" label=\"Nombre\" rules={[{ required: true, message: 'Ingresa Nombre y apellidos' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item name=\"email\" label=\"Correo\" rules={[{ type: 'email', message: 'Ingresa un corrreo electronico valido' }, { required: true, message: 'Please input your E-mail!' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            {/* <Form.Item name=\"password\" label=\"Contraseña\" rules={[{ required: true, message: 'Por favor ingrese su contraseña!', },]} hasFeedback >\r\n              <Input.Password />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"confirm\" label=\"Confirmar contraseña\" dependencies={['password']} hasFeedback\r\n              rules={[\r\n                {\r\n                  required: true,\r\n                  message: 'Please confirm your password!',\r\n                },\r\n                ({ getFieldValue }) => ({\r\n                  validator(_, value) {\r\n                    if (!value || getFieldValue('password') === value) {\r\n                      return Promise.resolve();\r\n                    }\r\n                    return Promise.reject(new Error('Las contraseñas deben coincidir!'));\r\n                  },\r\n                }),\r\n              ]}\r\n            >\r\n              <Input.Password />\r\n            </Form.Item> */}\r\n\r\n            <Form.Item name=\"telefono\" label=\"Telefono\" rules={[{ required: true, message: 'Ingresa el numero de telefono correcto' },]}>\r\n              <Input addonBefore={prefixSelector} style={{ width: '100%', }} />\r\n            </Form.Item>\r\n\r\n\r\n            <Form.Item label=\"horarios\" rules={[{ required: true, message: 'Ingresa al menos un horario', },]}>\r\n              <Form.List name=\"horarios\" label=\"horarios list\"\r\n              >\r\n                {(fields, { add, remove }) => (\r\n                  <>\r\n                    {fields.map(({ key, name, ...restField }) => (\r\n                      <Space key={key} style={{ display: 'flex', marginBottom: 8 }} align=\"baseline\">\r\n                        <Form.Item\r\n                          {...restField}\r\n                          name={[name, 'sucursal']}\r\n                          rules={[{ required: true, message: 'Elije Sucursal' }]}\r\n                        >\r\n                          <Select placeholder=\"Elije Sucursal\" style={{ width: '120px' }} >\r\n                            {sucursalesLoading ? \"Cargando\" :\r\n                              sucursales.map(s => <Option value={s._id}>{s.nombre}</Option>)\r\n                            }\r\n                          </Select>\r\n                        </Form.Item>\r\n                        <Form.Item\r\n                          {...restField}\r\n                          name={[name, 'horario']}\r\n                          rules={[{ required: true, message: 'Missing last name' }]}\r\n                        >\r\n                          <Input placeholder=\"Horario\" />\r\n                        </Form.Item>\r\n                        <MinusCircleOutlined onClick={() => remove(name)} />\r\n                      </Space>\r\n                    ))}\r\n                    <Form.Item>\r\n                      <Button type=\"dashed\" onClick={() => add()} block icon={<PlusOutlined />}>\r\n                        Agregar Horario\r\n                      </Button>\r\n                    </Form.Item>\r\n                  </>\r\n                )}\r\n              </Form.List>\r\n            </Form.Item>\r\n\r\n\r\n\r\n          </Col>\r\n          <Col span={12}>\r\n            <Form.Item name=\"cedula\" label=\"Cedula\" rules={[{ required: false, message: 'Ingresa cedula' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            {/* Not Necesary For Medic. He'll be in hospital direction */}\r\n            {/* <Form.Item name=\"calle\" label=\"Calle\" rules={[{ required: true, message: 'Ingresa calle', whitespace: true }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"numexterior\" label=\"Num Exterior\" rules={[{ required: true, message: 'Ingresa numero exterior' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"numinterior\" label=\"Num Interior\" rules={[{ required: true, message: 'Ingresa numinterior' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item label=\"Colonia\" name=\"colonia\" rules={[{ required: true, message: 'Please input your colobnia!' }]}            >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"estado\" label=\"Estado\" rules={[{ required: true, message: 'Apellido materno', },]}>\r\n              <Select placeholder=\"Elije tu estado\">\r\n                {estados.map(e => <Option value={e}>{e}</Option>)}\r\n              </Select>\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"municipio\" label=\"Municipio\" rules={[{ required: true, message: 'Ingresa tu municipio' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"codigopostal\" label=\"Codigo Postal\" rules={[{ required: true, message: 'Ingresa codigopostal', },]}>\r\n              <InputNumber addonAfter={suffixSelector} style={{ width: '100%', }} />\r\n            </Form.Item> */}\r\n\r\n            <Form.Item name=\"certificacion\" label=\"Certificacion\" rules={[{ required: false, message: 'Ingresa tu certificacion' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"universidad\" label=\"Universidad\" rules={[{ required: false, message: 'Ingresa tu universidad' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item {...tailFormItemLayout}>\r\n              <Button type=\"primary\" htmlType=\"submit\">\r\n                Guardar\r\n              </Button>\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n\r\n\r\n\r\n\r\n\r\n        {/* <Form.Item\r\n          name=\"agreement\"\r\n          valuePropName=\"checked\"\r\n          rules={[\r\n            {\r\n              validator: (_, value) =>\r\n                value ? Promise.resolve() : Promise.reject(new Error('Should accept agreement')),\r\n            },\r\n          ]}\r\n          {...tailFormItemLayout}\r\n        >\r\n          <Checkbox>\r\n            He leído y acepto los <a href=\"https://recreamed.com\">terminos y condiciones</a>\r\n          </Checkbox>\r\n        </Form.Item> */}\r\n\r\n\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Row, Col, Space, Button, Image } from 'antd';\r\nimport { Avatar, Card } from 'antd';\r\nimport { UserOutlined } from '@ant-design/icons';\r\nimport { API, usuario } from '../../resources';\r\nimport Loading from '../../loading';\r\nimport { FormOutlined } from '@ant-design/icons';\r\nimport PerfilEdit from './perfil.edit';\r\n\r\nexport default function PerfilAdministrador() {\r\n\r\n  const [profileData, setProfileData] = useState([]);\r\n  const [editing, setEditing] = useState(false)\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => { getProfileData() }, [])\r\n\r\n  useEffect(() => {\r\n    getProfileData()\r\n  }, [editing])\r\n\r\n  const getProfileData = () => {\r\n    fetch(API + 'userByMail/' + usuario.email)\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        console.log(data);\r\n        setProfileData(data[0]);\r\n        setIsLoading(false);\r\n      });\r\n  }\r\n\r\n  const editPerfil = async (p) => {\r\n    p.horarios.forEach((h) => { h.sucursal = h.sucursal._id })\r\n    console.log('Horarios before edit profile: ', p.horarios);\r\n\r\n    setEditing(true);\r\n    console.log('Editar medico: ', p)\r\n  }\r\n\r\n  const DetailsProfile = () => {\r\n    // Two Columns of 8 spaces with space of 4 around\r\n    return <Row>\r\n      <Col span={8} offset={4}>\r\n        {\r\n          // Profile Pic \r\n          profileData.avatar.length > 9 ?\r\n            <Image style={{ borderRadius: 12 }} width={256} src={'https://api.recreamed.com/images/' + profileData.avatar} />\r\n            :\r\n            <Avatar size={128} icon={<UserOutlined />} style={{ marginLeft: 80 }} className='btnIconCentered' />\r\n        }\r\n        <br /><br /><br />\r\n        <p className='nombre'> {profileData.name} </p>\r\n        <p className='datos'> {profileData.rol} </p>\r\n        <p className='datos'>Correo: {profileData.email} </p>\r\n        <p className='datos'>Telefono: {profileData.telefono} </p>\r\n      </Col>\r\n      {/* <Col span={8}>\r\n                <p>Estado: {profileData.estado}</p>\r\n                <p>Municipio: {profileData.municipio}</p>\r\n                <p>Colonia: {profileData.colonia}</p>\r\n                <p>Calle: {profileData.calle}</p>\r\n                <p>Codigo Postal:{profileData.codigopostal} </p>\r\n            </Col> */}\r\n      <Col span={7} offset={1}>\r\n        <Card title='Horarios' style={{ borderRadius: 12 }}>\r\n          {\r\n            profileData.horarios.map((h) => {\r\n              return <Card.Grid style={{ width: '100%' }} >\r\n                <Row align=\"middle\">\r\n                  <Col span={6} offset={4}><img width={64} src={'https://api.recreamed.com/images/' + h.sucursal.logo} alt=\"Logo\" /></Col>\r\n                  <Col span={10}>{h.sucursal.nombre} <br /> {h.horario}</Col>\r\n                </Row>\r\n              </Card.Grid>\r\n            })\r\n          }\r\n        </Card>\r\n        <br />\r\n        {/* <p>Universidad: {profileData.universidad} </p> */}\r\n      </Col>\r\n\r\n\r\n\r\n    </Row>\r\n  }\r\n\r\n  return (\r\n    <div className='mainContainer'>\r\n\r\n      <Space>\r\n        <h3>PERFIL</h3>\r\n        <Button onClick={() => editPerfil(profileData)} type=\"primary\" shape=\"circle\" icon={<FormOutlined />} className='btnIconCentered' />\r\n      </Space>\r\n      <br /><br />\r\n      {isLoading ? <Loading /> :\r\n        <Card style={{ borderRadius: 16 }}>\r\n          {\r\n            editing ?\r\n              <>\r\n                <PerfilEdit perfil={profileData} setEditing={setEditing} />\r\n                <Button onClick={() => setEditing(false)}>Cancelar</Button>\r\n              </> :\r\n              <DetailsProfile />\r\n          }\r\n        </Card>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Button, Modal, Form, Input, Select, message, DatePicker, InputNumber } from 'antd';\r\nimport { getData, sendDataBody, updateData } from '../../resources';\r\n// ADMIN CREATE INGRESO\r\nexport default function CreateBalance(props) {\r\n\r\n    const isCreating = !props.balanceForEdit || Object.keys(props.balanceForEdit).length === 0;\r\n    const [pacientesData, setPacientesData] = useState([])\r\n    const [loading, setLoading] = useState(true)\r\n\r\n    const handleOk = () => { props.setIsModalOpen(false) };\r\n    const handleCancel = () => { props.setIsModalOpen(false); props.setBalanceForEdit(null) };\r\n\r\n    useEffect(() => {\r\n        console.log('receivd for edit', props)\r\n        if (props.balanceForEdit && props.balanceForEdit.medico) {\r\n            getPacientesData(props.balanceForEdit.medico)\r\n        }\r\n\r\n    }, [props.balanceForEdit])\r\n\r\n\r\n    // Start of filtering patients to show in select\r\n    const getPacientesData = (medico) => {\r\n        // if (props.balanceForEdi) {\r\n        getData(`mispacientes/${medico}`).then((rs) => {\r\n            if (rs) {\r\n                rs.forEach(patient => {\r\n                    patient.value = patient._id; patient.label = patient.name;\r\n                });\r\n                console.log('Pacientes: ', rs)\r\n                setPacientesData(rs)\r\n            }\r\n        }).finally(() => { setLoading(false) })\r\n        // }\r\n    }\r\n    // End of filtering patients to show in select\r\n\r\n    // Form methods\r\n    const onFinish = (values) => {\r\n\r\n        values.tipo = props.tipo;\r\n        console.log('Ready to send:', values);\r\n        console.log('For Edit: ', props.balanceForEdit);\r\n        if (isCreating) {\r\n            sendDataBody(`balances/add`, values).then((rs) => { console.log(rs); message.success(rs.message || rs.error) }).finally(() => { props.getIngresos(); props.setIsModalOpen(false) })\r\n        } else {\r\n            updateData(`/balances/update/${props.balanceForEdit._id}`, values).then((rs) => {\r\n                props.getIngresos(); props.setBalanceForEdit({}); props.setIsModalOpen(false);\r\n            })\r\n        }\r\n    };\r\n\r\n    const onFinishFailed = (errorInfo) => { console.log('Failed:', errorInfo) };\r\n\r\n    const handleDoctorChange = (value) => { getPacientesData(value) };\r\n\r\n    return (\r\n        <Modal title={isCreating ? `Agregar ${props.tipo}` : `Editar ${props.tipo}`} open={props.isModalOpen} onOk={handleOk} onCancel={handleCancel} destroyOnClose\r\n            footer={[\r\n                <Button type=\"primary\" htmlType=\"submit\" form='edit_balance'>\r\n                    Guardar\r\n                </Button>,\r\n                <Button onClick={handleCancel}>\r\n                    Cancelar\r\n                </Button>\r\n            ]}>\r\n            <Form\r\n                name=\"edit_balance\"\r\n                labelCol={{ span: 8 }}\r\n                wrapperCol={{ span: 16 }}\r\n                initialValues={props.balanceForEdit}\r\n                onFinish={onFinish}\r\n                onFinishFailed={onFinishFailed}\r\n                autoComplete=\"off\"\r\n            >\r\n                <Form.Item label=\"Monto\" name=\"monto\" rules={[{ required: true, message: 'Ingresa el monto' }]} >\r\n                    <InputNumber style={{ width: '100%' }} />\r\n                </Form.Item>\r\n\r\n                <Form.Item label=\"abono\" name=\"abono\" rules={[{ required: true, message: 'Ingresa el abobo' }]} >\r\n                    <InputNumber style={{ width: '100%' }} />\r\n                </Form.Item>\r\n\r\n                <Form.Item label=\"Forma de Pago\" name=\"forma_de_pago\" >\r\n                    <Select\r\n                        // onChange={handleDoctorChange}\r\n                        options={[\r\n                            {\r\n                                value: 'efectivo',\r\n                                label: 'Efectivo',\r\n                            },\r\n                            {\r\n                                value: 'tarjeta',\r\n                                label: 'Tarjeta',\r\n                            },\r\n                            {\r\n                                value: 'transferencia',\r\n                                label: 'Transferencia',\r\n                            },\r\n                        ]}\r\n                    />\r\n                </Form.Item>\r\n\r\n                {isCreating && <div><Form.Item\r\n                    label=\"Estado\"\r\n                    name=\"estado\"\r\n                    rules={[{ required: true, message: 'Ingresa el monto' }]}\r\n                >\r\n                    <Select options={[\r\n                        {\r\n                            value: 'pendiente',\r\n                            label: 'Pendiente',\r\n                        },\r\n                        {\r\n                            value: 'pagado',\r\n                            label: 'Pagado',\r\n                        },\r\n                        {\r\n                            value: 'pago parcial',\r\n                            label: 'Pago parcial',\r\n                        },\r\n                    ]}\r\n                    />\r\n                </Form.Item>\r\n\r\n                    <Form.Item label=\"Medico\" name=\"medico\" >\r\n                        <Select options={props.medicosData} onChange={handleDoctorChange} />\r\n                    </Form.Item>\r\n\r\n\r\n                    {\r\n                        // Para el caso que sea un ingreso sin cita\r\n                        (!props.balanceForEdit || Object.keys(props.balanceForEdit).length === 0) && <div>\r\n                            <Form.Item\r\n                                label=\"Concepto\"\r\n                                name=\"concepto\"\r\n                                rules={[{ required: true, message: 'Ingresa el concepto' }]}\r\n                            >\r\n                                <Input />\r\n                            </Form.Item>\r\n\r\n                            {\r\n                                props.tipo === 'ingreso' && <Form.Item\r\n                                    label=\"Paciente\"\r\n                                    name=\"paciente\"\r\n                                >\r\n                                    <Select\r\n                                        options={pacientesData}\r\n                                    />\r\n                                </Form.Item>\r\n                            }\r\n\r\n                        </div>\r\n                    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n                    <Form.Item\r\n                        label=\"Fecha y Hora\"\r\n                        name=\"fecha_hora\"\r\n                        rules={[{ required: true, message: 'Selecciona Fecha y Hora' }]}\r\n                    >\r\n                        <DatePicker showTime format=\"DD-MM-YYYY HH:mm\" />\r\n                    </Form.Item> </div>}\r\n\r\n            </Form>\r\n        </Modal>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Document, Page, Text, View, StyleSheet, Image } from '@react-pdf/renderer';\r\nimport { PDFViewer } from '@react-pdf/renderer';\r\n\r\n\r\n// Estilo para el ticket\r\nconst styles = StyleSheet.create({\r\n    titleContainer: {\r\n        flexDirection: 'row',\r\n        justifyContent: 'center',\r\n        marginBottom: 10,\r\n    },\r\n    reportTitle: {\r\n        fontSize: 18,\r\n        textAlign: 'center',\r\n        fontFamily: 'Helvetica-Bold',\r\n        textTransform: 'uppercase',\r\n    },\r\n    subtitle: {\r\n        fontSize: 14,\r\n        textAlign: 'center',\r\n        fontFamily: 'Helvetica',\r\n        marginBottom: 20,\r\n    },\r\n    text: {\r\n        margin: 10,\r\n        fontSize: 12,\r\n        textAlign: 'justify',\r\n        fontFamily: 'Helvetica',\r\n    },\r\n    sellerBuyerInfo: {\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n        marginBottom: 10,\r\n    },\r\n    infoTitle: {\r\n        fontFamily: 'Helvetica-Bold',\r\n        fontSize: 12,\r\n    },\r\n    infoText: {\r\n        fontFamily: 'Helvetica',\r\n        fontSize: 12,\r\n    },\r\n    table: {\r\n        display: 'table',\r\n        width: 'auto',\r\n        marginTop: 10,\r\n        borderStyle: 'solid',\r\n        borderWidth: 1,\r\n        borderColor: '#bfbfbf',\r\n    },\r\n    tableRow: {\r\n        margin: 'auto',\r\n        flexDirection: 'row',\r\n    },\r\n    tableColHeader: {\r\n        width: '25%',\r\n        borderStyle: 'solid',\r\n        borderWidth: 1,\r\n        borderColor: '#bfbfbf',\r\n        backgroundColor: '#f0f0f0',\r\n        textAlign: 'center',\r\n        fontFamily: 'Helvetica-Bold',\r\n        fontSize: 12,\r\n        paddingTop: 5,\r\n        paddingBottom: 5,\r\n    },\r\n    tableCol: {\r\n        width: '25%',\r\n        borderStyle: 'solid',\r\n        borderWidth: 1,\r\n        borderColor: '#bfbfbf',\r\n        textAlign: 'center',\r\n        fontFamily: 'Helvetica',\r\n        fontSize: 10,\r\n        paddingTop: 5,\r\n        paddingBottom: 5,\r\n    },\r\n    tableCellHeader: {\r\n        margin: 'auto',\r\n        marginTop: 5,\r\n        marginBottom: 5,\r\n        flexDirection: 'row',\r\n    },\r\n    total: {\r\n        fontFamily: 'Helvetica-Bold',\r\n        fontSize: 14,\r\n        marginTop: 30,\r\n        textAlign: 'right',\r\n        paddingRight: 50,\r\n    },\r\n\r\n    page: {\r\n        fontFamily: 'Helvetica',\r\n        fontSize: 12,\r\n        padding: 40,\r\n    },\r\n    header: {\r\n        flexDirection: 'row',\r\n        alignItems: 'center',\r\n        borderBottom: '1pt solid #000',\r\n        paddingBottom: 10,\r\n        marginBottom: 10,\r\n    },\r\n    logo: {\r\n        width: 50,\r\n        height: 50,\r\n        marginRight: 10,\r\n    },\r\n    title: {\r\n        fontSize: 20,\r\n        marginLeft: 10,\r\n    },\r\n    company: {\r\n        fontSize: 14,\r\n        marginTop: 5,\r\n        marginLeft: 10,\r\n    },\r\n});\r\n\r\n// Componente del ticket\r\nexport default function Ticket({ ingresos, logo, company, seller, buyer }) {\r\n    console.log('Received for print ', ingresos)\r\n\r\n    const { usuario: { name: userName } = {} } = ingresos[0]\r\n    const { cita: { usuario: { name: citaName } = {} } = {} } = ingresos[0]\r\n\r\n    return <PDFViewer height={500} width={550}>\r\n        <Document>\r\n            <Page size=\"A4\" style={styles.page}>\r\n                <View>\r\n                    <View style={styles.header}>\r\n                        <Image style={styles.logo} src={logo} />\r\n                        <View>\r\n                            <Text style={styles.title}>Nota de Venta</Text>\r\n                            <Text style={styles.company}>Hospital: </Text>\r\n                            <Text style={styles.company}>{new Date(ingresos[0].createdAt).toLocaleString()} </Text>\r\n                        </View>\r\n                    </View>\r\n                    <View style={styles.sellerBuyerInfo}>\r\n                        <View>\r\n                            <Text style={styles.infoTitle}>Medico:</Text>\r\n                            <Text style={styles.infoText}>{ingresos[0].doctor.name}</Text>\r\n                        </View>\r\n                        <View>\r\n                            <Text style={styles.infoTitle}>Paciente:</Text>\r\n                            {userName && <Text style={styles.infoText}>{userName}</Text>}\r\n                            {citaName && <Text style={styles.infoText}>{citaName}</Text>}\r\n                        </View>\r\n                    </View>\r\n                    <View style={styles.table}>\r\n                        <View style={styles.tableRow}>\r\n                            <Text style={styles.tableColHeader}>Concepto</Text>\r\n                            <Text style={styles.tableColHeader}>Cantidad</Text>\r\n                            <Text style={styles.tableColHeader}>Precio Unitario</Text>\r\n                            <Text style={styles.tableColHeader}>Subtotal</Text>\r\n                        </View>\r\n                        {ingresos.map((item) => (\r\n                            <View style={styles.tableRow} key={item.id}>\r\n                                <Text style={styles.tableCol}>{item.concepto}</Text>\r\n                                <Text style={styles.tableCol}>1</Text>\r\n                                <Text style={styles.tableCol}>${item.monto.toFixed(2)}</Text>\r\n                                <Text style={styles.tableCol}>\r\n                                    {/* ${(item.monto * item.quantity).toFixed(2)} */}\r\n                                    ${item.monto.toFixed(2)}\r\n                                </Text>\r\n                            </View>\r\n                        ))}\r\n                    </View>\r\n                    <Text style={styles.total}>\r\n                        Total: ${ingresos.reduce((acc, item) => acc + item.monto * 1, 0).toFixed(2)}\r\n                    </Text>\r\n                </View>\r\n            </Page>\r\n        </Document>\r\n\r\n    </PDFViewer>\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { Table, Tag, Button, Typography, Select, Modal } from 'antd';\r\nimport { CheckCircleTwoTone } from '@ant-design/icons'\r\nimport { getData, usuario, sendDataBody, ids_hospitales, deleteData } from '../../resources';\r\nimport CreateBalance from './create-ingreso';\r\nimport Loading from '../../loading';\r\nimport Ticket from './ticket-for-print';\r\nimport moment from 'moment/moment';\r\n\r\nconst { Text } = Typography;\r\n\r\nexport default function Ingresos() {\r\n    const [loading, setLoading] = useState(true)\r\n    const [medicosData, setMedicosData] = useState({}) // Populate the main select component\r\n    const [medico, setMedico] = useState(null)\r\n    const [ingresosData, setIngresosData] = useState([])\r\n    const [ingresoForEdit, setIngresoForEdit] = useState({})\r\n    const [ingresoForPrint, setIngresoForPrint] = useState([])\r\n\r\n    // Modal For Add/Edit Inreso\r\n    const [isIngresoModalOpen, setIsIngresoModalOpen] = useState(false);\r\n    const showIngresoModal = () => { setIsIngresoModalOpen(true) };\r\n    // Modal For Add/Edit Enreso\r\n    const [isEgresoModalOpen, setIsEgresoModalOpen] = useState(false)\r\n    const showEgresoModal = () => { setIsEgresoModalOpen(true) };\r\n\r\n    // Modal For Ticket\r\n    const [isTicketModalOpen, setIsTicketModalOpen] = useState(false);\r\n    const showTicketModal = () => {\r\n        setIsTicketModalOpen(true);\r\n    };\r\n    const handleTicketOk = () => {\r\n        setIsTicketModalOpen(false);\r\n    };\r\n    const handleTicketCancel = () => {\r\n        setIsTicketModalOpen(false);\r\n    };\r\n\r\n    useEffect(() => {\r\n        getIngresos()\r\n    }, [])\r\n\r\n    const getIngresos = async () => {\r\n        const medicos = await sendDataBody('users/getMany/hospitals', { ids_hospitales: ids_hospitales })\r\n\r\n        medicos.forEach(m => { m.label = m.name; m.value = m._id; })// to pass to create modal\r\n        setMedicosData(medicos) // to pass to create modal\r\n\r\n        const promises = medicos.map(medico => getData(`balances/medico/${medico._id}`));\r\n\r\n        Promise.all(promises)\r\n            .then(resultados => {\r\n                const ingresos = resultados.flat(); // concatenar todos los arrays de ingresos\r\n                console.log('adm ingr', ingresos);\r\n                // Doctor is for details, medico is for edit. Usuario is for details, paciente id for Edit\r\n                ingresos.forEach((i) => { i.doctor = i.medico; i.medico = i.medico._id; if (i.paciente) { i.usuario = i.paciente; i.paciente = i.paciente._id; } })\r\n                setIngresosData(\r\n                    ingresos.sort((a, b) => a.fecha_hora < b.fecha_hora)\r\n                )\r\n                setLoading(false)\r\n            })\r\n            .catch(error => {\r\n                console.error(error);\r\n            });\r\n    }\r\n\r\n    const handleEditIngreso = (record) => {\r\n        record.fecha_hora = moment.utc(record.fecha_hora)\r\n        setIngresoForEdit(record);\r\n        showIngresoModal()\r\n    }\r\n\r\n\r\n\r\n    const columns = [\r\n        {\r\n            title: 'Médico',\r\n            dataIndex: 'medico',\r\n            key: 'createdAt',\r\n            render: (_, { doctor }) => { return <>{doctor.name}</> }\r\n        },\r\n        {\r\n            title: 'Tipo',\r\n            dataIndex: 'tipo',\r\n            key: 'tipo',\r\n            render: (_, { tipo }) => {\r\n                let color = (tipo && tipo === 'ingreso') ? 'geekblue' : 'volcano';\r\n                return tipo ? <Tag color={color} >{tipo.toUpperCase()}</Tag> : <Tag color={color}>Indefinido</Tag>\r\n            },\r\n        },\r\n        {\r\n            title: 'Fecha',\r\n            dataIndex: 'fecha_hora',\r\n            key: 'fecha_hora',\r\n            render: (_, { fecha_hora }) => { return <>{new Date(fecha_hora).toLocaleString()}</> },\r\n            defaultSortOrder: 'descend',\r\n            sorter: (a, b) => a.fecha_hora > b.fecha_hora,\r\n        },\r\n        {\r\n            title: 'Monto',\r\n            dataIndex: 'monto',\r\n            key: 'monto',\r\n            render: (_, { monto }) => { return <>${monto}</> }\r\n        },\r\n        {\r\n            title: 'Abono',\r\n            dataIndex: 'abono',\r\n            key: 'abono',\r\n            render: (_, { abono }) => { return abono && <>${abono}</> }\r\n        },\r\n        {\r\n            title: 'Adeudo',\r\n            dataIndex: 'adeudo',\r\n            key: 'adeudo',\r\n            render: (_, record) => { return <>${record.monto - record.abono}</> }\r\n\r\n        },\r\n        {\r\n            title: 'Forma de pago',\r\n            key: 'forma_de_pago',\r\n            dataIndex: 'forma_de_pago',\r\n            render: (_, { forma_de_pago }) => {\r\n                let color = forma_de_pago === 'efectivo' ? 'geekblue' : 'green';\r\n                return <Tag color={color} >{forma_de_pago.toUpperCase()}</Tag>\r\n            },\r\n        },\r\n        {\r\n            title: 'Paciente',\r\n            key: 'usuario',\r\n            dataIndex: 'usuario',\r\n            render: (_, record) => {\r\n                // if (record.cita) return <>{record.cita.usuario}</>\r\n                if (record.cita) return <div style={{ display: 'flex', flexDirection: 'column' }}>{record.cita.usuario.name} <span style={{ fontSize: 9 }}>Tomado de la cita</span></div> //when populate is ready\r\n                else if (record.usuario) return <>{record.usuario.name}</>\r\n                else return <Text type=\"secondary\"> Sin Paciente</Text>\r\n            },\r\n        },\r\n        {\r\n            title: 'Factura',\r\n            key: 'Factura',\r\n            dataIndex: 'factura',\r\n            render: (_, { factura }) => { return factura && <CheckCircleTwoTone /> }\r\n\r\n        },\r\n        {\r\n            title: 'Estado',\r\n            key: 'Estado',\r\n            dataIndex: 'estado',\r\n            // render: (_, { estado }) => {\r\n            //     let color = estado === 'pagado' ? 'green' : 'geekblue';\r\n            //     if (estado === 'pendiente' || estado === 'sin pagar') color = 'volcano';\r\n            //     return <Tag color={color}> {estado.toUpperCase()} </Tag>\r\n            // }\r\n            render: (_, { abono, monto }) => {\r\n                const pagado = abono === monto;\r\n                let color = pagado ? 'green' : 'volcano';\r\n                return <Tag color={color}> {pagado ? 'PAGADO' : 'PENDIENTE'} </Tag>\r\n            }\r\n\r\n        },\r\n        {\r\n            title: 'Acciones',\r\n            key: 'Editar',\r\n            render: (_, record) => <div style={{ display: 'flex', gap: 2, flexDirection: 'column' }}>\r\n                {/* <Button onClick={() => { deleteData(`balances/remove/${record._id}`).then(()=>getIngresos()) }}>Eliminar</Button> */}\r\n                <Button size='small' onClick={() => handleEditIngreso(record)}>Editar Monto</Button>\r\n                <Button size='small' onClick={() => { setIngresoForPrint([record]); showTicketModal() }}>Imprimir Nota</Button>\r\n            </div>\r\n        },\r\n    ];\r\n\r\n\r\n    if (loading) return <Loading />\r\n\r\n    return (\r\n        <div className='mainContainer'>\r\n            <h4>Ingresos de todos los medicos</h4>\r\n            <br />\r\n\r\n            {/* <div></div> */}\r\n\r\n            <Button ghost onClick={showIngresoModal} type='primary' style={{ marginBottom: 22 }} >Agregar Nuevo Ingreso</Button>\r\n            <Button ghost onClick={showEgresoModal} type='primary' style={{ marginBottom: 22, marginLeft: 6 }} >Agregar Nuevo Gasto</Button>\r\n\r\n            <Table columns={columns} dataSource={ingresosData} />\r\n\r\n            <div style={{ height: 200 }}></div>\r\n\r\n            {/* Ingreso */}\r\n            <CreateBalance tipo='ingreso' balanceForEdit={ingresoForEdit} setBalanceForEdit={setIngresoForEdit} setIsModalOpen={setIsIngresoModalOpen} isModalOpen={isIngresoModalOpen} getIngresos={getIngresos} medico={medico} medicosData={medicosData} />\r\n\r\n            {/* Gasto */}\r\n            <CreateBalance tipo='egreso' balanceForEdit={ingresoForEdit} setBalanceForEdit={setIngresoForEdit} setIsModalOpen={setIsEgresoModalOpen} isModalOpen={isEgresoModalOpen} getIngresos={getIngresos} medico={medico} medicosData={medicosData} />\r\n\r\n            <Modal title=\"Imprimir Nota de Venta\" open={isTicketModalOpen} onOk={handleTicketOk} onCancel={handleTicketCancel} width={600}>\r\n                <Ticket ingresos={ingresoForPrint} logo=\"https://api.recreamed.com/images/bd71d914-1f11-4bea-81e5-81b55e11a4e1.jpg\" company='Hospital: ' seller='Médico: ' buyer='Paciente: ' />\r\n            </Modal>\r\n        </div >\r\n    )\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport { Button, Modal, Typography, Table } from 'antd'\r\nimport { sendDataBody, getData, usuario, deleteData } from '../../resources'\r\nconst { Text } = Typography;\r\n\r\nexport default function Detalles(props) {\r\n    const [pacientesData, setPacientesData] = useState([])\r\n\r\n    const [totales, setTotales] = useState({})\r\n    const handleOk = () => { props.setIsModalOpen(false) };\r\n\r\n    useEffect(() => { return getPacientesData() }, [])\r\n\r\n    // Here creates the main data\r\n    useEffect(() => {\r\n        sendDataBody(`balances/ingresos/corte`, props.corte).then(rs => {\r\n            console.log(rs)\r\n            let totalIngresos = 0;\r\n            let totalPendiente = 0;\r\n            let totalCobros = rs.length;\r\n            let totalPagados = 0;\r\n            let totalPendientes = 0;\r\n            let listOfDeudors = [];\r\n            rs.forEach(c => {\r\n                if (c && c.estado === 'pagado') {\r\n                    totalIngresos += c.monto;\r\n                    totalPagados++\r\n                } else {\r\n                    totalPendiente += c.monto;\r\n                    totalPendientes++;\r\n                    listOfDeudors.push(c)\r\n                }\r\n            });\r\n            const totales = {\r\n                ingresosTotales: totalIngresos,\r\n                deudasTotales: totalPendiente,\r\n                cobrosTotales: totalCobros,\r\n                pagados: totalPagados,\r\n                pendientes: totalPendientes,\r\n                listOfDeudors: listOfDeudors\r\n            }\r\n            setTotales(totales)\r\n        })\r\n\r\n\r\n    }, [props.corte])\r\n\r\n\r\n\r\n    // Give me the patients to match names\r\n    const getPacientesData = () => { getData(`mispacientes/${usuario._id}`).then((rs) => { setPacientesData(rs); }) }\r\n    const MatchPatient = ({ paciente }) => {\r\n        const patient = pacientesData.find((p) => paciente === p._id)\r\n        return <div>{patient ? patient.name : <Text disabled>Paciente eliminado o no existente</Text>} <p style={{ fontSize: 10 }}>Tomado de la cita</p></div>\r\n    }\r\n    const columns = [\r\n        {\r\n            title: 'Paciente',\r\n            key: 'cita.paciente',\r\n            dataIndex: 'cita',\r\n            render: (_, record) => {\r\n                if (record.cita) return <MatchPatient paciente={record.cita.usuario} />\r\n                else if (record.paciente) return <>{record.paciente.name}</>\r\n                else return <Text type=\"secondary\"> Sin Paciente</Text>\r\n            },\r\n        },\r\n        {\r\n            title: 'Monto',\r\n            dataIndex: 'monto',\r\n            key: 'monto',\r\n            render: (_, { monto }) => <>${monto}</>\r\n        },\r\n        {\r\n            title: 'Fecha y Hora',\r\n            dataIndex: 'createdAt',\r\n            key: 'createdAt',\r\n            render: (_, { createdAt }) => { return <>{new Date(createdAt).toLocaleString()}</> }\r\n        },\r\n\r\n    ];\r\n    return <Modal title=\"Detalles del corte\" open={props.isModalOpen} onCancel={handleOk} destroyOnClose\r\n        footer={[<Button onClick={handleOk}>Cerrar</Button>]}\r\n    >\r\n        <h5>Ingresos </h5>\r\n        <h5>Pagados: {totales.pagados}</h5>\r\n        <h5>Total: <span style={{ color: '#3277a8' }}>${totales.ingresosTotales}</span></h5>\r\n        <br />\r\n        <h5>Pendientes</h5>\r\n        <h5>Total: <span style={{ color: '#eb3d43' }}>${totales.deudasTotales}</span></h5>\r\n\r\n        {\r\n            totales.listOfDeudors && totales.listOfDeudors.length > 0 && <Table dataSource={totales.listOfDeudors} columns={columns} bordered={false} size='small'/>\r\n        }\r\n        {/* {\r\n            totales.listOfDeudors && totales.listOfDeudors.length > 0 &&\r\n            <ul>\r\n                {totales.listOfDeudors.map((d) => {\r\n                    return <li>\r\n                        {() => {\r\n                            if (d.cita) { <MatchPatient paciente={d.cita.usuario} /> }\r\n                            else if (d.paciente) <>{d.paciente.name}</>\r\n                        }\r\n                        } - {d.monto} - {new Date(d.fecha_hora).toLocaleString()}\r\n                    </li>\r\n                })}\r\n                <li>Otrito :/</li>\r\n            </ul>\r\n        } */}\r\n    </ Modal>\r\n}\r\n","import { useEffect, useState } from 'react'\r\nimport { Button, Table, Space, Select, Popconfirm } from 'antd'\r\nimport {\r\n    getData, sendDataBody, usuario, ids_hospitales\r\n} from '../../resources'\r\nimport Loading from '../../loading'\r\nimport Detalles from './details.corte'\r\n\r\nexport default function Cortes() {\r\n    const [medico, setMedico] = useState(null)\r\n    const [balance, setBalance] = useState({})\r\n    const [cortesData, setCortesData] = useState([])\r\n    const [loading, setLoading] = useState(true)\r\n    // For details modal\r\n    const [corteForDetails, setCorteForDetails] = useState({})\r\n    const [isModalOpen, setIsModalOpen] = useState(false)\r\n    const showModal = (corte) => { setCorteForDetails(corte); setIsModalOpen(true) };\r\n    // Data before all\r\n    const [medicosData, setMedicosData] = useState([])\r\n\r\n\r\n    useEffect(() => {\r\n        return getDoctorsData()\r\n    }, [])\r\n\r\n    const getDoctorsData = () => { //Para el caso que la sesion sea de Administrador\r\n        sendDataBody('users/getMany/hospitals', { ids_hospitales: ids_hospitales }).then(rs => {\r\n            rs.forEach(m => { m.value = m._id; m.label = m.name })\r\n            setMedicosData(rs)\r\n        }).finally(() => setLoading(false))\r\n    }\r\n\r\n    const getCortesData = (id_medico) => {\r\n        getData(`cortes/${id_medico}`).then((rs) => {\r\n            setCortesData(rs.reverse())\r\n        }).finally(() => setLoading(false))\r\n    }\r\n\r\n    const createCorte = () => {\r\n        const newCorte = {\r\n            medico: medico,\r\n            fecha_inicio: cortesData.length === 0 ? new Date() : cortesData.at(0).fecha_cierre,\r\n            fecha_cierre: new Date(),\r\n            comentario: ''\r\n        }\r\n        console.log('ready to send ', newCorte)\r\n        sendDataBody('cortes/add', newCorte).then((rs) => {\r\n            console.log(rs);\r\n            getCortesData(medico)\r\n        })\r\n    }\r\n\r\n    const handleDoctorChange = (value) => { setMedico(value); getCortesData(value); };\r\n\r\n    const columns = [\r\n        {\r\n            title: 'fecha y hora de Inicio',\r\n            dataIndex: 'fecha_inicio',\r\n            key: 'fecha_inicio',\r\n            render: (_, { fecha_inicio }) => <> {new Date(fecha_inicio).toLocaleString()}</>\r\n        },\r\n        {\r\n            title: 'Fecha y hora de Cierre',\r\n            dataIndex: 'fecha_cierre',\r\n            key: 'fecha_cierre',\r\n            render: (_, { fecha_cierre }) => <> {new Date(fecha_cierre).toLocaleString()}</>\r\n        },\r\n        {\r\n            title: 'Comentario',\r\n            dataIndex: 'comentario',\r\n            key: 'comentario',\r\n        },\r\n        {\r\n            title: 'Acciones',\r\n            key: 'Acciones',\r\n            render: (_, record) => (\r\n                <Space size=\"middle\">\r\n                    <Button onClick={() => { showModal(record) }}>Ver Detalles</Button>\r\n                    {/* <Button onClick={() => console.log(record)}>Editar</Button> */}\r\n                    {/* <Button onClick={() => deleteData(`cortes/remove/${record._id}`)}>Eliminar</Button> */}\r\n                </Space>)\r\n        }\r\n    ];\r\n\r\n\r\n    return <div className='mainContainer'>\r\n\r\n        <h4>Cortes de cada Medico</h4>\r\n        <br />\r\n        <p className='datos'>Selecciona un medico a continuacion para ver sus cortes</p>\r\n\r\n        <Select options={medicosData} onChange={handleDoctorChange} style={{ width: 240 }} placeholder='Seleccione medico' />\r\n\r\n        <Popconfirm\r\n            placement='bottomRight'\r\n            title=\"Crear Corte\"\r\n            description=\"Seguro que quere generar un corte de caja a la fecha y hora actuales?\"\r\n            onConfirm={createCorte}\r\n            onCancel={() => console.log('Cancelled corte')}\r\n            okText=\"Si\"\r\n            cancelText=\"No\"\r\n        >\r\n\r\n            <Button disabled={!medico} type='primary' style={{ marginLeft: 12 }}>{cortesData.length === 0 ? 'Generar Primer Corte' : 'Generar Corte'}</Button>\r\n        </Popconfirm>\r\n\r\n        {\r\n            medico && <div>\r\n                <Table columns={columns} dataSource={cortesData} />\r\n            </div>\r\n        }\r\n        <div style={{ height: 200 }}></div>\r\n        {/* {\r\n            !medico ? <div>Seleccione un medico para ver sus cortes</div>\r\n                :\r\n                <div>\r\n                    <div className='fila'>\r\n                        <h4>Cortes</h4>\r\n                        <Button onClick={createCorte} type='primary' style={{ marginLeft: 12 }}>{cortesData.length === 0 ? 'Generar Primer Corte' : 'Generar Corte'}</Button>\r\n                    </div>\r\n                    <br />\r\n                    <Table columns={columns} dataSource={cortesData} />\r\n                </div>\r\n        } */}\r\n\r\n\r\n\r\n        <Detalles corte={corteForDetails} isModalOpen={isModalOpen} setIsModalOpen={setIsModalOpen} />\r\n    </div>\r\n}","import React from 'react';\r\nimport { Form, Input, Button, message } from 'antd'\r\nimport { InputNumber, Select } from 'antd';\r\nimport { S_API,estados } from '../../resources'\r\nconst { Option } = Select;\r\n\r\nexport default function Register() {\r\n\r\n  const [form] = Form.useForm();\r\n\r\n  const onFinish = (values) => {\r\n    values.avatar = 'https://';\r\n    values.estatus = '1';\r\n    values.rol = 'Recepcion';\r\n    delete values.confirm;\r\n    delete values.prefix;\r\n    delete values.agreement;\r\n\r\n    console.log(values)\r\n    fetch(S_API + 'register', {\r\n      method: 'POST',\r\n      body: JSON.stringify(values),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => { console.log('Success:', response); message.success(response.message || response.error); })\r\n      .catch(error => console.error('Error:', error))\r\n  };\r\n\r\n  const prefixSelector = (\r\n    <Form.Item name=\"prefix\" noStyle>\r\n      <Select\r\n        style={{\r\n          width: 70,\r\n        }}\r\n      >\r\n        <Option value=\"+52\">+52</Option>\r\n      </Select>\r\n    </Form.Item>\r\n  );\r\n  const suffixSelector = (\r\n    <Form.Item name=\"suffix\" noStyle>\r\n      <Select\r\n        style={{\r\n          width: 70,\r\n        }}\r\n      >\r\n        <Option value=\"USD\">$</Option>\r\n        <Option value=\"CNY\">¥</Option>\r\n      </Select>\r\n    </Form.Item>\r\n  );\r\n\r\n\r\n  \r\n  return (\r\n    <div className='mainContainer'>\r\n      <h1>Registrar doctor</h1>\r\n      <br />\r\n      {/* <Form name=\"basic\" labelCol={{ span: 6 }} wrapperCol={{ span: 16 }} initialValues={{ remember: true }} onFinish={onFinish} onFinishFailed={onFinishFailed} autoComplete=\"off\" >\r\n        <Form.Item label=\"Hospital\" name=\"Hospital\" rules={[{ required: true, message: 'Please input your username!' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item label=\"Nombre\" name=\"username\" rules={[{ required: true, message: 'Please input your username!' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item label=\"Apellido Paterno\" name=\"rfc\" rules={[{ required: true, message: 'Ingresa RFC' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item label=\"Apellido Materno\" name=\"calle\" rules={[{ required: true, message: 'Avenida Madero esquina con Santiago Tapia' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item label=\"Cedula\" name=\"nint\" rules={[{ required: true, message: '74B' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item label=\"Calle\" name=\"next\" rules={[{ required: true, message: '12' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item label=\"Numero\" name=\"colonia\" rules={[{ required: true, message: 'Centro' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item label=\"Colonia\" name=\"cp\" rules={[{ required: true, message: '58000' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item label=\"Telefono\" name=\"ciudad_municipio\" rules={[{ required: true, message: 'Ingresa ciudad/municipio' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item label=\"Correo\" name=\"estado\" rules={[{ required: true, message: 'Ingresa estado' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item wrapperCol={{ offset: 8, span: 16 }}>\r\n          <Button type=\"primary\" htmlType=\"submit\">\r\n            Guardar\r\n          </Button>\r\n        </Form.Item>\r\n      </Form> */}\r\n      <Form\r\n        // {...formItemLayout}\r\n        labelCol={{ span: 6 }} wrapperCol={{ span: 16 }}\r\n        form={form}\r\n        name=\"register\"\r\n        onFinish={onFinish}\r\n        initialValues={{\r\n          residence: ['zhejiang', 'hangzhou', 'xihu'],\r\n          prefix: '52',\r\n        }}\r\n        scrollToFirstError\r\n      >\r\n        <Form.Item\r\n          name=\"email\"\r\n          label=\"Correo\"\r\n          rules={[\r\n            {\r\n              type: 'email',\r\n              message: 'The input is not valid E-mail!',\r\n            },\r\n            {\r\n              required: true,\r\n              message: 'Please input your E-mail!',\r\n            },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"password\" label=\"Contraseña\" rules={[{ required: true, message: 'Por favor ingrese su contraseña!', },]} hasFeedback >\r\n          <Input.Password />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"confirm\"\r\n          label=\"Confirmar contraseña\"\r\n          dependencies={['password']}\r\n          hasFeedback\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Please confirm your password!',\r\n            },\r\n            ({ getFieldValue }) => ({\r\n              validator(_, value) {\r\n                if (!value || getFieldValue('password') === value) {\r\n                  return Promise.resolve();\r\n                }\r\n                return Promise.reject(new Error('Las contraseñas deben coincidir!'));\r\n              },\r\n            }),\r\n          ]}\r\n        >\r\n          <Input.Password />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"telefono\"\r\n          label=\"Telefono\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Please input your phone number!',\r\n            },\r\n          ]}\r\n        >\r\n          <Input\r\n            addonBefore={prefixSelector}\r\n            style={{\r\n              width: '100%',\r\n            }}\r\n          />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"id_sucursal\"\r\n          label=\"Id Sucursal\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Ingresa el ID de la sucursal',\r\n            },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"id_medicoasignado\"\r\n          label=\"Id Medico Asignado\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Ingresa el ID del medico ',\r\n            },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"name\"\r\n          label=\"Nombre\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Ingresa Nombre y apellidos',\r\n            },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"cedula\"\r\n          label=\"Cedula\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Ingresa cedula',\r\n            },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"calle\"\r\n          label=\"Calle\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Ingresa calle',\r\n              whitespace: true,\r\n            },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"numexterior\"\r\n          label=\"Num Exterior\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Ingresa numero exterior',\r\n            },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"numinterior\"\r\n          label=\"Num Interior\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Ingresa numinterior',\r\n            },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label=\"Colonia\"\r\n          name=\"colonia\"\r\n          rules={[{ required: true, message: 'Please input your colobnia!' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"estado\" label=\"Estado\" rules={[{ required: true, message: 'Apellido materno', },]}>\r\n          <Select placeholder=\"Elije tu estado\" showSearch>\r\n            {estados.map(e => <Option value={e}>{e}</Option>)}\r\n          </Select>\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"municipio\"\r\n          label=\"Municipio\"\r\n          rules={[{ required: true, message: 'Ingresa tu municipio' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item name=\"codigopostal\" label=\"Codigo Postal\" rules={[{ required: true, message: 'Ingresa codigopostal', },]}>\r\n          <InputNumber addonAfter={suffixSelector} style={{ width: '100%', }} />\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"certificacion\"\r\n          label=\"Certificacion\"\r\n          rules={[{ required: true, message: 'Ingresa tu certificacion' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"universidad\"\r\n          label=\"Universidad\" rules={[{ required: true, message: 'Ingresa tu universidad' }]} >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item wrapperCol={{ offset: 6, span: 16 }}>\r\n          <Button type=\"primary\" htmlType=\"submit\">\r\n            Registrar\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Table, Avatar } from 'antd'\r\nimport { UserOutlined } from '@ant-design/icons'\r\nimport { getData } from '../../resources'\r\nimport Loading from '../../loading'\r\n\r\nexport default function HospitalTab(props) {\r\n  const [receptorsrData, setReceptorsData] = useState([])\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  // Before all, get DoctorsData\r\n  useEffect(() => { getReceptorsData() }, [])\r\n  const getReceptorsData = () => {\r\n    getData('users_by_rol/Recepcion').then((rs) => { setReceptorsData(rs) }).finally(() => setLoading(false))\r\n  }\r\n  const columns = [\r\n    {\r\n      title: 'Avatar',\r\n      dataIndex: 'avatar',\r\n      key: 'avatar',\r\n      render: (_, { avatar }) => {\r\n        return avatar.length > 9 ?\r\n          <img width={64} src={'https://api.recreamed.com/images/' + avatar} alt='ProfilePic' /> :\r\n          <Avatar size={64} icon={<UserOutlined />} className='btnIconCentered' />\r\n      }\r\n    },\r\n    {\r\n      title: 'Nombre',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n    },\r\n    {\r\n      title: 'Correo',\r\n      dataIndex: 'email',\r\n      key: 'email',\r\n    },\r\n    {\r\n      title: 'Telefono',\r\n      dataIndex: 'telefono',\r\n      key: 'telefono',\r\n    },\r\n  ];\r\n  const myReceptors = (id_hospital) => {\r\n    let doctorsFound = [];\r\n    receptorsrData.forEach(doctor => {\r\n      doctor.horarios.forEach(horario => {\r\n        if (!doctorsFound.includes(doctor) && horario.sucursal._id === id_hospital) doctorsFound.push(doctor)\r\n      });\r\n    });\r\n    console.log(`Founds for ${id_hospital}: `, doctorsFound)\r\n    return doctorsFound;\r\n  }\r\n  const doctoresData = myReceptors(props.id_hospital); // Get medicos data before render TAble\r\n  // Filter doctors of each hospital\r\n\r\n\r\n  if (loading) return <Loading />\r\n\r\n  return <div>\r\n    <h6>Recepcionistas del hospital {props.hospital}</h6>\r\n    <Table dataSource={doctoresData} columns={columns} />\r\n  </div>\r\n}\r\n","import React from 'react'\r\nimport { Tabs } from 'antd'\r\nimport { myHospitals } from '../../resources'\r\nimport HospitalTab from './dash.receptionists.hospitalTab';\r\n\r\nexport default function Dash() {\r\n\r\n    // Create items for TABS\r\n    myHospitals.forEach(h => {\r\n        h.label = h.nombre;\r\n        h.key = h._id;\r\n        h.children = <HospitalTab hospital={h.nombre} id_hospital={h._id} />\r\n    });\r\n\r\n    return (\r\n        <div>\r\n            <h4 className='spacedTitle'>Recepcionistas de los diferentes hospitales</h4>\r\n            <Tabs defaultActiveKey=\"1\" items={myHospitals} />\r\n        </div>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { Tabs, Select } from 'antd'\r\nimport { myHospitals } from '../../resources'\r\nimport { Table, Avatar } from 'antd'\r\nimport { UserOutlined } from '@ant-design/icons'\r\nimport { getData } from '../../resources'\r\nimport Loading from '../../loading'\r\n\r\nexport default function Horarios() {\r\n\r\n    // Create items for TABS\r\n    myHospitals.forEach(h => {\r\n        h.label = h.nombre;\r\n        h.key = h._id;\r\n        h.children = <HospitalTab hospital={h.nombre} id_hospital={h._id} />\r\n    });\r\n\r\n    return (\r\n        <div>\r\n            <h4 className='spacedTitle'>Recepcionistas de los diferentes hospitales</h4>\r\n            <Tabs defaultActiveKey=\"1\" items={myHospitals} />\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\n\r\nfunction HospitalTab(props) {\r\n    const [receptorsrData, setReceptorsData] = useState([])\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    // To show Schedules\r\n    const [receptionist, setReceptionist] = useState(null)\r\n    const [shedule, setShedule] = useState([])\r\n    const [loadinSchedules, setLoadinSchedules] = useState(true)\r\n\r\n    const scheduleColumns = [\r\n        // {\r\n        //     title: 'Usuario',\r\n        //     dataIndex: 'usuario',\r\n        //     key: 'usuario',\r\n        //     render: (_, { usuario }) => { return <div>{usuario.name}</div> }\r\n        // },\r\n        {\r\n            title: 'Fecha',\r\n            dataIndex: 'createdAt',\r\n            key: 'createdAt',\r\n            render: (_, { createdAt }) => { return <div>{new Date(createdAt).toLocaleDateString()}</div> }\r\n        },\r\n        {\r\n            title: 'Hora de Entrada',\r\n            dataIndex: 'fecha_hora_entrada',\r\n            key: 'fecha_hora_entrada',\r\n            render: (_, { fecha_hora_entrada }) => { return <div>{new Date(fecha_hora_entrada).toLocaleTimeString()}</div> }\r\n        },\r\n        {\r\n            title: 'Hora de Salida',\r\n            dataIndex: 'fecha_hora_salida',\r\n            key: 'fecha_hora_salida',\r\n            render: (_, { fecha_hora_salida }) => { return <div>{new Date(fecha_hora_salida).toLocaleTimeString()}</div> }\r\n        }\r\n    ]\r\n\r\n    // Before all, get DoctorsData\r\n    useEffect(() => { getReceptorsData() }, [])\r\n    const getReceptorsData = () => {\r\n        getData('users_by_rol/Recepcion').then((rs) => { setReceptorsData(rs) }).finally(() => setLoading(false))\r\n    }\r\n    const columns = [\r\n        {\r\n            title: 'Avatar',\r\n            dataIndex: 'avatar',\r\n            key: 'avatar',\r\n            render: (_, { avatar }) => {\r\n                return avatar.length > 9 ?\r\n                    <img width={64} src={'https://api.recreamed.com/images/' + avatar} alt='ProfilePic' /> :\r\n                    <Avatar size={64} icon={<UserOutlined />} className='btnIconCentered' />\r\n            }\r\n        },\r\n        {\r\n            title: 'Nombre',\r\n            dataIndex: 'name',\r\n            key: 'name',\r\n        },\r\n        {\r\n            title: 'Correo',\r\n            dataIndex: 'email',\r\n            key: 'email',\r\n        },\r\n        {\r\n            title: 'Telefono',\r\n            dataIndex: 'telefono',\r\n            key: 'telefono',\r\n        },\r\n    ];\r\n    const myReceptors = (id_hospital) => {\r\n        let doctorsFound = [];\r\n        receptorsrData.forEach(receptor => {\r\n            receptor.horarios.forEach(horario => {\r\n                if (!doctorsFound.includes(receptor) && horario.sucursal._id === id_hospital) {\r\n                    receptor.label = receptor.name; receptor.value = receptor._id;\r\n                    doctorsFound.push(receptor);\r\n                }\r\n            });\r\n        });\r\n        // console.log(`Founds for ${id_hospital}: `, doctorsFound)\r\n        return doctorsFound;\r\n    }\r\n    const filteredReceptors = myReceptors(props.id_hospital); // Get medicos data before render TAble\r\n    // Filter doctors of each hospital\r\n\r\n    // For Select receptor\r\n    const handleChange = async (value) => {\r\n        console.log(`selected ${value}`);\r\n        const horarios = await getData(`asistencias/${value}`)\r\n        console.log(horarios)\r\n        setShedule(horarios)\r\n        setReceptionist(value)\r\n    };\r\n\r\n    const getSchedules = () => {\r\n    }\r\n\r\n    if (loading) return <Loading />\r\n\r\n    return <div>\r\n        <h6>Recepcionistas del hospital {props.hospital}</h6>\r\n        {/* <Table dataSource={doctoresData} columns={columns} /> */}\r\n        {/* {receptionist || \"Not Selected\"} */}\r\n        <Select\r\n            // defaultValue=\"lucy\"\r\n            style={{ width: 260 }}\r\n            onChange={handleChange}\r\n            options={filteredReceptors}\r\n        />\r\n        <Table columns={scheduleColumns} dataSource={shedule} />\r\n    </div>\r\n}","import React from 'react'\r\nimport { Tabs } from 'antd'\r\nimport { TeamOutlined, UserAddOutlined } from '@ant-design/icons';\r\nimport Register from './register.receptionist';\r\nimport Dash from './dash.receptionists.main';\r\nimport Horarios from \"./horarios.receptionists\";\r\n\r\nconst items = [\r\n    { key: '1', label: <><TeamOutlined /> Recepcionistas</>, children: <Dash /> },\r\n    { key: '2', label: <><TeamOutlined /> Horarios</>, children: <Horarios /> },\r\n    { key: '3', label: <><UserAddOutlined /> Registrar</>, children: <Register /> },\r\n];\r\nconst onChange = (key) => { console.log(key) }\r\n\r\nexport default function Receptionists() {\r\n    return (\r\n        <div>\r\n            <Tabs defaultActiveKey=\"1\" items={items} onChange={onChange} tabPosition='left' />\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { Container, Nav, Navbar } from \"react-bootstrap\";\r\nimport { Button } from 'antd'\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport Citas from './citas/main.citas'\r\nimport Users from './patients/main.users';\r\nimport Doctors from './doctors/main.doctors'\r\nimport Sucursal from './sucursal'\r\nimport PerfilAdministrador from './perfil/perfil.administrador'\r\nimport Ingresos from './ingresos/ingresos'\r\nimport icon from '../assets/Icon.png';\r\nimport Escalas from '../escalas/escalasMenu';\r\nimport { usuario } from '../resources'\r\nimport Cortes from './cortes/main.cortes';\r\nimport Receptionists from './receptionists/main.receptionists';\r\n\r\nconst logout = () => { localStorage.removeItem('sessionToken'); localStorage.removeItem('userType'); window.location.href = '/'; }\r\n\r\nfunction Navigator() {\r\n  return <Navbar bg=\"primary\" variant=\"dark\" expand=\"lg\">\r\n    <Container>\r\n      <img\r\n        src={icon}\r\n        width=\"40\"\r\n        height=\"35\"\r\n        className=\"d-inline-block align-top\"\r\n        alt=\"Recreamed logo\"\r\n        style={{ marginRight: 6 }}\r\n      />\r\n      <Navbar.Brand href=\"#home\" style={{ fontFamily: 'Poppins', color: 'White' }}>\r\n        Bienvenido {usuario.name}\r\n      </Navbar.Brand>\r\n      <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n      <Navbar.Collapse id=\"basic-navbar-nav\">\r\n        <Nav className=\"me-auto\">\r\n\r\n          <Nav.Link href=\"/\">Inicio</Nav.Link>\r\n          <Nav.Link href=\"pacientes\">Pacientes</Nav.Link>\r\n          <Nav.Link href=\"doctores\">Medicos</Nav.Link>\r\n          <Nav.Link href=\"recepcionistas\">Recepcionistas</Nav.Link>\r\n          <Nav.Link href=\"citas\">Citas</Nav.Link>\r\n          <Nav.Link href=\"escalas\">Escalas</Nav.Link>\r\n          <Nav.Link href=\"balances\">Balances</Nav.Link>\r\n          <Nav.Link href=\"cortes\">Cortes</Nav.Link>\r\n          <Nav.Link href=\"perfil\">Perfil</Nav.Link>\r\n\r\n        </Nav>\r\n      </Navbar.Collapse>\r\n      <Navbar.Collapse className=\"justify-content-end\">\r\n        <Button onClick={logout} ghost>Cerrar Sesion</Button>\r\n      </Navbar.Collapse>\r\n    </Container>\r\n  </Navbar>;\r\n}\r\n\r\nexport default function AdminHospitalApp() {\r\n  return (\r\n    <Router>\r\n      <Navigator />\r\n      <Switch>\r\n        <Route path=\"/sucursal\">\r\n          <Sucursal />\r\n        </Route>\r\n        <Route path=\"/recepcionistas\">\r\n          <Receptionists />\r\n        </Route>\r\n        <Route path=\"/doctores\">\r\n          <Doctors />\r\n        </Route>\r\n        <Route path=\"/citas\">\r\n          <Citas />\r\n        </Route>\r\n        <Route path=\"/pacientes\">\r\n          <Users />\r\n        </Route>\r\n        <Route path=\"/escalas\">\r\n          <Escalas />\r\n        </Route>\r\n        <Route path=\"/balances\">\r\n          <Ingresos />\r\n        </Route>\r\n        <Route path=\"/cortes\">\r\n          <Cortes />\r\n        </Route>\r\n        <Route path=\"/perfil\">\r\n          <PerfilAdministrador />\r\n        </Route>\r\n        <Route path=\"/\">\r\n          <Users />\r\n        </Route>\r\n\r\n      </Switch>\r\n    </Router>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Form, Input, Button, message, Upload, Divider, Row, Col } from 'antd'\r\nimport { InputNumber, Select } from 'antd';\r\nimport { InboxOutlined, MinusCircleOutlined, PlusOutlined } from '@ant-design/icons'\r\nimport { S_API, API, getData, estados } from '../../resources'\r\n\r\nconst { Option } = Select;\r\nconst { Dragger } = Upload;\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    xs: {\r\n      span: 24,\r\n    },\r\n    sm: {\r\n      span: 4,\r\n    },\r\n  },\r\n  wrapperCol: {\r\n    xs: {\r\n      span: 24,\r\n    },\r\n    sm: {\r\n      span: 20,\r\n    },\r\n  },\r\n};\r\nconst formItemLayoutWithOutLabel = {\r\n  wrapperCol: {\r\n    xs: {\r\n      span: 24,\r\n      offset: 0,\r\n    },\r\n    sm: {\r\n      span: 20,\r\n      offset: 4,\r\n    },\r\n  },\r\n};\r\nexport default function Register(props) {\r\n\r\n  const [form] = Form.useForm();\r\n\r\n  const [medicosData, setMedicosData] = useState(null)\r\n  const [medicosDataLoading, setMedicosDataLoading] = useState(true)\r\n  const [avatar, setAvatar] = useState(props.paciente ? props.paciente.avatar : 'https://')\r\n\r\n  useEffect(() => {\r\n    getData('/users_by_rol/Medico').then((res) => { setMedicosData(res); setMedicosDataLoading(false); })\r\n  }, [])\r\n\r\n\r\n  //Start upload props Upload File\r\n  const dragDropProps = {\r\n    name: 'file',\r\n    multiple: false,\r\n    action: API + 'imagenes/upload',\r\n\r\n    onChange(info) {\r\n      const { status } = info.file;\r\n\r\n      if (status !== 'uploading') {\r\n        console.log(info.file, info.fileList);\r\n      }\r\n\r\n      if (status === 'done') {\r\n        message.success(`${info.file.name} file uploaded successfully.`);\r\n        console.log('New Files: ', info.file.response.file)\r\n        setAvatar(info.file.response.file)\r\n      } else if (status === 'error') {\r\n        message.error(`${info.file.name} file upload failed.`);\r\n      }\r\n    },\r\n\r\n    onDrop(e) {\r\n      console.log('Dropped files', e.dataTransfer.files);\r\n    },\r\n  };\r\n\r\n  async function addHistoria() {\r\n    return await fetch(API + 'historias/add', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        historial: \"Historia clinica al \" + new Date()\r\n      })\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log('Story Created: ', response);\r\n        return response\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  }\r\n\r\n  const createPAtientData = async (usr) => {\r\n    const historia = await addHistoria();\r\n    console.log('historia on Register: ', historia);\r\n    const postBody = {\r\n      usuario: usr,\r\n      historia: historia.id_historia,\r\n      notas: [],\r\n      recetas: []\r\n    }\r\n    console.log('postBodyForExpedient: ', postBody);\r\n    await fetch(API + 'expedientes/add', {\r\n      method: 'POST',\r\n      body: JSON.stringify(postBody),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log('Exp on register pat:', response);\r\n        message.success(response.message || response.error);\r\n        if (response.message && response.message === 'Expediente creado correctamente') {\r\n          window.location.href = '/pacientes';\r\n          console.log('Ready to navigate');\r\n\r\n        }\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n    // .finally(() => { props.setAdding(false) }) here will be close modal\r\n  }\r\n\r\n  const onFinish = async (values) => {\r\n\r\n    // Register patient\r\n    values.avatar = avatar;\r\n    values.estatus = '1';\r\n    values.rol = 'Paciente';\r\n    values.password = '' + values.telefono;\r\n    values.universidades = [    ];\r\n    values.certificacion = '';\r\n    values.cedula = '';\r\n    values.horarios = [];\r\n    // values.medicos_asignados = props.paciente ? props.paciente.medicos_asignados : [usuario._id];\r\n    values.responsable = props.paciente ? props.paciente.responsable : { nombre: values.res_name, telefono: values.res_phone }\r\n\r\n    delete values.prefix;\r\n    delete values.res_name;\r\n    delete values.res_phone;\r\n\r\n    const url = props.paciente ? API + 'users/updateUser/' + props.paciente._id : S_API + 'register';\r\n\r\n    console.log(values)\r\n    console.log('url: ', url);\r\n    await fetch(url, {\r\n      method: props.paciente ? 'PUT' : 'POST',\r\n      body: JSON.stringify(values),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log('Create User Response:', response);\r\n        message.success(response.message || response.error);\r\n        props.paciente ? console.log('Editing, not creating patient') : createPAtientData(response.user_id);\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  };\r\n\r\n  const onFinishEdit = (values) => {\r\n    values.avatar = avatar;\r\n    // values.estatus = '1';\r\n    // values.rol = 'Paciente';\r\n    // delete values.confirm;\r\n    // delete values.prefix;\r\n    // delete values.agreement;\r\n\r\n    console.log(values)\r\n    fetch(API + '/users/updateUser/:_id', {\r\n      method: 'PUT',\r\n      body: JSON.stringify(values),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => { console.log('Success:', response); message.success(response.message || response.error); })\r\n      .catch(error => console.error('Error:', error))\r\n  };\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo);\r\n  };\r\n\r\n  const prefixSelector = (\r\n    <Form.Item name=\"prefix\" noStyle>\r\n      <Select\r\n        style={{\r\n          width: 70,\r\n        }}\r\n      >\r\n        <Option value=\"+52\">+52</Option>\r\n      </Select>\r\n    </Form.Item>\r\n  );\r\n  const suffixSelector = (\r\n    <Form.Item name=\"suffix\" noStyle>\r\n      <Select\r\n        style={{\r\n          width: 70,\r\n        }}\r\n      >\r\n        <Option value=\"USD\">$</Option>\r\n        <Option value=\"CNY\">¥</Option>\r\n      </Select>\r\n    </Form.Item>\r\n  );\r\n  return (\r\n    <div>\r\n      <h4>Registrar Usuario</h4>\r\n      <br />\r\n      <Dragger {...dragDropProps}>\r\n        <p className=\"ant-upload-drag-icon\">\r\n          <InboxOutlined />\r\n        </p>\r\n        <p className=\"ant-upload-text\">Arrastra la imagen de perfil o click ara buscar</p>\r\n        <p className=\"ant-upload-hint\">\r\n          Selecciona archivos en formato png, jpeg o webp\r\n        </p>\r\n      </Dragger>\r\n      <br />\r\n      <Form\r\n        // {...formItemLayout}\r\n        labelCol={{ span: 6 }} wrapperCol={{ span: 16 }}\r\n        form={form}\r\n        name=\"register\"\r\n        onFinish={onFinish}\r\n        initialValues={props.paciente}\r\n        scrollToFirstError\r\n      >\r\n        <Row>\r\n          <Col span={10}>\r\n            <Form.Item\r\n              name=\"name\"\r\n              label=\"Nombre\"\r\n              rules={[{ required: true, message: 'Ingresa Nombre y apellidos' }]}\r\n            >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.List\r\n              name=\"medicos_asignados\"\r\n              rules={[\r\n                {\r\n                  validator: async (_, medicos_asignados) => {\r\n                    if (!medicos_asignados || medicos_asignados.length < 1) {\r\n                      return Promise.reject(new Error('Ingrese al menos un medico'));\r\n                    }\r\n                  },\r\n                },\r\n              ]}\r\n            >\r\n              {(fields, { add, remove }, { errors }) => (\r\n                <>\r\n                  {fields.map((field, index) => (\r\n                    <Form.Item\r\n                      {...(index === 0 ? formItemLayout : formItemLayoutWithOutLabel)}\r\n                      label={index === 0 ? 'Medico' : ''}\r\n                      required={false}\r\n                      key={field.key}\r\n                    >\r\n                      <Form.Item\r\n                        {...field}\r\n                        validateTrigger={['onChange', 'onBlur']}\r\n                        rules={[\r\n                          {\r\n                            required: true,\r\n                            whitespace: true,\r\n                            message: \"Ingrese nombre del medico o borre este campo.\",\r\n                          },\r\n                        ]}\r\n                        noStyle\r\n                      >\r\n                        <Select\r\n                          // defaultValue=\"lucy\"\r\n                          style={{\r\n                            marginLeft: 36,\r\n                            width: '80%',\r\n                          }}\r\n                        // onChange={handleChange}\r\n                        >\r\n                          {\r\n                            medicosDataLoading ? <Option value=\"loading\">Cargando...</Option> :\r\n                              medicosData.map((m) => <Option value={m._id}>{m.name}</Option>)\r\n                          }\r\n\r\n                        </Select>\r\n                      </Form.Item>\r\n                      {\r\n                        fields.length > 1 ? (\r\n                          <MinusCircleOutlined\r\n                            style={{ marginLeft: 2 }}\r\n                            className=\"dynamic-delete-button\"\r\n                            onClick={() => remove(field.name)}\r\n                          />\r\n                        ) : null\r\n                      }\r\n                    </Form.Item>\r\n                  ))}\r\n                  <Form.Item>\r\n                    <Button type=\"dashed\" onClick={() => add()} style={{ width: '100%', marginLeft: 108 }} icon={<PlusOutlined />}>\r\n                      Asignar Medico\r\n                    </Button>\r\n                    {/* <Button type=\"dashed\" onClick={() => { add('The head item', 0) }} style={{ width: '60%', marginTop: '20px' }} icon={<PlusOutlined />}>Add field at head</Button> */}\r\n                    <Form.ErrorList errors={errors} />\r\n                  </Form.Item>\r\n                </>\r\n              )}\r\n            </Form.List>\r\n\r\n            <Form.Item\r\n              name=\"email\"\r\n              label=\"Correo\"\r\n              rules={[{ type: 'email', message: 'Ingresa un correo electronico vaido!' }, { required: true, message: 'Please input your E-mail!' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item\r\n              name=\"telefono\"\r\n              label=\"Telefono\"\r\n              rules={[{ required: true, message: 'Please input your phone number!' }]}\r\n            >\r\n              <Input\r\n                addonBefore={prefixSelector}\r\n                style={{\r\n                  width: '100%',\r\n                }}\r\n              />\r\n            </Form.Item>\r\n\r\n            <Divider>Responsable (opcional)</Divider>\r\n            <Form.Item\r\n              name=\"res_name\"\r\n              label=\"Nombre\"\r\n              rules={[{ message: 'Ingresa Nombre y apellidos' }]}\r\n            >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item\r\n              name=\"res_phone\"\r\n              label=\"Telefono\"\r\n              rules={[{ message: 'Ingresa Nombre y apellidos' }\r\n              ]}\r\n            >\r\n              <Input />\r\n            </Form.Item>\r\n          </Col>\r\n\r\n\r\n          <Col span={10}>\r\n            <Form.Item\r\n              name=\"calle\"\r\n              label=\"Calle\"\r\n              rules={[{ required: false, message: 'Ingresa calle', whitespace: true }]}\r\n            >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item\r\n              name=\"numexterior\"\r\n              label=\"Num Exterior\"\r\n              rules={[{ required: false, message: 'Ingresa numero exterior' }]}\r\n            >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item\r\n              name=\"numinterior\"\r\n              label=\"Num Interior\"\r\n              rules={[{ required: false, message: 'Ingresa numinterior' }]}\r\n            >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item\r\n              label=\"Colonia\"\r\n              name=\"colonia\"\r\n              rules={[{ required: false, message: 'Please input your colobnia!' }]}\r\n            >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"estado\" label=\"Estado\" rules={[{ required: true, message: 'Apellido materno', },]}>\r\n              <Select placeholder=\"Elije tu estado\" showSearch>\r\n                {estados.map(e => <Option value={e}>{e}</Option>)}\r\n              </Select>\r\n            </Form.Item>\r\n\r\n            <Form.Item\r\n              name=\"municipio\"\r\n              label=\"Municipio\"\r\n              rules={[{ required: true, message: 'Ingresa tu municipio' }]}\r\n            >\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item name=\"codigopostal\" label=\"Codigo Postal\" rules={[{ required: false, message: 'Ingresa codigopostal', },]}>\r\n              <InputNumber style={{ width: '100%', }} />\r\n            </Form.Item>\r\n\r\n            <Form.Item wrapperCol={{ span: 12 }} labelCol={{ span: 2 }} >\r\n              {\r\n                props.setIsModalVisible && <Button onClick={() => props.setIsModalVisible(false)} style={{ marginRight: 8 }}>Cancelar</Button>\r\n              }\r\n              <Button type=\"primary\" htmlType=\"submit\">\r\n                Registrar\r\n              </Button>\r\n            </Form.Item>\r\n\r\n          </Col>\r\n\r\n\r\n\r\n\r\n        </Row>\r\n      </Form>\r\n    </div >\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Table, Space, Button, Card, Modal, Popconfirm, Avatar } from 'antd'\r\nimport { API, deleteData } from '../../resources';\r\nimport Loading from '../../loading';\r\nimport Register from './register.patient'\r\nimport { UserOutlined } from '@ant-design/icons'\r\n\r\nexport default function Dash() {\r\n\r\n  const [usuario, setUsuario] = useState({});\r\n  const [isModalVisible, setIsModalVisible] = useState(false);\r\n  const [isEditModalVisible, setIsEditModalVisible] = useState(false);\r\n  const [isLoading, setILoading] = useState(true);\r\n  const [pacientesData, setPacientesData] = useState([]);\r\n  const [patientForEdit, setPatientForEdit] = useState(null)\r\n  const showModal = () => { setIsModalVisible(true); };\r\n  const handleOk = () => { setIsModalVisible(false); };\r\n  const handleCancel = () => { setIsModalVisible(false); };\r\n  const handleOkEdit = () => { setIsEditModalVisible(false); };\r\n  const handleCancelEdit = () => { setIsEditModalVisible(false); };\r\n\r\n  useEffect(() => {\r\n    getPacientesData()\r\n  }, [])\r\n\r\n  const getPacientesData = () => {\r\n    fetch(API + 'users_by_rol/Paciente')\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        console.log(data); setPacientesData(data);\r\n      })\r\n      .finally(() => setILoading(false))\r\n  }\r\n\r\n  const editPatient = async (p) => {\r\n    await setPatientForEdit(p)\r\n    setIsEditModalVisible(true);\r\n    console.log('Editar paciente: ', p)\r\n  }\r\n\r\n  const deletePatient = (patient) => {\r\n    deleteData('/users/remove/' + patient._id).then(() => {\r\n      console.log('removed: ', patient._id);\r\n      getPacientesData()\r\n    })\r\n  }\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Foto',\r\n      dataIndex: 'avatar',\r\n      key: 'avatar',\r\n      render: (_, { avatar }) => (\r\n        avatar.lenght > 12 ?\r\n          <img src={'https://api.recreamed.com/images/' + avatar} alt=\"Logo\" width={64} />\r\n          : <Avatar icon={<UserOutlined />} size={64} className='btnIconCentered' />\r\n\r\n      ),\r\n    },\r\n    {\r\n      title: 'Nombre',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n    },\r\n\r\n    {\r\n      title: 'Correo',\r\n      dataIndex: 'email',\r\n      key: 'email',\r\n    },\r\n\r\n    {\r\n      title: 'Telefono',\r\n      dataIndex: 'telefono',\r\n      key: 'tel',\r\n    },\r\n    // {\r\n    //   title: 'Detalles',\r\n    //   key: 'detalles',\r\n    //   render: (text, record) => (\r\n    //     <Space size=\"middle\">\r\n    //       <Button onClick={() => { setUsuario(record); showModal(); }}>Detalles</Button>\r\n    //     </Space>\r\n    //   )\r\n    // },\r\n    {\r\n      title: 'Opciones',\r\n      key: 'action',\r\n      render: (_, record) => (\r\n        <Space size=\"middle\">\r\n          <Button size='small' onClick={() => { editPatient(record) }}>\r\n            Editar\r\n          </Button>\r\n          <Popconfirm\r\n            title=\"Seguro que quiere borrar este paciente?\"\r\n            onConfirm={() => deletePatient(record)}\r\n            // onCancel={cancel}\r\n            okText=\"Si\"\r\n            cancelText=\"No\"\r\n          >\r\n            <Button danger size='small'>\r\n              Borrar\r\n            </Button>\r\n          </Popconfirm>\r\n\r\n        </Space>\r\n      ),\r\n    }\r\n  ];\r\n\r\n  const gridStyle = {\r\n    width: '50%',\r\n    height: '50px',\r\n    textAlign: 'center',\r\n    display: 'inline-flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center'\r\n  };\r\n\r\n  function DetalleUsuario() {\r\n    return <div>\r\n      <Card bordered={false}>\r\n        {\r\n          Object.keys(usuario).map(k => {\r\n            return <><Card.Grid style={gridStyle}>{k}</Card.Grid><Card.Grid style={gridStyle} size='small'>{usuario[k]}</Card.Grid></>\r\n          })\r\n        }\r\n      </Card>\r\n    </div>\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h4>Pacientes</h4>\r\n      {isLoading ? <Loading /> :\r\n\r\n        <Table dataSource={pacientesData} columns={columns} />\r\n      }\r\n      <Modal width={800} title={<h4>Datos del paciente </h4>} open={isModalVisible} onOk={handleOk} onCancel={handleCancel} destroyOnClose={true}>\r\n        <DetalleUsuario />\r\n      </Modal>\r\n\r\n      <Modal width={1000} title={<h4>Editar Paciente</h4>} open={isEditModalVisible} onOk={handleOkEdit} onCancel={handleCancelEdit} destroyOnClose\r\n        footer={[]}\r\n      >\r\n        <Register paciente={patientForEdit} setIsModalVisible={setIsEditModalVisible} />\r\n      </Modal>\r\n    </div>\r\n  )\r\n\r\n}\r\n","import { Tabs } from 'antd';\r\nimport Register from './register.patient';\r\nimport Dash from './dash.patients';\r\nconst onChange = (key) => {\r\n    console.log(key);\r\n};\r\nconst items = [\r\n    { key: '1', label: `Pacientes`, children: <Dash /> },\r\n    { key: '2', label: `Registrar Paciente`, children: <Register /> }\r\n];\r\n\r\n\r\nexport default function Patients() {\r\n    return <div style={{ marginTop: 6 }}>\r\n        <Tabs tabPosition='left' defaultActiveKey=\"1\" items={items} onChange={onChange} />\r\n    </div>\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Form, Input, Button, message, Space, Row, Col, Upload } from 'antd'\r\nimport { MinusCircleOutlined, PlusOutlined, InboxOutlined } from '@ant-design/icons';\r\nimport { Divider, Select } from 'antd';\r\nimport { S_API, getData, API } from '../../resources'\r\nconst { Option } = Select;\r\nconst { Dragger } = Upload;\r\n\r\n\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    xs: {\r\n      span: 24,\r\n    },\r\n    sm: {\r\n      span: 8,\r\n    },\r\n  },\r\n  wrapperCol: {\r\n    xs: {\r\n      span: 24,\r\n    },\r\n    sm: {\r\n      span: 14,\r\n    },\r\n  },\r\n};\r\nconst tailFormItemLayout = {\r\n  wrapperCol: {\r\n    xs: {\r\n      span: 24,\r\n      offset: 0,\r\n    },\r\n    sm: {\r\n      span: 16,\r\n      offset: 8,\r\n    },\r\n  },\r\n};\r\nexport default function Register(props) {\r\n\r\n  const [form] = Form.useForm();\r\n\r\n  const [sucursales, setSucursales] = useState([]);\r\n  const [sucursalesLoading, setSucursalesLoading] = useState(true);\r\n  const [avatar, setAvatar] = useState(props.medico ? props.medico.avatar : 'https://')\r\n\r\n  //Start upload props Upload File\r\n  const dragDropProps = {\r\n    name: 'file',\r\n    multiple: false,\r\n    action: API + 'imagenes/upload',\r\n\r\n    onChange(info) {\r\n      const { status } = info.file;\r\n\r\n      if (status !== 'uploading') {\r\n        console.log(info.file, info.fileList);\r\n      }\r\n\r\n      if (status === 'done') {\r\n        message.success(`${info.file.name} file uploaded successfully.`);\r\n        console.log('New Files: ', info.file.response.file)\r\n        setAvatar(info.file.response.file)\r\n      } else if (status === 'error') {\r\n        message.error(`${info.file.name} file upload failed.`);\r\n      }\r\n    },\r\n\r\n    onDrop(e) {\r\n      console.log('Dropped files', e.dataTransfer.files);\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log('received Medic: ', props.medico);\r\n    getData('sucursales').then((rs) => { setSucursales(rs); setSucursalesLoading(false) })\r\n  }, [])\r\n\r\n\r\n\r\n  const onFinish = (values) => {\r\n    values.avatar = avatar;\r\n    values.estatus = '1';\r\n    values.rol = 'Medico';\r\n    delete values.confirm;\r\n    delete values.prefix;\r\n\r\n    console.log('ready to send', values)\r\n    fetch(S_API + 'register', {\r\n      method: 'POST',\r\n      body: JSON.stringify(values),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log('Success:', response);\r\n        response.message && response.message === 'Usuario creado correctamente' ?\r\n          window.location.href = 'doctores' : message.error(response.error);\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  };\r\n\r\n  const onFinishEdit = (values) => {\r\n    values.avatar = avatar;\r\n    // values.estatus = '1';\r\n    // values.rol = 'Medico';\r\n    // delete values.confirm;\r\n    // delete values.prefix;\r\n\r\n    console.log('ready to send', values)\r\n    fetch(API + 'users/updateUser/' + props.medico._id, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(values),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log('Success:', response);\r\n        response.message && response.message === 'Usuario actualizado correctamente' ?\r\n          props.setIsModalVisible(false) : message.error(response.error);\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  };\r\n\r\n  const prefixSelector = (\r\n    <Form.Item name=\"prefix\" noStyle>\r\n      <Select\r\n        style={{\r\n          width: 70,\r\n        }}\r\n      >\r\n        <Option value=\"+52\">+52</Option>\r\n      </Select>\r\n    </Form.Item>\r\n  );\r\n  const suffixSelector = (\r\n    <Form.Item name=\"suffix\" noStyle>\r\n      <Select\r\n        style={{\r\n          width: 70,\r\n        }}\r\n      >\r\n        <Option value=\"USD\">$</Option>\r\n        <Option value=\"CNY\">¥</Option>\r\n      </Select>\r\n    </Form.Item>\r\n  );\r\n\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo);\r\n  };\r\n  return (\r\n    <div>\r\n      {\r\n        props.medico ?\r\n          <></> : <h1>Registrar doctor</h1>\r\n      }\r\n      <br />\r\n      <Dragger {...dragDropProps}>\r\n        <p className=\"ant-upload-drag-icon\">\r\n          <InboxOutlined />\r\n        </p>\r\n        <p className=\"ant-upload-text\">Arrastra la imagen de perfil o click ara buscar</p>\r\n        <p className=\"ant-upload-hint\">\r\n          Selecciona archivos en formato png, jpeg o webp\r\n        </p>\r\n      </Dragger>\r\n      <br />\r\n      <Form\r\n        {...formItemLayout}\r\n        form={form}\r\n        name=\"register\"\r\n        onFinish={props.medico ? onFinishEdit : onFinish}\r\n        // initialValues={{ horarios: [{ sucursal: '', horario: '' }], prefix: '+52' }}\r\n        initialValues={props.medico}\r\n        scrollToFirstError\r\n      >\r\n\r\n        <Row>\r\n\r\n          <Col span={11}>\r\n            <Form.Item name=\"name\" label=\"Nombre\" rules={[{ required: true, message: 'Ingresa Nombre y apellidos' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item name=\"email\" label=\"Correo\" rules={[{ type: 'email', message: 'Ingresa un corrreo electronico valido' }, { required: true, message: 'Please input your E-mail!' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            {\r\n              props.medico ? <></> : <>\r\n                <Form.Item name=\"password\" label=\"Contraseña\" rules={[{ required: true, message: 'Por favor ingrese su contraseña!', },]} hasFeedback >\r\n                  <Input.Password />\r\n                </Form.Item>\r\n\r\n                <Form.Item name=\"confirm\" label=\"Confirmar contraseña\" dependencies={['password']} hasFeedback\r\n                  rules={[\r\n                    {\r\n                      required: true,\r\n                      message: 'Please confirm your password!',\r\n                    },\r\n                    ({ getFieldValue }) => ({\r\n                      validator(_, value) {\r\n                        if (!value || getFieldValue('password') === value) {\r\n                          return Promise.resolve();\r\n                        }\r\n                        return Promise.reject(new Error('Las contraseñas deben coincidir!'));\r\n                      },\r\n                    }),\r\n                  ]}\r\n                >\r\n                  <Input.Password />\r\n                </Form.Item>\r\n              </>\r\n            }\r\n\r\n\r\n            <Form.Item name=\"telefono\" label=\"Telefono\" rules={[{ required: true, message: 'Ingresa el numero de telefono correcto' },]}>\r\n              <Input addonBefore={prefixSelector} style={{ width: '100%', }} />\r\n            </Form.Item>\r\n\r\n\r\n\r\n\r\n          </Col>\r\n          <Col span={11}>\r\n            <Form.Item label=\"horarios\" rules={[{ required: true, message: 'Ingresa al menos un horario', },]}>\r\n              <Form.List name=\"horarios\" label=\"horarios list\"\r\n              >\r\n                {(fields, { add, remove }) => (\r\n                  <>\r\n                    {fields.map(({ key, name, ...restField }) => (\r\n                      <Space key={key} style={{ display: 'flex', marginBottom: 8 }} align=\"baseline\">\r\n                        <Form.Item\r\n                          {...restField}\r\n                          name={[name, 'sucursal']}\r\n                          rules={[{ required: true, message: 'Elije Sucursal' }]}\r\n                        >\r\n                          <Select placeholder=\"Elije Sucursal\" style={{ width: '120px' }} >\r\n                            {sucursalesLoading ? \"Cargando\" :\r\n                              sucursales.map(s => <Option value={s._id}>{s.nombre}</Option>)\r\n                            }\r\n                          </Select>\r\n                        </Form.Item>\r\n                        <Form.Item\r\n                          {...restField}\r\n                          name={[name, 'horario']}\r\n                          rules={[{ required: false, message: 'Missing last name' }]}\r\n                        >\r\n                          <Input placeholder=\"Horario\" />\r\n                        </Form.Item>\r\n                        <MinusCircleOutlined onClick={() => remove(name)} />\r\n                      </Space>\r\n                    ))}\r\n                    <Form.Item>\r\n                      <Button type=\"dashed\" onClick={() => add()} block icon={<PlusOutlined />}>\r\n                        Agregar Horario\r\n                      </Button>\r\n                    </Form.Item>\r\n                  </>\r\n                )}\r\n              </Form.List>\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"cedula\" label=\"Cedula\" rules={[{ required: false, message: 'Ingresa cedula' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            {/* Not Necesary For Medic. He'll be in hospital direction */}\r\n            {/* <Form.Item name=\"calle\" label=\"Calle\" rules={[{ required: true, message: 'Ingresa calle', whitespace: true }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"numexterior\" label=\"Num Exterior\" rules={[{ required: true, message: 'Ingresa numero exterior' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"numinterior\" label=\"Num Interior\" rules={[{ required: true, message: 'Ingresa numinterior' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item label=\"Colonia\" name=\"colonia\" rules={[{ required: true, message: 'Please input your colobnia!' }]}            >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"estado\" label=\"Estado\" rules={[{ required: true, message: 'Apellido materno', },]}>\r\n              <Select placeholder=\"Elije tu estado\">\r\n                {estados.map(e => <Option value={e}>{e}</Option>)}\r\n              </Select>\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"municipio\" label=\"Municipio\" rules={[{ required: true, message: 'Ingresa tu municipio' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"codigopostal\" label=\"Codigo Postal\" rules={[{ required: true, message: 'Ingresa codigopostal', },]}>\r\n              <InputNumber addonAfter={suffixSelector} style={{ width: '100%', }} />\r\n            </Form.Item> */}\r\n\r\n            <Form.Item name=\"certificacion\" label=\"Certificacion\" rules={[{ required: false, message: 'Ingresa tu certificacion' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"universidad\" label=\"Universidad\" rules={[{ required: false, message: 'Ingresa tu universidad' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"especialidad\" label=\"Especialidad\" rules={[{ required: false, message: 'Ingresa especialidad' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item {...tailFormItemLayout}>\r\n              {\r\n                props.setIsModalVisible && <Button onClick={() => props.setIsModalVisible(false)} style={{ marginRight: 6 }}>\r\n                  Cancelar\r\n                </Button>\r\n              }\r\n              <Button type=\"primary\" htmlType=\"submit\">\r\n                Guardar\r\n              </Button>\r\n            </Form.Item>\r\n          </Col>\r\n\r\n        </Row>\r\n\r\n\r\n\r\n\r\n\r\n        {/* <Form.Item\r\n          name=\"agreement\"\r\n          valuePropName=\"checked\"\r\n          rules={[\r\n            {\r\n              validator: (_, value) =>\r\n                value ? Promise.resolve() : Promise.reject(new Error('Should accept agreement')),\r\n            },\r\n          ]}\r\n          {...tailFormItemLayout}\r\n        >\r\n          <Checkbox>\r\n            He leído y acepto los <a href=\"https://recreamed.com\">terminos y condiciones</a>\r\n          </Checkbox>\r\n        </Form.Item> */}\r\n\r\n\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Table, Space, Button, Popconfirm, Modal, Avatar } from 'antd';\r\nimport { API, deleteData } from '../../resources'\r\nimport Loading from '../../loading';\r\nimport { HomeOutlined, ClockCircleOutlined, UserOutlined } from '@ant-design/icons'\r\nimport Register from './register.doctor';\r\n\r\nexport default function Dash() {\r\n\r\n  const [isLoading, setILoading] = useState(true);\r\n  const [doctoresData, setDoctoresData] = useState([]);\r\n  const [doctorForEdit, setDoctorForEdit] = useState(null)\r\n  const [isModalVisible, setIsModalVisible] = useState(false)\r\n\r\n  useEffect(() => { getDoctoresData() }, [])\r\n  useEffect(() => { getDoctoresData() }, [isModalVisible])\r\n\r\n  const getDoctoresData = () => {\r\n    fetch(API + 'users_by_rol/Medico')\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        console.log(data); setDoctoresData(data);\r\n      })\r\n      .finally(() => setILoading(false))\r\n  }\r\n\r\n  const editDoctor = async (rd) => {\r\n    let d = JSON.parse(JSON.stringify(rd));\r\n    d.horarios.forEach((h) => { h.sucursal = h.sucursal._id })\r\n    console.log('Horarios before edit: ', d.horarios);\r\n    await setDoctorForEdit(d)\r\n    setIsModalVisible(true);\r\n    console.log('Editar medico: ', d)\r\n  }\r\n\r\n  const deleteDoctor = (doctor) => {\r\n    deleteData('/users/remove/' + doctor._id).then(() => {\r\n      console.log('removed: ', doctor._id);\r\n      getDoctoresData()\r\n    })\r\n  }\r\n\r\n\r\n\r\n  const handleCancel = () => {\r\n    setIsModalVisible(false);\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Foto',\r\n      key: 'avatar',\r\n      render: (_, { avatar }) => (\r\n        avatar.lenght > 12 ?\r\n          <img src={'https://api.recreamed.com/images/' + avatar} alt=\"Logo\" width={64} />\r\n          : <Avatar icon={<UserOutlined />} size={64} className='btnIconCentered' />\r\n\r\n      ),\r\n    },\r\n    {\r\n      title: 'Nombre',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n    },\r\n    {\r\n      title: 'Correo',\r\n      dataIndex: 'email',\r\n      key: 'email',\r\n    },\r\n    {\r\n      title: 'Telefono',\r\n      dataIndex: 'telefono',\r\n      key: 'telefono',\r\n    },\r\n    {\r\n      title: 'Horarios',\r\n      dataIndex: 'horarios',\r\n      key: 'horarios',\r\n      render: (_, record) => (\r\n\r\n        <p>{record.horarios.map((h) => { return <Space size='small'><p><HomeOutlined style={{ marginTop: -6 }} />{h.sucursal.nombre}</p><p><ClockCircleOutlined />{h.horario}</p></Space> })}</p>\r\n\r\n      ),\r\n    },\r\n    {\r\n      title: 'Opciones',\r\n      key: 'action',\r\n      render: (_, record) => (\r\n        <Space size=\"middle\">\r\n          <Button size='small' onClick={() => { editDoctor(record) }}>\r\n            Editar\r\n          </Button>\r\n          <Popconfirm\r\n            title=\"Seguro que quiere borrar este doctor?\"\r\n            onConfirm={() => deleteDoctor(record)}\r\n            // onCancel={cancel}\r\n            okText=\"Si\"\r\n            cancelText=\"No\"\r\n          >\r\n            <Button danger size='small'>\r\n              Borrar\r\n            </Button>\r\n          </Popconfirm>\r\n\r\n        </Space>\r\n      ),\r\n    }\r\n  ];\r\n  return (\r\n    <div>\r\n      <h4>Doctores</h4>\r\n      {isLoading ? <Loading /> :\r\n        <Table dataSource={doctoresData} columns={columns} />\r\n      }\r\n\r\n      <Modal width={900} title=\"Editar Medico\" visible={isModalVisible} onCancel={handleCancel} destroyOnClose={true} footer={[]}>\r\n        <Register medico={doctorForEdit} setIsModalVisible={setIsModalVisible} />\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n","import { React, Component } from 'react';\r\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\r\nimport { Layout, Menu } from 'antd';\r\nimport { TeamOutlined, UserAddOutlined, MenuOutlined } from '@ant-design/icons';\r\n\r\nimport Register from './register.doctor';\r\nimport Dash from './dash.doctors';\r\n\r\nconst { Header, Content, Footer, Sider } = Layout;\r\n\r\nclass SideMenu extends Component {\r\n  handleClick = e => {\r\n    console.log('click ', e);\r\n  };\r\n\r\n  state = {\r\n    collapsed: false,\r\n  };\r\n\r\n  onCollapse = (collapsed) => {\r\n    this.setState({ collapsed });\r\n  }\r\n  toggle = () => {\r\n    this.setState({\r\n      collapsed: !this.state.collapsed,\r\n    });\r\n  }\r\n  render() {\r\n    return (\r\n      <Router>\r\n        <Layout style={{ minHeight: '100vh' }}>\r\n          <Sider\r\n            theme=\"light\"\r\n            collapsible\r\n            collapsed={this.state.collapsed}\r\n            onCollapse={this.onCollapse}>\r\n            <div className=\"logo\" />\r\n            <Menu defaultSelectedKeys={['1']} mode=\"inline\">\r\n              <Menu.Item icon={<TeamOutlined />} key=\"1\">\r\n                <span>Médicos</span>\r\n                <Link to=\"/doctores\" />\r\n              </Menu.Item>\r\n              <Menu.Item icon={<UserAddOutlined />} key=\"2\">\r\n                <span>Registrar Médico</span>\r\n                <Link to=\"/registrar\" />\r\n              </Menu.Item>\r\n            </Menu>\r\n            {/* <Menu\r\n        onClick={this.handleClick}\r\n        style={{ width: 256 }}\r\n        defaultSelectedKeys={['1']}\r\n        defaultOpenKeys={['sub1']}\r\n        mode=\"inline\"\r\n      >\r\n        <SubMenu key=\"sub1\" icon={<MailOutlined />} title=\"Navigation One\">\r\n          <Menu.ItemGroup key=\"g1\" title=\"Item 1\">\r\n            <Menu.Item key=\"1\" href=\"/dash\">Option 1 <Link to=\"/meseros\" /> </Menu.Item>\r\n            <Menu.Item key=\"2\">Option 2</Menu.Item>\r\n          </Menu.ItemGroup>\r\n          <Menu.ItemGroup key=\"g2\" title=\"Item 2\">\r\n            <Menu.Item key=\"3\">Option 3</Menu.Item>\r\n            <Menu.Item key=\"4\">Option 4</Menu.Item>\r\n          </Menu.ItemGroup>\r\n        </SubMenu>\r\n        <SubMenu key=\"sub2\" icon={<AppstoreOutlined />} title=\"Navigation Two\">\r\n          <Menu.Item key=\"5\">Option 5</Menu.Item>\r\n          <Menu.Item key=\"6\">Option 6</Menu.Item>\r\n          <SubMenu key=\"sub3\" title=\"Submenu\">\r\n            <Menu.Item key=\"7\">Option 7</Menu.Item>\r\n            <Menu.Item key=\"8\">Option 8</Menu.Item>\r\n          </SubMenu>\r\n        </SubMenu>\r\n        <SubMenu key=\"sub4\" icon={<SettingOutlined />} title=\"Navigation Three\">\r\n          <Menu.Item key=\"9\">Option 9</Menu.Item>\r\n          <Menu.Item key=\"10\">Option 10</Menu.Item>\r\n          <Menu.Item key=\"11\">Option 11</Menu.Item>\r\n          <Menu.Item key=\"12\">Option 12</Menu.Item>\r\n        </SubMenu>\r\n      </Menu> */}\r\n          </Sider>\r\n          <Layout>\r\n\r\n            <Header style={{ background: '#fff', padding: 0, paddingLeft: 16 }}>\r\n              <MenuOutlined className=\"trigger\" style={{ cursor: 'pointer' }} onClick={this.toggle} />\r\n            </Header>\r\n\r\n            <Content style={{ margin: '24px 16px', padding: 24, background: '#fff', minHeight: 280 }}>\r\n              <Route exact path=\"/registrar\" component={Register} />\r\n              <Route path=\"/doctores\" component={Dash} />\r\n            </Content>\r\n\r\n            <Footer style={{ textAlign: 'center' }}>\r\n              RECREAMED ©2021 Created by Realidad Creativa\r\n            </Footer>\r\n          </Layout>\r\n\r\n        </Layout>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SideMenu\r\n\r\n\r\n","import React, { Component } from 'react'\r\n// import {Card } from 'antd'\r\nimport SideMenu from './side.doctors';\r\n\r\nexport class Doctors extends Component {\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div>\r\n                            <SideMenu />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Doctors\r\n","import React, { Component, useState } from 'react'\r\nimport { Form, Input, Button, Row, Col, Upload } from 'antd';\r\nimport { InboxOutlined } from '@ant-design/icons';\r\n// import { Upload } from 'antd';\r\nimport { message } from 'antd';\r\n// import { UploadOutlined } from '@ant-design/icons';\r\nimport { API, sendDataBody, updateData } from '../../resources'\r\nconst { Dragger } = Upload;\r\n\r\n\r\nexport default function Register(props) {\r\n  const [profilePic, setProfilePic] = useState('https://')\r\n\r\n  //Start upload props Upload File\r\n  const dragDropProps = {\r\n    name: 'file',\r\n    multiple: false,\r\n    action: API + 'imagenes/upload', // Production\r\n\r\n    beforeUpload: (file) => {\r\n      const isPNGorJPG = file.type === 'image/png' || file.type === 'image/jpeg';\r\n\r\n      if (!isPNGorJPG) {\r\n        message.error(`${file.name} no es una imagen tipo PNG o JPG`);\r\n      }\r\n\r\n      return isPNGorJPG || Upload.LIST_IGNORE;\r\n    },\r\n    onChange(info) {\r\n      const { status } = info.file;\r\n\r\n      if (status !== 'uploading') {\r\n        console.log(info.file, info.fileList);\r\n      }\r\n\r\n      if (status === 'done') {\r\n        message.success(`${info.file.name} file uploaded successfully.`);\r\n        console.log('New Files: ', info.file.response.file)\r\n        setProfilePic(info.file.response.file)\r\n      } else if (status === 'error') {\r\n        message.error(`${info.file.name} file upload failed.`);\r\n      }\r\n    },\r\n\r\n    onDrop(e) {\r\n      console.log('Dropped files', e.dataTransfer.files);\r\n    },\r\n  };\r\n\r\n  const onFinish = (values) => {\r\n    values.logo = profilePic;\r\n    values.estatus = '1';\r\n    values.delete = '0';\r\n    console.log(\"Ready to send:\", values)\r\n    sendDataBody('sucursales/add', values).then((rs) => {\r\n      // message.success(rs.message || rs.error);\r\n      console.log('resp: ', rs);\r\n      if (rs.message && rs.message === 'Sucursal creada correctamente') window.location.href = '/hospitales'\r\n      else message.warning(rs.message || rs.error)\r\n      console.log('tosend: ', values);\r\n    })\r\n  };\r\n\r\n  const onFinishEdit = (values) => {\r\n    values.logo = profilePic;\r\n    console.log(\"Ready to send editing:\", values)\r\n    updateData('sucursales/update/' + props.hospital._id, values).then(() => {\r\n      props.setModalVisible(false)\r\n    })\r\n  };\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo);\r\n  };\r\n  return (\r\n    <div>\r\n      {props.hospital ? <></> : <h4>Registrar Nuevo Hospital</h4>}\r\n\r\n      <Dragger {...dragDropProps}>\r\n        <p className=\"ant-upload-drag-icon\">\r\n          <InboxOutlined />\r\n        </p>\r\n        <p className=\"ant-upload-text\">Arrastra la imagen con el logotipo o click ara buscar</p>\r\n        <p className=\"ant-upload-hint\">\r\n          Selecciona archivos en formato png, jpeg o webp\r\n        </p>\r\n      </Dragger>\r\n      <br />\r\n      <Form name=\"basic\" labelCol={{ span: 12 }} wrapperCol={{ span: 12 }} initialValues={props.hospital} onFinish={props.hospital ? onFinishEdit : onFinish} onFinishFailed={onFinishFailed} autoComplete=\"off\" >\r\n\r\n        <Row>\r\n          <Col>\r\n\r\n            <Form.Item label=\"Nombre\" name=\"nombre\" rules={[{ required: true, message: 'Please input your username!' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item label=\"RFC\" name=\"rfc\" rules={[{ required: true, message: 'Ingresa RFC' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item label=\"Calle\" name=\"calle\" rules={[{ required: true, message: 'Ingresa nombre de la calle' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item label=\"Numero exterior\" name=\"num_exterior\" rules={[{ required: true, message: 'Ingresa numero exterion' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item label=\"Numero Interior\" name=\"num_interior\" rules={[{ required: false, message: 'Ingresa numero interior' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item label=\"Colonia\" name=\"colonia\" rules={[{ required: true, message: 'Ingresa nombre de colonia' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n          </Col>\r\n\r\n          <Col>\r\n            <Form.Item label=\"Codigo Postal\" name=\"codigo_postal\" rules={[{ required: true, message: 'Ingresa codigo postal' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item label=\"Ciudad Municipio\" name=\"ciudad_municipio\" rules={[{ required: true, message: 'Ingresa ciudad/municipio' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item label=\"Estado\" name=\"estado\" rules={[{ required: true, message: 'Ingresa estado' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item label=\"Telefono\" name=\"telefono\" rules={[{ required: true, message: 'Ingresa numero de telefono' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item label=\"Correo Electronico\" name=\"email\" rules={[{ required: true, message: 'Correo@Hopspital.com' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item label=\"Sitio Web\" name=\"sitio_web\" rules={[{ required: true, message: 'www.hospital.com' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n          </Col>\r\n        </Row>\r\n\r\n\r\n\r\n\r\n        <Form.Item wrapperCol={{ offset: 9 }}>\r\n\r\n\r\n          <Button type=\"primary\" htmlType=\"submit\" style={{ marginRight: 8 }}>\r\n            Guardar\r\n          </Button>\r\n          {props.setModalVisible && <Button onClick={() => props.setModalVisible(false)} >Cancelar</Button>}\r\n        </Form.Item>\r\n      </Form>\r\n    </div >\r\n  )\r\n}\r\n\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Table, Space, Button, Modal, Popconfirm } from 'antd';\r\nimport Loading from '../../loading'\r\nimport { API, deleteData } from '../../resources'\r\nimport Register from './register.hospital';\r\n\r\nexport default function Dash() {\r\n\r\n  const [isLoading, setILoading] = useState(true);\r\n  const [hospitalesData, setHospitalesData] = useState([]);\r\n  const [hospitalForEdit, setHospitalForEdit] = useState(null)\r\n  const [isModalVisible, setIsModalVisible] = useState(false)\r\n\r\n  useEffect(() => {\r\n    getHospitalesData()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    getHospitalesData()\r\n  }, [isModalVisible])\r\n\r\n  const getHospitalesData = () => {\r\n    fetch(API + 'sucursales')\r\n      .then(response => response.json())\r\n      .then(data => { console.log(data); setHospitalesData(data); setILoading(false); });\r\n  }\r\n\r\n  // Edit Hospital\r\n  const editHospital = async (h) => {\r\n    await setHospitalForEdit(h)\r\n    setIsModalVisible(true);\r\n    console.log('Editar hospital: ', h)\r\n  }\r\n  // Confitmar Borrar\r\n  const confirm = (e) => {\r\n    console.log('toDel: ', e);\r\n    deleteData('sucursales/remove/' + e._id).then(() => getHospitalesData())\r\n  };\r\n  const cancel = (e) => {\r\n    console.log(e);\r\n  };\r\n\r\n  const handleOk = () => {\r\n    setIsModalVisible(false);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setIsModalVisible(false);\r\n  };\r\n\r\n  //Start tabla data\r\n  const columns = [\r\n    {\r\n      title: 'Logo',\r\n      key: 'logo',\r\n      render: (_, record) => (\r\n        <img src={'https://api.recreamed.com/images/' + record.logo} alt=\"Logo\" width={64} />\r\n      ),\r\n    },\r\n    {\r\n      title: 'Sucursal',\r\n      dataIndex: 'nombre'\r\n    },\r\n    {\r\n      title: 'Ciudad_municipio',\r\n      dataIndex: 'ciudad_municipio',\r\n      defaultSortOrder: 'descend',\r\n    },\r\n    {\r\n      title: 'Colonia',\r\n      dataIndex: 'colonia',\r\n    },\r\n\r\n    {\r\n      title: 'calle',\r\n      dataIndex: 'calle',\r\n    },\r\n    {\r\n      title: 'Telefono',\r\n      dataIndex: 'telefono',\r\n      defaultSortOrder: 'descend',\r\n    },\r\n    {\r\n      title: 'Opciones',\r\n      key: 'action',\r\n      render: (_, record) => (\r\n        <Space size=\"middle\">\r\n          <Button size='small' onClick={() => { editHospital(record) }}>\r\n            Editar\r\n          </Button>\r\n          <Popconfirm\r\n            title=\"Seguro que quiere borrar esta sucursal?\"\r\n            onConfirm={() => confirm(record)}\r\n            onCancel={cancel}\r\n            okText=\"Si\"\r\n            cancelText=\"No\"\r\n          >\r\n            <Button danger size='small'>\r\n              Borrar\r\n            </Button>\r\n          </Popconfirm>\r\n\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  const onChange = (pagination, filters, sorter, extra) => {\r\n    console.log('params', pagination, filters, sorter, extra);\r\n  }\r\n  //End tabla data\r\n\r\n  return (\r\n    isLoading ? <Loading /> :\r\n      <div>\r\n        <h1>Hospitales</h1>\r\n        <Table columns={columns} dataSource={hospitalesData} onChange={onChange} />\r\n\r\n        <Modal width={800} title=\"Editar Hospital\" visible={isModalVisible} onOk={handleOk} onCancel={handleCancel} destroyOnClose={true} footer={[]}>\r\n          <Register hospital={hospitalForEdit} setModalVisible={setIsModalVisible} />\r\n        </Modal>\r\n      </div>\r\n  )\r\n\r\n}\r\n\r\n","import { React, Component } from 'react';\r\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\r\nimport { Layout, Menu } from 'antd';\r\nimport { BankOutlined, AppstoreAddOutlined, MenuOutlined } from '@ant-design/icons';\r\n\r\nimport Register from './register.hospital';\r\nimport Dash from './dash.hospitals';\r\n\r\nconst { Header, Content, Footer, Sider } = Layout;\r\n\r\nclass SideMenu extends Component {\r\n  handleClick = e => {\r\n    console.log('click ', e);\r\n  };\r\n\r\n  state = {\r\n    collapsed: false,\r\n  };\r\n\r\n  onCollapse = (collapsed) => {\r\n    this.setState({ collapsed });\r\n  }\r\n  toggle = () => {\r\n    this.setState({\r\n      collapsed: !this.state.collapsed,\r\n    });\r\n  }\r\n  render() {\r\n    return (\r\n      <Router>\r\n        <Layout style={{ minHeight: '100vh' }}>\r\n          <Sider\r\n            theme=\"light\"\r\n            collapsible\r\n            collapsed={this.state.collapsed}\r\n            onCollapse={this.onCollapse}>\r\n            <div className=\"logo\" />\r\n            <Menu defaultSelectedKeys={['1']} mode=\"inline\">\r\n              <Menu.Item icon={<BankOutlined />} key=\"1\">\r\n                {/* <Icon type=\"pie-chart\" /> */}\r\n                <span>Hospitales</span>\r\n                <Link to=\"/hospitales\" />\r\n              </Menu.Item>\r\n              <Menu.Item icon={<AppstoreAddOutlined />} key=\"2\">\r\n                {/* <Icon type=\"desktop\" /> */}\r\n                <span>Registrar Hospital</span>\r\n                <Link to=\"/registrar\" />\r\n              </Menu.Item>\r\n            </Menu>\r\n            {/* <Menu\r\n        onClick={this.handleClick}\r\n        style={{ width: 256 }}\r\n        defaultSelectedKeys={['1']}\r\n        defaultOpenKeys={['sub1']}\r\n        mode=\"inline\"\r\n      >\r\n        <SubMenu key=\"sub1\" icon={<MailOutlined />} title=\"Navigation One\">\r\n          <Menu.ItemGroup key=\"g1\" title=\"Item 1\">\r\n            <Menu.Item key=\"1\" href=\"/dash\">Option 1 <Link to=\"/meseros\" /> </Menu.Item>\r\n            <Menu.Item key=\"2\">Option 2</Menu.Item>\r\n          </Menu.ItemGroup>\r\n          <Menu.ItemGroup key=\"g2\" title=\"Item 2\">\r\n            <Menu.Item key=\"3\">Option 3</Menu.Item>\r\n            <Menu.Item key=\"4\">Option 4</Menu.Item>\r\n          </Menu.ItemGroup>\r\n        </SubMenu>\r\n        <SubMenu key=\"sub2\" icon={<AppstoreOutlined />} title=\"Navigation Two\">\r\n          <Menu.Item key=\"5\">Option 5</Menu.Item>\r\n          <Menu.Item key=\"6\">Option 6</Menu.Item>\r\n          <SubMenu key=\"sub3\" title=\"Submenu\">\r\n            <Menu.Item key=\"7\">Option 7</Menu.Item>\r\n            <Menu.Item key=\"8\">Option 8</Menu.Item>\r\n          </SubMenu>\r\n        </SubMenu>\r\n        <SubMenu key=\"sub4\" icon={<SettingOutlined />} title=\"Navigation Three\">\r\n          <Menu.Item key=\"9\">Option 9</Menu.Item>\r\n          <Menu.Item key=\"10\">Option 10</Menu.Item>\r\n          <Menu.Item key=\"11\">Option 11</Menu.Item>\r\n          <Menu.Item key=\"12\">Option 12</Menu.Item>\r\n        </SubMenu>\r\n      </Menu> */}\r\n          </Sider>\r\n          <Layout>\r\n            <Header style={{ background: '#fff', padding: 0, paddingLeft: 16 }}>\r\n              <MenuOutlined className=\"trigger\"\r\n                style={{ cursor: 'pointer' }}\r\n                onClick={this.toggle} />\r\n              {/* { this.state.collapsed ? (<MenuUnfoldOutlined onClick={this.toggle} style={{ cursor: 'pointer' }}/>) : (<MenuFoldOutlined onClick={this.toggle} style={{ cursor: 'pointer' }}/>) } */}\r\n              {/* <Header > */}\r\n              {/* <Icon\r\n                        className=\"trigger\"\r\n                        type={this.state.collapsed ? 'menu-unfold' : 'menu-fold'}\r\n                        style={{ cursor: 'pointer' }}\r\n                        onClick={this.toggle}\r\n                    /> */}\r\n            </Header>\r\n            <Content style={{ margin: '24px 16px', padding: 24, background: '#fff', minHeight: 280 }}>\r\n              <Route exact path=\"/registrar\" component={Register} />\r\n              <Route path=\"/hospitales\" component={Dash} />\r\n            </Content>\r\n            <Footer style={{ textAlign: 'center' }}>\r\n              Ant Design ©2016 Created by Ant UED\r\n            </Footer>\r\n          </Layout>\r\n\r\n        </Layout>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SideMenu\r\n\r\n\r\n","import React, { Component } from \"react\";\r\nimport SideMenu from \"./side.hospitals\";\r\n\r\nexport class Hospitales extends Component {\r\n    \r\n  render() {\r\n    return (\r\n      <div>\r\n        <SideMenu />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Hospitales;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Form, Input, Button, message, Space, Row, Col, Upload } from 'antd'\r\nimport { MinusCircleOutlined, PlusOutlined, InboxOutlined } from '@ant-design/icons';\r\nimport { Divider, Select } from 'antd';\r\nimport { S_API, getData, API } from '../../resources'\r\nconst { Option } = Select;\r\nconst { Dragger } = Upload;\r\n\r\n\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    xs: {\r\n      span: 24,\r\n    },\r\n    sm: {\r\n      span: 8,\r\n    },\r\n  },\r\n  wrapperCol: {\r\n    xs: {\r\n      span: 24,\r\n    },\r\n    sm: {\r\n      span: 14,\r\n    },\r\n  },\r\n};\r\nconst tailFormItemLayout = {\r\n  wrapperCol: {\r\n    xs: {\r\n      span: 24,\r\n      offset: 0,\r\n    },\r\n    sm: {\r\n      span: 16,\r\n      offset: 8,\r\n    },\r\n  },\r\n};\r\nexport default function Register(props) {\r\n\r\n  const [form] = Form.useForm();\r\n\r\n  const [sucursales, setSucursales] = useState([]);\r\n  const [sucursalesLoading, setSucursalesLoading] = useState(true);\r\n  const [avatar, setAvatar] = useState(props.medico ? props.medico.avatar : 'https://')\r\n\r\n  //Start upload props Upload File\r\n  const dragDropProps = {\r\n    name: 'file',\r\n    multiple: false,\r\n    action: API + 'imagenes/upload',\r\n\r\n    onChange(info) {\r\n      const { status } = info.file;\r\n\r\n      if (status !== 'uploading') {\r\n        console.log(info.file, info.fileList);\r\n      }\r\n\r\n      if (status === 'done') {\r\n        message.success(`${info.file.name} file uploaded successfully.`);\r\n        console.log('New Files: ', info.file.response.file)\r\n        setAvatar(info.file.response.file)\r\n      } else if (status === 'error') {\r\n        message.error(`${info.file.name} file upload failed.`);\r\n      }\r\n    },\r\n\r\n    onDrop(e) {\r\n      console.log('Dropped files', e.dataTransfer.files);\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log('received Medic: ', props.medico);\r\n    getData('sucursales').then((rs) => { setSucursales(rs); setSucursalesLoading(false) })\r\n  }, [])\r\n\r\n\r\n\r\n  const onFinish = (values) => {\r\n    values.avatar = avatar;\r\n    values.estatus = '1';\r\n    values.rol = 'Administrador';\r\n    delete values.confirm;\r\n    delete values.prefix;\r\n\r\n    console.log('ready to send', values)\r\n    fetch(S_API + 'register', {\r\n      method: 'POST',\r\n      body: JSON.stringify(values),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log('Success:', response);\r\n        response.message && response.message === 'Usuario creado correctamente' ?\r\n          window.location.href = 'doctores' : message.error(response.error);\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  };\r\n\r\n  const onFinishEdit = (values) => {\r\n    values.avatar = avatar;\r\n    // values.estatus = '1';\r\n    // values.rol = 'Medico';\r\n    // delete values.confirm;\r\n    // delete values.prefix;\r\n\r\n    console.log('ready to send', values)\r\n    fetch(API + 'users/updateUser/' + props.medico._id, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(values),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log('Success:', response);\r\n        response.message && response.message === 'Usuario actualizado correctamente' ?\r\n          props.setIsModalVisible(false) : message.error(response.error);\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  };\r\n\r\n  const prefixSelector = (\r\n    <Form.Item name=\"prefix\" noStyle>\r\n      <Select\r\n        style={{\r\n          width: 70,\r\n        }}\r\n      >\r\n        <Option value=\"+52\">+52</Option>\r\n      </Select>\r\n    </Form.Item>\r\n  );\r\n  const suffixSelector = (\r\n    <Form.Item name=\"suffix\" noStyle>\r\n      <Select\r\n        style={{\r\n          width: 70,\r\n        }}\r\n      >\r\n        <Option value=\"USD\">$</Option>\r\n        <Option value=\"CNY\">¥</Option>\r\n      </Select>\r\n    </Form.Item>\r\n  );\r\n\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo);\r\n  };\r\n  return (\r\n    <div>\r\n      {\r\n        props.medico ?\r\n          <></> : <h1>Registrar doctor</h1>\r\n      }\r\n      <br />\r\n      <Dragger {...dragDropProps}>\r\n        <p className=\"ant-upload-drag-icon\">\r\n          <InboxOutlined />\r\n        </p>\r\n        <p className=\"ant-upload-text\">Arrastra la imagen de perfil o click ara buscar</p>\r\n        <p className=\"ant-upload-hint\">\r\n          Selecciona archivos en formato png, jpeg o webp\r\n        </p>\r\n      </Dragger>\r\n      <br />\r\n      <Form\r\n        {...formItemLayout}\r\n        form={form}\r\n        name=\"register\"\r\n        onFinish={props.medico ? onFinishEdit : onFinish}\r\n        // initialValues={{ horarios: [{ sucursal: '', horario: '' }], prefix: '+52' }}\r\n        initialValues={props.medico}\r\n        scrollToFirstError\r\n      >\r\n\r\n        <Row>\r\n\r\n          <Col span={11}>\r\n            <Form.Item name=\"name\" label=\"Nombre\" rules={[{ required: true, message: 'Ingresa Nombre y apellidos' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item name=\"email\" label=\"Correo\" rules={[{ type: 'email', message: 'Ingresa un corrreo electronico valido' }, { required: true, message: 'Please input your E-mail!' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            {\r\n              props.medico ? <></> : <>\r\n                <Form.Item name=\"password\" label=\"Contraseña\" rules={[{ required: true, message: 'Por favor ingrese su contraseña!', },]} hasFeedback >\r\n                  <Input.Password />\r\n                </Form.Item>\r\n\r\n                <Form.Item name=\"confirm\" label=\"Confirmar contraseña\" dependencies={['password']} hasFeedback\r\n                  rules={[\r\n                    {\r\n                      required: true,\r\n                      message: 'Please confirm your password!',\r\n                    },\r\n                    ({ getFieldValue }) => ({\r\n                      validator(_, value) {\r\n                        if (!value || getFieldValue('password') === value) {\r\n                          return Promise.resolve();\r\n                        }\r\n                        return Promise.reject(new Error('Las contraseñas deben coincidir!'));\r\n                      },\r\n                    }),\r\n                  ]}\r\n                >\r\n                  <Input.Password />\r\n                </Form.Item>\r\n              </>\r\n            }\r\n\r\n\r\n            <Form.Item name=\"telefono\" label=\"Telefono\" rules={[{ required: true, message: 'Ingresa el numero de telefono correcto' },]}>\r\n              <Input addonBefore={prefixSelector} style={{ width: '100%', }} />\r\n            </Form.Item>\r\n\r\n\r\n\r\n\r\n          </Col>\r\n          <Col span={11}>\r\n            <Form.Item label=\"horarios\" rules={[{ required: true, message: 'Ingresa al menos un horario', },]}>\r\n              <Form.List name=\"horarios\" label=\"horarios list\"\r\n              >\r\n                {(fields, { add, remove }) => (\r\n                  <>\r\n                    {fields.map(({ key, name, ...restField }) => (\r\n                      <Space key={key} style={{ display: 'flex', marginBottom: 8 }} align=\"baseline\">\r\n                        <Form.Item\r\n                          {...restField}\r\n                          name={[name, 'sucursal']}\r\n                          rules={[{ required: true, message: 'Elije Sucursal' }]}\r\n                        >\r\n                          <Select placeholder=\"Elije Sucursal\" style={{ width: '120px' }} >\r\n                            {sucursalesLoading ? \"Cargando\" :\r\n                              sucursales.map(s => <Option value={s._id}>{s.nombre}</Option>)\r\n                            }\r\n                          </Select>\r\n                        </Form.Item>\r\n                        <Form.Item\r\n                          {...restField}\r\n                          name={[name, 'horario']}\r\n                          rules={[{ required: false, message: 'Missing last name' }]}\r\n                        >\r\n                          <Input placeholder=\"Horario\" />\r\n                        </Form.Item>\r\n                        <MinusCircleOutlined onClick={() => remove(name)} />\r\n                      </Space>\r\n                    ))}\r\n                    <Form.Item>\r\n                      <Button type=\"dashed\" onClick={() => add()} block icon={<PlusOutlined />}>\r\n                        Agregar Horario\r\n                      </Button>\r\n                    </Form.Item>\r\n                  </>\r\n                )}\r\n              </Form.List>\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"cedula\" label=\"Cedula\" rules={[{ required: false, message: 'Ingresa cedula' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            {/* Not Necesary For Medic. He'll be in hospital direction */}\r\n            {/* <Form.Item name=\"calle\" label=\"Calle\" rules={[{ required: true, message: 'Ingresa calle', whitespace: true }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"numexterior\" label=\"Num Exterior\" rules={[{ required: true, message: 'Ingresa numero exterior' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"numinterior\" label=\"Num Interior\" rules={[{ required: true, message: 'Ingresa numinterior' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item label=\"Colonia\" name=\"colonia\" rules={[{ required: true, message: 'Please input your colobnia!' }]}            >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"estado\" label=\"Estado\" rules={[{ required: true, message: 'Apellido materno', },]}>\r\n              <Select placeholder=\"Elije tu estado\">\r\n                {estados.map(e => <Option value={e}>{e}</Option>)}\r\n              </Select>\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"municipio\" label=\"Municipio\" rules={[{ required: true, message: 'Ingresa tu municipio' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"codigopostal\" label=\"Codigo Postal\" rules={[{ required: true, message: 'Ingresa codigopostal', },]}>\r\n              <InputNumber addonAfter={suffixSelector} style={{ width: '100%', }} />\r\n            </Form.Item> */}\r\n\r\n            <Form.Item name=\"certificacion\" label=\"Certificacion\" rules={[{ required: false, message: 'Ingresa tu certificacion' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"universidad\" label=\"Universidad\" rules={[{ required: false, message: 'Ingresa tu universidad' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item {...tailFormItemLayout}>\r\n              {\r\n                props.setIsModalVisible && <Button onClick={() => props.setIsModalVisible(false)} style={{ marginRight: 6 }}>\r\n                  Cancelar\r\n                </Button>\r\n              }\r\n              <Button type=\"primary\" htmlType=\"submit\">\r\n                Guardar\r\n              </Button>\r\n            </Form.Item>\r\n          </Col>\r\n\r\n        </Row>\r\n\r\n\r\n\r\n\r\n\r\n        {/* <Form.Item\r\n          name=\"agreement\"\r\n          valuePropName=\"checked\"\r\n          rules={[\r\n            {\r\n              validator: (_, value) =>\r\n                value ? Promise.resolve() : Promise.reject(new Error('Should accept agreement')),\r\n            },\r\n          ]}\r\n          {...tailFormItemLayout}\r\n        >\r\n          <Checkbox>\r\n            He leído y acepto los <a href=\"https://recreamed.com\">terminos y condiciones</a>\r\n          </Checkbox>\r\n        </Form.Item> */}\r\n\r\n\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Table, Space, Button, Popconfirm, Modal, Avatar } from 'antd';\r\nimport { API, deleteData } from '../../resources'\r\nimport Loading from '../../loading';\r\nimport { HomeOutlined, ClockCircleOutlined, UserOutlined } from '@ant-design/icons'\r\nimport Register from './register.admin';\r\n\r\nexport default function Dash() {\r\n\r\n  const [isLoading, setILoading] = useState(true);\r\n  const [doctoresData, setDoctoresData] = useState([]);\r\n  const [doctorForEdit, setDoctorForEdit] = useState(null)\r\n  const [isModalVisible, setIsModalVisible] = useState(false)\r\n\r\n  useEffect(() => { getAdminsData() }, [])\r\n  useEffect(() => { getAdminsData() }, [isModalVisible])\r\n\r\n  const getAdminsData = () => {\r\n    fetch(API + 'users_by_rol/Administrador')\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        console.log(data); setDoctoresData(data);\r\n      })\r\n      .finally(() => setILoading(false))\r\n  }\r\n\r\n  const editDoctor = async (rd) => {\r\n    let d = JSON.parse(JSON.stringify(rd));\r\n    d.horarios.forEach((h) => { h.sucursal = h.sucursal._id })\r\n    console.log('Horarios before edit: ', d.horarios);\r\n    await setDoctorForEdit(d)\r\n    setIsModalVisible(true);\r\n    console.log('Editar medico: ', d)\r\n  }\r\n\r\n  const deleteDoctor = (doctor) => {\r\n    deleteData('/users/remove/' + doctor._id).then(() => {\r\n      console.log('removed: ', doctor._id);\r\n      getAdminsData()\r\n    })\r\n  }\r\n\r\n\r\n\r\n  const handleCancel = () => {\r\n    setIsModalVisible(false);\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Foto',\r\n      key: 'avatar',\r\n      render: (_, { avatar }) => (\r\n        avatar.lenght > 8 ?\r\n          <img src={'https://api.recreamed.com/images/' + avatar} alt=\"Logo\" width={64} /> :\r\n          <Avatar size={64} icon={<UserOutlined />} className='btnIconCentered' />\r\n      ),\r\n    },\r\n    {\r\n      title: 'Nombre',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n    },\r\n    {\r\n      title: 'Correo',\r\n      dataIndex: 'email',\r\n      key: 'email',\r\n    },\r\n    {\r\n      title: 'Telefono',\r\n      dataIndex: 'telefono',\r\n      key: 'telefono',\r\n    },\r\n    {\r\n      title: 'Horarios',\r\n      dataIndex: 'horarios',\r\n      key: 'horarios',\r\n      render: (_, record) => (\r\n\r\n        <p>{record.horarios.map((h) => { return <Space size='small'><p><HomeOutlined style={{ marginTop: -6 }} />{h.sucursal ? h.sucursal.nombre : 'Sin Sucursal'}</p><p><ClockCircleOutlined />{h.horario}</p></Space> })}</p>\r\n\r\n      ),\r\n    },\r\n    {\r\n      title: 'Opciones',\r\n      key: 'action',\r\n      render: (_, record) => (\r\n        <Space size=\"middle\">\r\n          <Button size='small' onClick={() => { editDoctor(record) }}>\r\n            Editar\r\n          </Button>\r\n          <Popconfirm\r\n            title=\"Seguro que quiere borrar este doctor?\"\r\n            onConfirm={() => deleteDoctor(record)}\r\n            // onCancel={cancel}\r\n            okText=\"Si\"\r\n            cancelText=\"No\"\r\n          >\r\n            <Button danger size='small'>\r\n              Borrar\r\n            </Button>\r\n          </Popconfirm>\r\n\r\n        </Space>\r\n      ),\r\n    }\r\n  ];\r\n  return (\r\n    <div>\r\n      <h4>Administradores</h4>\r\n      {isLoading ? <Loading /> :\r\n        <Table dataSource={doctoresData} columns={columns} />\r\n      }\r\n\r\n      <Modal width={900} title=\"Editar Medico\" visible={isModalVisible} onCancel={handleCancel} destroyOnClose={true} footer={[]}>\r\n        <Register medico={doctorForEdit} setIsModalVisible={setIsModalVisible} />\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n","import { React, Component } from 'react';\r\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\r\nimport { Layout, Menu } from 'antd';\r\nimport { TeamOutlined, UserAddOutlined, MenuOutlined } from '@ant-design/icons';\r\n\r\nimport Register from './register.admin';\r\nimport Dash from './dash.admins';\r\n\r\nconst { Header, Content, Footer, Sider } = Layout;\r\n\r\nclass SideMenu extends Component {\r\n  handleClick = e => {\r\n    console.log('click ', e);\r\n  };\r\n\r\n  state = {\r\n    collapsed: false,\r\n  };\r\n\r\n  onCollapse = (collapsed) => {\r\n    this.setState({ collapsed });\r\n  }\r\n  toggle = () => {\r\n    this.setState({\r\n      collapsed: !this.state.collapsed,\r\n    });\r\n  }\r\n  render() {\r\n    return (\r\n      <Router>\r\n        <Layout style={{ minHeight: '100vh' }}>\r\n          <Sider\r\n            theme=\"light\"\r\n            collapsible\r\n            collapsed={this.state.collapsed}\r\n            onCollapse={this.onCollapse}>\r\n            <div className=\"logo\" />\r\n            <Menu defaultSelectedKeys={['1']} mode=\"inline\">\r\n              <Menu.Item icon={<TeamOutlined />} key=\"1\">\r\n                <span>Administradores</span>\r\n                <Link to=\"/administradores\" />\r\n              </Menu.Item>\r\n              <Menu.Item icon={<UserAddOutlined />} key=\"2\">\r\n                <span>Registrar Administrador</span>\r\n                <Link to=\"/registrar\" />\r\n              </Menu.Item>\r\n            </Menu>\r\n            {/* <Menu\r\n        onClick={this.handleClick}\r\n        style={{ width: 256 }}\r\n        defaultSelectedKeys={['1']}\r\n        defaultOpenKeys={['sub1']}\r\n        mode=\"inline\"\r\n      >\r\n        <SubMenu key=\"sub1\" icon={<MailOutlined />} title=\"Navigation One\">\r\n          <Menu.ItemGroup key=\"g1\" title=\"Item 1\">\r\n            <Menu.Item key=\"1\" href=\"/dash\">Option 1 <Link to=\"/meseros\" /> </Menu.Item>\r\n            <Menu.Item key=\"2\">Option 2</Menu.Item>\r\n          </Menu.ItemGroup>\r\n          <Menu.ItemGroup key=\"g2\" title=\"Item 2\">\r\n            <Menu.Item key=\"3\">Option 3</Menu.Item>\r\n            <Menu.Item key=\"4\">Option 4</Menu.Item>\r\n          </Menu.ItemGroup>\r\n        </SubMenu>\r\n        <SubMenu key=\"sub2\" icon={<AppstoreOutlined />} title=\"Navigation Two\">\r\n          <Menu.Item key=\"5\">Option 5</Menu.Item>\r\n          <Menu.Item key=\"6\">Option 6</Menu.Item>\r\n          <SubMenu key=\"sub3\" title=\"Submenu\">\r\n            <Menu.Item key=\"7\">Option 7</Menu.Item>\r\n            <Menu.Item key=\"8\">Option 8</Menu.Item>\r\n          </SubMenu>\r\n        </SubMenu>\r\n        <SubMenu key=\"sub4\" icon={<SettingOutlined />} title=\"Navigation Three\">\r\n          <Menu.Item key=\"9\">Option 9</Menu.Item>\r\n          <Menu.Item key=\"10\">Option 10</Menu.Item>\r\n          <Menu.Item key=\"11\">Option 11</Menu.Item>\r\n          <Menu.Item key=\"12\">Option 12</Menu.Item>\r\n        </SubMenu>\r\n      </Menu> */}\r\n          </Sider>\r\n          <Layout>\r\n\r\n            <Header style={{ background: '#fff', padding: 0, paddingLeft: 16 }}>\r\n              <MenuOutlined className=\"trigger\" style={{ cursor: 'pointer' }} onClick={this.toggle} />\r\n            </Header>\r\n\r\n            <Content style={{ margin: '24px 16px', padding: 24, background: '#fff', minHeight: 280 }}>\r\n              <Route exact path=\"/registrar\" component={Register} />\r\n              <Route path=\"/administradores\" component={Dash} />\r\n            </Content>\r\n\r\n            <Footer style={{ textAlign: 'center' }}>\r\n              RECREAMED ©2021 Created by Realidad Creativa\r\n            </Footer>\r\n          </Layout>\r\n\r\n        </Layout>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SideMenu\r\n\r\n\r\n","import React, { Component } from 'react'\r\n// import {Card } from 'antd'\r\nimport SideMenu from './side.admins';\r\n\r\nexport class Admins extends Component {\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div>\r\n                            <SideMenu />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Admins\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Form, Input, Button, message, Space, Row, Col, Upload } from 'antd'\r\nimport { MinusCircleOutlined, PlusOutlined, InboxOutlined } from '@ant-design/icons';\r\nimport { Divider, Select } from 'antd';\r\nimport { S_API, getData, API } from '../../resources'\r\nconst { Option } = Select;\r\nconst { Dragger } = Upload;\r\n\r\n\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    xs: {\r\n      span: 24,\r\n    },\r\n    sm: {\r\n      span: 8,\r\n    },\r\n  },\r\n  wrapperCol: {\r\n    xs: {\r\n      span: 24,\r\n    },\r\n    sm: {\r\n      span: 14,\r\n    },\r\n  },\r\n};\r\nconst tailFormItemLayout = {\r\n  wrapperCol: {\r\n    xs: {\r\n      span: 24,\r\n      offset: 0,\r\n    },\r\n    sm: {\r\n      span: 16,\r\n      offset: 8,\r\n    },\r\n  },\r\n};\r\nexport default function Register(props) {\r\n\r\n  const [form] = Form.useForm();\r\n\r\n  const [sucursales, setSucursales] = useState([]);\r\n  const [sucursalesLoading, setSucursalesLoading] = useState(true);\r\n  const [avatar, setAvatar] = useState(props.medico ? props.medico.avatar : 'https://')\r\n\r\n  //Start upload props Upload File\r\n  const dragDropProps = {\r\n    name: 'file',\r\n    multiple: false,\r\n    action: API + 'imagenes/upload',\r\n\r\n    onChange(info) {\r\n      const { status } = info.file;\r\n\r\n      if (status !== 'uploading') {\r\n        console.log(info.file, info.fileList);\r\n      }\r\n\r\n      if (status === 'done') {\r\n        message.success(`${info.file.name} file uploaded successfully.`);\r\n        console.log('New Files: ', info.file.response.file)\r\n        setAvatar(info.file.response.file)\r\n      } else if (status === 'error') {\r\n        message.error(`${info.file.name} file upload failed.`);\r\n      }\r\n    },\r\n\r\n    onDrop(e) {\r\n      console.log('Dropped files', e.dataTransfer.files);\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log('received Medic: ', props.medico);\r\n    getData('sucursales').then((rs) => { setSucursales(rs); setSucursalesLoading(false) })\r\n  }, [])\r\n\r\n\r\n\r\n  const onFinish = (values) => {\r\n    values.avatar = avatar;\r\n    values.estatus = '1';\r\n    values.rol = 'Recepcion';\r\n    delete values.confirm;\r\n    delete values.prefix;\r\n\r\n    console.log('ready to send', values)\r\n    fetch(S_API + 'register', {\r\n      method: 'POST',\r\n      body: JSON.stringify(values),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log('Success:', response);\r\n        response.message && response.message === 'Usuario creado correctamente' ?\r\n          window.location.href = 'recepcionistas' : message.error(response.error);\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  };\r\n\r\n  const onFinishEdit = (values) => {\r\n    values.avatar = avatar;\r\n    // values.estatus = '1';\r\n    // values.rol = 'Medico';\r\n    // delete values.confirm;\r\n    // delete values.prefix;\r\n\r\n    console.log('ready to send', values)\r\n    fetch(API + 'users/updateUser/' + props.medico._id, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(values),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log('Success:', response);\r\n        response.message && response.message === 'Usuario actualizado correctamente' ?\r\n          props.setIsModalVisible(false) : message.error(response.error);\r\n      })\r\n      .catch(error => console.error('Error:', error))\r\n  };\r\n\r\n  const prefixSelector = (\r\n    <Form.Item name=\"prefix\" noStyle>\r\n      <Select\r\n        style={{\r\n          width: 70,\r\n        }}\r\n      >\r\n        <Option value=\"+52\">+52</Option>\r\n      </Select>\r\n    </Form.Item>\r\n  );\r\n  const suffixSelector = (\r\n    <Form.Item name=\"suffix\" noStyle>\r\n      <Select\r\n        style={{\r\n          width: 70,\r\n        }}\r\n      >\r\n        <Option value=\"USD\">$</Option>\r\n        <Option value=\"CNY\">¥</Option>\r\n      </Select>\r\n    </Form.Item>\r\n  );\r\n\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo);\r\n  };\r\n  return (\r\n    <div>\r\n      {\r\n        props.medico ?\r\n          <></> : <h1>Registrar Recepcionista</h1>\r\n      }\r\n      <br />\r\n      <Dragger {...dragDropProps}>\r\n        <p className=\"ant-upload-drag-icon\">\r\n          <InboxOutlined />\r\n        </p>\r\n        <p className=\"ant-upload-text\">Arrastra la imagen de perfil o click ara buscar</p>\r\n        <p className=\"ant-upload-hint\">\r\n          Selecciona archivos en formato png, jpeg o webp\r\n        </p>\r\n      </Dragger>\r\n      <br />\r\n      <Form\r\n        {...formItemLayout}\r\n        form={form}\r\n        name=\"register\"\r\n        onFinish={props.medico ? onFinishEdit : onFinish}\r\n        // initialValues={{ horarios: [{ sucursal: '', horario: '' }], prefix: '+52' }}\r\n        initialValues={props.medico}\r\n        scrollToFirstError\r\n      >\r\n\r\n        <Row>\r\n\r\n          <Col span={11}>\r\n            <Form.Item name=\"name\" label=\"Nombre\" rules={[{ required: true, message: 'Ingresa Nombre y apellidos' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item name=\"email\" label=\"Correo\" rules={[{ type: 'email', message: 'Ingresa un corrreo electronico valido' }, { required: true, message: 'Please input your E-mail!' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            {\r\n              props.medico ? <></> : <>\r\n                <Form.Item name=\"password\" label=\"Contraseña\" rules={[{ required: true, message: 'Por favor ingrese su contraseña!', },]} hasFeedback >\r\n                  <Input.Password />\r\n                </Form.Item>\r\n\r\n                <Form.Item name=\"confirm\" label=\"Confirmar contraseña\" dependencies={['password']} hasFeedback\r\n                  rules={[\r\n                    {\r\n                      required: true,\r\n                      message: 'Please confirm your password!',\r\n                    },\r\n                    ({ getFieldValue }) => ({\r\n                      validator(_, value) {\r\n                        if (!value || getFieldValue('password') === value) {\r\n                          return Promise.resolve();\r\n                        }\r\n                        return Promise.reject(new Error('Las contraseñas deben coincidir!'));\r\n                      },\r\n                    }),\r\n                  ]}\r\n                >\r\n                  <Input.Password />\r\n                </Form.Item>\r\n              </>\r\n            }\r\n\r\n\r\n            <Form.Item name=\"telefono\" label=\"Telefono\" rules={[{ required: true, message: 'Ingresa el numero de telefono correcto' },]}>\r\n              <Input addonBefore={prefixSelector} style={{ width: '100%', }} />\r\n            </Form.Item>\r\n\r\n\r\n\r\n\r\n          </Col>\r\n          <Col span={11}>\r\n            <Form.Item label=\"horarios\" rules={[{ required: true, message: 'Ingresa al menos un horario', },]}>\r\n              <Form.List name=\"horarios\" label=\"horarios list\"\r\n              >\r\n                {(fields, { add, remove }) => (\r\n                  <>\r\n                    {fields.map(({ key, name, ...restField }) => (\r\n                      <Space key={key} style={{ display: 'flex', marginBottom: 8 }} align=\"baseline\">\r\n                        <Form.Item\r\n                          {...restField}\r\n                          name={[name, 'sucursal']}\r\n                          rules={[{ required: true, message: 'Elije Sucursal' }]}\r\n                        >\r\n                          <Select placeholder=\"Elije Sucursal\" style={{ width: '120px' }} >\r\n                            {sucursalesLoading ? \"Cargando\" :\r\n                              sucursales.map(s => <Option value={s._id}>{s.nombre}</Option>)\r\n                            }\r\n                          </Select>\r\n                        </Form.Item>\r\n                        <Form.Item\r\n                          {...restField}\r\n                          name={[name, 'horario']}\r\n                          rules={[{ required: false, message: 'Missing last name' }]}\r\n                        >\r\n                          <Input placeholder=\"Horario\" />\r\n                        </Form.Item>\r\n                        <MinusCircleOutlined onClick={() => remove(name)} />\r\n                      </Space>\r\n                    ))}\r\n                    <Form.Item>\r\n                      <Button type=\"dashed\" onClick={() => add()} block icon={<PlusOutlined />}>\r\n                        Agregar Horario\r\n                      </Button>\r\n                    </Form.Item>\r\n                  </>\r\n                )}\r\n              </Form.List>\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"cedula\" label=\"Cedula\" rules={[{ required: false, message: 'Ingresa cedula' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            {/* Not Necesary For Medic. He'll be in hospital direction */}\r\n            {/* <Form.Item name=\"calle\" label=\"Calle\" rules={[{ required: true, message: 'Ingresa calle', whitespace: true }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"numexterior\" label=\"Num Exterior\" rules={[{ required: true, message: 'Ingresa numero exterior' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"numinterior\" label=\"Num Interior\" rules={[{ required: true, message: 'Ingresa numinterior' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item label=\"Colonia\" name=\"colonia\" rules={[{ required: true, message: 'Please input your colobnia!' }]}            >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"estado\" label=\"Estado\" rules={[{ required: true, message: 'Apellido materno', },]}>\r\n              <Select placeholder=\"Elije tu estado\">\r\n                {estados.map(e => <Option value={e}>{e}</Option>)}\r\n              </Select>\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"municipio\" label=\"Municipio\" rules={[{ required: true, message: 'Ingresa tu municipio' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"codigopostal\" label=\"Codigo Postal\" rules={[{ required: true, message: 'Ingresa codigopostal', },]}>\r\n              <InputNumber addonAfter={suffixSelector} style={{ width: '100%', }} />\r\n            </Form.Item> */}\r\n\r\n            <Form.Item name=\"certificacion\" label=\"Certificacion\" rules={[{ required: false, message: 'Ingresa tu certificacion' }]}>\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item name=\"universidad\" label=\"Universidad\" rules={[{ required: false, message: 'Ingresa tu universidad' }]} >\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item {...tailFormItemLayout}>\r\n              {\r\n                props.setIsModalVisible && <Button onClick={() => props.setIsModalVisible(false)} style={{ marginRight: 6 }}>\r\n                  Cancelar\r\n                </Button>\r\n              }\r\n              <Button type=\"primary\" htmlType=\"submit\">\r\n                Guardar\r\n              </Button>\r\n            </Form.Item>\r\n          </Col>\r\n\r\n        </Row>\r\n\r\n\r\n\r\n\r\n\r\n        {/* <Form.Item\r\n          name=\"agreement\"\r\n          valuePropName=\"checked\"\r\n          rules={[\r\n            {\r\n              validator: (_, value) =>\r\n                value ? Promise.resolve() : Promise.reject(new Error('Should accept agreement')),\r\n            },\r\n          ]}\r\n          {...tailFormItemLayout}\r\n        >\r\n          <Checkbox>\r\n            He leído y acepto los <a href=\"https://recreamed.com\">terminos y condiciones</a>\r\n          </Checkbox>\r\n        </Form.Item> */}\r\n\r\n\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Table, Space, Button, Popconfirm, Modal, Avatar } from 'antd';\r\nimport { API, deleteData } from '../../resources'\r\nimport Loading from '../../loading';\r\nimport { HomeOutlined, ClockCircleOutlined, UserOutlined } from '@ant-design/icons'\r\nimport Register from './register.receptionist';\r\n\r\nexport default function Dash() {\r\n\r\n  const [isLoading, setILoading] = useState(true);\r\n  const [doctoresData, setDoctoresData] = useState([]);\r\n  const [doctorForEdit, setDoctorForEdit] = useState(null)\r\n  const [isModalVisible, setIsModalVisible] = useState(false)\r\n\r\n  useEffect(() => { getDoctoresData() }, [])\r\n  useEffect(() => { getDoctoresData() }, [isModalVisible])\r\n\r\n  const getDoctoresData = () => {\r\n    fetch(API + 'users_by_rol/Recepcion')\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        console.log(data); setDoctoresData(data);\r\n      })\r\n      .finally(() => setILoading(false))\r\n  }\r\n\r\n  const editDoctor = async (rd) => {\r\n    let d = JSON.parse(JSON.stringify(rd));\r\n    d.horarios.forEach((h) => { h.sucursal = h.sucursal._id })\r\n    console.log('Horarios before edit: ', d.horarios);\r\n    await setDoctorForEdit(d)\r\n    setIsModalVisible(true);\r\n    console.log('Editar medico: ', d)\r\n  }\r\n\r\n  const deleteDoctor = (doctor) => {\r\n    deleteData('/users/remove/' + doctor._id).then(() => {\r\n      console.log('removed: ', doctor._id);\r\n      getDoctoresData()\r\n    })\r\n  }\r\n\r\n\r\n\r\n  const handleCancel = () => {\r\n    setIsModalVisible(false);\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Foto',\r\n      key: 'avatar',\r\n      render: (_, { avatar }) => (\r\n        avatar.lenght > 12 ?\r\n          <img src={'https://api.recreamed.com/images/' + avatar} alt=\"Logo\" width={64} />\r\n          : <Avatar icon={<UserOutlined />} size={64} className='btnIconCentered' />\r\n\r\n      ),\r\n    },\r\n    {\r\n      title: 'Nombre',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n    },\r\n    {\r\n      title: 'Correo',\r\n      dataIndex: 'email',\r\n      key: 'email',\r\n    },\r\n    {\r\n      title: 'Telefono',\r\n      dataIndex: 'telefono',\r\n      key: 'telefono',\r\n    },\r\n    {\r\n      title: 'Horarios',\r\n      dataIndex: 'horarios',\r\n      key: 'horarios',\r\n      render: (_, record) => (\r\n\r\n        <p>{record.horarios.map((h) => { return <Space size='small'><p><HomeOutlined style={{ marginTop: -6 }} />{h.sucursal.nombre}</p><p><ClockCircleOutlined />{h.horario}</p></Space> })}</p>\r\n\r\n      ),\r\n    },\r\n    {\r\n      title: 'Opciones',\r\n      key: 'action',\r\n      render: (_, record) => (\r\n        <Space size=\"middle\">\r\n          <Button size='small' onClick={() => { editDoctor(record) }}>\r\n            Editar\r\n          </Button>\r\n          <Popconfirm\r\n            title=\"Seguro que quiere borrar este doctor?\"\r\n            onConfirm={() => deleteDoctor(record)}\r\n            // onCancel={cancel}\r\n            okText=\"Si\"\r\n            cancelText=\"No\"\r\n          >\r\n            <Button danger size='small'>\r\n              Borrar\r\n            </Button>\r\n          </Popconfirm>\r\n\r\n        </Space>\r\n      ),\r\n    }\r\n  ];\r\n  return (\r\n    <div>\r\n      <h4>Recepcionistas</h4>\r\n      {isLoading ? <Loading /> :\r\n        <Table dataSource={doctoresData} columns={columns} />\r\n      }\r\n\r\n      <Modal width={900} title=\"Editar Medico\" visible={isModalVisible} onCancel={handleCancel} destroyOnClose={true} footer={[]}>\r\n        <Register medico={doctorForEdit} setIsModalVisible={setIsModalVisible} />\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n","import { React, Component } from 'react';\r\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\r\nimport { Layout, Menu } from 'antd';\r\nimport { TeamOutlined, UserAddOutlined, MenuOutlined } from '@ant-design/icons';\r\n\r\nimport Register from './register.receptionist';\r\nimport Dash from './dash.receptionists';\r\n\r\nconst { Header, Content, Footer, Sider } = Layout;\r\n\r\nclass SideMenu extends Component {\r\n  handleClick = e => {\r\n    console.log('click ', e);\r\n  };\r\n\r\n  state = {\r\n    collapsed: false,\r\n  };\r\n\r\n  onCollapse = (collapsed) => {\r\n    this.setState({ collapsed });\r\n  }\r\n  toggle = () => {\r\n    this.setState({\r\n      collapsed: !this.state.collapsed,\r\n    });\r\n  }\r\n  render() {\r\n    return (\r\n      <Router>\r\n        <Layout style={{ minHeight: '100vh' }}>\r\n          <Sider\r\n            theme=\"light\"\r\n            collapsible\r\n            collapsed={this.state.collapsed}\r\n            onCollapse={this.onCollapse}>\r\n            <div className=\"logo\" />\r\n            <Menu defaultSelectedKeys={['1']} mode=\"inline\">\r\n              <Menu.Item icon={<TeamOutlined />} key=\"1\">\r\n                <span>Recepcionistas</span>\r\n                <Link to=\"/recepcionistas\" />\r\n              </Menu.Item>\r\n              <Menu.Item icon={<UserAddOutlined />} key=\"2\">\r\n                <span>Registrar Recepcionista</span>\r\n                <Link to=\"/registrar\" />\r\n              </Menu.Item>\r\n            </Menu>\r\n            {/* <Menu\r\n        onClick={this.handleClick}\r\n        style={{ width: 256 }}\r\n        defaultSelectedKeys={['1']}\r\n        defaultOpenKeys={['sub1']}\r\n        mode=\"inline\"\r\n      >\r\n        <SubMenu key=\"sub1\" icon={<MailOutlined />} title=\"Navigation One\">\r\n          <Menu.ItemGroup key=\"g1\" title=\"Item 1\">\r\n            <Menu.Item key=\"1\" href=\"/dash\">Option 1 <Link to=\"/meseros\" /> </Menu.Item>\r\n            <Menu.Item key=\"2\">Option 2</Menu.Item>\r\n          </Menu.ItemGroup>\r\n          <Menu.ItemGroup key=\"g2\" title=\"Item 2\">\r\n            <Menu.Item key=\"3\">Option 3</Menu.Item>\r\n            <Menu.Item key=\"4\">Option 4</Menu.Item>\r\n          </Menu.ItemGroup>\r\n        </SubMenu>\r\n        <SubMenu key=\"sub2\" icon={<AppstoreOutlined />} title=\"Navigation Two\">\r\n          <Menu.Item key=\"5\">Option 5</Menu.Item>\r\n          <Menu.Item key=\"6\">Option 6</Menu.Item>\r\n          <SubMenu key=\"sub3\" title=\"Submenu\">\r\n            <Menu.Item key=\"7\">Option 7</Menu.Item>\r\n            <Menu.Item key=\"8\">Option 8</Menu.Item>\r\n          </SubMenu>\r\n        </SubMenu>\r\n        <SubMenu key=\"sub4\" icon={<SettingOutlined />} title=\"Navigation Three\">\r\n          <Menu.Item key=\"9\">Option 9</Menu.Item>\r\n          <Menu.Item key=\"10\">Option 10</Menu.Item>\r\n          <Menu.Item key=\"11\">Option 11</Menu.Item>\r\n          <Menu.Item key=\"12\">Option 12</Menu.Item>\r\n        </SubMenu>\r\n      </Menu> */}\r\n          </Sider>\r\n          <Layout>\r\n\r\n            <Header style={{ background: '#fff', padding: 0, paddingLeft: 16 }}>\r\n              <MenuOutlined className=\"trigger\" style={{ cursor: 'pointer' }} onClick={this.toggle} />\r\n            </Header>\r\n\r\n            <Content style={{ margin: '24px 16px', padding: 24, background: '#fff', minHeight: 280 }}>\r\n              <Route exact path=\"/registrar\" component={Register} />\r\n              <Route path=\"/recepcionistas\" component={Dash} />\r\n            </Content>\r\n\r\n            <Footer style={{ textAlign: 'center' }}>\r\n              RECREAMED ©2021 Created by Realidad Creativa\r\n            </Footer>\r\n          </Layout>\r\n\r\n        </Layout>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SideMenu\r\n\r\n\r\n","import React, { Component } from 'react'\r\n// import {Card } from 'antd'\r\nimport SideMenu from './side.receptionists';\r\n\r\nexport class Receptionists extends Component {\r\n    render() {\r\n        return <SideMenu />\r\n    }\r\n}\r\n\r\nexport default Receptionists\r\n","import React from 'react'\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport { Container, Nav, Navbar } from \"react-bootstrap\";\r\nimport { Button } from 'antd'\r\nimport icon from '../assets/Icon.png';\r\nimport Patients from \"./patients/main.patients\";\r\nimport Doctors from \"./doctors/main.doctors\";\r\nimport { Hospitales } from \"./hospitals/main.hospitals\";\r\nimport { usuario } from '../resources'\r\nimport Admins from './admins/main.admins';\r\nimport Receptionists from './receptionists/main.receptionists';\r\n\r\nconst logout = () => { localStorage.removeItem('sessionToken'); localStorage.removeItem('userType'); window.location.href = '/'; }\r\n\r\nfunction Navigator() {\r\n  return <Navbar bg=\"primary\" variant=\"dark\" expand=\"lg\">\r\n    <Container>\r\n      <img\r\n        src={icon}\r\n        width=\"40\"\r\n        height=\"35\"\r\n        className=\"d-inline-block align-top\"\r\n        alt=\"Recreamed logo\"\r\n      />\r\n      <Navbar.Brand href=\"#home\" style={{ fontFamily: 'Poppins', color: 'White' }}>\r\n        Bienvenido {usuario.name}\r\n\r\n      </Navbar.Brand>\r\n      <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n      <Navbar.Collapse id=\"basic-navbar-nav\">\r\n        <Nav className=\"me-auto\">\r\n          <Nav.Link href=\"hospitales\">Hospitales</Nav.Link>\r\n          <Nav.Link href=\"administradores\">Administradores</Nav.Link>\r\n          <Nav.Link href=\"recepcionistas\">Recepcionistas</Nav.Link>\r\n          <Nav.Link href=\"doctores\">Medicos</Nav.Link>\r\n          <Nav.Link href=\"pacientes\">Pacientes</Nav.Link>\r\n        </Nav>\r\n      </Navbar.Collapse>\r\n      <Navbar.Collapse className=\"justify-content-end\">\r\n        <Button onClick={logout} ghost>Cerrar Sesion</Button>\r\n      </Navbar.Collapse>\r\n    </Container>\r\n  </Navbar>;\r\n\r\n\r\n}\r\n\r\nexport default function SuperAdminApp() {\r\n  return (\r\n    <Router>\r\n      <Navigator />\r\n      <Switch>\r\n\r\n        <Route path=\"/hospitales\">\r\n          <Hospitales />\r\n        </Route>\r\n        <Route path=\"/administradores\">\r\n          <Admins />\r\n        </Route>\r\n        <Route path=\"/doctores\">\r\n          <Doctors />\r\n        </Route>\r\n        <Route path=\"/recepcionistas\">\r\n          <Receptionists />\r\n        </Route>\r\n        <Route path=\"/pacientes\">\r\n          <Patients />\r\n        </Route>\r\n        <Route path=\"/\">\r\n          <Patients />\r\n\r\n        </Route>\r\n\r\n      </Switch>\r\n    </Router>\r\n  )\r\n}\r\n","import { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n// import 'antd/dist/antd.css';\r\nimport { Login } from \"./session/login\";\r\nimport { Register } from \"./session/register\";\r\nimport \"./App.css\"\r\nimport DoctorApp from \"./doctorViews/doctorApp\";\r\nimport RecepcionApp from \"./recepcionViews/recepcionApp\";\r\nimport PatientApp from \"./patientViews/patientApp\";\r\nimport AdminHospitalApp from \"./admHospitalViews/adminHospitalApp\";\r\nimport SuperAdminApp from \"./superAdminViews/superAdminApp\";\r\nimport { KetaminaPublic, DepresionQidsPublic, DepresionEspanolPublic,HeadachePublic, PostTraumaticoPublic, PostTraumaticoClinicoPublic, PostTraumaticoMX } from './session/public_escalas_routes';\r\n\r\nconst userType = localStorage.getItem('userType');\r\n\r\n// Changing Repo\r\n\r\nexport function App() {\r\n\r\n  const token = localStorage.getItem('sessionToken');\r\n\r\n  // Public Routes\r\n  if (!token) {\r\n    console.log(\"tok:\", localStorage.getItem('sessionToken'));\r\n    return <Router>\r\n      <Switch>\r\n        <Route path=\"/ketamina_public/:idmedico/:idpaciente/:key\">\r\n          <KetaminaPublic />\r\n        </Route>\r\n        <Route path=\"/dolor_public/:idmedico/:idpaciente/:key\">\r\n          <HeadachePublic />\r\n        </Route>\r\n        <Route path=\"/depresion_qids_public/:idmedico/:idpaciente/:key\">\r\n          <DepresionQidsPublic />\r\n        </Route>\r\n        <Route path=\"/depresion_gpc_public/:idmedico/:idpaciente/:key\">\r\n          <DepresionEspanolPublic />\r\n        </Route>\r\n        <Route path=\"/post_traumatico_public/:idmedico/:idpaciente/:key\">\r\n          <PostTraumaticoPublic />\r\n        </Route>\r\n        <Route path=\"/post_traumatico_clinico_public/:idmedico/:idpaciente/:key\">\r\n          <PostTraumaticoClinicoPublic />\r\n        </Route>\r\n        <Route path=\"/post_traumatico_mx_public/:idmedico/:idpaciente/:key\">\r\n          <PostTraumaticoMX />\r\n        </Route>\r\n\r\n        <Route path=\"/register\">\r\n          <Register />\r\n        </Route>\r\n        <Router path=\"/\">\r\n          <Login />\r\n        </Router>\r\n\r\n      </Switch>\r\n    </Router>\r\n  }\r\n\r\n  switch (userType) {\r\n    case 'SuperAdministrador':\r\n      return <SuperAdminApp />\r\n    case 'Administrador':\r\n      return <AdminHospitalApp />\r\n    case 'Recepcion':\r\n      return <RecepcionApp />\r\n    case 'Paciente':\r\n      return <PatientApp />\r\n    case 'Medico':\r\n      return <DoctorApp />\r\n    default:\r\n      return 'foo';\r\n  }\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { App } from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n//Main\r\n\r\n"],"sourceRoot":""}