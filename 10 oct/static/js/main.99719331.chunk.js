(this.webpackJsonprecreamed=this.webpackJsonprecreamed||[]).push([[0],{409:function(e,a){},463:function(e,a,t){},464:function(e,a,t){},471:function(e,a){},473:function(e,a){},503:function(e,a){},504:function(e,a){},584:function(e,a){},731:function(e,a,t){},739:function(e,a){},740:function(e,a){},748:function(e,a,t){},750:function(e,a,t){},751:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(43),s=t.n(c),i=t(47),o=t(71),l=(t(460),t(778)),d=t(761),j=t(762),u=t(782),b=t(773),m=t(269),h=t(205),O=t(72),p=t(788),x=t(789),f=t(10),g=t(18),v=t(1),y="https://api.recreamed.com/api/",C="https://api.recreamed.com/session/",I="https://api.recreamed.com/images/",S=function(){var e=Object(g.a)(Object(f.a)().mark((function e(){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Recepcion"!==localStorage.getItem("userType")){e.next=4;break}return e.next=4,_();case 4:localStorage.removeItem("sessionToken"),localStorage.removeItem("userType"),localStorage.removeItem("userData"),window.location.href="/";case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(g.a)(Object(f.a)().mark((function e(){var a,t;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=w._id,t={usuario:a,fecha_hora_entrada:localStorage.getItem("fecha_hora_entrada"),fecha_hora_salida:new Date,notas:""},e.next=4,D("asistencias/add",t).then((function(){return localStorage.removeItem("fecha_hora_entrada")}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=JSON.parse(localStorage.getItem("userData"));function k(e){return T.apply(this,arguments)}function T(){return(T=Object(g.a)(Object(f.a)().mark((function e(a){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(y+a,{mode:"cors"}).then((function(e){return e.json()})).then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return F.apply(this,arguments)}function F(){return(F=Object(g.a)(Object(f.a)().mark((function e(a){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(y+a,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),l.a.info(e.message)})).catch((function(e){return console.error("Error:",e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,a){return N.apply(this,arguments)}function N(){return(N=Object(g.a)(Object(f.a)().mark((function e(a,t){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(y+a,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return l.a.success(e.message||e.error),e})).catch((function(e){return console.error("Error:",e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,a){return P.apply(this,arguments)}function P(){return(P=Object(g.a)(Object(f.a)().mark((function e(a,t){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(y+a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.error("Error:",e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=function(){return Object(v.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:88,backgroundColor:"#3c75ef"},children:Object(v.jsxs)("p",{style:{color:"white"},children:["Desarrollado por ",Object(v.jsxs)("strong",{children:[" ",Object(v.jsx)("a",{href:"https://www.realidadcreativa.com",style:{marginLeft:6,color:"white"},children:"realidadcreativa.com"})]})," | \xa9 Realidad Creativa - 2023"]})})},M=["Aguascalientes","Baja California","Baja California Sur","Campeche","CDMX","Chiapas","Chihuahua","Coahuila","Colima","Durango","Estado de Mexico","Guanajuato","Guerrero","Hidalgo","Jalisco","M\xe9xico","Michoac\xe1n","Morelos","Nayarit","Nuevo Le\xf3n","Oaxaca","Puebla","Quer\xe9taro","Quintana Roo","San Luis Potos\xed","Sinaloa","Sonora","Tabasco","Tamaulipas","Tlaxcala","Veracruz","Yucat\xe1n","Zacatecas"],R=(w&&w.horarios&&w.horarios.map((function(e){return e})),w&&w.horarios&&w.horarios.map((function(e){return e.sucursal}))),H=w&&w.horarios&&w.horarios.map((function(e){return e.sucursal._id})),z=["722ED1","F5222D","FA8C16","FADB14","8BBB11","52C41A","13A8A8","1677FF","2F54EB","EB2F96","FF7A45","FFC53D","D3F261","62DDF1","4B85EF","A972DD","FF80AB","FFBE3B","5CD0E3","A0E03C"],L=t.p+"static/media/Logo.bcbe104c.png";function V(){return Object(v.jsx)(d.a,{children:Object(v.jsxs)(j.a,{lg:{span:8,offset:8},md:{span:10,offset:7},sm:{span:16,offset:4},xs:{span:16,offset:4},children:[Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsxs)(u.a,{hoverable:!0,children:[Object(v.jsx)("br",{}),Object(v.jsxs)(d.a,{justify:"center",children:[" ",Object(v.jsx)("img",{src:L,alt:"Logo",width:160})]}),Object(v.jsx)("br",{}),Object(v.jsx)(d.a,{justify:"center",children:Object(v.jsx)("h3",{children:"Inicio de Sesion"})}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsxs)(b.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:function(e){delete e.remember,console.log("Received values of form: ",e),fetch(C+"login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return console.log("data",e),e.json()})).then((function(e){console.log("resp",e),"Bienvenido"===e.message?(localStorage.setItem("userType",e.user.rol),localStorage.setItem("sessionToken",e.data.token),localStorage.setItem("userData",JSON.stringify(e.user)),"Recepcion"===e.user.rol&&localStorage.setItem("fecha_hora_entrada",new Date),window.location.href="/"):l.a.info(e.error||e.message)})).catch((function(e){return window.alert("Error: ",e)}))},children:[Object(v.jsx)(b.a.Item,{name:"email",rules:[{required:!0,message:"Por favor ingresa el correo de tu cuenta!"}],children:Object(v.jsx)(m.a,{prefix:Object(v.jsx)(p.a,{className:"site-form-item-icon"}),placeholder:"Usuario"})}),Object(v.jsx)(b.a.Item,{name:"password",rules:[{required:!0,message:"Por favor ingresa tu contrase\xf1a!"}],children:Object(v.jsx)(m.a.Password,{prefix:Object(v.jsx)(x.a,{className:"site-form-item-icon"}),placeholder:"Contrase\xf1a"})}),Object(v.jsxs)(b.a.Item,{children:[Object(v.jsx)(b.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:Object(v.jsx)(h.a,{children:"Mantener la sesion"})}),Object(v.jsx)("a",{className:"login-form-forgot",href:"",children:"Recuperar contrase\xf1a"})]}),Object(v.jsx)(b.a.Item,{children:Object(v.jsx)(O.a,{block:!0,type:"primary",htmlType:"submit",className:"login-form-button",children:"Iniciar Sesion"})}),Object(v.jsx)(b.a.Item,{children:Object(v.jsxs)(d.a,{justify:"center",children:[" O ",Object(v.jsx)("a",{href:"register",style:{marginLeft:4},children:"Registrarse"})]})})]})]})]})})}var B=t(5),G=t(11),U=t(4),Z=t(129),J=t(446),Y=t(790),W=t(450),$=(t(463),["key","name"]),X=Z.a.Option,Q={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},K={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};function ee(){var e=b.a.useForm(),a=Object(U.a)(e,1)[0],t=Object(n.useState)([]),r=Object(U.a)(t,2),c=r[0],s=r[1],i=Object(n.useState)(!0),o=Object(U.a)(i,2),p=o[0],x=o[1];Object(n.useEffect)((function(){f()}),[]);var f=function(){fetch(y+"sucursales").then((function(e){return e.json()})).then((function(e){console.log(e),s(e),x(!1)}))},g=Object(v.jsx)(b.a.Item,{name:"prefix",noStyle:!0,children:Object(v.jsx)(Z.a,{style:{width:70},children:Object(v.jsx)(X,{value:"+52",children:"+52"})})});return Object(v.jsx)(d.a,{children:Object(v.jsxs)(j.a,{span:12,offset:6,children:[Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsxs)(u.a,{hoverable:!0,children:[Object(v.jsxs)(d.a,{justify:"center",children:[" ",Object(v.jsx)("img",{src:L,alt:"Logo",width:160})]}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(d.a,{justify:"center",children:Object(v.jsx)("h3",{children:"Registro de Medico"})}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsxs)(b.a,Object(B.a)(Object(B.a)({},Q),{},{form:a,name:"register",onFinish:function(e){e.rol="Medico",e.avatar="https://",e.estatus="1",delete e.confirm,delete e.prefix,delete e.agreement,console.log(e),fetch(C+"register",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),e.message?l.a.success(e.message):l.a.error(e.error),e.message&&"Usuario creado correctamente"===e.message&&(window.location.href="/")})).catch((function(e){return console.error("Error:",e)}))},initialValues:{horarios:[{sucursal:"",horario:""}],prefix:"+52"},scrollToFirstError:!0,children:[Object(v.jsx)(b.a.Item,{name:"name",label:"Nombre",rules:[{required:!0,message:"Ingresa Nombre y apellidos"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"email",label:"Correo",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"password",label:"Contrase\xf1a",rules:[{required:!0,message:"Por favor ingrese su contrase\xf1a!"}],hasFeedback:!0,children:Object(v.jsx)(m.a.Password,{})}),Object(v.jsx)(b.a.Item,{name:"confirm",label:"Confirmar contrase\xf1a",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var a=e.getFieldValue;return{validator:function(e,t){return t&&a("password")!==t?Promise.reject(new Error("Las contrase\xf1as deben coincidir!")):Promise.resolve()}}}],children:Object(v.jsx)(m.a.Password,{})}),Object(v.jsx)(b.a.Item,{name:"telefono",label:"Telefono",rules:[{required:!0,message:"Please input your phone number!"}],children:Object(v.jsx)(m.a,{addonBefore:g,style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{label:"horarios",rules:[{required:!1,message:"Ingresa al menos un horario"}],children:Object(v.jsx)(b.a.List,{name:"horarios",label:"horarios list",children:function(e,a){var t=a.add,n=a.remove;return Object(v.jsxs)(v.Fragment,{children:[e.map((function(e){var a=e.key,t=e.name,r=Object(G.a)(e,$);return Object(v.jsxs)(J.a,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"sucursal"],rules:[{required:!0,message:"Elije Sucursal"}],children:Object(v.jsx)(Z.a,{placeholder:"Elije Sucursal",style:{width:"180px"},children:p?"Cargando":c.map((function(e){return Object(v.jsx)(X,{value:e._id,children:e.nombre})}))})})),Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"horario"],rules:[{required:!1,message:"Missing last name"}],children:Object(v.jsx)(m.a,{placeholder:"Horario"})})),Object(v.jsx)(Y.a,{onClick:function(){return n(t)}})]},a)})),Object(v.jsx)(b.a.Item,{children:Object(v.jsx)(O.a,{type:"dashed",onClick:function(){return t()},block:!0,icon:Object(v.jsx)(W.a,{}),children:"Agregar Horario"})})]})}})}),Object(v.jsx)(b.a.Item,{name:"cedula",label:"Cedula",rules:[{required:!1,message:"Ingresa cedula"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"certificacion",label:"Certificacion",rules:[{required:!1,message:"Ingresa tu certificacion"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"universidad",label:"Universidad",rules:[{required:!1,message:"Ingresa tu universidad"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({name:"agreement",valuePropName:"checked",rules:[{validator:function(e,a){return a?Promise.resolve():Promise.reject(new Error("Tienes que aceptar los terminos y condiciones para registrarte"))}}]},K),{},{children:Object(v.jsxs)(h.a,{children:["He le\xeddo y acepto los ",Object(v.jsx)("a",{href:"https://recreamed.com",children:"terminos y condiciones"})]})})),Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},K),{},{children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Registrar"})}))]}))]})]})})}t(464);var ae=t(770),te=t(766),ne=t(775),re=t(139),ce=t(448);function se(){return Object(v.jsx)("div",{style:{margin:"20px 0",marginBottom:"20px",padding:"30px 50px",textAlign:"center",background:"rgba(0, 0, 0, 0.05)",borderRadius:"4px"},children:Object(v.jsx)(ce.a,{})})}var ie=t(785),oe=t(320),le=t(776);function de(e){var a=w.configuracion.costo_cita,t=void 0===a?0:a;R.forEach((function(e){e.value=e._id,e.label=e.nombre}));var r=Object(n.useState)([]),c=Object(U.a)(r,2),s=(c[0],c[1],Object(n.useState)([])),i=Object(U.a)(s,2),o=i[0],d=i[1],j=Object(n.useState)(!1),u=Object(U.a)(j,2),h=(u[0],u[1]),p=Object(n.useState)(null),x=Object(U.a)(p,2),f=(x[0],x[1]),g=Object(n.useState)(!1),y=Object(U.a)(g,2),C=y[0],I=y[1],S=Object(n.useState)(0),_=Object(U.a)(S,2),T=_[0],E=_[1];Object(n.useEffect)((function(){F()}),[]);var F=function(){k("mispacientes/".concat(w._id)).then((function(e){e.forEach((function(e){e.label=e.name,e.value=e._id})),d(e)}))},N=function(e,a){var n={tipo:"ingreso",medico:w._id,cita:e,monto:C?T+t:T,forma_de_pago:"efectivo",fecha_hora:a,estado:"pendiente"};console.log("Balance ready to send: ",n),D("balances/add",n).then((function(e){l.a.success(e.message||e.error),console.log(e)}))};return Object(v.jsxs)(b.a,{name:"nueva_cita_admin",labelCol:{span:8},wrapperCol:{span:14},onFinish:function(a){a.medico=w._id,a.servicio=a.servicio.title,delete a.tratamiento,console.log(a),e.cita?q("citas/update/".concat(e.cita._id),a).then((function(e){console.log(e)})).finally((function(){e.getCitasData(),e.setIsModalOpen(!1),e.setEditingCita(!1)})):D("citas/add",a).then((function(e){l.a.success(e.message||e.error),e.message&&"Cita creada correctamente"===e.message?N(e.id_nueva_cita,a.fecha_hora):l.a.error("No se pudo crear registro de ingreso"),console.log(e)})).finally((function(){e.getCitasData(),e.setIsModalOpen(!1)}))},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",initialValues:e.cita?e.cita:{isOnline:!1,tratamiento:"Sin servicio",fecha_hora:e.fecha_hora,duracion:60},children:[Object(v.jsx)(b.a.Item,{label:"Hospital",name:"sucursal",rules:[{required:!0,message:"Selecciona Sucursal"}],children:Object(v.jsx)(Z.a,{options:R,onChange:function(e){console.log("Selected Hospital: ",e),f(e)}})}),Object(v.jsx)(b.a.Item,{label:"Paciente",name:"usuario",rules:[{required:!0,message:"Selecciona Usuario"}],children:Object(v.jsx)(Z.a,{options:o,onChange:function(e){console.log("Selected Hospital: ",e)}})}),Object(v.jsx)(b.a.Item,{label:"VideoLlamada",name:"isOnline",children:Object(v.jsx)(ie.a,{onChange:function(e){console.log("switch to ".concat(e)),h(e)}})}),Object(v.jsx)(b.a.Item,{label:"Comentarios",name:"comentarios",rules:[{required:!1,message:"Ingresa RFC"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Fecha y Hora",name:"fecha_hora",rules:[{required:!1,message:"Selecciona Fecha y Hora"}],children:Object(v.jsx)(oe.a,{showTime:!0,format:"DD/MM/YYYY HH:mm",use12Hours:!0,style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{label:"Duracion",name:"duracion",rules:[{required:!0,message:"Selecciona la duracion de la cita"}],children:Object(v.jsx)(Z.a,{options:[{label:"Media Hora",value:30},{label:"Una Hora",value:60},{label:"Una Hora y Media",value:90},{label:"Dos Horas",value:120},{label:"Dos Horas Y Media",value:150},{label:"Tres Horas",value:180}]})}),Object(v.jsx)(b.a.Item,{label:"Servicio",name:"servicio",rules:[{required:!1,message:"Selecciona un servicio"}],children:Object(v.jsx)(Z.a,{onChange:function(e){E(e.value),console.log("selected service",e)},options:w.configuracion.tratamientos_ofrecidos.map((function(e){return{key:e._id,value:e.costo,label:"".concat(e.tratamiento," - $").concat(e.costo),title:e.tratamiento}})),labelInValue:!0})}),Object(v.jsx)(b.a.Item,{label:"costo de la cita $".concat(t),children:Object(v.jsx)(ie.a,{onChange:function(e){console.log("switch to ".concat(e)),I(e)}})}),Object(v.jsx)(b.a.Item,{wrapperCol:{offset:8,span:16},children:Object(v.jsx)("div",{className:"fila",children:Object(v.jsxs)("h6",{children:["Costo Total: $",C?T+t:T," "]})})}),e.cita&&Object(v.jsx)(b.a.Item,{wrapperCol:{offset:8,span:16},children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",form:"nueva_cita_admin",children:"Guardar"})})]})}function je(e){var a=function(){e.setIsModalOpen(!1)};return Object(v.jsx)(le.a,{title:e.cita?"Editar Cita":"Nueva Cita",open:e.isOpenModal,onOk:function(){e.setIsModalOpen(!1)},onCancel:a,destroyOnClose:!0,width:600,footer:[Object(v.jsx)(O.a,{onClick:a,children:"Cancelar"}),Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",form:"nueva_cita_admin",children:"Guardar"})],children:Object(v.jsx)(de,{setIsModalOpen:e.setIsModalOpen,isOpenModal:e.isCreateModalOpen,fecha_hora:e.fecha_hora,getCitasData:e.getCitasData})})}var ue=t(786),be=t(48),me=t.n(be),he=Object(re.b)(me.a),Oe=(w||{}).configuracion,pe=(void 0===Oe?{}:Oe).tratamientos_ofrecidos;new Date;function xe(){var e=Object(n.useState)([]),a=Object(U.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)(!0),s=Object(U.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(!1),d=Object(U.a)(l,2),j=d[0],u=d[1],b=Object(n.useState)(!1),m=Object(U.a)(b,2),h=m[0],p=m[1],x=function(){p(!1),u(!1),u(!1)},y=Object(n.useState)(null),C=Object(U.a)(y,2),I=C[0],S=C[1],_=Object(n.useState)(null),T=Object(U.a)(_,2),F=T[0],q=T[1],N=Object(n.useState)(!1),D=Object(U.a)(N,2),P=D[0],A=D[1],M=Object(n.useState)([]),R=Object(U.a)(M,2),H=(R[0],R[1]);Object(n.useEffect)((function(){return z()}),[]);var z=function(){var e=[];w&&k("citas/medico/".concat(w._id)).then((function(a){a.forEach((function(e){var a,t=e.servicio,n=pe.find((function(e){return e.tratamiento===t}));n&&(e.color=n.color),e.start=new Date(Date.parse(e.fecha_hora));var r=new Date(e.fecha_hora);r.setTime(r.getTime()+1*(null!==(a=e.duracion)&&void 0!==a?a:60)*60*1e3),e.end=new Date(Date.parse(r)),e.title=e.usuario.name,e.id=e._id,e.key=e._id})),console.log("getCitasData medico",a),H(e),r(a)})).finally((function(){return o(!1)}))},L=function(){var e=Object(g.a)(Object(f.a)().mark((function e(a){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.hospital||(a.hospital=a.sucursal._id),a.sucursa&&a.sucursal._id&&(a.sucursal=a.sucursal._id),a.paciente||(a.paciente=a.usuario),a.usuario&&a.usuario._id&&(a.usuario=a.usuario._id),a.fecha_hora=me()(a.fecha_hora),S(a),p(!0);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return i?Object(v.jsx)(se,{}):Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsx)(re.a,{scrollToTime:new Date(Date.now()),defaultDate:new Date(Date.now()),selectable:"true",localizer:he,events:t,eventPropGetter:function(e,a,t,n){return{style:{backgroundColor:e.color,borderRadius:"4px",opacity:.8,color:"white",border:"0px",display:"block"}}},startAccessor:"start",endAccessor:"end",style:{height:500},messages:{next:"Sig",previous:"Ant",today:"Hoy",month:"Mes",week:"Semana",day:"D\xeda"},defaultView:"week",onDoubleClickEvent:function(e){return console.log(e)},onSelectEvent:L,onSelecting:function(e){return console.log(e)},onSelectSlot:function(e){var a=e.start;e.end,e.action;return q(me()(a)),A(!0),{style:{backgroundColor:"red"}}}}),Object(v.jsx)(le.a,{title:"Detalles Cita",open:h,onOk:function(){p(!1),u(!1),u(!1)},onCancel:x,destroyOnClose:!0,footer:[Object(v.jsx)(ue.a,{title:"Eliminar Cita",description:"Seguro que quiere eliminar la cita?",onConfirm:function(e){E("citas/remove/".concat(I._id)).then((function(e){console.log(e),z(),x()})),E("balances/remove/cita/".concat(I._id))},onCancel:function(e){console.log(e)},okText:"Si",cancelText:"No",children:Object(v.jsx)(O.a,{danger:!0,children:"Eliminar"})}),Object(v.jsx)(O.a,{onClick:function(){return u(!j)},children:j?"Cancelar":"Modificar"}),Object(v.jsx)(O.a,{onClick:x,children:"Cerrar"})],children:j?Object(v.jsx)(de,{cita:I,setIsModalOpen:p,getCitasData:z,setEditingCita:u}):Object(v.jsx)("div",{children:I&&Object(v.jsxs)("div",{children:[Object(v.jsxs)("p",{children:[Object(v.jsx)("strong",{children:"Paciente "}),I.paciente?I.paciente.name:"Sin paciente"]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("strong",{children:"Fecha "}),new Date(I.fecha_hora).toLocaleDateString()]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("strong",{children:"Hora "}),new Date(I.fecha_hora).toLocaleTimeString()]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("strong",{children:"Servicio "}),I.servicio]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("strong",{children:"Comentarios "}),I.comentarios]})]})})}),Object(v.jsx)(je,{setIsModalOpen:A,isOpenModal:P,fecha_hora:F,getCitasData:z})]})}var fe=t(443),ge=t(9),ve=t(771),ye=t(791),Ce={"Trastornos mentales org\xe1nicos, incluyendo los sintom\xe1ticos":{F00:"Demencia en la enfermedad de Alzheimer",F01:"Demencia vascular",F02:"Demencia en enfermedades clasificadas en otro lugar",F03:"Demencia sin especificaci\xf3n",F04:"S\xedndrome amn\xe9sico org\xe1nico no inducido por alcohol u otras sustancias psic\xf3tropas",F05:"Delirium no inducido por alcohol u otras sustancias psic\xf3tropas",F06:"Otros trastornos mentales debidos a lesi\xf3n o disfunci\xf3n cerebral o enfermedad som\xe1tica",F07:"Trastornos de la personalidad y del comportamiento debidos a enfermedad, lesi\xf3n o disfunci\xf3n cerebral",F09:"Trastorno mental org\xe1nico o sintom\xe1tico sin especificaci\xf3n"},"Trastornos mentales y del comportamiento debidos al consumo de sustancias psic\xf3tropas":{F10:"Trastornos mentales y del comportamiento debidos al consumo de alcohol",F11:"Trastornos mentales y del comportamiento debidos al consumo de opioides ",F12:"Trastornos mentales y del comportamiento debidos al consumo de cannabinoides ",F13:"Trastornos mentales y del comportamiento debidos al consumo de sedantes o hipn\xf3ticos",F14:"Trastornos mentales y del comportamiento debidos al consumo de coca\xedna",F15:"Trastornos mentales y del comportamiento debidos al consumo de otros estimulantes (incluida cafe\xedna)",F16:"Trastornos mentales y del comportamiento debidos al consumo de alucin\xf3genos",F17:"Trastornos mentales y del comportamiento debidos al consumo de tabaco",F18:"Trastornos mentales y del comportamiento debidos al consumo de disolventes vol\xe1tiles",F19:"Trastornos mentales y del comportamiento debidos al consumo de m\xfaltiples drogas o de otras sustancias psicotr\xf3picas"},"Esquizofrenia, trastorno esquizot\xedpico y trastorno de ideas delirantes":{F20:"Esquizofrenia",F21:"Trastorno esquizot\xedpico",F22:"Trastorno de ideas delirantes persistentes",F23:"Trastornos psic\xf3ticos agudos y transitorios",F24:"Trastorno de ideas delirantes inducidas",F25:"Trastornos esquizoafectivos",F28:"Otros trastornos psic\xf3ticos no org\xe1nicos ",F29:"Psicosis no org\xe1nica sin especificaci\xf3n"},"F40-F48 Trastornos neur\xf3ticos, secundarios a situaciones estresantes y somatomorfos":{F40:"Trastorno de ansiedad f\xf3bica","F40.0":"Agorafobia","F40.1":"Fobias sociales","F40.2":"Fobias espec\xedficas",F41:"Otros trastornos de ansiedad","F41.0":"Trastorno de p\xe1nico","F41.1":"Trastorno de ansiedad generalizada","F41.2":"Trastorno mixto ansioso-depresivo",F42:"Trastorno obsesivo-compulsivo",F43:"Reacci\xf3n a estr\xe9s agudo","F43.1":"Trastornos estr\xe9s postraum\xe1tico","F43.2":"Trastornos de adaptaci\xf3n","F43.8":"Otras reacciones a estr\xe9s grave","F43.9":"Reacci\xf3n a estr\xe9s grave sin especificaci\xf3n",F44:"Trastornos disociativos (de conversi\xf3n",F45:"Trastornos somatomorfos",F48:"Otros trastornos neur\xf3ticos"},"F50-F59 Trastornos del comportamiento asociados a disfunciones fisiol\xf3gicas y a factores som\xe1ticos":{F50:"Trastornos de la conducta alimentaria ","F50.0":"Anorexia nerviosa","F50.1":"Anorexia nerviosa at\xedpica","F50.2":"Bulimia nerviosa","F50.3":"Bulimia nerviosa at\xedpica",F51:"Trastornos no org\xe1nicos del sue\xf1o","F51.0":"Insomnio no org\xe1nico","F51.1":"Hipersomnia no org\xe1nica","F51.2":"Trastorno no org\xe1nico del ciclo sue\xf1o-vigilia","F51.3":"Sonambulismo","F51.4":"Terrores nocturnos","F51.5":"Pesadillas ",F52:"Disfunci\xf3n sexual no org\xe1nica",F53:"Trastornos mentales y del comportamiento en el puerperio no clasificadas en otro lugar",F54:" Factores psicol\xf3gicos y del comportamiento en trastornos o enfermedades clasificadas en otro lugar",F55:"Abuso de sustancias que no producen dependencia",F59:"Trastornos del comportamiento asociados a disfunciones fisiol\xf3gicas y a factores som\xe1ticos sin especificaci\xf3n"},"F60-F69 Trastornos de la personalidad y del comportamiento del adulto":{F60:"Trastornos espec\xedficos de la personalidad","F60.0":"Trastorno paranoide de la personalidad","F60.1":"Trastorno esquizoide de la personalidad","F60.2":"Trastorno disocial de la personalidad","F60.3":"Trastorno de inestabilidad emocional de la personalidad","F60.4":"Trastorno histri\xf3nico de la personalidad","F60.5":"Trastorno ananc\xe1stico de la personalidad","F60.6":"Trastorno ansioso de la personalidad","F60.7":"Trastorno dependiente de la personalidad","F60.8":"Otros trastornos espec\xedficos de la personalidad","F60.9":"Trastornos de la personalidad sin especificaci\xf3n "},"F61 Trastornos mixtos y otros trastornos de la personalidad":{"F61.0":"Trastornos mixtos de la personalidad"},"F62 Transformaci\xf3n persistente de la personalidad no atribuible a lesi\xf3n o enfermedad cerebral ":{"F62.0":"Transformaci\xf3n persistente de la personalidad no atribuible a lesi\xf3n o enfermedad cerebral "},"F63 Trastorno de los h\xe1bitos y del control de los impulsos":{"F63.0":"Trastorno de los h\xe1bitos y del control de los impulsos"},"F64 Trastorno de identidad sexual":{"F64.0":"Trastorno de identidad sexual"},"F65 Trastornos de inclinaci\xf3n sexual":{"F65.0":"Trastornos de inclinaci\xf3n sexual"},"F66 Trastornos psicol\xf3gicos y del comportamiento del desarrollo y orientaci\xf3n sexuales":{"F66.0":"Trastornos psicol\xf3gicos y del comportamiento del desarrollo y orientaci\xf3n sexuales"},"F68 Otros trastornos de la personalidad y del comportamiento del adulto ":{"F68.0":"Otros trastornos de la personalidad y del comportamiento del adulto "},"F69 Trastorno de la personalidad y del comportamiento del adulto sin especificaci\xf3n":{"F69.0":"Trastorno de la personalidad y del comportamiento del adulto sin especificaci\xf3n"},"F70-F79 Retraso mental":{F70:"Retraso mental leve",F71:"Retraso mental moderado ",F72:"Retraso mental grave ",F73:"Retraso mental profundo ",F78:"Otro retraso mental ",F79:"Retraso mental sin especificaci\xf3n "},"F80-F89 trastornos del desarrollo psicol\xf3gico":{F80:"Trastornos espec\xedficos del desarrollo del habla y de lenguaje",F81:"Trastornos espec\xedficos del desarrollo del aprendizaje escolar",F82:"Trastorno espec\xedfico del desarrollo psicomotor",F83:"Trastorno espec\xedfico del desarrollo mixto",F84:"Trastornos generalizados del desarrollo",F88:"Otros trastornos del desarrollo psicol\xf3gico",F89:"Trastorno del desarrollo psicol\xf3gico sin especificaci\xf3n"},"F90-F98 Trastornos del comportamiento y de las emociones de comienzo habitual en la infancia y adolescencia ":{F90:"Trastornos hipercin\xe9ticos ",F91:"Trastornos disociales ",F92:"Trastornos disociales y de las emociones mixtos ",F93:"Trastornos de las emociones de comienzo habitual en la infancia ",F94:"Trastornos del comportamiento social de comienzo habitual en la infancia y adolescencia ",F95:" Trastornos de tics",F98:"Otros trastornos de las emociones y del comportamiento de comienzo habitual en la infancia y adolescencia ",F99:"Trastorno mental sin especificaci\xf3n"},"X60-X84 Autolesiones intencionales":{X60:"Envenenamiento intencionalmente autoinfligido por analg\xe9sicos no opi\xe1ceos, antipir\xe9ticos o antirreum\xe1ticos ",X61:"Envenenamiento intencionalmente autoinfligido por f\xe1rmacos antiepil\xe9pticos, sedantes, hipn\xf3ticos, antiparkinsonianos y psicotr\xf3picos no clasificados en otro lugar",X62:"Envenenamiento Intencional autoinfligido por narc\xf3ticosy psicodisl\xe9ptlcos (alucin\xf3genos) no clasificados en otro lugar",X63:"\tEnvenenamiento Intencionalmente autoinfligido por otrosf\xe1rmacos que act\xfaan sobre el sistema nervioso aut\xf3nomo",X64:"Envenenamiento Intencionalmente autoinfligido por otras drogas, f\xe1rmacos o productos biol\xf3gicos",X65:"Envenenamiento Intencionalmente autoinfligido por alcohol",X66:"Envenenamiento Intencionalmente autoinfligido por solventes org\xe1nicos, hidrocarburos halogenados o a sus vapores",X67:"Envenenamiento Intencionalmente autoinfligido por exposici\xf3n a otros gases y vapores",X68:"Envenenamiento Intencionalmente autoinfligido por pesticidas",X69:"\tEnvenenamiento Intencionalmente autoinfligido por otras sustancias qu\xedmicas o nocivas no especificadas",X70:"Da\xf1o intencionalmente autoinfligido por ahorcamiento, estrangulaci\xf3n o sofocaci\xf3n",X71:"Da\xf1o intencionalmente autoinfligido por ahogamiento e inmersi\xf3n",X72:"Da\xf1o intencionalmente autoinfligido por disparo de arma corta",X73:"Da\xf1o intencionalmente autoinfligido por disparo de rifles, escopetas o arma larga",X74:"Da\xf1o intencionalmente autoinfligido por otras armas de fuego",X75:"Da\xf1o intencionalmente autoinfligido por material explosivo",X76:"Da\xf1o intencionalmente autoinfligido por fuego y llamas",X77:"Da\xf1o intencionalmente autoinfligido por vapor de agua, vapores u objetos calientes",X78:"Da\xf1o intencionalmente autoinfligido por un objeto cortante",X79:"Da\xf1o intencionalmente autoinfligido por objetos romos",X80:"Da\xf1o intencionalmente autoinfligido porsalto desde un lugar elevado",X81:"Da\xf1o intencionalmente autoinfligido por arrojarse o tenderse ante un objeto en movimiento",X82:"Da\xf1o intencionalmente autoinfligido por choque con veh\xedculo de motor  ",X83:"Da\xf1o intencionalmente autoinfligido por otros medios espec\xedficos",X84:"Da\xf1o intencionalmente autoinfligido por medios inespec\xedficos"},"Y06 Negligencia y abandono":{"Y06.0":"Negligencia y abandono"},"Y07 Otros s\xedndromes de malos tratos":{"Y07.0":"Otros s\xedndromes de malos tratos"},"Y40-Y59 Drogas, medicamentos y sustancias biol\xf3gicas que causan efectos adversos en uso terap\xe9utico":{Y46:"Antiepil\xe9pticos y antiparkinsonianos",Y47:"Sedantes, hipn\xf3ticos y ansiol\xedticos",Y49:"Psic\xf3tropos no clasificados en otro lugar ",Y50:"Estimulantes del sistema nervioso central no clasificados en otro lugar",Y51:"F\xe1rmacos que afectan primariamente al sistema nervioso aut\xf3nomo ",Y57:"Otros f\xe1rmacos y drogas sin especificar"},"Z00-Z99 Factores que influyen en el estado de salud y en el contacto con los servicios de salud":{Z55:"Problemas relacionados con la educaci\xf3n y la alfabetizaci\xf3n",Z56:"Problemas relacionados con el empleo y desempleo",Z59:"Problemas relacionados con la vivienda y las condiciones econ\xf3micas",Z60:"\tProblemas relacionados con el ambiente social","Z60.0":"Problemas de ajuste a las transiciones de los ciclos vitales","Z60.1":"Situaciones familiares at\xedpicas","Z60.2":"Vivir solo","Z60.3":"Dificultades en la adaptaci\xf3n cultural","Z60.4":"Exclusi\xf3n y rechazo social","Z60.5":"Ser blanco de discriminaci\xf3n adversa y persecuci\xf3n ","Z61.0":"P\xe9rdida de relaciones afectivas en la infancia","Z61.1":"Cambio de domicilio en la ni\xf1ez","Z61.2":"Patrones de relaciones familiares alterados en la infancia","Z61.3":"Hechos contundentes a la p\xe9rdida de la autoestima en la ni\xf1ez","Z61.4":"Problemas relacionados con presunto abuso sexual del ni\xf1o por una persona dentro del grupo de apoyo primario","Z61.5":"Problemas relacionados con presunto abuso sexual del ni\xf1o por una persona no perteneciente al grupo de apoyo primario","Z61.6":" Problemas relacionados con presunto abuso f\xedsico del ni\xf1o","Z61.7":"Experiencias personales atemorizantes en la ni\xf1ez","Z62.0":"\tSupervisi\xf3n y control inadecuados por parte de los padres","Z62.1":"Sobreprotecci\xf3n parental","Z62.2":"Crianza en una instituci\xf3n","Z62.3":"Hostigamiento y acusaci\xf3n de culpabilidad al ni\xf1o","Z62.4":"Abandono emocional del ni\xf1o","Z62.5":"\tOtros problemas relacionados con la negligencia en la crianza del ni\xf1o","Z62.6":"Presiones inapropiadas de los padres y otras anormalidades en la crianza","Z63.0":"Problemas en la relaci\xf3n entre esposos o pareja","Z63.1":"Problemas en la relaci\xf3n con los padres y los familiares pol\xedticos","Z63.2":"Problemas relacionados con el apoyo familiar inadecuado","Z63.3":"Problemas relacionados con la ausencia de un miembro de la familia","Z63.4":"Problemas relacionados con la desaparici\xf3n o muerte de un miembro de la familia","Z63.5":"Problemas relacionados con la ruptura familiar por separaci\xf3n o divorcio","Z63.6":"Problemas relacionados con familiar dependiente, necesitado de cuidado en la casa","Z63.7":"Problemas relacionados con otros hechos estresantes que afectan a la familia y al hogar","Z64.0":"Problemas relacionados con embarazo no deseado","Z64.1":"Problemas relacionados con la multiparidad","Z64.2":"Problemas relacionados con la solicitud o aceptaci\xf3n de intervenciones f\xedsicas, nutricionales y qu\xedmicas, conociendo su riesgo y peligro","Z64.3":"Problemas relacionados con la solicitud o aceptaci\xf3n de intervenciones psicol\xf3gicas o de la conducta, conociendo su riesgo y peligro","Z64.4":"Problemas relacionados con el desacuerdo con consejeros","Z65.0":"Problemas relacionados con culpabilidad en procedimientos civiles o criminales sin prisi\xf3n","Z65.1":"Problemas relacionados con prisi\xf3n y otro encarcelamiento","Z65.2":"Problemas relacionados con la liberaci\xf3n de la prisi\xf3n","Z65.3":"Problemas relacionados con otras circunstancias legales","Z65.4":"Problemas relacionados con v\xedctima de crimen o terrorismo","Z65.5":"Problemas relacionados con la exposici\xf3n a desastre, guerra u otras hostilidades","Z86.4":"Historia personal de abuso de sustancias psicoactivas","Z86.5":"Historia personal de otros trastornos mentales o del comportamiento","Z91.1":"Historia personal de incumplimiento del r\xe9gimen o tratamiento m\xe9dico","Z91.3":"Historia personal de ciclo sue\xf1o-vigilia no saludable","Z91.4":"Historia personal de trauma psicol\xf3gico, no clasificado en otra parte","Z91.5":"HISTORIA PERSONAL DE LESI\xd3N AUTOINFLIGIDA INTENCIONALMENTE"}},Ie=Z.a.Option,Se=Z.a.OptGroup,_e=ve.a.Dragger,we=m.a.TextArea,ke=function(e){console.log("selected ".concat(e))},Te=function(e){console.log("Failed:",e)};function Ee(e){var a=Object(n.useState)([]),t=Object(U.a)(a,2),r=t[0],c=t[1];Object(n.useEffect)((function(){console.log("Received nota on props: ",e.nota)}),[]);var s=function(){var a=Object(g.a)(Object(f.a)().mark((function a(t){var n;return Object(f.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.id_medico=w._id,t.id_usuario=e.paciente,t.recetas=[],t.estudios=r,console.log("ready To send: ",t),a.next=7,fetch(y+"notas/add",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return l.a.success(e.message||e.error),e})).catch((function(e){return console.error("Error:",e)}));case 7:n=a.sent,e.prevExpNotas.push(n.id_nota),fetch(y+"expedientes/updateNotas/"+e.id_expediente,{method:"PUT",body:JSON.stringify({notas:e.prevExpNotas}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("Update Exp:",e),l.a.success(e.message||e.error)})).catch((function(e){return console.error("Error:",e)}));case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),i={name:"file",multiple:!0,action:y+"notas/estudios/upload",onChange:function(e){var a=e.file.status;"uploading"!==a&&console.log(e.file,e.fileList),"done"===a?(l.a.success("".concat(e.file.name," file uploaded successfully.")),console.log("New Files: ",e.file.response.file),c([].concat(Object(ge.a)(r),[e.file.response.file]))):"error"===a&&l.a.error("".concat(e.file.name," file upload failed."))},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}};return Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{style:{marginLeft:20},children:"Detalles de la nota"}),Object(v.jsx)("br",{}),Object(v.jsxs)(_e,Object(B.a)(Object(B.a)({},i),{},{children:[Object(v.jsx)("p",{className:"ant-upload-drag-icon",children:Object(v.jsx)(ye.a,{})}),Object(v.jsx)("p",{className:"ant-upload-text",children:"Arrastra los archivos de estudio aqu\xed, o da click para buscar"}),Object(v.jsx)("p",{className:"ant-upload-hint",children:"Selecciona archivos en pdf o imagen que sean menores a 2 MB para poder subirlos"})]})),Object(v.jsxs)(b.a,{name:"basic",labelCol:{span:8},wrapperCol:{span:14},initialValues:e.nota?e.nota:{remember:!0,estudios:[]},onFinish:e.nota?function(a){console.log("ready To send: ",a),fetch(y+"notas/update/"+e.nota._id,{method:"PUT",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){l.a.success(a.message||a.error),a.message&&"Nota Updated"===a.message&&e.setIsModalVisible(!1),console.log(a)})).catch((function(e){return console.error("Error:",e)}))}:s,onFinishFailed:Te,autoComplete:"off",style:{marginTop:12},children:[Object(v.jsx)(b.a.Item,{label:"Edad",name:"edad",rules:[{required:!0,message:"Ingresa RFC"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Talla",name:"talla",rules:[{required:!1,message:"Ingresa RFC"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Peso",name:"peso",rules:[{required:!1,message:"Ingresa RFC"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"IMC",name:"imc",rules:[{required:!1,message:"Ingresa RFC"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Temperatura",name:"temperatura",rules:[{required:!1,message:"Ingresa RFC"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Presion Arterial",name:"presion_arterial",rules:[{required:!1,message:"Ingresa RFC"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Frecuencia Cariaca",name:"frecuencia_cardiaca",rules:[{required:!1,message:"Ingresa RFC"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Frecuencia respiratoria",name:"frecuencia_respiratoria",rules:[{required:!1,message:"Ingresa RFC"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Observaciones",name:"Observaciones",rules:[{required:!0,message:"Ingresa Observaciones"}],children:Object(v.jsx)(we,{rows:4})}),Object(v.jsx)(b.a.Item,{label:"Diagnostico",name:"diagnostico",rules:[{required:!0,message:"Selecciona Diagnostico"}],children:Object(v.jsx)(Z.a,{showSearch:!0,style:{width:400},onChange:ke,children:Object.keys(Ce).map((function(e){return Object(v.jsx)(Se,{label:e,children:Object.keys(Ce[e]).map((function(a){return Object(v.jsx)(Ie,{value:a,children:Ce[e][a]})}))})}))})}),Object(v.jsx)(b.a.Item,{wrapperCol:{offset:8,span:16},children:Object(v.jsxs)(J.a,{children:[Object(v.jsx)(O.a,{onClick:function(){return e.setIsModalVisible(!1)},children:"Cancelar"}),Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Guardar"})]})})]})]})}var Fe=t(792),qe=t(793),Ne=t(8);function De(e){Object(n.useEffect)((function(){console.log("receta props",e)}),[]);var a=Ne.StyleSheet.create({page:{flexDirection:"column",backgroundColor:"white"},block:{flexDirection:"row",justifyContent:"space-between"},sectionFull:{marginHorizontal:55,flexGrow:1},section:{margin:10,padding:10},image:{width:64},desc:{fontSize:12},footText:{fontSize:14},prescription:{fontSize:16}});function t(){return Object(v.jsx)(Ne.Document,{children:Object(v.jsxs)(Ne.Page,{size:"A5",orientation:"landscape",style:a.page,children:[Object(v.jsxs)(Ne.View,{style:a.block,children:[Object(v.jsxs)(Ne.View,{style:[a.section,{alignItems:"center"}],children:[Object(v.jsx)(Ne.Image,{style:a.image,src:I+e.logoHospital}),Object(v.jsxs)(Ne.Text,{style:a.footText,children:["Dr. ",w.name]}),Object(v.jsx)(Ne.View,{style:{color:"black",width:"60%",backgroundColor:"black",borderBottomColor:"#9bb4df",borderBottomWidth:1}}),w.especialidad&&Object(v.jsx)(Ne.Text,{style:a.footText,children:w.especialidad})]}),Object(v.jsxs)(Ne.View,{style:[a.section,{alignItems:"center"}],children:[w.universidades&&w.universidades.map((function(e){return Object(v.jsxs)(Ne.View,{style:{alignItems:"center"},children:[Object(v.jsx)(Ne.Text,{style:(w.universidades&&w.universidades.length)>1?a.desc:a.footText,children:e.carrera}),Object(v.jsx)(Ne.Text,{style:(w.universidades&&w.universidades.length)>1?a.desc:a.footText,children:e.universidad.toUpperCase()})]})})),Object(v.jsxs)(Ne.Text,{style:(w.universidades&&w.universidades.length)>1?a.desc:a.footText,children:["Ced. Prof.: ",w.cedula]})]})]}),Object(v.jsxs)(Ne.View,{style:a.sectionFull,children:[Object(v.jsxs)(Ne.Text,{style:a.footText,children:["Nombre: ",e.paciente.name]}),Object(v.jsxs)(Ne.Text,{style:a.footText,children:["Fecha: ",(new Date).toLocaleString()]})]}),Object(v.jsx)(Ne.View,{style:a.sectionFull,children:Object(v.jsx)(Ne.Text,{style:[a.prescription,{lineHeight:2}],children:e.receta.prescripcion})}),Object(v.jsx)(Ne.View,{style:{color:"black",width:"94%",backgroundColor:"black",borderBottomColor:"#9bb4df",borderBottomWidth:1,marginHorizontal:20}}),Object(v.jsxs)(Ne.View,{style:a.block,children:[Object(v.jsxs)(Ne.View,{style:a.section,children:[Object(v.jsx)(Ne.Text,{style:a.footText,children:w.email}),Object(v.jsx)(Ne.Text,{style:a.footText,children:w.telefono})]}),Object(v.jsxs)(Ne.View,{style:a.section,children:[Object(v.jsx)(Ne.Image,{style:a.image,src:L}),Object(v.jsx)(Ne.Text,{style:{fontSize:10},children:"www.recreamed.com"})]})]})]})})}return Object(v.jsx)("div",{children:Object(v.jsx)(Ne.PDFViewer,{height:500,width:550,children:Object(v.jsx)(t,{})})})}var Pe=m.a.TextArea;function Ae(e){var a=w&&w.rol&&"Medico"===w.rol,t=Object(n.useState)([]),r=Object(U.a)(t,2),c=r[0],s=r[1],i=Object(n.useState)(!0),o=Object(U.a)(i,2),m=o[0],h=o[1],p=Object(n.useState)({}),x=Object(U.a)(p,2),C=x[0],I=x[1],S=Object(n.useState)(!1),_=Object(U.a)(S,2),k=_[0],T=_[1],E=Object(n.useState)(!1),F=Object(U.a)(E,2),N=F[0],P=F[1],A=Object(n.useState)(!1),M=Object(U.a)(A,2),R=M[0],H=M[1],z=function(){T(!1)},L=function(){H(!1),ae(!1)},V=Object(n.useState)(null),B=Object(U.a)(V,2),G=B[0],Z=B[1],J=Object(n.useState)(null),Y=Object(U.a)(J,2),$=Y[0],X=Y[1],Q=Object(n.useState)(!1),K=Object(U.a)(Q,2),ee=K[0],ae=K[1];Object(n.useEffect)((function(){e.recetas?te():ne()}),[e.recetas]);var te=function(){D("recetas/getMany",{ids:e.recetas}).then((function(e){s(e),h(!1)}))},ne=function(){s([]),h(!1)},re=function(){var a=Object(g.a)(Object(f.a)().mark((function a(t){var n;return Object(f.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.id_nota=e.id_nota,console.log("new Receta:",t),console.log("new Recetas:",t),a.next=5,fetch(y+"recetas/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return console.log("Success:",e),l.a.info(e.message||e.error),"Receta creada correctamente"===e.message?T(!1):console.log(e.error),e})).catch((function(e){return console.error("Error:",e)}));case 5:n=a.sent,e.recetas.push(n.id_receta),console.log("New Recetas: ",e.recetas),fetch(y+"notas/updateRecetas/"+e.id_nota,{method:"PUT",body:JSON.stringify({recetas:e.recetas}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("Update Exp:",e),l.a.success(e.message||e.error)})).catch((function(e){return console.error("Error:",e)}));case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),ce=function(e){console.log("Failed:",e)},se=function(e){I(e),console.log(e),console.log("BeforeEdit"),P(!0)},ie=function(){var e=Object(g.a)(Object(f.a)().mark((function e(a){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(a),H(!0),console.log(a);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{children:[Object(v.jsxs)(u.a,{children:[Object(v.jsxs)("div",{className:"fila",style:{marginBottom:8},children:[Object(v.jsx)("h6",{children:"Recetas"}),a&&Object(v.jsx)(O.a,{className:"btnIconCentered",onClick:function(){return T(!0)},size:"small",type:"primary",shape:"circle",icon:Object(v.jsx)(W.a,{}),ghost:!0})]}),m?Object(v.jsx)("h5",{children:"Cargando Receta..."}):c.length>0?c.map((function(e){return Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[Object(v.jsxs)("p",{style:{whiteSpace:"pre"},children:[e.prescripcion," "]}),Object(v.jsxs)("div",{children:[a&&Object(v.jsx)(O.a,{style:{marginLeft:8},onClick:function(){return se(e)},size:"small",type:"primary",shape:"circle",icon:Object(v.jsx)(Fe.a,{}),className:"btnIconCentered",ghost:!0}),Object(v.jsx)(O.a,{style:{marginLeft:8},onClick:function(){return ie(e)},size:"small",type:"primary",shape:"circle",icon:Object(v.jsx)(qe.a,{}),className:"btnIconCentered",ghost:!0})]})]},e._id)})):Object(v.jsx)("h6",{children:"No hay una receta asignada"})]}),Object(v.jsx)(le.a,{title:"Nueva Receta",open:k,onOk:function(){T(!1)},onCancel:z,footer:[Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",form:"create_receta_medic",children:"Guardar"}),Object(v.jsx)(O.a,{onClick:z,children:"Cancelar"})],children:Object(v.jsx)(b.a,{name:"create_receta_medic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:re,onFinishFailed:ce,autoComplete:"off",children:Object(v.jsx)(b.a.Item,{label:"Prescripcion",name:"prescripcion",rules:[{required:!0,message:"Ingresa la prescripcion"}],children:Object(v.jsx)(Pe,{rows:4})})})}),Object(v.jsx)(le.a,{title:"Editar Receta",open:N,onOk:function(){P(!1)},onCancel:function(){P(!1)},destroyOnClose:!0,footer:[Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",form:"update_receta_medic",children:"Actualizar"})],children:Object(v.jsx)(b.a,{name:"update_receta_medic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{prescripcion:C.prescripcion},onFinish:function(e){console.log("update",e),q("recetas/update/".concat(C._id),e).then((function(e){P(!1),te()}))},onFinishFailed:ce,autoComplete:"off",children:Object(v.jsx)(b.a.Item,{label:"Prescripcion",name:"prescripcion",rules:[{required:!0,message:"Ingresa la prescripcion"}],children:Object(v.jsx)(Pe,{rows:4})})})}),Object(v.jsx)(le.a,{title:"Imprimir Receta",open:R,onOk:function(){H(!1),ae(!1)},onCancel:L,width:600,footer:[Object(v.jsx)(O.a,{onClick:L,children:"Cancelar"})],children:ee?Object(v.jsx)(De,{receta:C,logoHospital:G,nombreHospital:$,paciente:e.paciente}):Object(v.jsx)("div",{children:Object(v.jsx)(u.a,{title:"Selecciona un hospital",bordered:!1,children:w.horarios.map((function(e){return Object(v.jsx)(u.a.Grid,{style:{width:"100%"},onClick:function(){console.log(e.sucursal),Z(e.sucursal.logo),X(e.sucursal.nombre),ae(!0)},children:Object(v.jsxs)(d.a,{align:"middle",children:[Object(v.jsx)(j.a,{span:6,offset:4,children:Object(v.jsx)("img",{width:64,src:"https://api.recreamed.com/images/"+e.sucursal.logo,alt:"Logo"})}),Object(v.jsxs)(j.a,{span:10,children:[e.sucursal.nombre," ",Object(v.jsx)("br",{})," ",e.horario]})]})},e._id)}))})})})]})}var Me=t(774),Re=t(794),He=t(276),ze=t(275),Le=Me.a.Paragraph;function Ve(e){var a=Object(n.useState)({}),t=Object(U.a)(a,2),r=t[0],c=t[1],s=Object(n.useState)([]),i=Object(U.a)(s,2),o=i[0],l=i[1],d=Object(n.useState)(!0),j=Object(U.a)(d,2),b=j[0],m=j[1];Object(n.useEffect)((function(){O()}),[]);var h=function(e){var a=o;a.monto=e,q("balances/update/".concat(o._id),a).then(O)},O=function(){k("citas/".concat(e.paciente)).then((function(e){var a=function(e){var a=new Date,t=e.filter((function(e){return new Date(e.fecha_hora)<=a}));return t.sort((function(e,a){var t=new Date(e.fecha_hora);return new Date(a.fecha_hora)-t})),t[0]}(e);return c(a),a})).then((function(e){return k("balances/cita/"+(null===e||void 0===e?void 0:e._id))})).then((function(e){l(e[0])})).finally((function(){return m(!1)}))},p=function(){return Object(v.jsx)("div",{children:o&&o.monto?Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",columnGap:"10px"},children:[Object(v.jsx)(Re.a,{style:{}}),"Costo:",Object(v.jsx)(Le,{style:{marginTop:14},editable:{onChange:h},children:o.monto})]}):Object(v.jsx)("p",{children:"Sin Ultimo Balance"})})};return b?Object(v.jsx)("p",{children:"Cargando..."}):Object(v.jsx)("div",{style:{marginTop:8},children:Object(v.jsx)(u.a,{children:r?Object(v.jsxs)("div",{children:[Object(v.jsx)("h6",{children:"Cita m\xe1s reciente"}),Object(v.jsxs)("ul",{children:[Object(v.jsxs)("li",{className:"btnIconCentered",children:[Object(v.jsx)(He.a,{style:{marginRight:8}})," Fecha: ",new Date(r.fecha_hora).toLocaleDateString()]}),Object(v.jsx)("br",{}),Object(v.jsxs)("li",{className:"btnIconCentered",children:[Object(v.jsx)(ze.a,{style:{marginRight:8}})," Hora: ",r.fecha_hora.substring(11,16)]}),Object(v.jsx)(p,{})]})]}):Object(v.jsx)("h6",{children:"Sin cita recente registrada"})})})}var Be=t(444),Ge=t(451);m.a.TextArea;function Ue(e){var a=e._notas_evolucion,t=e.id_nota,r=Object(n.useState)(null),c=Object(U.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(!1),l=Object(U.a)(o,2),d=l[0],j=l[1],h=function(){j(!0)},p=function(){j(!1),i(null)};return Object(v.jsxs)("div",{children:[(a&&a.length)>0?a.map((function(e){return console.log("showing ",e),Object(v.jsxs)(u.a,{title:"Nota de evoluci\xf3n \t\tcreada el: ".concat(new Date(e.createdAt).toLocaleDateString(),"\t\tActualizada el ").concat(new Date(e.createdAt).toLocaleDateString()),size:"small",style:{marginBottom:8},children:[Object(v.jsxs)(u.a,{size:"small",children:[Object(v.jsx)("div",{className:"fila",style:{marginBottom:8},children:Object(v.jsx)("span",{className:"desc",children:"Signos Vitales"})}),Object(v.jsxs)("div",{className:"fila",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"desc",children:"Temperatura: "}),e.temperatura,"\xb0"]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"desc",children:"Frecuencia Respiratoria: "}),e.frecuencia_respiratoria]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"desc",children:"Frecuencia Cardiaca: "}),e.frecuencia_cardiaca]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"desc",children:"Presion Arterial: "}),e.presion_arterial]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"desc",children:"Saturacion de Oxigeno: "}),e.saturacion_oxigeno]})]}),Object(v.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse"},children:Object(v.jsx)(O.a,{onClick:function(){i(e),console.log("For edit ",e),h()},style:{marginTop:4},className:"btnIconCentered",size:"small",type:"primary",shape:"circle",icon:Object(v.jsx)(Ge.a,{}),ghost:!0})})]}),Object(v.jsxs)("div",{style:{marginTop:8},children:[Object(v.jsxs)("div",{className:"fila",style:{marginBottom:8},children:[Object(v.jsx)("h6",{children:"S"})," ",Object(v.jsx)(u.a,{size:"small",style:{width:"100%"},className:"textArea",children:e.s})]}),Object(v.jsxs)("div",{className:"fila",style:{marginBottom:8},children:[Object(v.jsx)("h6",{children:"O"}),Object(v.jsx)(u.a,{size:"small",style:{width:"100%"},className:"textArea",children:e.o})]}),Object(v.jsxs)("div",{className:"fila",style:{marginBottom:8},children:[Object(v.jsx)("h6",{children:"A"}),Object(v.jsx)(u.a,{size:"small",style:{width:"100%"},className:"textArea",children:e.a})]}),Object(v.jsxs)("div",{className:"fila",style:{marginBottom:8},children:[Object(v.jsx)("h6",{children:"P"}),Object(v.jsx)(u.a,{size:"small",style:{width:"100%"},className:"textArea",children:e.p})]})]})]},e._id)})):Object(v.jsx)(u.a,{title:"Sin notas de evolucion"}),Object(v.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse"},children:Object(v.jsx)(O.a,{onClick:h,style:{marginTop:4},className:"btnIconCentered",size:"small",type:"primary",shape:"circle",icon:Object(v.jsx)(W.a,{}),ghost:!0})}),Object(v.jsx)(le.a,{title:"Agregar Nota de Evoluci\xf3n",open:d,onOk:function(){j(!1),i(null)},onCancel:p,destroyOnClose:!0,footer:[Object(v.jsx)(O.a,{onClick:p,children:"Cancelar"}),Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",form:"add_nota_evo_doc",children:"Guardar"})],children:Object(v.jsxs)(b.a,{name:"add_nota_evo_doc",onFinish:s?function(e){a.find((function(e){return e._id===s._id}));var n=a.findIndex((function(e){return e._id===s._id}));-1!==n?(a[n]=e,console.log("Elemento actualizado:",a[n]),q("notas/update/".concat(t),{notas_evolucion:a}).then((function(e){j(!1)}))):console.log("No se encontr\xf3 el elemento con el ID proporcionado.")}:function(e){console.log("Received values of form:",e),a.push(e),console.log("After notas:",a),q("notas/update/".concat(t),{notas_evolucion:a}).then((function(e){console.log(e),j(!1)}))},autoComplete:"off",labelCol:{span:8},wrapperCol:{span:16},initialValues:s||{},children:[Object(v.jsx)(b.a.Item,{name:"temperatura",label:"Temperatura",rules:[{required:!1,message:"Ingrese la temperatura"}],children:Object(v.jsx)(Be.a,{style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{name:"frecuencia_respiratoria",label:"Frecuencia respiratoria",rules:[{required:!1,message:"Ingrese la frecuencia respiratoria"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"frecuencia_cardiaca",label:"Frecuencia cardiaca",rules:[{required:!1,message:"Ingrese la frecuencia cardiaca"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"presion_arterial",label:"Presion arterial",rules:[{required:!1,message:"Ingrese la presi\xf3n arterial"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"saturacion_oxigeno",label:"Saturacion oxigeno",rules:[{required:!1,message:"Ingrese la saturacion de oxigeno"}],children:Object(v.jsx)(m.a,{})}),"Medico"===w.rol&&Object(v.jsxs)("div",{children:[Object(v.jsx)(b.a.Item,{label:"S",name:"s",rules:[{required:!1,message:"Ingrese la respuesta"}],children:Object(v.jsx)(m.a.TextArea,{})}),Object(v.jsx)(b.a.Item,{label:"O",name:"o",rules:[{required:!1,message:"Ingrese la respuesta"}],children:Object(v.jsx)(m.a.TextArea,{})}),Object(v.jsx)(b.a.Item,{label:"A",name:"a",rules:[{required:!1,message:"Ingrese la respuesta"}],children:Object(v.jsx)(m.a.TextArea,{})}),Object(v.jsx)(b.a.Item,{label:"P",name:"p",rules:[{required:!1,message:"Ingrese la respuesta"}],children:Object(v.jsx)(m.a.TextArea,{})})]})]})})]})}var Ze=t(765),Je=t(280);function Ye(e){e.nombreHospital;var a=e.logoHospital,t=e.receta,r=e.datosPaciente,c=t.createdAt,s=t.peso,i=t.dosis,o=t.inicio,l=t.intermedio,d=t.termino,j=t.observaciones,u=t.aplicacion,b=r.name,m=r.medicos_asignados;Object(n.useEffect)((function(){console.log("hoja enf ",t),console.log("hoja enf datosPaciente",r)}),[]);var h=Ne.StyleSheet.create({page:{flexDirection:"column",justifyContent:"space-between",backgroundColor:"#ffffff",padding:30},header:{flexDirection:"row",justifyContent:"center",alignItems:"flex-start",marginBottom:20},title:{flexDirection:"row",justifyContent:"center",alignItems:"center",marginVertical:30,fontSize:18},subtitle:{flexDirection:"row",justifyContent:"center",alignItems:"center",marginVertical:15,fontSize:15},logo:{width:100},content:{flexDirection:"row",rowGap:12,justifyContent:"space-between",marginBottom:20},text:{fontSize:14},table:{display:"table",width:"auto",borderStyle:"solid",borderWidth:1,borderRightWidth:0,borderBottomWidth:0},tableRow:{margin:"auto",flexDirection:"row"},tableCol:{width:"14.285%",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableCell:{margin:"auto",marginTop:5,fontSize:10},tableContainer:{marginBottom:20},tableHeader:{backgroundColor:"#f0f0f0",borderBottomWidth:1},View:{margin:5,padding:5,borderWidth:1,borderColor:"black"},centeredText:{textAlign:"center",marginBottom:20},textarea:{borderWidth:1,borderColor:"black",padding:5,height:140}});function O(){return Object(v.jsx)(Ne.Document,{children:Object(v.jsxs)(Ne.Page,{size:"A4",style:h.page,children:[Object(v.jsx)(Ne.View,{style:h.header,children:Object(v.jsx)(Ne.Image,{style:h.logo,src:I+a})}),Object(v.jsx)(Ne.View,{style:h.title,children:Object(v.jsx)(Ne.Text,{children:"HOJA DE ENFERMER\xcdA"})}),Object(v.jsx)(Ne.View,{style:[h.content,{justifyContent:"flex-end"}],children:Object(v.jsxs)(Ne.Text,{style:h.fecha,children:["Fecha: ",new Date(c).toLocaleDateString("es-MX",{weekday:"long",year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})]})}),Object(v.jsx)(Ne.View,{style:h.content,children:Object(v.jsxs)(Ne.Text,{style:h.text,children:["Nombre: ",b]})}),Object(v.jsxs)(Ne.View,{style:h.content,children:[Object(v.jsxs)(Ne.Text,{style:h.text,children:["APLICACION: ",u+1]}),Object(v.jsxs)(Ne.Text,{style:h.text,children:["PESO: ",s]}),Object(v.jsxs)(Ne.Text,{style:h.text,children:["DOSIS: ",i]})]}),Object(v.jsxs)(Ne.View,{style:h.content,children:[Object(v.jsx)(Ne.Text,{style:h.text,children:"MEDICO TRATANTE:"}),m.map((function(e){return Object(v.jsx)(Ne.Text,{style:h.text,children:e.name})}))]}),Object(v.jsxs)(Ne.View,{style:h.table,children:[Object(v.jsxs)(Ne.View,{style:h.tableRow,children:[Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:"Hora"})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:"Temperatura"})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:"Frecuencia Respiratoria"})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:"Frecuencia Cardiaca"})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:"Presi\xf3n Arterial"})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:"Saturaci\xf3n de Oxigeno"})})]}),Object(v.jsxs)(Ne.View,{style:h.tableRow,children:[Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:"Inicio"})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:new Date(o.hora).toLocaleTimeString()})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsxs)(Ne.Text,{style:h.tableCell,children:[o.temperatura,"\xb0"]})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:o.frecuencia_respiratoria})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:o.frecuencia_cardiaca})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:o.presion_arterial})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:o.saturacion_oxigeno})})]}),Object(v.jsxs)(Ne.View,{style:h.tableRow,children:[Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:"Intermedio"})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:new Date(l.hora).toLocaleTimeString()})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsxs)(Ne.Text,{style:h.tableCell,children:[l.temperatura,"\xb0"]})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:l.frecuencia_respiratoria})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:l.frecuencia_cardiaca})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:l.presion_arterial})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:l.saturacion_oxigeno})})]}),Object(v.jsxs)(Ne.View,{style:h.tableRow,children:[Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:"T\xe9rmino"})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:new Date(d.hora).toLocaleTimeString()})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsxs)(Ne.Text,{style:h.tableCell,children:[d.temperatura,"\xb0"]})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:d.frecuencia_respiratoria})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:d.frecuencia_cardiaca})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:d.presion_arterial})}),Object(v.jsx)(Ne.View,{style:h.tableCol,children:Object(v.jsx)(Ne.Text,{style:h.tableCell,children:d.saturacion_oxigeno})})]})]}),Object(v.jsx)(Ne.View,{style:h.subtitle,children:Object(v.jsx)(Ne.Text,{children:"SIGNOS Y S\xcdNTOMAS (OBSERVACIONES DE ENFERMER\xcdA)"})}),Object(v.jsx)(Ne.View,{children:Object(v.jsx)(Ne.View,{style:h.textarea,children:Object(v.jsx)(Ne.Text,{style:{fontSize:12},children:j})})}),Object(v.jsx)(Ne.View,{style:h.subtitle,children:Object(v.jsx)(Ne.Text,{children:"ENFERMERO RESPONSABLE"})}),Object(v.jsx)(Ne.View,{style:{color:"black",width:"94%",backgroundColor:"black",borderBottomColor:"black",borderBottomWidth:2,marginHorizontal:20,alignSelf:"center"}}),Object(v.jsx)(Ne.View,{style:h.subtitle,children:Object(v.jsx)(Ne.Text,{children:"NOMBRE Y FIRMA"})})]})})}return Object(v.jsx)("div",{children:Object(v.jsx)(Ne.PDFViewer,{height:700,width:550,children:Object(v.jsx)(O,{})})})}function We(e){var a=e.hojas_enfermeria,t=e.id_nota,r=e.datosPaciente,c=Object(n.useState)(null),s=Object(U.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(!1),h=Object(U.a)(l,2),p=h[0],x=h[1],y=Object(n.useState)(!1),C=Object(U.a)(y,2),I=C[0],S=C[1],_=function(){S(!1),z(!1)},k=Object(n.useState)(null),T=Object(U.a)(k,2),E=T[0],F=T[1],N=Object(n.useState)(null),D=Object(U.a)(N,2),P=D[0],A=D[1],M=Object(n.useState)(!1),R=Object(U.a)(M,2),H=R[0],z=R[1],L=function(){x(!1),o(null)},V=Object(n.useState)(!1),B=Object(U.a)(V,2),G=B[0],Z=B[1],J=function(){Z(!1)},Y={width:"14%",textAlign:"center",height:"40"},$=function(){var e=Object(g.a)(Object(f.a)().mark((function e(a){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(a),S(!0),console.log(a);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(v.jsxs)(u.a,{style:{marginTop:8},children:[Object(v.jsx)("div",{className:"fila",style:{marginBottom:8},children:Object(v.jsx)("h6",{children:"Hojas de Enfermer\xeda"})}),a&&a.map((function(e,a){var t;return e.aplicacion=a,Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(O.a,{type:"link",onClick:function(){o(e),console.log(e),x(!0)},children:["Aplicacion ",a+1,"  ",new Date(null===(t=e.inicio)||void 0===t?void 0:t.hora).toLocaleDateString("es-MX")]},a),Object(v.jsx)(O.a,{style:{marginLeft:8},onClick:function(){return $(e)},size:"small",type:"primary",shape:"circle",icon:Object(v.jsx)(qe.a,{}),className:"btnIconCentered",ghost:!0})]})})),Object(v.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse"},children:Object(v.jsx)(O.a,{className:"btnIconCentered",onClick:function(){Z(!0)},size:"small",type:"primary",shape:"circle",icon:Object(v.jsx)(W.a,{}),ghost:!0})}),Object(v.jsx)(le.a,{open:p,onOk:L,onCancel:function(){o(null),x(!1)},width:1100,footer:[Object(v.jsx)(O.a,{onClick:L,children:"Cerrar"})],children:i&&Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:32,fontSize:15,fontWeight:"500"},children:[Object(v.jsxs)("span",{children:["Aplicacion ",i.aplicacion+1]}),Object(v.jsxs)("span",{children:["Peso: ",i.peso,"kg"]}),Object(v.jsxs)("span",{children:["Dosis: ",i.dosis]}),Object(v.jsx)("span",{children:new Date(i.createdAt).toLocaleDateString("es-Mx")})]}),Object(v.jsxs)(u.a,{style:{marginTop:10},bordered:!1,children:[Object(v.jsx)(u.a.Grid,{style:Y}),Object(v.jsx)(u.a.Grid,{style:Y,children:"HORA"}),Object(v.jsx)(u.a.Grid,{style:Y,children:"TEMPERATURA"}),Object(v.jsx)(u.a.Grid,{style:Y,children:"FRECUENCIA CARDIACA"}),Object(v.jsx)(u.a.Grid,{style:Y,children:"FRECUENCIA RESPIRATORIA"}),Object(v.jsx)(u.a.Grid,{style:Y,children:"PRESI\xd3N ARTERIAL"}),Object(v.jsx)(u.a.Grid,{style:Y,children:"SATURACION O\u2082"}),Object(v.jsx)(u.a.Grid,{style:Y,children:"INICIO"}),Object(v.jsx)(u.a.Grid,{style:Y,children:new Date(i.inicio.hora).toLocaleTimeString()}),Object(v.jsx)(u.a.Grid,{style:Y,children:i.inicio.temperatura}),Object(v.jsx)(u.a.Grid,{style:Y,children:i.inicio.frecuencia_cardiaca}),Object(v.jsx)(u.a.Grid,{style:Y,children:i.inicio.frecuencia_respiratoria}),Object(v.jsx)(u.a.Grid,{style:Y,children:i.inicio.presion_arterial}),Object(v.jsx)(u.a.Grid,{style:Y,children:i.inicio.saturacion_oxigeno}),Object(v.jsx)(u.a.Grid,{style:Y,children:"INTERMEDIO"}),Object(v.jsx)(u.a.Grid,{style:Y,children:new Date(i.intermedio.hora).toLocaleTimeString()}),Object(v.jsx)(u.a.Grid,{style:Y,children:i.intermedio.temperatura}),Object(v.jsx)(u.a.Grid,{style:Y,children:i.intermedio.frecuencia_cardiaca}),Object(v.jsx)(u.a.Grid,{style:Y,children:i.intermedio.frecuencia_respiratoria}),Object(v.jsx)(u.a.Grid,{style:Y,children:i.intermedio.presion_arterial}),Object(v.jsx)(u.a.Grid,{style:Y,children:i.intermedio.saturacion_oxigeno}),Object(v.jsx)(u.a.Grid,{style:Y,children:"TERMINO"}),Object(v.jsx)(u.a.Grid,{style:Y,children:new Date(i.termino.hora).toLocaleTimeString()}),Object(v.jsx)(u.a.Grid,{style:Y,children:i.termino.temperatura}),Object(v.jsx)(u.a.Grid,{style:Y,children:i.termino.frecuencia_cardiaca}),Object(v.jsx)(u.a.Grid,{style:Y,children:i.termino.frecuencia_respiratoria}),Object(v.jsx)(u.a.Grid,{style:Y,children:i.termino.presion_arterial}),Object(v.jsx)(u.a.Grid,{style:Y,children:i.termino.saturacion_oxigeno})]}),Object(v.jsx)("div",{style:{fontSize:16,fontWeight:"500",marginTop:8,marginBottom:8},children:"Observaciones"}),Object(v.jsx)(u.a,{size:"small",className:"textArea",children:i.observaciones})]})}),Object(v.jsx)(le.a,{title:"Nueva hoja de enfermer\xeda",open:G,onOk:J,onCancel:function(){Z(!1)},width:1e3,footer:[Object(v.jsx)(O.a,{onClick:J,children:"Cerrar"}),Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",form:"add_hoja_enfermeria",children:"Guardar"})],destroyOnClose:!0,children:Object(v.jsxs)(b.a,{name:"add_hoja_enfermeria",labelCol:{span:24},wrapperCol:{span:24},initialValues:{remember:!0},onFinish:function(e){console.log("prev hojas ",a),console.log("Success:",e),a.push(e),q("notas/update/".concat(t),{hojas_enfermeria:a}).then((function(e){console.log(e),Z(!1)}))},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",layout:"vertical",children:[Object(v.jsx)(b.a.Item,{label:"Peso",name:"peso",rules:[{required:!0,message:"Ingresa el peso"}],children:Object(v.jsx)(Be.a,{style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{label:"Dosis",name:"dosis",rules:[{required:!0,message:"Ingresa la dosis"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsxs)("div",{className:"fila",children:[Object(v.jsx)("span",{style:{width:100},children:"INICIO"}),Object(v.jsx)(b.a.Item,{label:"Hora",name:["inicio","hora"],rules:[{required:!0}],children:Object(v.jsx)(Ze.a,{format:"HH:mm",placeholder:"Hora de inicio",locale:Je.a})}),Object(v.jsx)(b.a.Item,{label:"Temperatura",name:["inicio","temperatura"],rules:[{required:!0}],children:Object(v.jsx)(Be.a,{})}),Object(v.jsx)(b.a.Item,{label:"Frec. Respiratoria",name:["inicio","frecuencia_respiratoria"],rules:[{required:!0}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Frecuencia cardiaca",name:["inicio","frecuencia_cardiaca"],rules:[{required:!0}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Presion arterial",name:["inicio","presion_arterial"],rules:[{required:!0}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Saturacion O\u2082",name:["inicio","saturacion_oxigeno"],rules:[{required:!0}],children:Object(v.jsx)(m.a,{})})]}),Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"row",columnGap:"10px"},children:[Object(v.jsx)("span",{style:{width:100},children:"INTERMEDIO"}),Object(v.jsx)(b.a.Item,{name:["intermedio","hora"],rules:[{required:!0}],children:Object(v.jsx)(Ze.a,{format:"HH:mm",placeholder:"Hora de aplicacion",locale:Je.a})}),Object(v.jsx)(b.a.Item,{name:["intermedio","temperatura"],rules:[{required:!0}],children:Object(v.jsx)(Be.a,{})}),Object(v.jsx)(b.a.Item,{name:["intermedio","frecuencia_respiratoria"],rules:[{required:!0}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:["intermedio","frecuencia_cardiaca"],rules:[{required:!0}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:["intermedio","presion_arterial"],rules:[{required:!0}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:["intermedio","saturacion_oxigeno"],srules:[{required:!0}],children:Object(v.jsx)(m.a,{})})]}),Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"row",columnGap:"10px"},children:[Object(v.jsx)("span",{style:{width:100},children:"TERMINO"}),Object(v.jsx)(b.a.Item,{name:["termino","hora"],rules:[{required:!0}],children:Object(v.jsx)(Ze.a,{format:"HH:mm",placeholder:"Hora de aplicacion",locale:Je.a})}),Object(v.jsx)(b.a.Item,{name:["termino","temperatura"],rules:[{required:!0}],children:Object(v.jsx)(Be.a,{})}),Object(v.jsx)(b.a.Item,{name:["termino","frecuencia_respiratoria"],rules:[{required:!0}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:["termino","frecuencia_cardiaca"],rules:[{required:!0}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:["termino","presion_arterial"],rules:[{required:!0}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:["termino","saturacion_oxigeno"],srules:[{required:!0}],children:Object(v.jsx)(m.a,{})})]}),Object(v.jsx)(b.a.Item,{label:"Observaciones",name:"observaciones",rules:[{required:!0,message:"Ingresa las observaciones"}],children:Object(v.jsx)(m.a.TextArea,{})})]})}),Object(v.jsx)(le.a,{title:"Imprimir Hoja de Enfermer\xeda",open:I,onOk:function(){S(!1),z(!1)},onCancel:_,width:600,footer:[Object(v.jsx)(O.a,{onClick:_,children:"Cancelar"})],destroyOnClose:!0,children:H?Object(v.jsx)(Ye,{receta:i,logoHospital:E,nombreHospital:P,datosPaciente:r}):Object(v.jsx)("div",{children:Object(v.jsx)(u.a,{title:"Selecciona un hospital",bordered:!1,children:w.horarios.map((function(e){return Object(v.jsx)(u.a.Grid,{style:{width:"100%"},onClick:function(){console.log("sucursal serlected",e.sucursal),F(e.sucursal.logo),A(e.sucursal.nombre),z(!0)},children:Object(v.jsxs)(d.a,{align:"middle",children:[Object(v.jsx)(j.a,{span:6,offset:4,children:Object(v.jsx)("img",{width:64,src:"https://api.recreamed.com/images/"+e.sucursal.logo,alt:"Logo"})}),Object(v.jsxs)(j.a,{span:10,children:[e.sucursal.nombre," ",Object(v.jsx)("br",{})," ",e.horario]})]})},e._id)}))})})})]})}function $e(e){var a=w&&w.rol&&"Medico"===w.rol,t=Object(n.useState)([]),r=Object(U.a)(t,2),c=r[0],s=r[1],i=Object(n.useState)(!0),o=Object(U.a)(i,2),b=o[0],m=o[1],h=Object(n.useState)(""),p=Object(U.a)(h,2),x=p[0],C=(p[1],Object(n.useState)(!1)),I=Object(U.a)(C,2),S=I[0],_=I[1],T=Object(n.useState)(!1),E=Object(U.a)(T,2),F=E[0],q=E[1],N=Object(n.useState)(!1),D=Object(U.a)(N,2),P=(D[0],D[1],Object(n.useState)(null)),A=Object(U.a)(P,2),M=(A[0],A[1],Object(n.useState)(0)),R=Object(U.a)(M,2),H=(R[0],R[1],e.paciente);Object(n.useEffect)((function(){H?z():L()}),[H]);var z=function(){var e=Object(g.a)(Object(f.a)().mark((function e(){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("notas/".concat(H)).then((function(e){console.log("NotasData: ",e),e&&0===e.length&&V(),e.forEach((function(e,a){e.label="Nota"+(a+1)})),s(e),m(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){s([]),m(!1)},V=function(){var a=Object(g.a)(Object(f.a)().mark((function a(){var t,n;return Object(f.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t={id_usuario:H,id_medico:w._id,edad:1,talla:1,imc:1,peso:1,temperatura:1,presion_arterial:"---/---",frecuencia_cardiaca:1,frecuencia_respiratoria:1,estudios:[],Observaciones:"",recetas:[]},a.next=3,fetch(y+"notas/add",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return l.a.success(e.message||e.error),e})).catch((function(e){return console.error("Error:",e)}));case 3:n=a.sent,e.prevExpNotas.push(n.id_nota),fetch(y+"expedientes/updateNotas/"+e.id_expediente,{method:"PUT",body:JSON.stringify({notas:e.prevExpNotas}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){l.a.success(e.message||e.error)})).catch((function(e){return console.error("Error:",e)})).finally((function(){z()}));case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),B=c?c.map((function(a,t){return{label:"Nota ".concat(t+1),key:a._id,children:Object(v.jsxs)(d.a,{gutter:8,style:{backgroundColor:"white"},children:[Object(v.jsxs)(j.a,{span:8,children:[Object(v.jsx)(Ae,{recetas:a.recetas,id_nota:a._id,paciente:e.paciente}),Object(v.jsx)(Ve,{paciente:H}),Object(v.jsx)(We,{hojas_enfermeria:a.hojas_enfermeria,id_nota:a._id,datosPaciente:e.datosPaciente})]}),Object(v.jsx)(j.a,{span:16,children:Object(v.jsx)(Ue,{_notas_evolucion:a.notas_evolucion,id_nota:a._id})})]})}})).reverse():[];return Object(v.jsxs)(u.a,{style:{marginTop:15},children:[Object(v.jsxs)(J.a,{children:[Object(v.jsx)("h5",{children:"Notas "}),a&&Object(v.jsx)(O.a,{className:"btnIconCentered",onClick:V,size:"small",type:"primary",shape:"circle",icon:Object(v.jsx)(W.a,{}),ghost:!0})]}),b?Object(v.jsx)("h5",{children:"Cargando Nota..."}):Object(v.jsx)(fe.a,{items:B}),Object(v.jsx)(le.a,{title:"Nueva Nota",open:S,onOk:function(){_(!1)},onCancel:function(){_(!1)},width:680,footer:[],destroyOnClose:!0,children:Object(v.jsx)(Ee,{id_expediente:e.id_expediente,paciente:H,prevExpNotas:e.prevExpNotas,setIsModalVisible:_})}),Object(v.jsx)(le.a,{title:"Editar Nota",open:F,onOk:function(){q(!1)},onCancel:function(){q(!1)},width:680,footer:[],destroyOnClose:!0,children:Object(v.jsx)(Ee,{nota:x,setIsModalVisible:q})})]})}var Xe=w&&w.rol&&"Medico"===w.rol;function Qe(e){var a=e.historia,t=e.detalles_paciente,r=m.a.TextArea,c=Object(n.useState)(""),s=Object(U.a)(c,2),i=s[0],o=s[1],d=Object(n.useState)(!0),j=Object(U.a)(d,2),h=j[0],p=j[1],x=Object(n.useState)(!1),f=Object(U.a)(x,2),g=f[0],C=f[1];Object(n.useEffect)((function(){a?S():I()}),[a]);var I=function(){o([]),p(!1)},S=function(){k("historia/".concat(a)).then((function(e){o(e),p(!1)}))},_=function(e){C(!1),fetch(y+"historias/update/"+i[0]._id,{method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),l.a.success(e.message||e.error)})).finally((function(){S(),C(!1)})),console.log("New Historia",e)},w=function(){return Object(v.jsxs)("div",{className:"fila",children:[Object(v.jsx)("span",{className:"desc",children:"Sexo:"})," ",t.sexo,Object(v.jsx)("span",{className:"desc",children:"Edad:"})," ",t.edad,Object(v.jsx)("span",{className:"desc",children:"Peso:"})," ",t.peso,Object(v.jsx)("span",{className:"desc",children:"Talla:"})," ",t.talla]})},T=function(){return g?Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(b.a,{name:"historiaForm",initialValues:{historial:i[0].historial},onFinish:_,children:[Object(v.jsx)(b.a.Item,{name:"historial",children:Object(v.jsx)(r,{rows:4})}),Object(v.jsxs)(J.a,{children:[Object(v.jsx)(b.a.Item,{children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Guardar"})}),Object(v.jsx)(b.a.Item,{children:Object(v.jsx)(O.a,{onClick:function(){return C(!1)},children:"Cancelar"})})]})]})}):Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{style:{whiteSpace:"pre-line",textAlign:"left",wordWrap:"normal"},children:i[0].historial}),Xe&&Object(v.jsx)(O.a,{className:"btnIconCentered",onClick:function(){return C(!0)},size:"small",disabled:!a,type:"primary",shape:"circle",icon:Object(v.jsx)(Fe.a,{className:"sizedIcon"}),style:{position:"absolute",bottom:18,right:18},ghost:!0})]})};return Object(v.jsxs)(u.a,{style:{width:"100%",justifyContent:"center",alignItems:"center",marginTop:15},children:[Object(v.jsx)("h5",{children:"Historia Clinica"}),Object(v.jsx)(w,{}),h?Object(v.jsx)("h5",{children:"Cargando Historia..."}):i.length>0?Object(v.jsx)(T,{}):Object(v.jsx)("h6",{children:"No hay una historia asignada"}),Object(v.jsx)("br",{})]})}var Ke=t(783),ea=t(795),aa=t(796);function ta(e){var a=e.paciente,t=e.setIsEditModalOpen;return Object(v.jsx)("div",{style:{marginTop:16,paddingBottom:4,display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:"white",width:"25%",borderRadius:8},children:Object(v.jsxs)("div",{style:{textAlign:"center",marginTop:8},children:[a.avatar.length>9?Object(v.jsx)("img",{width:82,src:"https://api.recreamed.com/images/"+a.avatar,alt:"ProfilePic",style:{alignSelf:"center"}}):Object(v.jsx)(Ke.a,{size:82,icon:Object(v.jsx)(p.a,{}),className:"btnIconCentered",style:{alignSelf:"center"}}),Object(v.jsx)("div",{style:{height:8}}),Object(v.jsxs)("p",{className:"nombre",children:[Object(v.jsx)(p.a,{style:{marginRight:10}})," ",a.name]}),Object(v.jsxs)("p",{className:"datos",children:[Object(v.jsx)(ea.a,{style:{marginRight:10}})," ",a.email]}),Object(v.jsxs)("p",{className:"datos",children:[Object(v.jsx)(aa.a,{style:{marginRight:10}})," ",a.telefono]}),Object(v.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse",paddingRight:16},children:Object(v.jsx)(O.a,{className:"btnIconCentered",onClick:function(){return t(!0)},size:"small",type:"primary",shape:"circle",icon:Object(v.jsx)(Fe.a,{className:"sizedIcon"}),ghost:!0})})]})})}function na(e){var a=e.paciente,t=e.setIsEditModalOpen,r=Object(n.useState)(null),c=Object(U.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(!0),d=Object(U.a)(o,2),j=d[0],u=d[1],b=Object(n.useState)(""),m=Object(U.a)(b,2),h=m[0],p=m[1],x=Object(n.useState)(""),C=Object(U.a)(x,2),I=(C[0],C[1]),S=a._id;Object(n.useEffect)((function(){_(S)}),[S]);var _=function(e){fetch(y+"expedientes/".concat(e)).then((function(e){return e.json()})).then((function(e){i(e),"undefined"!=typeof e&&null!==e?(I(e.notas),p(e.historia)):(I(null),p(null))})).finally((function(){return u(!1)}))};function w(){return k.apply(this,arguments)}function k(){return(k=Object(g.a)(Object(f.a)().mark((function e(){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D("historias/add",{historial:"Historia clinica al "+new Date}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=function(){var e=Object(g.a)(Object(f.a)().mark((function e(a){var t;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:t=e.sent,D("expedientes/add",{usuario:a,historia:t.id_historia,notas:[],recetas:[]}).then((function(e){l.a.success(e.message||e.error),e.message&&"Expediente creado correctamente"===e.message&&_(S)}));case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return j?Object(v.jsx)("p",{children:"Cargando..."}):Object(v.jsxs)("div",{id:"expedient-export",children:[Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:15},children:[Object(v.jsx)(ta,{paciente:a,setIsEditModalOpen:t}),Object(v.jsx)(Qe,{historia:h,detalles_paciente:a})]}),s?Object(v.jsx)($e,{id_expediente:s._id,prevExpNotas:s.notas,paciente:S,datosPaciente:a}):Object(v.jsxs)("div",{style:{},children:["Sin expediente",Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(O.a,{onClick:function(){T(S)},children:"Crear Expediente Ahora"})]})]})}var ra=t(772),ca=["key","name"],sa=["key","name"],ia=Z.a.Option,oa=ve.a.Dragger,la={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:14}}},da={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};function ja(e){var a=b.a.useForm(),t=Object(U.a)(a,1)[0],r=Object(n.useState)([]),c=Object(U.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(!0),u=Object(U.a)(o,2),h=u[0],p=u[1],x=Object(n.useState)(e.perfil.avatar),f=Object(U.a)(x,2),g=f[0],C=f[1],I={name:"file",multiple:!1,action:y+"imagenes/upload",onChange:function(e){var a=e.file.status;"uploading"!==a&&console.log(e.file,e.fileList),"done"===a?(l.a.success("".concat(e.file.name," file uploaded successfully.")),console.log("New Files: ",e.file.response.file),C(e.file.response.file)):"error"===a&&l.a.error("".concat(e.file.name," file upload failed."))},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}};Object(n.useEffect)((function(){console.log("received Medic: ",e.perfil),k("sucursales").then((function(e){i(e),p(!1)}))}),[]);return Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"Editar perfil"}),Object(v.jsx)("br",{}),Object(v.jsxs)(oa,Object(B.a)(Object(B.a)({},I),{},{children:[Object(v.jsx)("p",{className:"ant-upload-drag-icon",children:Object(v.jsx)(ye.a,{})}),Object(v.jsx)("p",{className:"ant-upload-text",children:"Arrastra la imagen de perfil o click ara buscar"}),Object(v.jsx)("p",{className:"ant-upload-hint",children:"Selecciona archivos en formato png, jpeg o webp"})]})),Object(v.jsx)("br",{}),Object(v.jsx)(b.a,Object(B.a)(Object(B.a)({},la),{},{form:t,name:"register",onFinish:function(a){a.avatar=g,console.log("ready to send",a),fetch(y+"users/updateUser/"+e.perfil._id,{method:"PUt",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){console.log("Success:",a),a.message&&"Usuario actualizado correctamente"===a.message?e.setEditing(!1):l.a.error(a.error)})).catch((function(e){return console.error("Error:",e)}))},initialValues:e.perfil,scrollToFirstError:!0,children:Object(v.jsxs)(d.a,{children:[Object(v.jsxs)(j.a,{span:11,children:[Object(v.jsx)(b.a.Item,{name:"name",label:"Nombre",rules:[{required:!0,message:"Ingresa Nombre y apellidos"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"email",label:"Correo",rules:[{type:"email",message:"Ingresa un corrreo electronico valido"},{required:!0,message:"Please input your E-mail!"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"telefono",label:"Telefono",rules:[{required:!0,message:"Ingresa el numero de telefono correcto"}],children:Object(v.jsx)(Be.a,{style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{label:"horarios",rules:[{required:!0,message:"Ingresa al menos un horario"}],children:Object(v.jsx)(b.a.List,{name:"horarios",label:"horarios list",children:function(e,a){var t=a.add,n=a.remove;return Object(v.jsxs)(v.Fragment,{children:[e.map((function(e){var a=e.key,t=e.name,r=Object(G.a)(e,ca);return Object(v.jsxs)(J.a,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"sucursal"],rules:[{required:!0,message:"Elije Sucursal"}],children:Object(v.jsx)(Z.a,{placeholder:"Elije Sucursal",style:{width:"120px"},children:h?"Cargando":s.map((function(e){return Object(v.jsx)(ia,{value:e._id,children:e.nombre})}))})})),Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"horario"],rules:[{required:!0,message:"Missing last name"}],children:Object(v.jsx)(m.a,{placeholder:"Horario"})})),Object(v.jsx)(Y.a,{onClick:function(){return n(t)}})]},a)})),Object(v.jsx)(b.a.Item,{children:Object(v.jsx)(O.a,{type:"dashed",onClick:function(){return t()},block:!0,icon:Object(v.jsx)(W.a,{}),children:"Agregar Horario"})})]})}})})]}),Object(v.jsxs)(j.a,{span:12,children:[Object(v.jsx)(b.a.Item,{name:"cedula",label:"Cedula",rules:[{required:!1,message:"Ingresa cedula"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"certificacion",label:"Certificacion",rules:[{required:!1,message:"Ingresa tu certificacion"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Universidades",rules:[{required:!0,message:"Ingresa al menos una universidad"}],children:Object(v.jsx)(b.a.List,{name:"universidades",label:"universidades list",children:function(e,a){var t=a.add,n=a.remove;return Object(v.jsxs)(v.Fragment,{children:[e.map((function(e){var a=e.key,t=e.name,r=Object(G.a)(e,sa);return Object(v.jsxs)(J.a,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"universidad"],rules:[{required:!0,message:"Ingresa la universidad"}],children:Object(v.jsx)(m.a,{placeholder:"Universidad"})})),Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"carrera"],rules:[{required:!0,message:"Ingresa la carrera"}],children:Object(v.jsx)(m.a,{placeholder:"Carrera"})})),Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"cedula"],rules:[{required:!1,message:"Ingresa la cedula"}],children:Object(v.jsx)(m.a,{placeholder:"Cedula"})})),Object(v.jsx)(Y.a,{onClick:function(){return n(t)}})]},a)})),Object(v.jsx)(b.a.Item,{children:Object(v.jsx)(O.a,{type:"dashed",onClick:function(){return t()},block:!0,icon:Object(v.jsx)(W.a,{}),children:"Agregar Universidad"})})]})}})}),Object(v.jsx)(b.a.Item,{name:"especialidad",label:"Especialidad",rules:[{required:!0,message:"Ingresa tu especialidad"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},da),{},{children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Guardar"})}))]})]})}))]})}var ua=t(449),ba=t(768),ma=t(769);function ha(e){var a=e.isOpen,t=e.handleClose,r=e.service,c=e.profileData,s=e.getProfileData,i=Object(n.useState)(null),o=Object(U.a)(i,2),l=(o[0],o[1]);Object(n.useEffect)((function(){console.log("before",c),l(r)}),[r]);var d=function(){var e=Object(g.a)(Object(f.a)().mark((function e(a){var n;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.color.metaColor&&(a.color="#"+a.color.metaColor.originalInput),console.log(a),n=c.configuracion?{configuracion:{tratamientos_ofrecidos:[].concat(Object(ge.a)(c.configuracion.tratamientos_ofrecidos),[a])}}:{configuracion:{tratamientos_ofrecidos:a}},e.next=5,q("/users/updateUser/".concat(c._id),n).then((function(e){console.log(e),s(),t()}));case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),j=function(){var e=Object(g.a)(Object(f.a)().mark((function e(a){var n,i;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.color.metaColor&&(a.color="#"+a.color.metaColor.originalInput),console.log(a),n=c.configuracion.tratamientos_ofrecidos,i=n.findIndex((function(e){return e._id===r._id})),n[i]=a,c.configuracion.tratamientos_ofrecidos=n,console.log("after: ",c),e.next=9,q("/users/updateUser/".concat(c._id),c).then((function(e){console.log(e),s(),t()}));case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return function(){l(null)}}),[]),Object(v.jsx)(le.a,{title:r?"Editar Servicio":"Agregar Servicio",open:a,onCancel:t,destroyOnClose:!0,footer:[Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",form:"add_tratamiento_medic",children:r?"Guardar":"Agregar"}),Object(v.jsx)(O.a,{onClick:t,children:"Cerrar"})],children:Object(v.jsxs)(b.a,{name:"add_tratamiento_medic",onFinish:r?j:d,labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600},initialValues:r||{color:"#3174ad"},children:[Object(v.jsx)(b.a.Item,{name:"tratamiento",label:"Tratamiento",rules:[{required:!0}],children:Object(v.jsx)(m.a,{placeholder:"Ingresa Descripcion"})}),Object(v.jsx)(b.a.Item,{name:"observaciones",label:"Observaciones",rules:[{required:!1}],children:Object(v.jsx)(m.a,{placeholder:"Ingresa Observaciones"})}),Object(v.jsx)(b.a.Item,{name:"costo",label:"Costo",rules:[{required:!0}],children:Object(v.jsx)(Be.a,{placeholder:"Costo",style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{name:"color",label:"Color en calendario",rules:[{required:!1}],children:Object(v.jsx)(ma.a,{presets:[{label:"Colores recomendados",colors:z},{label:"Recientes",colors:[]}]})})]})})}function Oa(e){var a,t=e.id_usuario,r=e.correo,c=Object(n.useState)([]),s=Object(U.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(!0),d=Object(U.a)(l,2),j=d[0],u=d[1],m=Object(n.useState)(!1),h=Object(U.a)(m,2),p=h[0],x=h[1],y=Object(n.useState)(!1),C=Object(U.a)(y,2),I=C[0],S=C[1],_=Object(n.useState)(null),w=Object(U.a)(_,2),T=w[0],E=w[1];Object(n.useEffect)((function(){F()}),[]);var F=function(){k("userByMail/".concat(r)).then((function(e){localStorage.setItem("userData",JSON.stringify(e[0])),o(e[0])})).finally((function(){u(!1)}))},N=function(){var e=Object(g.a)(Object(f.a)().mark((function e(a){var t,n;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.configuracion.tratamientos_ofrecidos,n=t.findIndex((function(e){return e._id===a._id})),t.splice(n,1),i.configuracion.tratamientos_ofrecidos=t,console.log("after: ",i),e.next=7,q("/users/updateUser/".concat(i._id),i).then((function(e){console.log(e),F()}));case 7:console.log(a);case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),D=[{title:"Servicio",dataIndex:"tratamiento",key:"name"},{title:"Observaciones",dataIndex:"observaciones",key:"observaciones"},{title:"Costo",dataIndex:"costo",key:"costo"},{title:"Color",dataIndex:"color",key:"color",render:function(e,a){var t=a.color;return Object(v.jsx)("div",{style:{width:42,height:16,backgroundColor:t,alignSelf:"center",borderRadius:3}})}},{title:"Opciones",dataIndex:"opciones",key:"opciones",render:function(e,a){return Object(v.jsxs)("div",{className:"fila",children:[Object(v.jsx)(O.a,{ghost:!0,type:"primary",onClick:function(){return P(a)},children:"Editar"}),Object(v.jsx)(ue.a,{title:"Delete the task",description:"Are you sure to delete this task?",onConfirm:function(){return N(a)},onCancel:function(){return console.log("Canceled")},okText:"Yes",cancelText:"No",children:Object(v.jsx)(O.a,{ghost:!0,danger:!0,children:"Eliminar"})})]})}}],P=function(e){E(e),S(!0)},A=function(){return Object(v.jsxs)(b.a,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600},initialValues:{remember:!0},onFinish:M,onFinishFailed:R,autoComplete:"off",children:[Object(v.jsx)(b.a.Item,{label:"Costo base de cita",name:"costo_cita",rules:[{required:!0,message:"Please input your username!"}],children:Object(v.jsx)(Be.a,{})}),Object(v.jsx)(b.a.Item,{wrapperCol:{offset:8,span:16},children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Guardar"})})]})},M=function(e){var a={configuracion:Object.assign(i.configuracion,e)};q("/users/updateUser/".concat(t),a).then((function(){return F()})).finally((function(){return x(!1)}))},R=function(e){console.log("Failed:",e)};return j?Object(v.jsx)(se,{}):Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"Configuracion"}),Object(v.jsx)("br",{}),p?Object(v.jsxs)("div",{children:[Object(v.jsx)("h5",{children:"Editando"}),Object(v.jsx)(A,{})]}):Object(v.jsxs)("div",{style:{display:"flex",alignContent:"center",columnGap:12},children:[Object(v.jsx)("h5",{children:i.configuracion&&i.configuracion.costo_cita?"Costo de cita: ".concat(i.configuracion.costo_cita):"Sin costo de cita definido"}),Object(v.jsx)(O.a,{type:"primary",ghost:!0,size:"small",onClick:x,children:"Modificar"})]}),Object(v.jsx)(ua.a,{}),Object(v.jsxs)("div",{className:"fila",children:[Object(v.jsx)("h5",{children:"Servicios Registrados"})," ",Object(v.jsx)(O.a,{type:"primary",ghost:!0,onClick:function(){return S(!0)},children:"Agergar Servicio"})]}),Object(v.jsx)("br",{}),Object(v.jsx)(ba.a,{dataSource:null===(a=i.configuracion)||void 0===a?void 0:a.tratamientos_ofrecidos,columns:D,bordered:!0}),Object(v.jsx)(ha,{isOpen:I,handleClose:function(){E(null),S(!1)},service:T,profileData:i,getProfileData:F})]})}function pa(){var e=Object(n.useState)([]),a=Object(U.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)(!1),s=Object(U.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(!0),b=Object(U.a)(l,2),m=b[0],h=b[1];Object(n.useEffect)((function(){x()}),[]),Object(n.useEffect)((function(){x()}),[i]);var x=function(){fetch(y+"userByMail/"+w.email).then((function(e){return e.json()})).then((function(e){r(e[0]),h(!1)}))},C=function(){var e=Object(g.a)(Object(f.a)().mark((function e(a){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.horarios.forEach((function(e){e.sucursal=e.sucursal._id})),o(!0);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),I=function(e){var a=e.universidad,t=e.carrera,n=e.cedula,r=void 0===n?"":n;return Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:12,textAlign:"left"},children:[Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"30%",borderBottom:"solid 2px #f5f6f8"},children:[Object(v.jsx)("div",{className:"desc",children:"Universidad:"}),Object(v.jsx)("div",{children:a})," "]}),Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"30%",borderBottom:"solid 2px #f5f6f8"},children:[Object(v.jsx)("div",{className:"desc",children:"Carrera:"}),Object(v.jsx)("div",{children:t})]}),Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"30%",borderBottom:"solid 2px #f5f6f8"},children:[Object(v.jsx)("div",{className:"desc",children:"Cedula:"}),Object(v.jsx)("div",{children:r})]})]})},S=function(){return Object(v.jsxs)("div",{children:[Object(v.jsxs)(d.a,{gutter:8,style:{backgroundColor:"#f5f6f8",borderRadius:12,padding:8},children:[Object(v.jsx)(j.a,{span:8,children:Object(v.jsxs)(u.a,{style:{display:"flex",justifyContent:"center",textAlign:"center"},children:[t.avatar.length>9?Object(v.jsx)(ra.a,{style:{borderRadius:12},width:256,src:"https://api.recreamed.com/images/"+t.avatar,alt:"medic-profile-pic"}):Object(v.jsx)(Ke.a,{size:128,icon:Object(v.jsx)(p.a,{}),className:"btnIconCentered"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsxs)("p",{className:"nombre",children:[t.name," "]}),Object(v.jsxs)("p",{className:"datos",children:[t.rol," "]}),t.especialidad&&Object(v.jsxs)("p",{className:"datos",children:[t.especialidad," "]}),Object(v.jsxs)("p",{className:"datos",children:[t.email," "]}),Object(v.jsxs)("p",{className:"datos",children:[t.telefono," "]})]})}),Object(v.jsx)(j.a,{span:7,children:Object(v.jsx)(u.a,{title:"Horarios",size:"small",style:{height:"100%"},children:t.horarios.map((function(e){return Object(v.jsx)(u.a.Grid,{style:{width:"100%"},children:Object(v.jsxs)(d.a,{align:"middle",children:[Object(v.jsx)(j.a,{span:6,offset:4,children:Object(v.jsx)("img",{width:64,src:"https://api.recreamed.com/images/"+e.sucursal.logo,alt:"Logo"})}),Object(v.jsxs)(j.a,{span:10,children:[e.sucursal.nombre," ",Object(v.jsx)("br",{})," ",e.horario]})]})})}))})}),Object(v.jsx)(j.a,{span:9,children:Object(v.jsx)(u.a,{title:"Universidades",size:"small",style:{height:"100%"},children:t.universidades&&t.universidades.map((function(e){return Object(v.jsx)(I,Object(B.a)({},e))}))})})]}),Object(v.jsx)("br",{}),Object(v.jsx)(Oa,{id_usuario:w._id,correo:w.email})]})};return Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsxs)(J.a,{children:[Object(v.jsx)("h3",{children:"PERFIL"}),Object(v.jsx)(O.a,{onClick:function(){return C(t)},type:"primary",shape:"circle",icon:Object(v.jsx)(Fe.a,{}),className:"btnIconCentered"})]}),m?Object(v.jsx)(se,{}):Object(v.jsx)("div",{children:i?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ja,{perfil:t,setEditing:o}),Object(v.jsx)(O.a,{onClick:function(){return o(!1)},children:"Cancelar"})]}):Object(v.jsx)(S,{})})]})}var xa=t(23),fa=t(24),ga=t(28),va=t(29),ya=t(779),Ca=(t(731),n.Component,t.p+"static/media/Icon.e05b6872.png"),Ia=t(797),Sa=Z.a.Option;function _a(e){var a=b.a.useForm(),t=Object(U.a)(a,1)[0],r=Object(n.useState)(e.paciente?e.paciente.avatar:"noimg.jpg"),c=Object(U.a)(r,2),s=c[0],i=c[1];function o(){return d.apply(this,arguments)}function d(){return(d=Object(g.a)(Object(f.a)().mark((function e(){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(y+"historias/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({historial:"Historia clinica al "+new Date})}).then((function(e){return e.json()})).then((function(e){return console.log("Story Created: ",e),e})).catch((function(e){return console.error("Error:",e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){console.log("Received patient ",e.paciente)}),[]);var j=function(){var a=Object(g.a)(Object(f.a)().mark((function a(t){var n,r;return Object(f.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o();case 2:return n=a.sent,console.log("historia on Register: ",n),r={usuario:t,historia:n.id_historia,notas:[],recetas:[]},console.log("postBodyForExpedient: ",r),a.next=8,fetch(y+"expedientes/add",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){console.log("Success:",a),l.a.success(a.message||a.error),a.message&&"Expediente creado correctamente"===a.message&&e.setAdding(!1)})).catch((function(e){return console.error("Error:",e)}));case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),u=function(){var a=Object(g.a)(Object(f.a)().mark((function a(t){var n;return Object(f.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.avatar=s,t.estatus="1",t.rol="Paciente",t.password=""+t.telefono,t.universidades=[],t.certificacion="",t.cedula="",t.horarios=[],t.medicos_asignados=e.paciente?e.paciente.medicos_asignados:[w._id],t.responsable={nombre:t.res_name,telefono:t.res_phone},delete t.prefix,delete t.res_name,delete t.res_phone,n=e.paciente?y+"users/updateUser/"+e.paciente._id:C+"register",console.log("before send",t),console.log("url: ",n),a.next=18,fetch(n,{method:e.paciente?"PUT":"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){console.log("Create User Response:",a),l.a.success(a.message||a.error),e.paciente?console.log("Editing, not creating patient"):j(a.user_id),"Usuario creado correctamente"===a.message?e.setAdding(!1):console.log(a),"Usuario actualizado correctamente"===a.message?h():console.log(a)})).catch((function(e){return console.error("Error:",e)}));case 18:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),h=function(){e.setAdding(!1),e.getPacientesData()},p={name:"file",multiple:!1,action:y+"imagenes/upload",onChange:function(e){var a=e.file.status;"uploading"!==a&&console.log(e.file,e.fileList),"done"===a?(l.a.success("".concat(e.file.name," file uploaded successfully.")),console.log("New Files: ",e.file.response.file),i(e.file.response.file)):"error"===a&&l.a.error("".concat(e.file.name," file upload failed."))}};return Object(v.jsxs)("div",{style:{width:"100%",height:"100%",overflowY:"scroll"},children:[e.paciente?Object(v.jsx)("h4",{children:"Editar paciente"}):Object(v.jsx)("h4",{children:"Registrar Paciente"}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(v.jsx)(ve.a,Object(B.a)(Object(B.a)({},p),{},{children:Object(v.jsx)(O.a,{type:"dashed",icon:Object(v.jsx)(Ia.a,{style:{fontSize:24,color:"#0d6efd"}}),style:{width:400,height:80},block:!0,children:"Selecciona la foto de perfil"})}))}),Object(v.jsx)("br",{}),Object(v.jsxs)(b.a,{labelCol:{span:6},wrapperCol:{span:16},form:t,name:"register_patient_medic",onFinish:u,onFinishFailed:function(e){console.log("Failed:",e)},initialValues:e.paciente,scrollToFirstError:!0,children:[Object(v.jsx)(b.a.Item,{name:"name",label:"Nombre",rules:[{required:!0,message:"Ingresa Nombre y apellidos"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"email",label:"Correo",rules:[{type:"email",message:"Ingresa un correo electronico vaido!"},{required:!0,message:"Ingresa un correo electronico"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"telefono",label:"Telefono",rules:[{required:!0,message:"Ingresa tu numero de telefono"}],children:Object(v.jsx)(Be.a,{style:{width:"100%"}})}),Object(v.jsx)(ua.a,{children:"Responsable (opcional) "}),Object(v.jsx)(b.a.Item,{name:"res_name",label:"Nombre Responsable",children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"res_phone",label:"Telefono Responsable",children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(ua.a,{}),Object(v.jsx)(b.a.Item,{name:"calle",label:"Calle",rules:[{required:!1,message:"Ingresa calle",whitespace:!0}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"numexterior",label:"Num Exterior",rules:[{required:!1,message:"Ingresa numero exterior"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"numinterior",label:"Num Interior",rules:[{required:!1,message:"Ingresa numinterior"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Colonia",name:"colonia",rules:[{required:!1,message:"Ingresa "}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"estado",label:"Estado",rules:[{required:!1,message:"Apellido materno"}],children:Object(v.jsx)(Z.a,{placeholder:"Elije tu estado",showSearch:!0,children:M.map((function(e){return Object(v.jsx)(Sa,{value:e,children:e})}))})}),Object(v.jsx)(b.a.Item,{name:"municipio",label:"Municipio",rules:[{required:!1,message:"Ingresa tu municipio"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"codigopostal",label:"Codigo Postal",rules:[{required:!1,message:"Ingresa codigopostal"}],children:Object(v.jsx)(Be.a,{style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{name:"sexo",label:"sexo",rules:[{required:!1,message:"Selecciona una opcion"}],children:Object(v.jsxs)(Z.a,{placeholder:"Elije el sexo",children:[Object(v.jsx)(Sa,{value:"H",children:"H"}),Object(v.jsx)(Sa,{value:"M",children:"M"}),Object(v.jsx)(Sa,{value:"Otro",children:"Otro"})]})}),Object(v.jsx)(b.a.Item,{name:"edad",label:"Edad",rules:[{required:!1,message:"Ingresa edad"}],children:Object(v.jsx)(Be.a,{min:1,max:120})}),Object(v.jsx)(b.a.Item,{name:"diagnostico",label:"Diagnostico",rules:[{required:!1,message:"Ingresa el diagnostico"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"peso",label:"Peso",rules:[{required:!1,message:"Ingresa el peso"}],children:Object(v.jsx)(Be.a,{min:1,max:200})}),Object(v.jsx)(b.a.Item,{name:"talla",label:"Talla",rules:[{required:!1,message:"Ingresa la talla"}],children:Object(v.jsx)(Be.a,{min:1,max:200})}),Object(v.jsx)(b.a.Item,{name:"ocupacion",label:"Ocupacion",rules:[{required:!1,message:"Ingresa ocupacion"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"estado_civil",label:"Estado Civil",rules:[{required:!1,message:"Ingresa estado civil"}],children:Object(v.jsxs)(Z.a,{placeholder:"Elije el estado civil",children:[Object(v.jsx)(Sa,{value:"Soltero",children:"Soltero"}),Object(v.jsx)(Sa,{value:"Casado",children:"Casado"}),Object(v.jsx)(Sa,{value:"Divorciado",children:"Divorciado"}),Object(v.jsx)(Sa,{value:"Separaci\xf3n en proceso judicial",children:"Separaci\xf3n en proceso judicial"}),Object(v.jsx)(Sa,{value:"Viudo",children:"Viudo"}),Object(v.jsx)(Sa,{value:"Concubinato",children:"Concubinato"})]})}),Object(v.jsx)(b.a.Item,{name:"escolaridad",label:"Escolaridad",rules:[{required:!1,message:"Ingresa escolaridad"}],children:Object(v.jsxs)(Z.a,{placeholder:"Elije escolaridad",children:[Object(v.jsx)(Sa,{value:"Ninguno",children:"Ninguno"}),Object(v.jsx)(Sa,{value:"Preescolar",children:"Preescolar"}),Object(v.jsx)(Sa,{value:"Primaria",children:"Primaria"}),Object(v.jsx)(Sa,{value:"Secundaria",children:"Secundaria"}),Object(v.jsx)(Sa,{value:"Medio Superior",children:"Medio Superior"}),Object(v.jsx)(Sa,{value:"Superior",children:"Superior"}),Object(v.jsx)(Sa,{value:"Posgrado",children:"Posgrado"})]})}),Object(v.jsx)(b.a.Item,{name:"lugar_de_nacimiento",label:"Lugar De Nacimiento",rules:[{required:!1,message:"Ingresa el lugar de nacimiento"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"fecha_nacimiento",label:"Fecha De Nacimiento",rules:[{required:!1,message:"Ingresa la fecha de nacimiento"}],children:Object(v.jsx)(oe.a,{})}),Object(v.jsx)(b.a.Item,{name:"ciudad",label:"Ciudad de residencia",rules:[{required:!1,message:"Ingresa ciudad"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"fuma",label:"Fuma",rules:[{required:!1,message:"Ingresa tu universidad"}],children:Object(v.jsx)(ie.a,{defaultChecked:!1})}),Object(v.jsx)(b.a.Item,{name:"alcohol",label:"Alcohol",rules:[{required:!1,message:"Ingresa tu universidad"}],children:Object(v.jsx)(ie.a,{defaultChecked:!1})}),Object(v.jsx)(b.a.Item,{name:"drogas",label:"Drogas",rules:[{required:!1,message:"Selecciona una opcion"}],children:Object(v.jsxs)(Z.a,{placeholder:"Elije una opcion",children:[Object(v.jsx)(Sa,{value:"Antes",children:"Antes"}),Object(v.jsx)(Sa,{value:"Ahora",children:"Ahora"}),Object(v.jsx)(Sa,{value:"Nunca",children:"Nunca"})]})}),Object(v.jsx)(b.a.Item,{name:"cuales_drogas",label:"Cuales Drogas",rules:[{required:!1,message:"Selecciona una opcion"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"enfermedades_familiares",label:"Enfermedades Familiares",rules:[{required:!1,message:"Ingresa tu universidad"}],children:Object(v.jsx)(b.a.List,{name:"enfermedades_familiares",children:function(e,a,t){var n=a.add,r=a.remove,c=t.errors;return Object(v.jsxs)(v.Fragment,{children:[e.map((function(a,t){return Object(v.jsxs)(b.a.Item,{label:"",required:!1,children:[Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},a),{},{noStyle:!0,validateTrigger:["onChange","onBlur"],rules:[{required:!1,whitespace:!0,message:"Ingresa la enfermedad o elimina este campo"}],children:Object(v.jsx)(m.a,{placeholder:"Ingresa enfermedad",style:{width:e.length>1?"93%":"100%"}})})),e.length>1?Object(v.jsx)(Y.a,{className:"dynamic-delete-button",onClick:function(){return r(a.name)}}):null]},a.key)})),Object(v.jsxs)(b.a.Item,{children:[Object(v.jsx)(O.a,{type:"dashed",onClick:function(){return n()},icon:Object(v.jsx)(W.a,{}),children:"Agregar Enfermedad  Familiar"}),Object(v.jsx)(b.a.ErrorList,{errors:c})]})]})}})}),Object(v.jsx)(b.a.Item,{name:"enfermedades_medicas",label:"Enfermedades Medicas",rules:[{required:!1,message:"Ingresa tu universidad"}],children:Object(v.jsx)(b.a.List,{name:"enfermedades_medicas",children:function(e,a,t){var n=a.add,r=a.remove,c=t.errors;return Object(v.jsxs)(v.Fragment,{children:[e.map((function(a,t){return Object(v.jsxs)(b.a.Item,{label:"",required:!1,children:[Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},a),{},{noStyle:!0,validateTrigger:["onChange","onBlur"],rules:[{required:!1,whitespace:!0,message:"Ingresa la enfermedad o elimina este campo"}],children:Object(v.jsx)(m.a,{placeholder:"Ingresa enfermedad",style:{width:e.length>1?"93%":"100%"}})})),e.length>1?Object(v.jsx)(Y.a,{className:"dynamic-delete-button",onClick:function(){return r(a.name)}}):null]},a.key)})),Object(v.jsxs)(b.a.Item,{children:[Object(v.jsx)(O.a,{type:"dashed",onClick:function(){return n()},icon:Object(v.jsx)(W.a,{}),children:"Agregar Enfermedad Medica"}),Object(v.jsx)(b.a.ErrorList,{errors:c})]})]})}})}),Object(v.jsx)(b.a.Item,{name:"tratamiento_actual",label:"Tratamiento actual",rules:[{required:!1,message:"Ingresa tu universidad"}],children:Object(v.jsx)(b.a.List,{name:"tratamiento_actual",children:function(e,a,t){var n=a.add,r=a.remove,c=t.errors;return Object(v.jsxs)(v.Fragment,{children:[e.map((function(a,t){return Object(v.jsxs)(b.a.Item,{label:"",required:!1,children:[Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},a),{},{noStyle:!0,validateTrigger:["onChange","onBlur"],rules:[{required:!1,whitespace:!0,message:"Ingresa la enfermedad o elimina este campo"}],children:Object(v.jsx)(m.a,{placeholder:"Ingresa enfermedad",style:{width:e.length>1?"93%":"100%"}})})),e.length>1?Object(v.jsx)(Y.a,{className:"dynamic-delete-button",onClick:function(){return r(a.name)}}):null]},a.key)})),Object(v.jsxs)(b.a.Item,{children:[Object(v.jsx)(O.a,{type:"dashed",onClick:function(){return n()},icon:Object(v.jsx)(W.a,{}),children:"Agregar Tratamiento"}),Object(v.jsx)(b.a.ErrorList,{errors:c})]})]})}})})]})]})}function wa(e){var a=e.paciente,t=e.setIsModalOpen,n=e.isModalOpen,r=e.getPacientesData;return Object(v.jsx)(le.a,{width:800,open:n,onOk:function(){t(!1)},onCancel:function(){t(!1)},destroyOnClose:!0,footer:[Object(v.jsx)(O.a,{onClick:function(){return t(!1)},children:"Cancelar"}),Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",form:"register_patient_medic",children:"Guardar"})],children:Object(v.jsx)(_a,{paciente:a,setAdding:t,getPacientesData:r})})}var ka=Z.a.Option;function Ta(){var e,a=Object(n.useState)([]),t=Object(U.a)(a,2),r=t[0],c=t[1],s=Object(n.useState)(!0),i=Object(U.a)(s,2),o=i[0],l=i[1],u=Object(n.useState)(!1),b=Object(U.a)(u,2),m=b[0],h=b[1],p=Object(n.useState)(!1),x=Object(U.a)(p,2),f=x[0],g=x[1],C=Object(n.useState)(null===(e=r[0])||void 0===e?void 0:e._id),I=Object(U.a)(C,2),S=I[0],_=I[1];Object(n.useEffect)((function(){k()}),[]),Object(n.useEffect)((function(){k()}),[m]);var k=function(){fetch(y+"mispacientes/".concat(w._id)).then((function(e){return e.json()})).then((function(e){e.forEach((function(e){e.res_name=e.responsable.nombre,e.res_phone=e.responsable.telefono,e.fecha_nacimiento=me()(e.fecha_nacimiento)})),c(e),e&&e.length>0&&_(e[0])})).finally((function(){return l(!1)}))};return o?Object(v.jsx)(se,{}):Object(v.jsxs)("div",{className:"mainContainer",style:{backgroundColor:"#f5f6f8"},children:[Object(v.jsx)("h3",{children:"Pacientes"}),Object(v.jsxs)(d.a,{justify:"start",children:[Object(v.jsx)(j.a,{children:Object(v.jsx)("div",{className:"my-select-container",children:Object(v.jsx)(Z.a,{style:{borderRadius:8,width:256},dropdownStyle:{borderRadius:8},showSearch:!0,placeholder:"Buscar paciente",optionFilterProp:"children",onChange:function(e){var a=r.find((function(a){return a._id===e}));_(a),console.log("active patient",a)},onSearch:function(e){console.log("search:",e)},filterOption:function(e,a){return a.children.toLowerCase().includes(e.toLowerCase())},children:r.map((function(e){return Object(v.jsx)(ka,{value:e._id,children:e.name},e._id)}))})})}),Object(v.jsxs)(j.a,{style:{marginLeft:12},children:[Object(v.jsx)(O.a,{className:"btnIconCentered",style:{marginTop:4},onClick:function(){return h(!m)},size:"small",type:"primary",shape:"circle",icon:Object(v.jsx)(W.a,{})})," "]})]})," ",Object(v.jsx)("div",{style:{height:"16px"}}),S&&Object(v.jsx)(na,{paciente:S,setIsEditModalOpen:g}),Object(v.jsx)(wa,{setIsModalOpen:h,isModalOpen:m,getPacientesData:k}),Object(v.jsx)(wa,{setIsModalOpen:g,isModalOpen:f,paciente:S,getPacientesData:k})]})}var Ea=t(2),Fa=t(441),qa=t.n(Fa),Na=t(319),Da=Z.a.Option;function Pa(e){var a=Object(n.useState)([]),t=Object(U.a)(a,2),r=t[0],c=t[1],s=Object(n.useState)(null),i=Object(U.a)(s,2),o=i[0],d=i[1],j=Object(n.useState)(""),u=Object(U.a)(j,2),m=u[0],h=u[1],p=Object(n.useState)([]),x=Object(U.a)(p,2),y=x[0],C=x[1],I=Object(n.useState)(null),S=Object(U.a)(I,2),_=S[0],T=S[1],E=Object(n.useRef)(null),F=function(e){k("mispacientes/".concat(e)).then((function(a){d(null),c(a),console.log("patients of ".concat(e),a)}))},q=function(e){var a=[];return H.forEach((function(t){e.forEach((function(e){e.horarios.forEach((function(n){a.includes(e)||n.sucursal._id!==t||a.push(e)}))})),console.log("Founds for ".concat(t,": "),a)})),a};Object(n.useEffect)((function(){"Medico"===w.rol?F(w._id):k("users_by_rol/Medico").then((function(e){C(q(e))}))}),[]);var N=function(){var e=Object(g.a)(Object(f.a)().mark((function e(){var a,t;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Na.b)(E.current,{width:288});case 2:a=e.sent,(t=document.createElement("a")).download="codigo-de-enlace.png",t.href=a,t.click();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(g.a)(Object(f.a)().mark((function e(){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.a.info("Espere mientras se copia el codigo..."),Object(Na.a)(E.current,{width:288}).then(function(){var e=Object(g.a)(Object(f.a)().mark((function e(a){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.write([new ClipboardItem(Object(Ea.a)({},a.type,a))]);case 3:console.log("Image copied"),l.a.success("Codigo Copiado al Portapapeles"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{children:[("Administrador"===w.rol||"Recepcion"===w.rol||"Enfermero"===w.rol)&&Object(v.jsx)(b.a.Item,{label:"Medico",name:"usuario",rules:[{required:!0,message:"Selecciona el paciente"}],style:{alignItems:"center",paddingTop:20},children:Object(v.jsx)(Z.a,{showSearch:!0,style:{width:260},onChange:function(e){T(e),F(e)},placeholder:"Selecciona un medico",children:y.map((function(e){return Object(v.jsx)(Da,{value:e._id,children:e.name},e._id)}))})}),Object(v.jsx)(b.a.Item,{label:"Paciente",name:"usuario",rules:[{required:!0,message:"Selecciona el paciente"}],style:{alignItems:"center",paddingTop:20},children:Object(v.jsx)(Z.a,{style:{width:260},onChange:function(e){h(null),d(e)},placeholder:"Selecciona un paciente",value:o,children:r.map((function(e){return Object(v.jsx)(Da,{value:e._id,children:e.name},e._id)}))})}),Object(v.jsx)(O.a,{onClick:function(){var a="Administrador"===w.rol||"Recepcion"===w.rol||"Enfermero"===w.rol?_:w._id,t="https://sistema.recreamed.com/".concat(e.tipo,"_public/").concat(a,"/").concat(o,"/").concat(Date.now());h(t)},disabled:!o,children:"Generar Enlace"}),Object(v.jsx)("br",{}),o&&m?Object(v.jsxs)("div",{children:[Object(v.jsx)(J.a,{align:"center"}),Object(v.jsx)("p",{style:{paddingTop:16,color:"#1890ff"},children:m}),Object(v.jsx)(O.a,{onClick:function(){navigator.clipboard.writeText(m),l.a.success("Enlace Copiado al Portapapeles!")},children:"Copiar Link"}),"Recepcion"===w.rol&&Object(v.jsx)(O.a,{type:"primary",href:m,target:"_blank",rel:"noreferrer",style:{marginLeft:14},children:"Contestar Ahora"}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{ref:E,style:{background:"white",padding:"16px"},children:[" ",Object(v.jsx)(qa.a,{value:m})," "]}),Object(v.jsx)(O.a,{onClick:N,children:"Descargar Codigo"}),Object(v.jsx)(O.a,{onClick:D,style:{marginLeft:12},children:"Copiar Codigo"})]}):Object(v.jsx)(v.Fragment,{})]})}function Aa(e,a,t){return Ma.apply(this,arguments)}function Ma(){return(Ma=Object(g.a)(Object(f.a)().mark((function e(a,t,n){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D("users/getMany/hospitals",{ids_hospitales:H});case 2:D("encuestas",{ids_medicos:e.sent,tipo:a}).then((function(e){t(e),n(!1)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Z.a.Option;function Ra(){var e=Object(n.useState)([]),a=Object(U.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)([]),s=Object(U.a)(c,2),i=(s[0],s[1],Object(n.useState)([])),o=Object(U.a)(i,2),l=(o[0],o[1],Object(n.useState)(!0)),d=Object(U.a)(l,2),j=d[0],u=d[1],b=Object(n.useState)(!1),m=Object(U.a)(b,2),h=m[0],p=m[1],x=function(){p(!1)};Object(n.useEffect)((function(){"Administrador"===w.rol||"Recepcion"===w.rol||"Enfermero"===w.rol?Aa("depresion",r,u):f(w._id)}),[]);var f=function(e){k("encuestas/depresion/medico/".concat(e)).then((function(e){console.log(e),r(e)})).finally((function(){return u(!1)}))},g=[{title:"Paciente",dataIndex:"usuario",key:"name",render:function(e,a){var t=a.usuario;return Object(v.jsx)(v.Fragment,{children:t?t.name:"Usuario eliminado"})}},{title:"Puntaje",dataIndex:"score",key:"age"}];return j?Object(v.jsx)(se,{}):Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsx)("h5",{children:"Resultados de encuestas de sintomatologia depresiva QUIDS (QUICK INVENTORY OF DEPRESSIVE SYMPTOMATOLOGY)"}),Object(v.jsx)("br",{}),Object(v.jsx)(O.a,{type:"primary",onClick:function(){p(!0)},children:"Generar Escala Depresion 1"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("h4",{children:"Detalles de encuestas"}),Object(v.jsx)("br",{}),Object(v.jsx)(ba.a,{dataSource:t,columns:g,bordered:!0}),Object(v.jsx)(le.a,{title:"Crear encuesta de Depresion QUIDS",open:h,onOk:function(){p(!1)},onCancel:x,footer:[Object(v.jsx)(O.a,{onClick:x,children:"Cerrar"})],children:Object(v.jsx)(Pa,{tipo:"depresion_qids"})})]})}Z.a.Option;function Ha(){var e=Object(n.useState)([]),a=Object(U.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)([]),s=Object(U.a)(c,2),i=(s[0],s[1],Object(n.useState)(null)),o=Object(U.a)(i,2),l=(o[0],o[1],Object(n.useState)([])),d=Object(U.a)(l,2),j=(d[0],d[1]),u=Object(n.useState)(!0),b=Object(U.a)(u,2),m=b[0],h=b[1],p=Object(n.useState)(!0),x=Object(U.a)(p,2),f=(x[0],x[1]),g=Object(n.useState)(!1),y=Object(U.a)(g,2),C=y[0],I=y[1],S=function(){I(!1)};Object(n.useEffect)((function(){"Administrador"===w.rol||"Recepcion"===w.rol||"Enfermero"===w.rol?Aa("depresion_gpc",r,h):_(w._id)}),[]);var _=function(e){k("encuestas/byDoctorAndTipo/".concat(e,"/depresion_gpc/")).then((function(a){T(a,e),console.log(a),r(a)})).finally((function(){h(!1)}))},T=function(e,a){var t=Object(ge.a)(e),n=[];k("mispacientes/".concat(a)).then((function(e){console.log("MisPacientes depresiod2: ",e),e.forEach((function(e){var a=t.filter((function(a){var t;return(null===(t=a.usuario)||void 0===t?void 0:t._id)===e._id})),r=a.at(-1);n.push({paciente:e.name,total:a.length,semana:null===r||void 0===r?void 0:r.createdAt.substring(0,10)})})),console.log(n)})).finally((function(){j(n),f(!1)}))},E=[{title:"Paciente",dataIndex:"usuario",key:"name",render:function(e,a){var t=a.usuario;return Object(v.jsx)(v.Fragment,{children:t?t.name:"Usuario eliminado"})}},{title:"Puntaje HRSD",dataIndex:"respuestas_depresion2_gpc",key:"hrsd",render:function(e,a){var t=a.respuestas_depresion2_gpc;return Object(v.jsx)(v.Fragment,{children:t.hrsd})}},{title:"Puntaje MADRS",dataIndex:"respuestas_depresion2_gpc",key:"madrs",render:function(e,a){var t=a.respuestas_depresion2_gpc;return Object(v.jsx)(v.Fragment,{children:t.madrs})}},{title:"Puntaje PHQ",dataIndex:"respuestas_depresion2_gpc",key:"phq",render:function(e,a){var t=a.respuestas_depresion2_gpc;return Object(v.jsx)(v.Fragment,{children:t.phq})}}];return m?Object(v.jsx)(se,{}):Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsx)("h5",{children:"Resultados de encuestas de versiones validadas en espa\xf1ol de las escalas HRSD, MADRS y PHQ-9"}),Object(v.jsx)("br",{}),Object(v.jsx)(O.a,{type:"primary",onClick:function(){I(!0)},children:"Crear Link Depresion 2"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("h4",{children:"Detalles de encuestas"}),Object(v.jsx)("br",{}),Object(v.jsx)(ba.a,{dataSource:t,columns:E,bordered:!0}),Object(v.jsx)(le.a,{title:"Crear Encuesta de depresion GPC",open:C,onOk:function(){I(!1)},onCancel:S,footer:[Object(v.jsx)(O.a,{onClick:S,children:"Cerrar"})],children:Object(v.jsx)(Pa,{tipo:"depresion_gpc"})})]})}function za(){var e=[{label:"Depresion 1",key:"item-1",children:Object(v.jsx)(Ra,{})},{label:"Depresion 2",key:"item-2",children:Object(v.jsx)(Ha,{})}];return Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{className:"spacedTitle",children:"Resultados de Escalas de Depresion"}),Object(v.jsx)(fe.a,{items:e,type:"card"})]})}t(445);var La=t(780);var Va={"Ritmo Cardiaco Elevado":!1,"Sentimientos de Ansiedad":!0,"Debilidad o Mareos ligeros":!1,"Sedacion o Somnolencia":!1,Nauseas:!1,"Vision Borrosa":!1,"Aumento de la Presi\xf3n Arterial":!1,Mareos:!1,"Dolor de cabeza":!1},Ba={"1. \xbfParece que las cosas se mueven en c\xe1mara lenta ?":["No en absoluto","Leve, las cosas parecen un poco m\xe1s lentas, pero no muy notable.","Moderado, las cosas se mueven aproximadamente el doble que normalmente.","Grave, las cosas se mueven tan lentamente que apenas se mueven.","Extremo, las cosas se mueven tan lentamente, que tengo la percepci\xf3n de que todo se  detiene, como si el tiempo se detuviera."],"2. \xbfTe parecen irreales las cosas, como si estuvieras en un sue\xf1o?":["No en absoluto.","Leve, las cosas se ven un poco irreales, pero soy muy consciente de donde estoy.","Moderado, las cosas parecen un sue\xf1o, aunque s\xe9 que estoy despierto.","Grave, las cosas se parecen mucho a un sue\xf1o, aunque s\xe9 que estoy aqu\xed, tengo el sentimiento de que pudiera estar dormido.","Extremo, siento que nada es real, como si tuviera que pellizcarme para despertar, o preguntarle a alguien si esto es un sue\xf1o."]},Ga={"3. \xbfTe sientes desconectado de tu propio cuerpo?":["No, en absoluto","Leve, Me siento un poco desconectado de mi mismo, pero b\xe1sicamente estoy completamente aqu\xed.","Moderado, Me siento algo desprendido de mi propio cuerpo, pero b\xe1sicamente todo unido.","Grave, me siento desprendido de mi propio cuerpo, pero no muy alejado de mi cuerpo, y siento como si estuviera yo ah\xed.","Extremo, Me siento como si estuviera completamente fuera de mi cuerpo, como si estuviera viendo mi propio cuerpo desde muy lejos, como si estuviera otra persona ah\xed."],"4. Sientes que ha cambiado el sentido de tu propio cuerpo?: por ejemplo, tu cuerpo se siente inusualmente largo o inusualmente peque\xf1o?":["No, en absoluto","Leve, Tengo un vago sentimiento de que algo en mi cuerpo ha cambiado, pero no puedo decir exactamente que es.","Moderado, Siento como que mi cuerpo ha aumentado o disminuido ligeramente de tama\xf1o, o se siente como si no fuera mi cuerpo.","Grave, Siento como si mi cuerpo ha aumentado el doble de si tama\xf1o normal, o disminuido el doble de su tama\xf1o normal.","Extremo, siento como si mi cuerpo se hubiera hinchado al menos diez veces de su tama\xf1o normal o como si fuera diez veces m\xe1s peque\xf1o, o como si mis brazos se hubieran convertido como palillos de dientes."]},Ua={"5. Te has distra\xeddo, o has perdido el rastro de alguna manera de lo que esta pasando durante esta experiencia?":["No en absoluto","Leve, He tenido algunos episodios de haber perdido la noci\xf3n sobre lo que est\xe1 pasando, pero he seguido todo la mayor parte del tiempo.","Moderado, He perdido al menos un minuto de tiempo, o perdido completamente la noci\xf3n de lo que est\xe1 pasando ahora.","Grave, He perdido varios segmentos de tiempo de un minuto o m\xe1s.","Extremo, he perdido largos segmentos de tiempo de al menos 15 minutos o m\xe1s."],"6. Tiene lagunas (vacios) en su memoria?":["No en lo absoluto","Leve, Hay algunas cosas recientes que no puedo recordar.","Moderado, Han habido algunas lagunas (vacios)  en mi memoria que duraron unos minutos","Grave, Han habido largas lagunas (vacios) en mi memoria que duraron m\xe1s de algunos minutos.","Extremo, No puedo reconstruir lo que est\xe1 pasando de un momento al siguiente, debido a largas lagunas (vacios)  en mi memoria."]},Za={width:"50%"};function Ja(e){var a=e.isModalOpen,t=e.handleOk,n=e.handleCancel,r=e.escalaDetails;return Object(v.jsxs)(le.a,{title:"Basic Modal",open:a,onOk:t,onCancel:n,children:[Object(v.jsx)("h6",{children:"Efectos Secundarios de Ketamina"}),r.Aumento_de_la_Presi\u00f3n_Arterial&&Object(v.jsx)(La.a,{color:"red",children:"Aumento de la presion arterial"}),r.Debilidad_o_Mareos_ligeros&&Object(v.jsx)(La.a,{color:"red",children:"Debilidad o Mareos ligeros"}),r.Dolor_de_cabeza&&Object(v.jsx)(La.a,{color:"red",children:"Dolor de cabeza"}),r.Mareos&&Object(v.jsx)(La.a,{color:"red",children:"Mareos"}),r.Nauseas&&Object(v.jsx)(La.a,{color:"red",children:"Nauseas"}),r.Sentimientos_de_Ansiedad&&Object(v.jsx)(La.a,{color:"red",children:"Sentimientos de Ansiedad"}),Object(v.jsx)("h6",{children:"Escala de 6 elementos simplificada de s\xedntomas disociativos administrada por el m\xe9dico  (CADSS)"}),Object(v.jsx)("h5",{children:"Desrealizacion"}),Object.keys(Ba).map((function(e,a){return Object(v.jsxs)(u.a,{children:[Object(v.jsx)(u.a.Grid,{style:Za,hoverable:!1,children:e}),Object(v.jsx)(u.a.Grid,{style:Za,hoverable:!1,children:Ba[e][r["desrealizacion_".concat(a)]]})]})})),Object(v.jsx)("h5",{children:"Despersonalizacion"}),Object.keys(Ga).map((function(e,a){return Object(v.jsxs)(u.a,{children:[Object(v.jsx)(u.a.Grid,{style:Za,hoverable:!1,children:e}),Object(v.jsx)(u.a.Grid,{style:Za,hoverable:!1,children:Ga[e][r["despersonalizacion_".concat(a)]]})]})})),Object(v.jsx)("h5",{children:"Amnesia"}),Object.keys(Ua).map((function(e,a){return Object(v.jsxs)("p",{children:[e," ",Ua[e][r["amnesia_".concat(a)]]]})}))]})}Z.a.Option;function Ya(){var e=Object(n.useState)(null),a=Object(U.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)([]),s=Object(U.a)(c,2),i=(s[0],s[1],Object(n.useState)([])),o=Object(U.a)(i,2),l=(o[0],o[1],Object(n.useState)(!0)),d=Object(U.a)(l,2),j=(d[0],d[1],Object(n.useState)(!1)),u=Object(U.a)(j,2),b=u[0],m=u[1],h=Object(n.useState)(!0),p=Object(U.a)(h,2),x=p[0],f=p[1],g=Object(n.useState)(""),y=Object(U.a)(g,2),C=y[0],I=y[1],S=Object(n.useState)(!1),_=Object(U.a)(S,2),T=_[0],E=_[1];Object(n.useEffect)((function(){"Recepcion"===w.rol||"Administrador"===w.rol?Aa("ketamina",r,f):q(w._id)}),[]);var F=function(){m(!1)},q=function(e){k("encuestas/ketamina/medico/".concat(e)).then((function(e){console.log("Encuestas ",e),r(e)})).finally((function(){return f(!1)}))},N=[{title:"Usuario",key:"usuario",dataIndex:"usuario",render:function(e,a){var t=a.usuario;return Object(v.jsx)(v.Fragment,{children:t?t.name:"usuario no existente"})},sorter:!0},{title:"Acciones",key:"actions",dataIndex:"actions",render:function(e,a){var t=a.respuestas_ketamina;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(O.a,{onClick:function(){I(t),E(!0)},children:"Ver detalles"})})}}];return x?Object(v.jsx)(se,{}):Object(v.jsxs)("div",{children:[Object(v.jsx)("br",{}),Object(v.jsx)("h4",{children:"Resultados de listas de verificacion para efectos secundarios"}),Object(v.jsx)("br",{}),Object(v.jsx)(O.a,{type:"primary",onClick:function(){m(!0)},children:"Generar Escala"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("h4",{children:"Detalles de encuestas"}),Object(v.jsx)("br",{}),Object(v.jsx)(ba.a,{dataSource:t,columns:N,scroll:{x:1300},bordered:!0}),Object(v.jsx)(le.a,{title:"Generar Escala de Ketamina",open:b,onOk:function(){m(!1)},onCancel:F,footer:[Object(v.jsx)(O.a,{onClick:F,children:"Cerrar"})],children:Object(v.jsx)(Pa,{tipo:"ketamina"})}),Object(v.jsx)(Ja,{escalaDetails:C,handleCancel:function(){E(!1)},handleOk:function(){E(!1)},isModalOpen:T})]})}var Wa=["1.He tenido alguna vez im\xe1genes, recuerdos o pensamientos dolorosos del acontecimiento.+","2.He tenido alguna vez pesadillas sobre el acontecimiento.","3.He sentido que el acontecimiento estaba ocurriendo de nuevo, como si lo estuviera reviviendo ","4.Hay cosas que me lo han hecho recordar.  ","5.He tenido sensaciones f\xedsicas por recuerdos del acontecimiento. (Como transpiraci\xf3n, temblores, palpitaciones, mareos, n\xe1useas o diarrea) ","6.He estado evitando pensamientos o sentimientos sobre el acontecimiento.","7.He estado evitando hacer cosas o estar en situaciones que me recordaran el acontecimiento. ","8.He sido incapaz de recordar partes importantes del acontecimiento. ","9.He tenido dificultad para disfrutar de las cosas. 10.Me  he sentido distante o alejado de la gente. ","10.Me  he sentido distante o alejado de la gente.","11.He sido incapaz de tener sentimientos de tristeza o de afecto.","12.He tenido dificultad para imaginar una vida larga y cumplir mis objetivos.","13.He tenido dificultad para iniciar o mantener el sue\xf1o.","14.He  estado irritable o he tenido accesos de ira. ","15.He tenido dificultades para concentrarme","16.Me he sentido nervioso, f\xe1cilmente distra\xeddo, o como \u201cen guardia\u201d. ","17.He estado nervioso o me he asustado f\xe1cilmente"];function $a(e){var a=e.isModalOpen,t=e.handleOk,n=e.handleCancel,r=e.escalaDetails;return Object(v.jsx)(le.a,{title:"Post",open:a,onOk:t,onCancel:n,destroyOnClose:!0,children:Object(v.jsxs)(u.a,{children:[Object(v.jsx)(u.a.Grid,{style:{width:"50%"},hoverable:!1,children:"Pregunta"}),Object(v.jsx)(u.a.Grid,{style:{width:"25%"},hoverable:!1,children:"Frecuencia"}),Object(v.jsx)(u.a.Grid,{style:{width:"25%"},hoverable:!1,children:"Gravedad"}),Object.keys(r).map((function(e){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(u.a.Grid,{style:{width:"50%"},hoverable:!1,children:[Wa[Number(e)-1]," ",Number(e)-1]}),Object(v.jsx)(u.a.Grid,{style:{width:"25%"},hoverable:!1,children:r[e][0]}),Object(v.jsx)(u.a.Grid,{style:{width:"25%"},hoverable:!1,children:r[e][1]})]})}))]})})}Z.a.Option;function Xa(){var e=Object(n.useState)([]),a=Object(U.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)([]),s=Object(U.a)(c,2),i=(s[0],s[1],Object(n.useState)(null)),o=Object(U.a)(i,2),l=(o[0],o[1],Object(n.useState)([])),d=Object(U.a)(l,2),j=(d[0],d[1]),u=Object(n.useState)(!0),b=Object(U.a)(u,2),m=(b[0],b[1]),h=Object(n.useState)(!0),p=Object(U.a)(h,2),x=(p[0],p[1]),f=Object(n.useState)([]),g=Object(U.a)(f,2),y=(g[0],g[1]),C=Object(n.useState)(!1),I=Object(U.a)(C,2),S=I[0],_=I[1],T=function(){_(!1)},E=Object(n.useState)(""),F=Object(U.a)(E,2),q=F[0],N=F[1],D=Object(n.useState)(!1),P=Object(U.a)(D,2),A=P[0],M=P[1];Object(n.useEffect)((function(){z(),"Administrador"===w.rol||"Recepcion"===w.rol||"Enfermero"===w.rol?Aa("post_traumatico",r,x):R(w._id)}),[]);var R=function(e){k("encuestas/byDoctorAndTipo/".concat(e,"/post_traumatico/")).then((function(a){H(a,e),console.log(a),r(a)}))},H=function(e,a){var t=Object(ge.a)(e),n=[];k("mispacientes/".concat(a)).then((function(e){console.log("MisPacientes ept1: ",e),e.forEach((function(e){var a=t.filter((function(a){var t;return(null===(t=a.usuario)||void 0===t?void 0:t._id)===e._id})),r=a.at(-1);n.push({paciente:e.name,total:a.length,semana:null===r||void 0===r?void 0:r.createdAt.substring(0,10)})})),console.log(n)})).finally((function(){j(n),m(!1)}))},z=function(){for(var e=[{title:"Paciente",dataIndex:"usuario",key:"name",render:function(e,a){var t=a.usuario;return Object(v.jsx)(v.Fragment,{children:t?t.name:"Usuario eliminado"})}}],a=function(a){e.push({title:"Pregunta "+a,children:[{title:"Frecuencia",dataIndex:"respuestas_depresion2_gpc",key:"hrsd"+a,render:function(e,t){var n=t.respuestas_ept1_davidson;return Object(v.jsx)(v.Fragment,{children:n[a][0]})}},{title:"Gravedad",dataIndex:"respuestas_depresion2_gpc",key:"hrsd"+a,render:function(e,t){var n=t.respuestas_ept1_davidson;return Object(v.jsx)(v.Fragment,{children:n[a][1]})}}]})},t=1;t<18;t++)a(t);y(e)},L=[{title:"Usuario",key:"usuario",dataIndex:"usuario",render:function(e,a){var t=a.usuario;return Object(v.jsx)(v.Fragment,{children:t?t.name:"usuario no existente"})},sorter:!0},{title:"Acciones",key:"actions",dataIndex:"actions",render:function(e,a){var t=a.respuestas_ept1_davidson;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(O.a,{onClick:function(){N(t),M(!0)},children:"Ver detalles"})})}}];return Object(v.jsxs)("div",{children:[Object(v.jsx)("h6",{children:"Evaluaci\xf3n Del Trastorno Por Estr\xe9s Postraum\xe1tico: Aproximaci\xf3n A Las Propiedades Psicom\xe9tricas De La Escala De Trauma De Davidson"}),Object(v.jsx)("br",{}),Object(v.jsx)(O.a,{type:"primary",onClick:function(){_(!0)},children:"Crear Enlace EPT 1"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("h4",{children:"Detalles de encuestas"}),Object(v.jsx)("br",{}),Object(v.jsx)(ba.a,{dataSource:t,columns:L,bordered:!0}),Object(v.jsx)(le.a,{title:"Crear Encuesta de Estres Post Traumatico",open:S,onOk:function(){_(!1)},onCancel:T,footer:[Object(v.jsx)(O.a,{onClick:T,children:"Cerrar"})],children:Object(v.jsx)(Pa,{tipo:"post_traumatico"})}),Object(v.jsx)($a,{escalaDetails:q,handleCancel:function(){M(!1)},handleOk:function(){M(!1)},isModalOpen:A})]})}var Qa=["1. Me supera emocionalmente este trabajo. ","2. Me siento in\xfatil y desilusionado frente al trabajo que desarrollo. ","3. Me siento emocionalmente sin fuerzas. ","4. No tengo ganas de ir a trabajar. ","5. Me siento agotado f\xedsica y mentalmente.","6. Si algo he aprendido en mi trabajo como profesional de emergencias, es que las cosas no suceden como deber\xedan. ","7. Me he llegado a cuestionar mis propias creencias despu\xe9s de algunas intervenciones. ","8. Mi trabajo me ha hecho ver que el mundo es injusto. ","9. Este trabajo me ha ense\xf1ado que la vida termina d\xe1ndole a uno lo que se merece. ","10. Recuerdo hasta el nombre de algunos pacientes.","11. A veces, pienso en aquellos pacientes que han fallecido mientras los atend\xeda. ","12. Guardo im\xe1genes muy reales de aquellos accidentes que m\xe1s me afectaron.","13. En ocasiones me emociono debido a este trabajo.","14. Durante algunas intervenciones llego a experimentar sentimientos de todo tipo. "];function Ka(e){var a=e.isModalOpen,t=e.handleOk,n=e.handleCancel,r=e.escalaDetails;return Object(v.jsx)(le.a,{title:"Respuestas de la escala",open:a,onOk:t,onCancel:n,destroyOnClose:!0,children:Object.keys(r).map((function(e){return Object(v.jsxs)(u.a,{size:"small",children:[Object(v.jsx)(u.a.Grid,{hoverable:!1,style:{width:"70%"},children:Qa[Number(e)-1]}),Object(v.jsx)(u.a.Grid,{hoverable:!1,style:{width:"30%"},children:r[e]})]})}))})}Z.a;function et(){var e=Object(n.useState)([]),a=Object(U.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)([]),s=Object(U.a)(c,2),i=(s[0],s[1],Object(n.useState)(null)),o=Object(U.a)(i,2),l=(o[0],o[1],Object(n.useState)([])),d=Object(U.a)(l,2),j=(d[0],d[1]),u=Object(n.useState)(!0),b=Object(U.a)(u,2),m=(b[0],b[1]),h=Object(n.useState)([]),p=Object(U.a)(h,2),x=(p[0],p[1]),f=Object(n.useState)(!0),g=Object(U.a)(f,2),y=(g[0],g[1]),C=Object(n.useState)(!1),I=Object(U.a)(C,2),S=I[0],_=I[1],T=function(){_(!1)},E=Object(n.useState)(""),F=Object(U.a)(E,2),q=F[0],N=F[1],D=Object(n.useState)(!1),P=Object(U.a)(D,2),A=P[0],M=P[1];Object(n.useEffect)((function(){z(),"Administrador"===w.rol||"Recepcion"===w.rol||"Enfermero"===w.rol?Aa("post_traumatico_mx",r,y):R(w._id)}),[]);var R=function(e){k("encuestas/byDoctorAndTipo/".concat(e,"/post_traumatico_mx/")).then((function(a){H(a,e),console.log(a),r(a)}))},H=function(e,a){var t=Object(ge.a)(e),n=[];k("mispacientes/".concat(a)).then((function(e){console.log("MisPacientes ept1: ",e),e.forEach((function(e){var a=t.filter((function(a){var t;return(null===(t=a.usuario)||void 0===t?void 0:t._id)===e._id})),r=a.at(-1);n.push({paciente:e.name,total:a.length,semana:null===r||void 0===r?void 0:r.createdAt.substring(0,10)})})),console.log(n)})).finally((function(){j(n),m(!1)}))},z=function(){for(var e=[{title:"Paciente",dataIndex:"usuario",key:"name",render:function(e,a){var t=a.usuario;return Object(v.jsx)(v.Fragment,{children:t?t.name:"Usuario eliminado"})}}],a=function(a){e.push({title:"Pregunta "+a,key:"eptmx"+a,dataIndex:"respuestas_ept_3mx",render:function(e,t){var n=t.respuestas_ept_3mx;return Object(v.jsx)(v.Fragment,{children:n[a]})}})},t=1;t<15;t++)a(t);x(e)},L=[{title:"Usuario",key:"usuario",dataIndex:"usuario",render:function(e,a){var t=a.usuario;return Object(v.jsx)(v.Fragment,{children:t?t.name:"usuario no existente"})},sorter:!0},{title:"Acciones",key:"actions",dataIndex:"actions",render:function(e,a){var t=a.respuestas_ept_3mx;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(O.a,{onClick:function(){N(t),M(!0)},children:"Ver detalles"})})}}];return Object(v.jsxs)("div",{children:[Object(v.jsx)("h6",{children:"Resultados de la Validaci\xf3n mexicana de la Escala de Estr\xe9s Traum\xe1tico Secundario"}),Object(v.jsx)("br",{}),Object(v.jsx)(O.a,{type:"primary",onClick:function(){_(!0)},children:"Crear Enlace EPT MX"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("h4",{children:"Detalles de encuestas"}),Object(v.jsx)("br",{}),Object(v.jsx)(ba.a,{dataSource:t,columns:L,bordered:!0}),Object(v.jsx)(le.a,{title:"Crear Encuesta de Estres Post Traumatico",open:S,onOk:function(){_(!1)},onCancel:T,footer:[Object(v.jsx)(O.a,{onClick:T,children:"Cerrar"})],children:Object(v.jsx)(Pa,{tipo:"post_traumatico_mx"})}),Object(v.jsx)(Ka,{escalaDetails:q,handleCancel:function(){M(!1)},handleOk:function(){M(!1)},isModalOpen:A})]})}function at(){var e=[{label:"EPT 1",key:"item-1",children:Object(v.jsx)(Xa,{})},{label:"EPT 3",key:"item-3",children:Object(v.jsx)(et,{})}];return Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{className:"spacedTitle",children:"Resultados de Escalas de Estr\xe9s Post Traumatico"}),Object(v.jsx)(fe.a,{items:e,type:"card"})]})}var tt=[{n:1,tipo:"multiple",pregunta:"1. Indique en el diagrama las zonas donde siente dolor sombreando la parte afectada. Marque una cruz en la zona que m\xe1s le duele.",respuestas:["Delante Derecha","Delante Izquierda","Detras Derecha","Detras Izquierda"]},{n:2,tipo:"metrica",pregunta:"2. Por favor, eval\xfae su dolor rodeando con un c\xedrculo el n\xfamero que mejor describa la intensidad m\xe1xima de su dolor en la \xfaltima semana"},{n:3,tipo:"metrica",pregunta:"3. Por favor, eval\xfae su dolor rodeando con un c\xedrculo el n\xfamero que mejor describa la intensidad m\xednima de su dolor en la \xfaltima semana"},{n:4,tipo:"metrica",pregunta:"4. Por  favor,  eval\xfae  su  dolor  rodeando  con  un  c\xedrculo  el  n\xfamero  que  mejor  describa  la  intensidad  mediade  su  dolor."},{n:5,tipo:"metrica",pregunta:"5. Por favor, eval\xfae su dolor rodeando con un c\xedrculo el n\xfamero que mejor describa la intensidad de su dolor ahora mismo"},{n:6,tipo:"texto",pregunta:"6. \xbfQu\xe9 tipo de cosas le alivia el dolor (p. ej., caminar, estar de pie, levantar algo)?"},{n:7,tipo:"texto",pregunta:"7. \xbfQu\xe9 tipo de cosas empeora el dolor (p. ej., caminar, estar de pie, levantar algo)?"},{n:8,tipo:"texto",pregunta:"8. \xbfQu\xe9 tratamiento o medicaci\xf3n est\xe1 recibiendo para el dolor?"},{n:9,tipo:"metrica",pregunta:"9. En la \xfaltima semana, \xbfhasta qu\xe9 punto le han aliviado los tratamientos o medicaci\xf3n para el dolor? Por favor, rodee con un c\xedrculo el porcentaje que corresponda al grado de alivio que ha sentido"},{n:10,tipo:"seleccion",pregunta:"10. Si toma medicaci\xf3n, \xbfcu\xe1nto tarda en volver a sentir dolor?",respuestas:["La medicaci\xf3n para el dolor no me ayuda nada","1h","2h","3h","4h","De 5 a 12h","M\xe1s de 12h","No tomo medicaci\xf3n para el dolor"]},{n:11,tipo:"multiple",pregunta:"11. Marque con una cruz la casilla que considere adecuada para cada una de las respuestas.",respuestas:["A. Los efectos del tratamiento (p. ej., medicaci\xf3n, operaci\xf3n, radiaci\xf3n, pr\xf3tesis)","B. Mi enfermedad principal (la enfermedad que actualmente se est\xe1 tratando y evaluando)","C.  Una situaci\xf3n no relacionada con mi enfermedad principal (p. ej., artrosis)"]},{n:12,tipo:"multiple",pregunta:"12. Para cada una de las siguientes palabras, marque con una cruz \xabs\xed\xbb o \xabno\xbb si ese adjetivo se aplica a su dolor.",respuestas:["Dolorido/continuo","Palpitante","Irradiante","Punzante","Fatigoso (pesado)","Penetrante","Persistente","Mortificante (calambre)","Agudo","Sensible","Quemante","Agotador","Entumecido (adormecido)","Penoso","Insoportable"]},{n:13,tipo:"titulo",pregunta:"13. Rodee con un c\xedrculo el n\xfamero que mejor describa hasta qu\xe9 punto el dolor le ha afectado en los siguientes aspectos de la vida, durante la \xfaltima semana."},{n:"A13",tipo:"metrica",pregunta:"13 A. Actividades en general"},{n:"B13",tipo:"metrica",pregunta:"13 B. Estado de \xe1nimo"},{n:"C13",tipo:"metrica",pregunta:"13 C. Capacidad de caminar"},{n:"D13",tipo:"metrica",pregunta:"13 D. Trabajo habitual (incluye tanto el trabajo fuera de casa como las tareas dom\xe9sticas)"},{n:"E13",tipo:"metrica",pregunta:"13 E. Relaciones con otras personas"},{n:"F13",tipo:"metrica",pregunta:"13 F. Sue\xf1o"},{n:"G13",tipo:"metrica",pregunta:"13 G. Disfrutar de la vida"},{n:14,tipo:"seleccion",pregunta:"14. Prefiero tomar mi medicaci\xf3n para el dolor:",respuestas:["De forma regular","S\xf3lo cuando lo necesito","No tomo medicaci\xf3n para el dolor"]},{n:15,tipo:"seleccion",pregunta:"15. Tomo mi medicaci\xf3n para el dolor (en un per\xedodo de un d\xeda)",respuestas:["No todos los d\xedas","1 a 2 veces al d\xeda","3 a 4 veces al d\xeda","5 a 6 veces al d\xeda","M\xe1s de 6 veces al d\xeda"]},{n:16,tipo:"seleccion",pregunta:"16. \xbfCree que necesita una medicaci\xf3n m\xe1s fuerte para el dolor?",respuestas:["Si","No","No lo s\xe9"]},{n:17,tipo:"seleccion",pregunta:"17. \xbfCree que deber\xeda tomar m\xe1s dosis de la medicaci\xf3n para el dolor que las que le ha recetado el m\xe9dico?",respuestas:["Si","No","No lo s\xe9"]},{n:18,tipo:"seleccion",pregunta:"18. \xbfEst\xe1 preocupado/a porque toma demasiada medicaci\xf3n para el dolor?",respuestas:["Si","No","No lo s\xe9"]},{n:"B18",tipo:"texto",pregunta:"18 B.Si la respuesta es \xabs\xed\xbb, \xbfpor qu\xe9?"},{n:19,tipo:"seleccion",pregunta:"19. \xbfTiene problemas con los efectos secundarios de su medicaci\xf3n para el dolor?",respuestas:["Si","No"]},{n:"B19",tipo:"texto",pregunta:"19 B.\xbfQu\xe9 efectos secundarios?"},{n:20,tipo:"seleccion",pregunta:"20. \xbfCree que necesita recibir m\xe1s informaci\xf3n sobre su medicaci\xf3n para el dolor?",respuestas:["Si","No"]},{n:21,tipo:"multiple",pregunta:"21. Otros m\xe9todos que uso para aliviar mi dolor son (por favor, marque con una cruz todo lo que se le aplique):",respuestas:["Compresas calientes","Distracci\xf3n","Compresas fr\xedas","Biofeedback","T\xe9cnicas de relajaci\xf3n","Hipnosis"]},{n:"B21",tipo:"texto",pregunta:"21 B.Si su respuesta es otros, por favor, especifique"},{n:22,tipo:"texto",pregunta:"22. Otras medicaciones no recetadas por mi m\xe9dico y que tomo para el dolor son:"}],nt=tt.filter((function(e){return"metrica"===e.tipo})).reduce((function(e,a){return Object.assign(e,Object(Ea.a)({},a.n,0))}),{});function rt(e){var a=e.isModalOpen,t=e.handleOk,n=e.handleCancel,r=e.escalaDetails;return Object(v.jsx)(le.a,{title:"Respuestas escala de dolor",open:a,onOk:t,onCancel:n,destroyOnClose:!0,children:Object.keys(r).map((function(e){var a=tt.find((function(a){return String(a.n)===e}));return Object(v.jsxs)(u.a,{size:"small",children:[Object(v.jsx)(u.a.Grid,{hoverable:!1,style:{width:"70%"},children:a&&a.pregunta}),Object(v.jsx)(u.a.Grid,{hoverable:!1,style:{width:"30%"},children:r[e]})]})}))})}Z.a.Option;function ct(){var e=Object(n.useState)([]),a=Object(U.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)([]),s=Object(U.a)(c,2),i=(s[0],s[1],Object(n.useState)(null)),o=Object(U.a)(i,2),l=(o[0],o[1],Object(n.useState)([])),d=Object(U.a)(l,2),j=(d[0],d[1]),u=Object(n.useState)(!0),b=Object(U.a)(u,2),m=(b[0],b[1]),h=Object(n.useState)(!0),p=Object(U.a)(h,2),x=(p[0],p[1]),f=Object(n.useState)(!1),g=Object(U.a)(f,2),y=g[0],C=g[1],I=function(){C(!1)},S=Object(n.useState)(""),_=Object(U.a)(S,2),T=_[0],E=_[1],F=Object(n.useState)(!1),q=Object(U.a)(F,2),N=q[0],D=q[1];Object(n.useEffect)((function(){"Administrador"===w.rol||"Recepcion"===w.rol||"Enfermero"===w.rol?Aa("dolor",r,x):P(w._id)}),[]);var P=function(e){k("encuestas/dolor/medico/".concat(e)).then((function(a){A(a,e),console.log(a),r(a)}))},A=function(e,a){var t=Object(ge.a)(e),n=[];k("mispacientes/".concat(a)).then((function(e){e.forEach((function(e){var a=t.filter((function(a){var t;return(null===(t=a.usuario)||void 0===t?void 0:t._id)===e._id})),r=a.at(-1);n.push({paciente:e.name,total:a.length,semana:null===r||void 0===r?void 0:r.createdAt.substring(0,10)})})),console.log(n)})).finally((function(){j(n),m(!1)}))},M=[{title:"Usuario",key:"usuario",dataIndex:"usuario",render:function(e,a){var t=a.usuario;return Object(v.jsx)(v.Fragment,{children:t?t.name:"usuario no existente"})},sorter:!0},{title:"Acciones",key:"actions",dataIndex:"actions",render:function(e,a){var t=a.respuestas_dolor;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(O.a,{onClick:function(){E(t),D(!0)},children:"Ver detalles"})})}}];return Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{className:"spacedTitle",children:"Resultados de encuestas de dolor"}),Object(v.jsx)(O.a,{type:"primary",onClick:function(){C(!0)},children:"Crear Link Encuesta de Dolor"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("h4",{children:"Detalles de encuestas"}),Object(v.jsx)("br",{}),Object(v.jsx)(ba.a,{columns:M,dataSource:t,bordered:!0}),Object(v.jsx)(le.a,{title:"Crear Encuesta de dolor",open:y,onOk:function(){C(!1)},onCancel:I,footer:[Object(v.jsx)(O.a,{onClick:I,children:"Cerrar"})],children:Object(v.jsx)(Pa,{tipo:"dolor"})}),Object(v.jsx)(rt,{escalaDetails:T,handleCancel:function(){D(!1)},handleOk:function(){D(!1)},isModalOpen:N})]})}var st=[{n:"experencia_1",tipo:"radioButton",pregunta:"1. \xbfC\xf3mo ha sido tu experiencia con nuestro servicio desde el momento de agendar la cita? ",respuestas:["Muy Insatisfecho","Satisfecho","Neutral","Satisfecho","Muy Satisfecho"]},{n:"expectativas_2",tipo:"seleccion",pregunta:"2. \xbfEl servicio ha cumplido con tus expectativas?",respuestas:["No","Si"]},{n:"expectativas_2b",tipo:"texto",pregunta:"\xbfPORQUE?"},{n:"problema_3",tipo:"texto",pregunta:"3. \xbfHay alg\xfan problema o dificultad que hayas experimentado desde que iniciaste el tratamiento?"},{n:"duda_4",tipo:"texto",pregunta:"4. \xbfHas tenido alguna duda o necesidad de soporte m\xe9dico desde que iniciaste el tratamiento?"},{n:"informacion_5",tipo:"seleccion",pregunta:"5. \xbfHas recibido toda la informaci\xf3n esperada sobre el tratamiento?",respuestas:["No","Si"]},{n:"informacion_5b",tipo:"texto",pregunta:"\xbfPORQUE?"},{n:"satisfecho_6",tipo:"seleccion",pregunta:"6. \xbfEst\xe1s satisfecho/a con la calidad y funcionamiento del tratamiento? ",respuestas:["No","Si"]},{n:"satisfecho_6b",tipo:"texto",pregunta:"\xbfPORQUE?"},{n:"mejora_7",tipo:"texto",pregunta:"7. \xbfHay alguna mejora o caracter\xedstica adicional que te gustar\xeda tener? "},{n:"recomendado_8",tipo:"texto",pregunta:"8. \xbfHas recomendado nuestro tratamiento a otras personas? Si es as\xed, \xbfcu\xe1l ha sido su reacci\xf3n o experiencia?"},{n:"impresionado_9",tipo:"texto",pregunta:"9. \xbfHay algo en particular que te haya impresionado positivamente sobre nuestro servicio?"},{n:"valoracion_10",tipo:"radioButton",pregunta:"10. \xbfC\xf3mo valorar\xedas la atenci\xf3n en general de CIDERALT?",respuestas:["Muy Insatisfecho","Satisfecho","Neutral","Satisfecho","Muy Satisfecho"]}];function it(e){var a=e.isModalOpen,t=e.handleOk,n=e.handleCancel,r=e.escalaDetails;return Object(v.jsx)(le.a,{title:"Respuestas encuesta de satisfaccion",open:a,onOk:t,onCancel:n,destroyOnClose:!0,children:Object.keys(r).map((function(e){var a=st.find((function(a){return String(a.n)===e}));return Object(v.jsxs)(u.a,{size:"small",children:[Object(v.jsx)(u.a.Grid,{hoverable:!1,style:{width:"70%"},children:a&&a.pregunta}),a&&"seleccion"===a.tipo?Object(v.jsx)(u.a.Grid,{hoverable:!1,style:{width:"30%"},children:r[e]?"Si":"No"}):Object(v.jsx)(u.a.Grid,{hoverable:!1,style:{width:"30%"},children:r[e]})]})}))})}Z.a.Option;function ot(){var e=Object(n.useState)([]),a=Object(U.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)([]),s=Object(U.a)(c,2),i=(s[0],s[1],Object(n.useState)(null)),o=Object(U.a)(i,2),l=(o[0],o[1],Object(n.useState)([])),d=Object(U.a)(l,2),j=(d[0],d[1]),u=Object(n.useState)(!0),b=Object(U.a)(u,2),m=(b[0],b[1]),h=Object(n.useState)(!0),p=Object(U.a)(h,2),x=(p[0],p[1]),f=Object(n.useState)(!1),g=Object(U.a)(f,2),y=g[0],C=g[1],I=function(){C(!1)},S=Object(n.useState)(""),_=Object(U.a)(S,2),T=_[0],E=_[1],F=Object(n.useState)(!1),q=Object(U.a)(F,2),N=q[0],D=q[1];Object(n.useEffect)((function(){"Administrador"===w.rol||"Recepcion"===w.rol||"Enfermero"===w.rol?Aa("satisfaccion",r,x):P(w._id)}),[]);var P=function(e){k("encuestas/byDoctorAndTipo/".concat(e,"/satisfaccion")).then((function(a){A(a,e),console.log(a),r(a)}))},A=function(e,a){var t=Object(ge.a)(e),n=[];k("mispacientes/".concat(a)).then((function(e){e.forEach((function(e){var a=t.filter((function(a){var t;return(null===(t=a.usuario)||void 0===t?void 0:t._id)===e._id})),r=a.at(-1);n.push({paciente:e.name,total:a.length,semana:null===r||void 0===r?void 0:r.createdAt.substring(0,10)})})),console.log(n)})).finally((function(){j(n),m(!1)}))},M=[{title:"Usuario",key:"usuario",dataIndex:"usuario",render:function(e,a){var t=a.usuario;return Object(v.jsx)(v.Fragment,{children:t?t.name:"usuario no existente"})},sorter:!0},{title:"Acciones",key:"actions",dataIndex:"actions",render:function(e,a){var t=a.encuesta_satisfaccion;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(O.a,{onClick:function(){E(t),D(!0)},children:"Ver detalles"})})}}];return Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{className:"spacedTitle",children:"Resultados de encuestas de satisfaccion"}),Object(v.jsx)(O.a,{type:"primary",onClick:function(){C(!0)},children:"Crear Link Encuesta de Satisfaccion"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("h4",{children:"Detalles de encuestas"}),Object(v.jsx)("br",{}),Object(v.jsx)(ba.a,{columns:M,dataSource:t,bordered:!0}),Object(v.jsx)(le.a,{title:"Crear Encuesta de satisfaccion",open:y,onOk:function(){C(!1)},onCancel:I,footer:[Object(v.jsx)(O.a,{onClick:I,children:"Cerrar"})],children:Object(v.jsx)(Pa,{tipo:"satisfaccion"})}),Object(v.jsx)(it,{escalaDetails:T,handleCancel:function(){D(!1)},handleOk:function(){D(!1)},isModalOpen:N})]})}var lt=function(e){console.log(e)},dt=[{label:"Ketamina",key:"item-1",children:Object(v.jsx)(Ya,{})},{label:"Depresion",key:"item-3",children:Object(v.jsx)(za,{})},{label:"Dolor",key:"item-4",children:Object(v.jsx)(ct,{})},{label:"Estres Post Traumatico",key:"item-5",children:Object(v.jsx)(at,{})},{label:"Escala de Satisfaccion",key:"item-6",children:Object(v.jsx)(ot,{})}];function jt(){return Object(v.jsx)("div",{children:Object(v.jsx)(fe.a,{items:dt,defaultActiveKey:"1",onChange:lt,tabPosition:"left"})})}var ut=t(798);function bt(e){var a=Object(n.useState)({}),t=Object(U.a)(a,2),r=t[0],c=t[1],s=function(){e.setIsModalOpen(!1),e.setBalanceForEdit(null)};Object(n.useEffect)((function(){return console.log("received for edit ",e.balanceForEdit),i()}),[]),Object(n.useEffect)((function(){console.log("received for edit ",e.balanceForEdit)}),[e.balanceForEdit]);var i=function(){k("mispacientes/".concat(w._id)).then((function(e){e.forEach((function(e){e.label=e.name,e.value=e._id})),c(e)}))},o=function(e){console.log("selected ".concat(e))};return Object(v.jsx)(le.a,{title:e.balanceForEdit?"Editar ".concat(e.tipo):"Agregar ".concat(e.tipo),open:e.isModalOpen,onOk:function(){e.setIsModalOpen(!1)},onCancel:s,destroyOnClose:!0,footer:[Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",form:"edit_balance",children:"Guardar"}),Object(v.jsx)(O.a,{onClick:s,children:"Cancelar"})],children:Object(v.jsxs)(b.a,{name:"edit_balance",labelCol:{span:8},wrapperCol:{span:16},initialValues:e.balanceForEdit,onFinish:function(a){e.balanceForEdit&&0!==Object.keys(e.balanceForEdit).length||(a.medico=w._id,a.fecha_hora=new Date,a.tipo=e.tipo,a.estado="pendiente"),console.log("Ready to send:",a),console.log("For Edit: ",e.balanceForEdit),e.balanceForEdit&&Object.keys(e.balanceForEdit).length>0?q("/balances/update/".concat(e.balanceForEdit._id),a).then((function(a){console.log(a),e.setBalanceForEdit({}),e.setIsModalOpen(!1),e.getBalancesData()})):D("balances/add",a).then((function(e){console.log(e),l.a.success(e.message||e.error)})).finally((function(){e.setBalanceForEdit({}),e.setIsModalOpen(!1),e.getBalancesData()}))},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[Object(v.jsx)(b.a.Item,{label:"Monto",name:"monto",rules:[{required:!0,message:"Ingresa el monto"}],children:Object(v.jsx)(Be.a,{style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{label:"Abono",rules:[{required:!0,message:"Ingresa el abono"}],children:Object(v.jsx)(Be.a,{style:{width:"100%"}})}),(!e.balanceForEdit||0===Object.keys(e.balanceForEdit).length)&&Object(v.jsxs)("div",{children:[Object(v.jsx)(b.a.Item,{label:"Concepto",name:"concepto",rules:[{required:!0,message:"Ingresa el concepto"}],children:Object(v.jsx)(m.a,{})}),"ingreso"===e.tipo&&Object(v.jsx)(b.a.Item,{label:"Paciente",name:"paciente",children:Object(v.jsx)(Z.a,{onChange:o,options:r})})]}),Object(v.jsx)(b.a.Item,{label:"Forma de Pago",name:"forma_de_pago",children:Object(v.jsx)(Z.a,{onChange:o,options:[{value:"efectivo",label:"Efectivo"},{value:"tarjeta",label:"Tarjeta"},{value:"transferencia",label:"Transferencia"}]})}),Object(v.jsx)(b.a.Item,{wrapperCol:{offset:8,span:16}})]})})}var mt=Ne.StyleSheet.create({titleContainer:{flexDirection:"row",justifyContent:"center",marginBottom:10},reportTitle:{fontSize:18,textAlign:"center",fontFamily:"Helvetica-Bold",textTransform:"uppercase"},subtitle:{fontSize:14,textAlign:"center",fontFamily:"Helvetica",marginBottom:20},text:{margin:10,fontSize:12,textAlign:"justify",fontFamily:"Helvetica"},sellerBuyerInfo:{flexDirection:"row",justifyContent:"space-between",marginBottom:10},infoTitle:{fontFamily:"Helvetica-Bold",fontSize:12},infoText:{fontFamily:"Helvetica",fontSize:12},table:{display:"table",width:"auto",marginTop:10,borderStyle:"solid",borderWidth:1,borderColor:"#bfbfbf"},tableRow:{margin:"auto",flexDirection:"row"},tableColHeader:{width:"25%",borderStyle:"solid",borderWidth:1,borderColor:"#bfbfbf",backgroundColor:"#f0f0f0",textAlign:"center",fontFamily:"Helvetica-Bold",fontSize:12,paddingTop:5,paddingBottom:5},tableCol:{width:"25%",borderStyle:"solid",borderWidth:1,borderColor:"#bfbfbf",textAlign:"center",fontFamily:"Helvetica",fontSize:10,paddingTop:5,paddingBottom:5},tableCellHeader:{margin:"auto",marginTop:5,marginBottom:5,flexDirection:"row"},total:{fontFamily:"Helvetica-Bold",fontSize:14,marginTop:30,textAlign:"right",paddingRight:50},page:{fontFamily:"Helvetica",fontSize:12,padding:40},header:{flexDirection:"row",alignItems:"center",borderBottom:"1pt solid #000",paddingBottom:10,marginBottom:10},logo:{width:50,height:50,marginRight:10},title:{fontSize:20,marginLeft:10},company:{fontSize:14,marginTop:5,marginLeft:10}});function ht(e){var a=e.ingresos,t=e.logo;e.company,e.seller,e.buyer;return console.log("Received for print ",a),Object(v.jsx)(Ne.PDFViewer,{height:500,width:550,children:Object(v.jsx)(Ne.Document,{children:Object(v.jsx)(Ne.Page,{size:"A4",style:mt.page,children:Object(v.jsxs)(Ne.View,{children:[Object(v.jsxs)(Ne.View,{style:mt.header,children:[Object(v.jsx)(Ne.Image,{style:mt.logo,src:t}),Object(v.jsxs)(Ne.View,{children:[Object(v.jsx)(Ne.Text,{style:mt.title,children:"Nota de Venta"}),Object(v.jsx)(Ne.Text,{style:mt.company,children:"Hospital: "}),Object(v.jsxs)(Ne.Text,{style:mt.company,children:[new Date(a[0].createdAt).toLocaleString()," "]})]})]}),Object(v.jsxs)(Ne.View,{style:mt.sellerBuyerInfo,children:[Object(v.jsxs)(Ne.View,{children:[Object(v.jsx)(Ne.Text,{style:mt.infoTitle,children:"Medico:"}),Object(v.jsx)(Ne.Text,{style:mt.infoText,children:a[0].medico.name})]}),Object(v.jsxs)(Ne.View,{children:[Object(v.jsx)(Ne.Text,{style:mt.infoTitle,children:"Paciente:"}),Object(v.jsx)(Ne.Text,{style:mt.infoText,children:a[0].paciente?a[0].paciente.name:"Sin paciente"})]})]}),Object(v.jsxs)(Ne.View,{style:mt.table,children:[Object(v.jsxs)(Ne.View,{style:mt.tableRow,children:[Object(v.jsx)(Ne.Text,{style:mt.tableColHeader,children:"Concepto"}),Object(v.jsx)(Ne.Text,{style:mt.tableColHeader,children:"Cantidad"}),Object(v.jsx)(Ne.Text,{style:mt.tableColHeader,children:"Precio Unitario"}),Object(v.jsx)(Ne.Text,{style:mt.tableColHeader,children:"Subtotal"})]}),a.map((function(e){return Object(v.jsxs)(Ne.View,{style:mt.tableRow,children:[Object(v.jsx)(Ne.Text,{style:mt.tableCol,children:e.concepto}),Object(v.jsx)(Ne.Text,{style:mt.tableCol,children:"1"}),Object(v.jsxs)(Ne.Text,{style:mt.tableCol,children:["$",e.monto.toFixed(2)]}),Object(v.jsxs)(Ne.Text,{style:mt.tableCol,children:["$",e.monto.toFixed(2)]})]},e.id)}))]}),Object(v.jsxs)(Ne.Text,{style:mt.total,children:["Total: $",a.reduce((function(e,a){return e+1*a.monto}),0).toFixed(2)]})]})})})})}var Ot=Me.a.Text;function pt(){var e=Object(n.useState)([]),a=Object(U.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)(null),s=Object(U.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(!1),d=Object(U.a)(l,2),j=d[0],u=d[1],b=function(){u(!0)},m=Object(n.useState)(null),h=Object(U.a)(m,2),p=h[0],x=h[1],f=Object(n.useState)(!1),g=Object(U.a)(f,2),y=g[0],C=g[1],I=Object(n.useState)([]),S=Object(U.a)(I,2),_=S[0],T=S[1],E=Object(n.useState)(!1),F=Object(U.a)(E,2),q=F[0],N=F[1];Object(n.useEffect)((function(){D()}),[]);var D=function(){k("balances/medico/".concat(w._id)).then((function(e){r(e.reverse()),console.log("balances",e)}))},P=[{title:"Fecha y Hora",dataIndex:"fecha_hpra",key:"fecha_hora",render:function(e,a){var t=a.fecha_hora;return Object(v.jsx)(v.Fragment,{children:new Date(t).toLocaleString()})}},{title:"Tipo",dataIndex:"tipo",key:"tipo",render:function(e,a){var t=a.tipo,n=t&&"ingreso"===t?"geekblue":"volcano";return t?Object(v.jsx)(La.a,{color:n,children:t.toUpperCase()}):Object(v.jsx)(La.a,{color:n,children:"Indefinido"})}},{title:"Monto",dataIndex:"monto",key:"monto",render:function(e,a){var t=a.monto;return"$ ".concat(t)}},{title:"Abono",dataIndex:"abono",key:"abono",render:function(e,a){var t=a.abono;return t&&Object(v.jsxs)(v.Fragment,{children:["$",t]})}},{title:"Adeudo",dataIndex:"adeudo",key:"adeudo",render:function(e,a){return Object(v.jsxs)(v.Fragment,{children:["$",a.monto-a.abono]})}},{title:"Forma de pago",key:"forma_de_pago",dataIndex:"forma_de_pago",render:function(e,a){var t=a.forma_de_pago,n="efectivo"===t?"green":"geekblue";return Object(v.jsx)(La.a,{color:n,children:t.toUpperCase()})}},{title:"Paciente",key:"cita.paciente",dataIndex:"cita",render:function(e,a){return a.cita?Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[a.cita.usuario.name," ",Object(v.jsx)("span",{style:{fontSize:9},children:"Tomado de la cita"})]}):a.paciente?Object(v.jsx)(v.Fragment,{children:a.paciente.name}):Object(v.jsx)(Ot,{type:"secondary",children:" Sin Paciente "})}},{title:"Factura",key:"Factura",dataIndex:"factura",render:function(e,a){return a.factura&&Object(v.jsx)(ut.a,{})}},{title:"Estado",key:"Estado",dataIndex:"estado",render:function(e,a){var t=a.estado,n="pagado"===t?"geekblue":"green";return"pendiente"!==t&&"sin pagar"!==t||(n="volcano"),Object(v.jsxs)(La.a,{color:n,children:[" ",t.toUpperCase()," "]})}},{title:"Acciones",key:"Editar",render:function(e,a){return Object(v.jsxs)("div",{className:"fila",children:[Object(v.jsx)(O.a,{onClick:function(){o(a),b()},children:"Editar"}),"ingreso"===a.tipo&&Object(v.jsx)(O.a,{onClick:function(){console.log(a),T([a]),N(!0)},children:"Imprimir Nota"})]})}}];return Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsxs)("div",{className:"fila",children:[Object(v.jsx)("h4",{children:"Tabla de Ingresos"}),Object(v.jsx)(O.a,{onClick:b,type:"primary",ghost:!0,style:{marginLeft:32},children:"Agregar Ingreso"}),Object(v.jsx)(O.a,{onClick:function(){C(!0)},type:"primary",ghost:!0,style:{marginLeft:32},children:"Agregar Gasto"})]}),Object(v.jsx)(ba.a,{columns:P,dataSource:t}),Object(v.jsx)("div",{style:{height:200}}),Object(v.jsx)(bt,{tipo:"ingreso",balanceForEdit:i,setBalanceForEdit:o,setIsModalOpen:u,isModalOpen:j,getBalancesData:D}),Object(v.jsx)(bt,{tipo:"egreso",balanceForEdit:p,setBalanceForEdit:x,setIsModalOpen:C,isModalOpen:y,getBalancesData:D}),Object(v.jsx)(le.a,{title:"Imprimir Nota de Venta",open:q,onOk:function(){N(!1)},onCancel:function(){N(!1)},width:600,children:Object(v.jsx)(ht,{ingresos:_,logo:"https://api.recreamed.com/images/bd71d914-1f11-4bea-81e5-81b55e11a4e1.jpg",company:"Hospital: ",seller:"M\xe9dico: ",buyer:"Paciente: "})})]})}var xt=t(263),ft=t(204),gt=t.n(ft),vt=Ne.StyleSheet.create({titleContainer:{flexDirection:"row",justifyContent:"center",marginBottom:10},reportTitle:{fontSize:18,textAlign:"center",fontFamily:"Helvetica-Bold",textTransform:"uppercase"},subtitle:{fontSize:14,textAlign:"center",fontFamily:"Helvetica",marginBottom:20},text:{margin:10,fontSize:12,textAlign:"justify",fontFamily:"Helvetica"},sellerBuyerInfo:{flexDirection:"row",justifyContent:"space-between",marginBottom:10},infoTitle:{fontFamily:"Helvetica-Bold",fontSize:12},infoText:{fontFamily:"Helvetica",fontSize:12},table:{display:"table",width:"auto",marginTop:10,borderStyle:"solid",borderWidth:1,borderColor:"#bfbfbf"},tableRow:{margin:"auto",flexDirection:"row"},tableColHeader:{width:"25%",borderStyle:"solid",borderWidth:1,borderColor:"#bfbfbf",backgroundColor:"#f0f0f0",textAlign:"center",fontFamily:"Helvetica-Bold",fontSize:12,paddingTop:5,paddingBottom:5},tableCol:{width:"25%",borderStyle:"solid",borderWidth:1,borderColor:"#bfbfbf",textAlign:"center",fontFamily:"Helvetica",fontSize:10,paddingTop:5,paddingBottom:5},tableCellHeader:{margin:"auto",marginTop:5,marginBottom:5,flexDirection:"row"},total:{fontFamily:"Helvetica-Bold",fontSize:14,marginTop:30,textAlign:"right",paddingRight:50},page:{fontFamily:"Helvetica",fontSize:12,padding:40},header:{flexDirection:"row",alignItems:"center",borderBottom:"1pt solid #000",paddingBottom:10,marginBottom:10},logo:{width:50,height:50,marginRight:10},title:{fontSize:20,marginLeft:10},company:{fontSize:14,marginTop:5,marginLeft:10}});function yt(e){var a=e.totales,t=e.logo;e.company,e.seller,e.buyer;return console.log("Received for print ",a),Object(v.jsx)(Ne.PDFViewer,{height:500,width:550,children:Object(v.jsx)(Ne.Document,{children:Object(v.jsx)(Ne.Page,{size:"A4",style:vt.page,children:Object(v.jsxs)(Ne.View,{children:[Object(v.jsxs)(Ne.View,{style:vt.header,children:[Object(v.jsx)(Ne.Image,{style:vt.logo,src:t}),Object(v.jsxs)(Ne.View,{children:[Object(v.jsx)(Ne.Text,{style:vt.title,children:"Corte"}),Object(v.jsxs)(Ne.Text,{style:vt.company,children:[(new Date).toLocaleString()," "]})]})]}),Object(v.jsxs)(Ne.View,{style:vt.sellerBuyerInfo,children:[Object(v.jsxs)(Ne.View,{children:[Object(v.jsx)(Ne.Text,{style:vt.infoTitle,children:"Ingresos Totales:"}),Object(v.jsx)(Ne.Text,{style:vt.infoText,children:a.ingresosTotales})]}),Object(v.jsxs)(Ne.View,{children:[Object(v.jsx)(Ne.Text,{style:vt.infoTitle,children:"Sin pagar:"}),Object(v.jsx)(Ne.Text,{style:vt.infoText,children:a.totalPendiente})]})]}),Object(v.jsxs)(Ne.View,{style:vt.table,children:[Object(v.jsxs)(Ne.View,{style:vt.tableRow,children:[Object(v.jsx)(Ne.Text,{style:vt.tableColHeader,children:"Cobros"}),Object(v.jsx)(Ne.Text,{style:vt.tableColHeader,children:"Pagados"}),Object(v.jsx)(Ne.Text,{style:vt.tableColHeader,children:"Precio Unitario"}),Object(v.jsx)(Ne.Text,{style:vt.tableColHeader,children:"Pendientes"})]}),Object(v.jsxs)(Ne.View,{style:vt.tableRow,children:[Object(v.jsx)(Ne.Text,{style:vt.tableCol,children:a.totalPagados}),Object(v.jsx)(Ne.Text,{style:vt.tableCol,children:"1"}),Object(v.jsxs)(Ne.Text,{style:vt.tableCol,children:["$",a.totalPendientes]}),Object(v.jsx)(Ne.Text,{style:vt.tableCol,children:"Another Text"})]},a.totalCobros)]}),Object(v.jsx)(Ne.Text,{style:vt.total,children:"Total:"})]})})})})}var Ct=Me.a.Text;function It(e){var a=Object(n.useState)([]),t=Object(U.a)(a,2),r=t[0],c=t[1],s=Object(n.useState)(!1),i=Object(U.a)(s,2),o=i[0],l=i[1],d=Object(n.useState)({}),j=Object(U.a)(d,2),u=j[0],b=j[1],m=function(){e.setIsModalOpen(!1)};Object(n.useEffect)((function(){return h()}),[]),Object(n.useEffect)((function(){D("balances/ingresos/corte",e.corte).then((function(e){console.log(e);var a=0,t=0,n=e.length,r=0,c=0,s=[];e.forEach((function(e){e&&"pagado"===e.estado?(a+=e.monto,r++):(t+=e.monto,c++,s.push(e))})),b({ingresosTotales:a,deudasTotales:t,cobrosTotales:n,pagados:r,pendientes:c,listOfDeudors:s})}))}),[e.corte]);var h=function(){k("mispacientes/".concat(w._id)).then((function(e){c(e)}))},p=function(e){var a=e.paciente,t=r.find((function(e){return a===e._id}));return Object(v.jsxs)("div",{children:[t?t.name:Object(v.jsx)(Ct,{disabled:!0,children:"Paciente eliminado o no existente"})," ",Object(v.jsx)("p",{style:{fontSize:10},children:"Tomado de la cita"})]})},x=[{title:"Paciente",key:"cita.paciente",dataIndex:"cita",render:function(e,a){return a.cita?Object(v.jsx)(p,{paciente:a.cita.usuario}):a.paciente?Object(v.jsx)(v.Fragment,{children:a.paciente.name}):Object(v.jsx)(Ct,{type:"secondary",children:" Sin Paciente"})}},{title:"Monto",dataIndex:"monto",key:"monto",render:function(e,a){var t=a.monto;return Object(v.jsxs)(v.Fragment,{children:["$",t]})}},{title:"Fecha y Hora",dataIndex:"createdAt",key:"createdAt",render:function(e,a){var t=a.createdAt;return Object(v.jsx)(v.Fragment,{children:new Date(t).toLocaleString()})}}],y=function(){var e=Object(g.a)(Object(f.a)().mark((function e(){var a,t,n,r;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=gt.a.utils.json_to_sheet([u]),t={Sheets:{data:a},SheetNames:["data"]},n=gt.a.write(t,{bookType:"xlsx",type:"array"}),r=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),xt.saveAs(r,"corte"+(new Date).toLocaleDateString()+".xlsx");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)(le.a,{width:600,title:"Detalles del corte",open:e.isModalOpen,onCancel:m,destroyOnClose:!0,footer:[Object(v.jsx)(O.a,{onClick:function(){return l(!o)},children:o?"Cancelar Impresion":"Imprimir PDF"}),Object(v.jsx)(O.a,{onClick:function(){return y()},children:"Exportar a excel"}),Object(v.jsx)(O.a,{onClick:m,children:"Cerrar"})],children:o?Object(v.jsx)(yt,{totales:u,logo:"https://api.recreamed.com/images/bd71d914-1f11-4bea-81e5-81b55e11a4e1.jpg",company:"Hospital: ",seller:"M\xe9dico: ",buyer:"Paciente: "}):Object(v.jsxs)("div",{children:[Object(v.jsx)("h5",{children:"Ingresos "}),Object(v.jsxs)("h5",{children:["Pagados: ",u.pagados]}),Object(v.jsxs)("h5",{children:["Total: ",Object(v.jsxs)("span",{style:{color:"#3277a8"},children:["$",u.ingresosTotales]})]}),Object(v.jsx)("br",{}),Object(v.jsx)("h5",{children:"Pendientes"}),Object(v.jsxs)("h5",{children:["Total: ",Object(v.jsxs)("span",{style:{color:"#eb3d43"},children:["$",u.deudasTotales]})]}),u.listOfDeudors&&u.listOfDeudors.length>0&&Object(v.jsx)(ba.a,{dataSource:u.listOfDeudors,columns:x,bordered:!1,size:"small"})]})})}function St(e){var a=e.isModalOpen,t=e.handleOk,n=e.handleCancel;return Object(v.jsx)(le.a,{title:"Basic Modal",open:a,onOk:t,onCancel:n,footer:[Object(v.jsx)(O.a,{onClick:n,children:"Cancelar"}),Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",form:"create_corte_medic",children:"Guardar"})],children:Object(v.jsxs)(b.a,{name:"create_corte_medic",labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600},initialValues:{fecha_cierre:me()(new Date)},onFinish:function(e){console.log("Success:",e)},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[Object(v.jsx)(b.a.Item,{label:"Comentario",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Fecha Cierre",name:"fecha_cierre",rules:[{required:!0,message:"Please input your username!"}],children:Object(v.jsx)(oe.a,{defaultValue:me()()})})]})})}function _t(){var e=Object(n.useState)({}),a=Object(U.a)(e,2),t=(a[0],a[1],Object(n.useState)([])),r=Object(U.a)(t,2),c=r[0],s=r[1],i=Object(n.useState)(!0),o=Object(U.a)(i,2),l=o[0],d=o[1],j=Object(n.useState)({}),u=Object(U.a)(j,2),b=u[0],m=u[1],h=Object(n.useState)(!1),p=Object(U.a)(h,2),x=p[0],f=p[1],g=Object(n.useState)(!1),y=Object(U.a)(g,2),C=y[0],I=y[1];Object(n.useEffect)((function(){return S()}),[]);var S=function(){k("cortes/".concat(w._id)).then((function(e){s(e.reverse())})).finally((function(){return d(!1)}))},_=[{title:"fecha y hora de Inicio",dataIndex:"fecha_inicio",key:"fecha_inicio",render:function(e,a){var t=a.fecha_inicio;return Object(v.jsxs)(v.Fragment,{children:[" ",new Date(t).toLocaleString()]})}},{title:"Fecha y hora de Cierre",dataIndex:"fecha_cierre",key:"fecha_cierre",render:function(e,a){var t=a.fecha_cierre;return Object(v.jsxs)(v.Fragment,{children:[" ",new Date(t).toLocaleString()]})}},{title:"Comentario",dataIndex:"comentario",key:"comentario"},{title:"Acciones",key:"Acciones",render:function(e,a){return Object(v.jsx)(J.a,{size:"middle",children:Object(v.jsx)(O.a,{onClick:function(){m(a),f(!0)},children:"Ver Detalles"})})}}];return l?Object(v.jsx)(se,{}):Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsxs)("div",{className:"fila",children:[Object(v.jsx)("h4",{children:"Cortes"}),Object(v.jsx)(O.a,{onClick:function(){I(!0)},type:"primary",style:{marginLeft:12},children:"Generar corte"})]}),Object(v.jsx)("br",{}),Object(v.jsx)(ba.a,{columns:_,dataSource:c}),Object(v.jsx)(It,{corte:b,isModalOpen:x,setIsModalOpen:f}),Object(v.jsx)(St,{isModalOpen:C,handleOk:function(){I(!1)},handleCancel:function(){I(!1)}})]})}function wt(){return console.log("DoctorApp",w.name),Object(v.jsx)(ae.a,{bg:"primary",variant:"dark",expand:"lg",children:Object(v.jsxs)(te.a,{children:[Object(v.jsx)("img",{src:Ca,width:"40",height:"35",className:"d-inline-block align-top",alt:"Recreamed logo",style:{marginRight:6}}),Object(v.jsxs)(ae.a.Brand,{href:"#home",style:{fontFamily:"Poppins",color:"White"},children:["Bienvenido ",w.name]}),Object(v.jsx)(ae.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(v.jsx)(ae.a.Collapse,{id:"basic-navbar-nav",children:Object(v.jsxs)(ne.a,{className:"me-auto",children:[Object(v.jsx)(ne.a.Link,{href:"/pacientes",children:"Pacientes"}),Object(v.jsx)(ne.a.Link,{href:"/citas",children:"Citas"}),Object(v.jsx)(ne.a.Link,{href:"/escalas",children:"Escalas"}),Object(v.jsx)(ne.a.Link,{href:"/balances",children:"Balance"}),Object(v.jsx)(ne.a.Link,{href:"/cortes",children:"Cortes"}),Object(v.jsx)(ne.a.Link,{href:"/perfil",children:"Mi Perfil"})]})}),Object(v.jsx)(ae.a.Brand,{href:"#home",className:"justify-content-end",children:Object(v.jsx)(O.a,{ghost:!0,onClick:S,style:{marginLeft:10},children:"Cerrar Sesion"})})]})})}function kt(){return Object(v.jsxs)(i.a,{children:[Object(v.jsx)(wt,{}),Object(v.jsxs)(o.c,{children:[Object(v.jsx)(o.a,{path:"/pacientes",children:Object(v.jsx)(Ta,{})}),Object(v.jsx)(o.a,{path:"/citas",children:Object(v.jsx)(xe,{})}),Object(v.jsx)(o.a,{path:"/expedientes",children:Object(v.jsx)(na,{})}),Object(v.jsx)(o.a,{path:"/perfil",children:Object(v.jsx)(pa,{})}),Object(v.jsx)(o.a,{path:"/balances",children:Object(v.jsx)(pt,{})}),Object(v.jsx)(o.a,{path:"/cortes",children:Object(v.jsx)(_t,{})}),Object(v.jsx)(o.a,{path:"/escalas",children:Object(v.jsx)(jt,{})}),Object(v.jsx)(o.a,{path:"/",children:Object(v.jsx)(Ta,{})})]}),Object(v.jsx)(A,{})]})}var Tt=t(767),Et=t(267),Ft=t(799),qt=t(321),Nt=t(800),Dt=Z.a.Option;function Pt(){var e=b.a.useForm(),a=Object(U.a)(e,1)[0],t=Object(v.jsx)(b.a.Item,{name:"prefix",noStyle:!0,children:Object(v.jsx)(Z.a,{style:{width:70},children:Object(v.jsx)(Dt,{value:"+52",children:"+52"})})}),n=Object(v.jsx)(b.a.Item,{name:"suffix",noStyle:!0,children:Object(v.jsxs)(Z.a,{style:{width:70},children:[Object(v.jsx)(Dt,{value:"USD",children:"$"}),Object(v.jsx)(Dt,{value:"CNY",children:"\xa5"})]})});return Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"Registrar Paciente"}),Object(v.jsx)("br",{}),Object(v.jsxs)(b.a,{labelCol:{span:6},wrapperCol:{span:16},form:a,name:"register",onFinish:function(e){e.avatar="https://",e.estatus="1",e.rol="Paciente",e.password=e.telefono,e.universidad="",e.certificacion="",e.cedula="",e.horarios=[],e.medicos_asignados=[w._id],delete e.prefix,console.log(e),fetch(C+"register",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),l.a.success(e.message||e.error)})).catch((function(e){return console.error("Error:",e)}))},initialValues:{residence:["zhejiang","hangzhou","xihu"],prefix:"52"},scrollToFirstError:!0,children:[Object(v.jsx)(b.a.Item,{name:"email",label:"Correo",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"telefono",label:"Telefono",rules:[{required:!0,message:"Please input your phone number!"}],children:Object(v.jsx)(m.a,{addonBefore:t,style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{name:"name",label:"Nombre",rules:[{required:!0,message:"Ingresa Nombre y apellidos"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"calle",label:"Calle",rules:[{required:!0,message:"Ingresa calle",whitespace:!0}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"numexterior",label:"Num Exterior",rules:[{required:!0,message:"Ingresa numero exterior"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"numinterior",label:"Num Interior",rules:[{required:!0,message:"Ingresa numinterior"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Colonia",name:"colonia",rules:[{required:!0,message:"Please input your colobnia!"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"estado",label:"Estado",rules:[{required:!0,message:"Apellido materno"}],children:Object(v.jsx)(Z.a,{placeholder:"Elije tu estado",showSearch:!0,children:M.map((function(e){return Object(v.jsx)(Dt,{value:e,children:e})}))})}),Object(v.jsx)(b.a.Item,{name:"municipio",label:"Municipio",rules:[{required:!0,message:"Ingresa tu municipio"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"codigopostal",label:"Codigo Postal",rules:[{required:!0,message:"Ingresa codigopostal"}],children:Object(v.jsx)(Be.a,{addonAfter:n,style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Registrar"})})]})]})}function At(){var e=Object(n.useState)([]),a=Object(U.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)(!0),s=Object(U.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)("tabla"),d=Object(U.a)(l,2);d[0],d[1];Object(n.useEffect)((function(){j()}),[]);var j=function(){fetch(y+"mispacientes/".concat(w._id)).then((function(e){return e.json()})).then((function(e){console.log(e),r(e)})).finally((function(){return o(!1)}))},u=[{title:"Nombre",dataIndex:"name",key:"name",render:function(e){return Object(v.jsx)("a",{href:"detalles",children:e})}},{title:"Medico",dataIndex:"id_medicoasignado",key:"id_medicoasignado"},{title:"Municipio",dataIndex:"municipio",key:"municipio"},{title:"Calle",dataIndex:"calle",key:"calle"},{title:"N Exterior",dataIndex:"numexterior",key:"numexterior"},{title:"Telefono",dataIndex:"telefono",key:"telefono"}];return Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"Pacientes"}),i?Object(v.jsx)(se,{}):Object(v.jsx)(ba.a,{dataSource:t,columns:u})]})}var Mt=Z.a.Option;function Rt(){var e=Object(n.useState)([]),a=Object(U.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)([]),s=Object(U.a)(c,2),i=s[0],o=s[1];Object(n.useEffect)((function(){d(),j()}),[]);var d=function(){fetch(y+"mispacientes/".concat(w._id)).then((function(e){return e.json()})).then((function(e){console.log("Pacientes: ",e),r(e)}))},j=function(){fetch(y+"users_by_rol/Medico").then((function(e){return e.json()})).then((function(e){console.log(e),o(e)}))};function u(e){console.log("selected ".concat(e))}function m(e){console.log("search:",e)}return Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:" Asignar pacientes a otro m\xe9dico "}),Object(v.jsx)("br",{}),Object(v.jsxs)(b.a,{name:"expediente",labelCol:{span:8},wrapperCol:{span:12},onFinish:function(e){var a=t.find((function(a){return a._id===e.id_usuario})).medicos_asignados;a.push(e.medico);var n={medicos_asignados:a};fetch(y+"users/updateMedicos/".concat(e.id_usuario),{method:"PUT",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),l.a.success(e.message||e.error)})).catch((function(e){return console.error("Error:",e)}))},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[Object(v.jsx)(b.a.Item,{label:"Paciente",name:"id_usuario",rules:[{required:!0,message:"Selecciona Usuario"}],children:Object(v.jsx)(Z.a,{showSearch:!0,placeholder:"Select a person",optionFilterProp:"children",onChange:u,onSearch:m,children:t.map((function(e){return Object(v.jsx)(Mt,{value:e._id,children:e.name})}))})}),Object(v.jsx)(b.a.Item,{label:"Medico",name:"medico",rules:[{required:!0,message:"Ingresa RFC"}],children:Object(v.jsx)(Z.a,{showSearch:!0,placeholder:"Select a person",optionFilterProp:"children",onChange:u,onSearch:m,children:i.map((function(e){return Object(v.jsx)(Mt,{value:e._id,children:e.name})}))})}),Object(v.jsx)(b.a.Item,{wrapperCol:{offset:8,span:16},children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",form:"expediente",children:"Guardar"})})]})]})}function Ht(){return Object(v.jsx)("div",{children:"DetallesPaciente"})}var zt=Tt.a.Header,Lt=Tt.a.Content,Vt=Tt.a.Footer,Bt=Tt.a.Sider,Gt=function(e){Object(ga.a)(t,e);var a=Object(va.a)(t);function t(){var e;Object(xa.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).handleClick=function(e){console.log("click ",e)},e.state={collapsed:!1},e.onCollapse=function(a){e.setState({collapsed:a})},e.toggle=function(){e.setState({collapsed:!e.state.collapsed})},e}return Object(fa.a)(t,[{key:"render",value:function(){return Object(v.jsx)(i.a,{children:Object(v.jsxs)(Tt.a,{style:{minHeight:"100vh"},children:[Object(v.jsxs)(Bt,{theme:"light",collapsible:!0,collapsed:this.state.collapsed,onCollapse:this.onCollapse,children:[Object(v.jsx)("div",{className:"logo"}),Object(v.jsxs)(Et.a,{defaultSelectedKeys:["1"],mode:"inline",children:[Object(v.jsxs)(Et.a.Item,{icon:Object(v.jsx)(p.a,{}),children:[Object(v.jsx)("span",{children:"Pacientes"}),Object(v.jsx)(i.b,{to:"/pacientes"})]},"1"),Object(v.jsxs)(Et.a.Item,{icon:Object(v.jsx)(Ft.a,{}),children:[Object(v.jsx)("span",{children:"Registrar Paciente"}),Object(v.jsx)(i.b,{to:"/registrar"})]},"2"),Object(v.jsxs)(Et.a.Item,{icon:Object(v.jsx)(qt.a,{}),children:[Object(v.jsx)("span",{children:"Re-asignar Paciente"}),Object(v.jsx)(i.b,{to:"/mover"})]},"3"),Object(v.jsxs)(Et.a.Item,{icon:Object(v.jsx)(qt.a,{}),children:[Object(v.jsx)("span",{children:"Detalles"}),Object(v.jsx)(i.b,{to:"/detalles"})]},"4")]})]}),Object(v.jsxs)(Tt.a,{children:[Object(v.jsx)(zt,{style:{background:"#fff",padding:0,paddingLeft:16},children:Object(v.jsx)(Nt.a,{className:"trigger",style:{cursor:"pointer"},onClick:this.toggle})}),Object(v.jsxs)(Lt,{style:{margin:"24px 16px",padding:24,background:"#fff",minHeight:280},children:[Object(v.jsx)(o.a,{exact:!0,path:"/registrar",component:Pt}),Object(v.jsx)(o.a,{path:"/pacientes",component:At}),Object(v.jsx)(o.a,{path:"/detalles",component:Ht}),Object(v.jsx)(o.a,{path:"/mover",component:Rt})]}),Object(v.jsx)(Vt,{style:{textAlign:"center"},children:"RECREAMED \xa92021 Created by Realidad Creativa"})]})]})})}}]),t}(n.Component),Ut=Gt,Zt=function(e){Object(ga.a)(t,e);var a=Object(va.a)(t);function t(){return Object(xa.a)(this,t),a.apply(this,arguments)}return Object(fa.a)(t,[{key:"render",value:function(){return Object(v.jsx)("div",{children:Object(v.jsx)("div",{children:Object(v.jsx)(Ut,{})})})}}]),t}(n.Component),Jt=Zt;t(410);function Yt(e){var a=!e.cita||0===Object.keys(e.cita).length,t=Object(n.useState)([]),r=Object(U.a)(t,2),c=r[0],s=r[1],i=Object(n.useState)([]),o=Object(U.a)(i,2),d=o[0],j=o[1],u=Object(n.useState)(""),h=Object(U.a)(u,2),p=h[0],x=h[1],f=Object(n.useState)(!0),g=Object(U.a)(f,2),y=g[0],C=g[1],I=Object(n.useState)(!1),S=Object(U.a)(I,2),_=(S[0],S[1]),w=Object(n.useState)(0),k=Object(U.a)(w,2),T=k[0],E=k[1],F=Object(n.useState)(0),N=Object(U.a)(F,2),P=N[0],A=N[1],M=Object(n.useState)(!1),R=Object(U.a)(M,2),H=R[0],z=R[1];Object(n.useEffect)((function(){console.log("Received Cita for edit",e.cita),e.cita&&e.cita.usuario&&(V(e.cita.usuario),B(e.cita.medico))}),[]),Object(n.useEffect)((function(){e.cita&&e.cita.medico&&B(e.cita.medico)}),[c]);var L=function(e,a,t,n,r){var c={tipo:"ingreso",medico:a,cita:e,monto:T,forma_de_pago:n,fecha_hora:t,estado:"pendiente",concepto:r};console.log("Balance ready to send: ",c),D("balances/add",c).then((function(e){l.a.success(e.message||e.error),console.log(e)}))},V=function(a){var t=e.pacientesData.find((function(e){return e._id===a}));if(t){C(!0);var n=t.medicos_asignados;n.forEach((function(e){e.label=e.name,e.value=e._id})),console.log("Found",t),console.log("meds",n),s(n)}else C(!1),x("Usuario no encontrado")},B=function(a){if(console.log("selected",a),console.log("all medics handle med chang",c),c.length>0){var t=c.find((function(e){return e._id===a}));if(t&&t.configuracion.tratamientos_ofrecidos){x(""),C(!0),e.enableCreateCita&&e.setEditingCita(!1);var n=t.configuracion.tratamientos_ofrecidos;console.log("found tr",n),n.forEach((function(e){e.label="".concat(e.tratamiento," - $").concat(e.costo),e.value=e.costo,e.title=e.tratamiento}));var r=t.configuracion.costo_cita;A(void 0===r?0:r),j(n)}else C(!1),x("No se puede crear la cita para este m\xe9dico, no cuenta con servicios"),e.enableCreateCita&&e.enableCreateCita(!1)}};return Object(v.jsxs)(b.a,{name:"nueva_cita_admin",labelCol:{span:8},wrapperCol:{span:12},onFinish:function(a){var t=a.tipo_pago;a.sucursal=e.hospital,delete a.tratamiento,a.servicio=a.servicio.title,delete a.tipo_pago,console.log("cita ready",a),e.cita?q("citas/update/".concat(e.cita._id),a).then((function(a){e.setIsModalOpen(!1),e.setEditingCita(!1)})).finally((function(){e.getCitasData()})):D("citas/add",a).then((function(e){l.a.success(e.message||e.error),L(e.id_nueva_cita,a.medico,a.fecha_hora,t,a.servicio)})).finally((function(){e.getCitasData(),e.setIsModalOpen(!1)}))},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",initialValues:e.cita?e.cita:{isOnline:!1,tratamiento:"Sin servicio",fecha_hora:e.fecha_hora,duracion:60},children:[Object(v.jsx)("div",{children:p}),Object(v.jsx)(b.a.Item,{label:"Paciente",name:"usuario",rules:[{required:!0,message:"Selecciona Usuario"}],children:Object(v.jsx)(Z.a,{options:e.pacientesData,onChange:V,optionFilterProp:"children",onSearch:function(e){},showSearch:!0,filterOption:function(e,a){var t;return(null!==(t=null===a||void 0===a?void 0:a.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())}})}),Object(v.jsx)(b.a.Item,{label:"Medico",name:"medico",rules:[{required:!0,message:"Selecciona Medico"}],children:Object(v.jsx)(Z.a,{options:c,onChange:B})}),Object(v.jsx)(b.a.Item,{label:"VideoLlamada",name:"isOnline",children:Object(v.jsx)(ie.a,{onChange:function(e){_(e)}})}),Object(v.jsx)(b.a.Item,{label:"Comentarios",name:"comentarios",rules:[{required:!1,message:"Ingresa Comentarios"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Fecha y Hora",name:"fecha_hora",rules:[{required:!1,message:"Selecciona Fecha y Hora"}],children:Object(v.jsx)(oe.a,{showTime:!0,format:"DD/MM/YYYY HH:mm",use12Hours:!0})}),Object(v.jsx)(b.a.Item,{label:"Duracion",name:"duracion",rules:[{required:!0,message:"Selecciona la duracion de la cita"}],children:Object(v.jsx)(Z.a,{options:[{label:"Media Hora",value:30},{label:"Una Hora",value:60},{label:"Una Hora y Media",value:90},{label:"Dos Horas",value:120},{label:"Dos Horas Y Media",value:150},{label:"Tres Horas",value:180},{label:"Cuatro Horas",value:210},{label:"Cuatro Horas y Media",value:240},{label:"Cinco Horas",value:270},{label:"Cinco Horas y Media",value:300}]})}),Object(v.jsx)(b.a.Item,{label:"Servicio",name:"servicio",rules:[{required:!0,message:"Selecciona Medico"}],children:Object(v.jsx)(Z.a,{options:d,onChange:function(e){E(e.value),console.log("selected service",e)},labelInValue:!0})}),a&&Object(v.jsxs)("div",{children:[Object(v.jsx)(b.a.Item,{label:"Tipo de pago",name:"tipo_pago",rules:[{required:!0,message:"Selecciona tipo de pago"}],children:Object(v.jsx)(Z.a,{options:[{value:"efectivo",label:"Efectivo"},{value:"tarjeta",label:"Tarjeta"},{value:"transferencia",label:"Transferencia"}]})}),Object(v.jsx)(b.a.Item,{label:"costo de la cita $".concat(P),children:Object(v.jsx)(ie.a,{onChange:function(e){console.log("switch to ".concat(e)),z(e)}})}),Object(v.jsx)(b.a.Item,{wrapperCol:{offset:8,span:16},children:Object(v.jsx)("div",{className:"fila",children:Object(v.jsxs)("h6",{children:["Costo Total: $",H?T+P:T," "]})})})]}),e.cita&&Object(v.jsx)("div",{children:Object(v.jsx)(b.a.Item,{wrapperCol:{offset:8,span:16},children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",form:"nueva_cita_admin",disabled:!y,children:"Guardar"})})})]})}function Wt(e){var a=Object(n.useState)(!0),t=Object(U.a)(a,2),r=t[0],c=(t[1],function(){e.setIsModalOpen(!1)});return Object(v.jsx)(le.a,{title:"Nueva Cita",open:e.isOpenModal,onOk:function(){e.setIsModalOpen(!1)},onCancel:c,destroyOnClose:!0,footer:[Object(v.jsx)(O.a,{onClick:c,children:"Cancelar"}),Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",form:"nueva_cita_admin",disabled:!r,children:"Guardar"})],children:Object(v.jsx)(Yt,Object(B.a)({},e))})}var $t=Object(re.b)(me.a);function Xt(e){var a=Object(n.useState)({}),t=Object(U.a)(a,2),r=t[0],c=t[1],s=Object(n.useState)([]),i=Object(U.a)(s,2),o=i[0],l=i[1],d=Object(n.useState)(!0),j=Object(U.a)(d,2),u=j[0],b=j[1],m=Object(n.useState)(!1),h=Object(U.a)(m,2),p=h[0],x=h[1],f=function(){x(!1),I(!1)},g=Object(n.useState)(!1),y=Object(U.a)(g,2),C=y[0],I=y[1],S=Object(n.useState)([]),_=Object(U.a)(S,2),w=_[0],T=_[1],E=Object(n.useState)(""),F=Object(U.a)(E,2),q=F[0],N=F[1],D=Object(n.useState)(!1),P=Object(U.a)(D,2),A=P[0],M=P[1],R=Object(n.useState)([]),H=Object(U.a)(R,2),L=H[0],V=H[1],B=Object(n.useState)([]),G=Object(U.a)(B,2),Z=(G[0],G[1],function(){k("users_by_rol/Paciente").then((function(a){V(function(a){var t=[];return a.forEach((function(a){a.medicos_asignados.forEach((function(n){n.horarios.forEach((function(n){n.sucursal!==e.id_hospital||t.includes(a)||(a.label=a.name,a.value=a._id,t.push(a))}))}))})),t}(a))}))});Object(n.useEffect)((function(){Z(),J()}),[]);var J=function(){var a=[];k("citas/sucursal/".concat(e.id_hospital)).then((function(e){e.forEach((function(e,t){var n,r,c=e.servicio;a.includes(c)||a.push(c),e.index=t,e.hexColor=z[t],e.start=new Date(Date.parse(e.fecha_hora));var s=new Date(Date.parse(e.fecha_hora));s.setTime(s.getTime()+1*(null!==(n=e.duracion)&&void 0!==n?n:60)*60*1e3),e.end=new Date(Date.parse(s)),e.title=null===(r=e.usuario)||void 0===r?void 0:r.name,e.key=e._id})),console.log("Services ",a),T(a),l(e)})).finally((function(){return b(!1)}))};return u?Object(v.jsx)(se,{}):Object(v.jsxs)("div",{children:[Object(v.jsx)("br",{}),Object(v.jsxs)("h6",{children:["Citas del hospital ",e.hospital]}),Object(v.jsx)("br",{}),Object(v.jsx)(re.a,{scrollToTime:new Date(Date.now()),selectable:"true",localizer:$t,events:o,eventPropGetter:function(e,a,t,n){var r=w.indexOf(e.servicio);return{style:{backgroundColor:"#"+z[r],borderRadius:"4px",opacity:.8,color:"white",border:"0px",display:"block"}}},startAccessor:"start",endAccessor:"end",style:{height:500},messages:{next:"Sig",previous:"Ant",today:"Hoy",month:"Mes",week:"Semana",day:"D\xeda"},defaultView:"week",onDoubleClickEvent:function(e){return console.log(e)},onSelectEvent:function(e){e.doctor||(e.doctor=e.medico),e.paciente||(e.paciente=e.usuario),e.medico&&e.medico._id&&(e.medico=e.medico._id),e.usuario&&e.usuario._id&&(e.usuario=e.usuario._id),e.fecha_hora=me()(e.fecha_hora),console.log("Fecha al editar: ",e.fecha_hora),c(e),r&&x(!0)},onSelecting:function(e){return console.log(e)},onSelectSlot:function(e){var a=e.start;e.end,e.action;return N(me()(a)),console.log("Fecha al crear: ",me()(a)),M(!0),{style:{backgroundColor:"red"}}}}),Object(v.jsx)(le.a,{title:"Detalles Cita",open:p,onOk:function(){x(!1),I(!1)},onCancel:f,destroyOnClose:!0,footer:[Object(v.jsx)(O.a,{onClick:function(){return I(!C)},children:C?"Cancelar":"Modificar"}),Object(v.jsx)(O.a,{onClick:f,children:"Cerrar"})],children:C?Object(v.jsx)(Yt,{cita:r,setIsModalOpen:x,getCitasData:J,setEditingCita:I,hospital:e.id_hospital,pacientesData:L}):Object(v.jsx)("div",{children:r&&Object(v.jsxs)("div",{children:[Object(v.jsxs)("p",{children:[Object(v.jsx)("strong",{children:"Medico "}),r.doctor?r.doctor.name:"Sin medico"]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("strong",{children:"Paciente "}),r.paciente?r.paciente.name:"Sin paciente"]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("strong",{children:"Fecha "}),new Date(r.fecha_hora).toLocaleDateString()]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("strong",{children:"Hora "}),new Date(r.fecha_hora).toLocaleTimeString()]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("strong",{children:"Servicio "}),r.servicio]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("strong",{children:"Comentarios "}),r.comentarios]})]})})}),Object(v.jsx)(Wt,{setIsModalOpen:M,isOpenModal:A,hospital:e.id_hospital,fecha_hora:q,getCitasData:J,pacientesData:L,setEditingCita:I})]})}function Qt(){return R.forEach((function(e){e.label=e.nombre,e.key=e._id,e.children=Object(v.jsx)(Xt,{hospital:e.nombre,id_hospital:e._id})})),Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsx)("h4",{children:"Citas"}),Object(v.jsx)(fe.a,{defaultActiveKey:"1",items:R})]})}var Kt=["key","name"],en=Z.a.Option,an=ve.a.Dragger,tn={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:14}}},nn={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};function rn(e){var a=b.a.useForm(),t=Object(U.a)(a,1)[0],r=Object(n.useState)([]),c=Object(U.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(!0),u=Object(U.a)(o,2),h=u[0],p=u[1],x=Object(n.useState)(e.perfil.avatar),f=Object(U.a)(x,2),g=f[0],C=f[1],I={name:"file",multiple:!1,action:y+"imagenes/upload",onChange:function(e){var a=e.file.status;"uploading"!==a&&console.log(e.file,e.fileList),"done"===a?(l.a.success("".concat(e.file.name," file uploaded successfully.")),console.log("New Files: ",e.file.response.file),C(e.file.response.file)):"error"===a&&l.a.error("".concat(e.file.name," file upload failed."))},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}};Object(n.useEffect)((function(){console.log("received Medic: ",e.perfil),k("sucursales").then((function(e){i(e),p(!1)}))}),[]);var S=Object(v.jsx)(b.a.Item,{name:"prefix",noStyle:!0,children:Object(v.jsx)(Z.a,{style:{width:70},children:Object(v.jsx)(en,{value:"+52",children:"+52"})})});b.a.Item,Z.a;return Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"Editar perfil"}),Object(v.jsx)("br",{}),Object(v.jsxs)(an,Object(B.a)(Object(B.a)({},I),{},{children:[Object(v.jsx)("p",{className:"ant-upload-drag-icon",children:Object(v.jsx)(ye.a,{})}),Object(v.jsx)("p",{className:"ant-upload-text",children:"Arrastra la imagen de perfil o click ara buscar"}),Object(v.jsx)("p",{className:"ant-upload-hint",children:"Selecciona archivos en formato png, jpeg o webp"})]})),Object(v.jsx)("br",{}),Object(v.jsx)(b.a,Object(B.a)(Object(B.a)({},tn),{},{form:t,name:"register",onFinish:function(a){a.avatar=g,console.log("ready to send",a),fetch(y+"users/updateUser/"+e.perfil._id,{method:"PUt",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){console.log("Success:",a),a.message&&"Usuario actualizado correctamente"===a.message?e.setEditing(!1):l.a.error(a.error)})).catch((function(e){return console.error("Error:",e)}))},initialValues:e.perfil,scrollToFirstError:!0,children:Object(v.jsxs)(d.a,{children:[Object(v.jsxs)(j.a,{span:11,children:[Object(v.jsx)(b.a.Item,{name:"name",label:"Nombre",rules:[{required:!0,message:"Ingresa Nombre y apellidos"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"email",label:"Correo",rules:[{type:"email",message:"Ingresa un corrreo electronico valido"},{required:!0,message:"Please input your E-mail!"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"telefono",label:"Telefono",rules:[{required:!0,message:"Ingresa el numero de telefono correcto"}],children:Object(v.jsx)(m.a,{addonBefore:S,style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{label:"horarios",rules:[{required:!0,message:"Ingresa al menos un horario"}],children:Object(v.jsx)(b.a.List,{name:"horarios",label:"horarios list",children:function(e,a){var t=a.add,n=a.remove;return Object(v.jsxs)(v.Fragment,{children:[e.map((function(e){var a=e.key,t=e.name,r=Object(G.a)(e,Kt);return Object(v.jsxs)(J.a,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"sucursal"],rules:[{required:!0,message:"Elije Sucursal"}],children:Object(v.jsx)(Z.a,{placeholder:"Elije Sucursal",style:{width:"120px"},children:h?"Cargando":s.map((function(e){return Object(v.jsx)(en,{value:e._id,children:e.nombre})}))})})),Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"horario"],rules:[{required:!0,message:"Missing last name"}],children:Object(v.jsx)(m.a,{placeholder:"Horario"})})),Object(v.jsx)(Y.a,{onClick:function(){return n(t)}})]},a)})),Object(v.jsx)(b.a.Item,{children:Object(v.jsx)(O.a,{type:"dashed",onClick:function(){return t()},block:!0,icon:Object(v.jsx)(W.a,{}),children:"Agregar Horario"})})]})}})})]}),Object(v.jsxs)(j.a,{span:12,children:[Object(v.jsx)(b.a.Item,{name:"cedula",label:"Cedula",rules:[{required:!1,message:"Ingresa cedula"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"certificacion",label:"Certificacion",rules:[{required:!1,message:"Ingresa tu certificacion"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"universidad",label:"Universidad",rules:[{required:!1,message:"Ingresa tu universidad"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},nn),{},{children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Guardar"})}))]})]})}))]})}function cn(){var e=Object(n.useState)([]),a=Object(U.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)([]),s=Object(U.a)(c,2),i=(s[0],s[1]),o=Object(n.useState)(!1),l=Object(U.a)(o,2),b=l[0],m=l[1],h=Object(n.useState)(!0),x=Object(U.a)(h,2),C=x[0],I=x[1],S=Object(n.useState)(!1),_=Object(U.a)(S,2);_[0],_[1];Object(n.useEffect)((function(){k()}),[]),Object(n.useEffect)((function(){k()}),[b]);var k=function(){fetch(y+"userByMail/"+w.email).then((function(e){return e.json()})).then((function(e){console.log(e),r(e[0]),I(!1)}))},T=function(){var e=Object(g.a)(Object(f.a)().mark((function e(a){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.horarios.forEach((function(e){e.sucursal=e.sucursal._id})),console.log("Horarios before edit profile: ",a.horarios),e.next=4,i(a);case 4:m(!0),console.log("Editar medico: ",a);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),E=function(){return Object(v.jsxs)(d.a,{children:[Object(v.jsxs)(j.a,{span:8,offset:4,children:[t.avatar.length>9?Object(v.jsx)(ra.a,{style:{borderRadius:12},width:256,src:"https://api.recreamed.com/images/"+t.avatar}):Object(v.jsx)(Ke.a,{size:128,icon:Object(v.jsx)(p.a,{}),className:"btnIconCentered"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsxs)("p",{className:"nombre",children:[" ",t.name," "]}),Object(v.jsxs)("p",{className:"datos",children:[t.rol," "]}),Object(v.jsxs)("p",{className:"datos",children:["Correo: ",t.email," "]}),Object(v.jsxs)("p",{className:"datos",children:["Telefono: ",t.telefono," "]})]}),Object(v.jsxs)(j.a,{span:8,children:[Object(v.jsx)(u.a,{title:"Horarios",style:{borderRadius:12},children:t.horarios.map((function(e){return Object(v.jsx)(u.a.Grid,{style:{width:"100%"},children:Object(v.jsxs)(d.a,{align:"middle",children:[Object(v.jsx)(j.a,{span:6,offset:4,children:Object(v.jsx)("img",{width:64,src:"https://api.recreamed.com/images/"+e.sucursal.logo,alt:"Logo"})}),Object(v.jsxs)(j.a,{span:10,children:[e.sucursal.nombre," ",Object(v.jsx)("br",{})," ",e.horario]})]})})}))}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{})]})]})};return Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsxs)(J.a,{children:[Object(v.jsx)("h4",{children:"Mi Perfil"}),Object(v.jsx)(O.a,{onClick:function(){return T(t)},type:"primary",shape:"circle",icon:Object(v.jsx)(Fe.a,{}),className:"btnIconCentered"})]})," ",Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),C?Object(v.jsx)(se,{}):Object(v.jsx)(u.a,{style:{borderRadius:16},children:b?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(rn,{perfil:t,setEditing:m}),Object(v.jsx)(O.a,{onClick:function(){return m(!1)},children:"Cancelar"})]}):Object(v.jsx)(E,{})})]})}t(748),n.Component;var sn=m.a.TextArea,on=function(e){console.log("Success:",e)},ln=function(e){console.log("Failed:",e)};function dn(){return Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsx)("h4",{children:"Historial de los pacientes del medico"}),Object(v.jsx)("h4",{children:"Historial Clinico"}),Object(v.jsxs)(b.a,{name:"basic",labelCol:{span:6},wrapperCol:{span:12},initialValues:{remember:!0},onFinish:on,onFinishFailed:ln,autoComplete:"off",children:[Object(v.jsx)(b.a.Item,{label:"Paciente",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"comentarios",name:"id_paciente",rules:[{required:!0,message:"Ingresa RFC"}],children:Object(v.jsx)(sn,{rows:4})}),Object(v.jsx)(b.a.Item,{wrapperCol:{offset:8,span:16},children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Guardar"})})]})]})}var jn=Z.a.Option,un=w&&w.horarios.map((function(e){return e.sucursal._id}));function bn(e){var a=b.a.useForm(),t=Object(U.a)(a,1)[0],r=Object(n.useState)(e.paciente?e.paciente.avatar:"noimg.jpg"),c=Object(U.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)([]),d=Object(U.a)(o,2),j=d[0],u=d[1];Object(n.useEffect)((function(){k("users_by_rol/Medico").then((function(e){u(h(e))}))}),[]);var h=function(e){var a=[];return e.forEach((function(e){e.horarios.forEach((function(t){un.includes(t.sucursal._id)&&!a.includes(e)&&(e.label=e.name,e.value=e._id,a.push(e))}))})),a};function p(){return x.apply(this,arguments)}function x(){return(x=Object(g.a)(Object(f.a)().mark((function e(){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(y+"historias/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({historial:"Historia clinica al "+new Date})}).then((function(e){return e.json()})).then((function(e){return console.log("Story Created: ",e),e})).catch((function(e){return console.error("Error:",e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=function(){var e=Object(g.a)(Object(f.a)().mark((function e(a){var t,n;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return t=e.sent,console.log("historia on Register: ",t),n={usuario:a,historia:t.id_historia,notas:[],recetas:[]},console.log("postBodyForExpedient: ",n),e.next=8,fetch(y+"expedientes/add",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),l.a.success(e.message||e.error)})).catch((function(e){return console.error("Error:",e)}));case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),S=function(){var a=Object(g.a)(Object(f.a)().mark((function a(t){var n;return Object(f.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.avatar=s,t.estatus="1",t.rol="Paciente",t.password=""+t.telefono,t.universidades=[],t.certificacion="",t.cedula="",t.horarios=[],t.responsable=e.paciente?e.paciente.responsable:{nombre:t.res_name,telefono:t.res_phone},delete t.prefix,delete t.res_name,delete t.res_phone,n=e.paciente?y+"users/updateUser/"+e.paciente._id:C+"register",console.log(t),console.log("url: ",n),a.next=17,fetch(n,{method:e.paciente?"PUT":"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){l.a.success(a.message||a.error),e.paciente?console.log("Editing, not creating patient"):I(a.user_id),"Usuario creado correctamente"===a.message?window.location.reload(!1):console.log(a),"Usuario actualizado correctamente"===a.message?e.setAdding(!1):console.log(a)})).catch((function(e){return console.error("Error:",e)})).finally((function(){e.getPacientesData&&e.getPacientesData()}));case 17:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),_={name:"file",multiple:!1,action:y+"imagenes/upload",onChange:function(e){var a=e.file.status;"uploading"!==a&&console.log(e.file,e.fileList),"done"===a?(l.a.success("".concat(e.file.name," file uploaded successfully.")),console.log("New Files: ",e.file.response.file),i(e.file.response.file)):"error"===a&&l.a.error("".concat(e.file.name," file upload failed."))}};return Object(v.jsxs)("div",{className:"mainContainer",children:[e.paciente?Object(v.jsx)("h4",{children:"Editar paciente"}):Object(v.jsx)("h4",{children:"Registrar Paciente"}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(v.jsx)(ve.a,Object(B.a)(Object(B.a)({},_),{},{children:Object(v.jsx)(O.a,{type:"dashed",icon:Object(v.jsx)(Ia.a,{style:{fontSize:24,color:"#0d6efd"}}),style:{width:400,height:80},block:!0,children:"Selecciona la foto de perfil"})}))}),Object(v.jsx)("br",{}),Object(v.jsxs)(b.a,{labelCol:{span:6},wrapperCol:{span:16},form:t,name:"register",onFinish:S,onFinishFailed:function(e){console.log("Failed:",e),e.errorFields.forEach((function(e){l.a.error("Ingrese el campo "+e.name)}))},initialValues:e.paciente,scrollToFirstError:!0,children:[Object(v.jsx)(b.a.Item,{name:"name",label:"Nombre",rules:[{required:!0,message:"Ingresa Nombre y apellidos"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"email",label:"Correo",rules:[{type:"email",message:"Ingresa un correo electronico vaido!"},{required:!0,message:"Ingresa un correo electronico"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"telefono",label:"Telefono",rules:[{required:!0,message:"Ingresa tu numero de telefono"}],children:Object(v.jsx)(Be.a,{style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{name:"medicos_asignados",label:"Medicos Asignados",rules:[{required:!0,message:"Agrega al mennos un medico"}],children:Object(v.jsx)(b.a.List,{name:"medicos_asignados",children:function(e,a,t){var n=a.add,r=a.remove,c=t.errors;return Object(v.jsxs)(v.Fragment,{children:[e.map((function(a,t){return Object(v.jsxs)(b.a.Item,{label:"",required:!1,children:[Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},a),{},{noStyle:!0,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Selecciona un Medico o elimina este campo"}],children:Object(v.jsx)(Z.a,{options:j,placeholder:"Selecciona Medico",style:{width:e.length>1?"90%":"100%"}})})),e.length>1?Object(v.jsx)(Y.a,{className:"dynamic-delete-button",onClick:function(){return r(a.name)}}):null]},a.key)})),Object(v.jsxs)(b.a.Item,{children:[Object(v.jsx)(O.a,{type:"dashed",onClick:function(){return n()},icon:Object(v.jsx)(W.a,{}),children:"Agregar Medico"}),Object(v.jsx)(b.a.ErrorList,{errors:c})]})]})}})}),Object(v.jsx)(ua.a,{children:"Responsable (opcional) "}),Object(v.jsx)(b.a.Item,{name:"res_name",label:"Nombre Responsable",children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"res_phone",label:"Telefono Responsable",children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(ua.a,{}),Object(v.jsx)(b.a.Item,{name:"calle",label:"Calle",rules:[{required:!1,message:"Ingresa calle",whitespace:!0}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"numexterior",label:"Num Exterior",rules:[{required:!1,message:"Ingresa numero exterior"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"numinterior",label:"Num Interior",rules:[{required:!1,message:"Ingresa numinterior"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Colonia",name:"colonia",rules:[{required:!1,message:"Ingresa "}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"estado",label:"Estado",rules:[{required:!1,message:"Apellido materno"}],children:Object(v.jsx)(Z.a,{placeholder:"Elije tu estado",showSearch:!0,children:M.map((function(e){return Object(v.jsx)(jn,{value:e,children:e})}))})}),Object(v.jsx)(b.a.Item,{name:"municipio",label:"Municipio",rules:[{required:!1,message:"Ingresa tu municipio"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"codigopostal",label:"Codigo Postal",rules:[{required:!1,message:"Ingresa codigopostal"}],children:Object(v.jsx)(Be.a,{style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{name:"sexo",label:"sexo",rules:[{required:!1,message:"Selecciona una opcion"}],children:Object(v.jsxs)(Z.a,{placeholder:"Elije el sexo",children:[Object(v.jsx)(jn,{value:"H",children:"H"}),Object(v.jsx)(jn,{value:"M",children:"M"}),Object(v.jsx)(jn,{value:"Otro",children:"Otro"})]})}),Object(v.jsx)(b.a.Item,{name:"edad",label:"Edad",rules:[{required:!1,message:"Ingresa edad"}],children:Object(v.jsx)(Be.a,{min:1,max:120})}),Object(v.jsx)(b.a.Item,{name:"diagnostico",label:"Diagnostico",rules:[{required:!1,message:"Ingresa el diagnostico"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"peso",label:"Peso",rules:[{required:!1,message:"Ingresa el peso"}],children:Object(v.jsx)(Be.a,{min:1,max:200})}),Object(v.jsx)(b.a.Item,{name:"talla",label:"Talla",rules:[{required:!1,message:"Ingresa la talla"}],children:Object(v.jsx)(Be.a,{min:1,max:200})}),Object(v.jsx)(b.a.Item,{name:"ocupacion",label:"Ocupacion",rules:[{required:!1,message:"Ingresa ocupacion"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"estado_civil",label:"Estado Civil",rules:[{required:!1,message:"Ingresa estado civil"}],children:Object(v.jsxs)(Z.a,{placeholder:"Elije el estado civil",children:[Object(v.jsx)(jn,{value:"Soltero",children:"Soltero"}),Object(v.jsx)(jn,{value:"Casado",children:"Casado"}),Object(v.jsx)(jn,{value:"Divorciado",children:"Divorciado"}),Object(v.jsx)(jn,{value:"Separaci\xf3n en proceso judicial",children:"Separaci\xf3n en proceso judicial"}),Object(v.jsx)(jn,{value:"Viudo",children:"Viudo"}),Object(v.jsx)(jn,{value:"Concubinato",children:"Concubinato"})]})}),Object(v.jsx)(b.a.Item,{name:"escolaridad",label:"Escolaridad",rules:[{required:!1,message:"Ingresa escolaridad"}],children:Object(v.jsxs)(Z.a,{placeholder:"Elije escolaridad",children:[Object(v.jsx)(jn,{value:"Ninguno",children:"Ninguno"}),Object(v.jsx)(jn,{value:"Preescolar",children:"Preescolar"}),Object(v.jsx)(jn,{value:"Primaria",children:"Primaria"}),Object(v.jsx)(jn,{value:"Secundaria",children:"Secundaria"}),Object(v.jsx)(jn,{value:"Medio Superior",children:"Medio Superior"}),Object(v.jsx)(jn,{value:"Superior",children:"Superior"}),Object(v.jsx)(jn,{value:"Posgrado",children:"Posgrado"})]})}),Object(v.jsx)(b.a.Item,{name:"lugar_de_nacimiento",label:"Lugar De Nacimiento",rules:[{required:!1,message:"Ingresa el lugar de nacimiento"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"fecha_nacimiento",label:"Fecha De Nacimiento",rules:[{required:!1,message:"Ingresa la fecha de nacimiento"}],children:Object(v.jsx)(oe.a,{})}),Object(v.jsx)(b.a.Item,{name:"ciudad",label:"Ciudad de residencia",rules:[{required:!1,message:"Ingresa ciudad"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"fuma",label:"Fuma",rules:[{required:!1,message:"Ingresa tu universidad"}],children:Object(v.jsx)(ie.a,{defaultChecked:!1})}),Object(v.jsx)(b.a.Item,{name:"alcohol",label:"Alcohol",rules:[{required:!1,message:"Ingresa tu universidad"}],children:Object(v.jsx)(ie.a,{defaultChecked:!1})}),Object(v.jsx)(b.a.Item,{name:"drogas",label:"Drogas",rules:[{required:!1,message:"Selecciona una opcion"}],children:Object(v.jsxs)(Z.a,{placeholder:"Elije una opcion",children:[Object(v.jsx)(jn,{value:"Antes",children:"Antes"}),Object(v.jsx)(jn,{value:"Ahora",children:"Ahora"}),Object(v.jsx)(jn,{value:"Nunca",children:"Nunca"})]})}),Object(v.jsx)(b.a.Item,{name:"cuales_drogas",label:"Cuales Drogas",rules:[{required:!1,message:"Selecciona una opcion"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"enfermedades_familiares",label:"Enfermedades Familiares",rules:[{required:!1,message:"Ingresa tu universidad"}],children:Object(v.jsx)(b.a.List,{name:"enfermedades_familiares",children:function(e,a,t){var n=a.add,r=a.remove,c=t.errors;return Object(v.jsxs)(v.Fragment,{children:[e.map((function(a,t){return Object(v.jsxs)(b.a.Item,{label:"",required:!1,children:[Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},a),{},{noStyle:!0,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Ingresa la enfermedad o elimina este campo"}],children:Object(v.jsx)(m.a,{placeholder:"Ingresa enfermedad",style:{width:e.length>1?"90%":"100%"}})})),e.length>1?Object(v.jsx)(Y.a,{className:"dynamic-delete-button",onClick:function(){return r(a.name)}}):null]},a.key)})),Object(v.jsxs)(b.a.Item,{children:[Object(v.jsx)(O.a,{type:"dashed",onClick:function(){return n()},icon:Object(v.jsx)(W.a,{}),children:"Agregar Enfermedad Familiar"}),Object(v.jsx)(b.a.ErrorList,{errors:c})]})]})}})}),Object(v.jsx)(b.a.Item,{name:"enfermedades_medicas",label:"Enfermedades Medicas",rules:[{required:!1,message:"Ingresa tu universidad"}],children:Object(v.jsx)(b.a.List,{name:"enfermedades_medicas",children:function(e,a,t){var n=a.add,r=a.remove,c=t.errors;return Object(v.jsxs)(v.Fragment,{children:[e.map((function(a,t){return Object(v.jsxs)(b.a.Item,{label:"",required:!1,children:[Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},a),{},{noStyle:!0,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Ingresa la enfermedad o elimina este campo"}],children:Object(v.jsx)(m.a,{placeholder:"Ingresa enfermedad",style:{width:e.length>1?"90%":"100%"}})})),e.length>1?Object(v.jsx)(Y.a,{className:"dynamic-delete-button",onClick:function(){return r(a.name)}}):null]},a.key)})),Object(v.jsxs)(b.a.Item,{children:[Object(v.jsx)(O.a,{type:"dashed",onClick:function(){return n()},icon:Object(v.jsx)(W.a,{}),children:"Agregar Enfermedad Medica"}),Object(v.jsx)(b.a.ErrorList,{errors:c})]})]})}})}),Object(v.jsx)(b.a.Item,{name:"tratamiento_actual",label:"Tratamiento actual",rules:[{required:!1,message:"Ingresa tu universidad"}],children:Object(v.jsx)(b.a.List,{name:"tratamiento_actual",children:function(e,a,t){var n=a.add,r=a.remove,c=t.errors;return Object(v.jsxs)(v.Fragment,{children:[e.map((function(a,t){return Object(v.jsxs)(b.a.Item,{label:"",required:!1,children:[Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},a),{},{noStyle:!0,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Ingresa la enfermedad o elimina este campo"}],children:Object(v.jsx)(m.a,{placeholder:"Ingresa enfermedad",style:{width:e.length>1?"90%":"100%"}})})),e.length>1?Object(v.jsx)(Y.a,{className:"dynamic-delete-button",onClick:function(){return r(a.name)}}):null]},a.key)})),Object(v.jsxs)(b.a.Item,{children:[Object(v.jsx)(O.a,{type:"dashed",onClick:function(){return n()},icon:Object(v.jsx)(W.a,{}),children:"Agregar Tratamiento"}),Object(v.jsx)(b.a.ErrorList,{errors:c})]})]})}})}),Object(v.jsx)(b.a.Item,{labelCol:{span:6},wrapperCol:{offset:6,span:16},children:Object(v.jsxs)(J.a,{children:[Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:e.paciente?"Guardar":"Registrar"}),e.setAdding&&Object(v.jsx)(O.a,{onClick:function(){return e.setAdding(!1)},children:"Cancelar"})]})})]})]})}function mn(e){var a=e.paciente,t=e.setIsModalOpen,n=e.isModalOpen,r=e.getPacientesData;return Object(v.jsx)(le.a,{width:800,title:a?"Editar Paciente":"Registrar Paciente",open:n,onOk:function(){t(!1)},onCancel:function(){t(!1)},destroyOnClose:!0,footer:[],children:Object(v.jsx)(bn,{paciente:a,setAdding:t,getPacientesData:r})})}var hn=t(198);function On(e){var a=Object(n.useState)(""),t=Object(U.a)(a,2),r=t[0],c=t[1],s=Object(n.useState)([]),i=Object(U.a)(s,2),o=i[0],l=i[1],d=Object(n.useState)({}),j=Object(U.a)(d,2),b=j[0],h=j[1],x=Object(n.useState)(!1),y=Object(U.a)(x,2),C=y[0],I=y[1],S=Object(n.useState)(!1),_=Object(U.a)(S,2),T=_[0],F=_[1],q=Object(n.useState)(!0),N=Object(U.a)(q,2),P=N[0],A=N[1],M=Object(n.useState)(!1),R=Object(U.a)(M,2),H=R[0],z=R[1],L=Object(n.useState)(""),V=Object(U.a)(L,2),B=V[0],G=V[1];Object(n.useEffect)((function(){Z()}),[]);var Z=function(){var a=Object(g.a)(Object(f.a)().mark((function a(){var t;return Object(f.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,k("users/hospital/".concat(e.id_hospital));case 2:t=a.sent,D("pacientes/medicos",{medicos:t.map((function(e){return e._id}))}).then((function(e){l(e),A(!1)}));case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),Y=[{title:"Rol",dataIndex:"rol",key:"rol",onFilter:function(e,a){return"Medico"===a.rol}},{title:"Avatar",dataIndex:"avatar",key:"avatar",render:function(e,a){var t=a.avatar;return t.length>9?Object(v.jsx)("img",{width:48,src:"https://api.recreamed.com/images/"+t,alt:"ProfilePic"}):Object(v.jsx)(Ke.a,{size:48,className:"btnIconCentered",icon:Object(v.jsx)(p.a,{})})}},{title:"Nombre",dataIndex:"name",key:"name"},{title:"Medicos Asignados",dataIndex:"medicos_asignados",key:"medicos_asignados",render:function(e,a){var t=a.medicos_asignados;return Object(v.jsx)("ul",{children:t.map((function(e){return Object(v.jsx)("li",{children:e.name},e._id)}))})}},{title:"Correo",dataIndex:"email",key:"email"},{title:"Telefono",dataIndex:"telefono",key:"telefono"},{title:"Acciones",key:"detalles",render:function(e,a){return Object(v.jsxs)(J.a,{size:"middle",children:[Object(v.jsx)(O.a,{onClick:function(){h(a),I(!0)},children:"Enfermero"===w.rol?"Epediente":"Detalles"}),Object(v.jsx)(ue.a,{title:"Borrar Paciente",description:"Esta seguro que quiere eliminar al paciente?",onConfirm:function(){return function(e){var a=o.filter((function(a){return a._id!==e}));E("users/remove/".concat(e)).then((function(e){l(a)}))}(a._id)},onCancel:function(e){return console.log(e)},okText:"Si",cancelText:"No",children:Object(v.jsx)(O.a,{danger:!0,children:"Eliminar"})})]})}}],W=o.filter((function(e){return e.name.toLowerCase().includes(B.toLowerCase())})),$={width:"50%",height:"50px",textAlign:"center",display:"inline-flex",justifyContent:"center",alignItems:"center"};function X(){return Object(v.jsx)("div",{children:H?Object(v.jsx)(bn,{paciente:b,setAdding:z}):Object(v.jsx)(u.a,{bordered:!1,title:Object(v.jsxs)(J.a,{children:[Object(v.jsx)("h4",{children:"Detalles del paciente "})," ",Object(v.jsx)(O.a,{type:"primary",ghost:!0,onClick:z,shape:"circle",icon:Object(v.jsx)(Ge.a,{}),title:"Editar",className:"btnIconCentered"})]}),children:["rol","name","email","telefono","calle","municipio","estado","codigopostal","alcohol","ciudad","colonia","cuales_drogas","diagnostico","drogas","edad","escolaridad","estado_civil","fuma","lugar_de_nacimiento","numexterior","numinterior","ocupacion","peso","sexo","talla"].map((function(e){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(u.a.Grid,{style:$,children:e}),Object(v.jsx)(u.a.Grid,{style:$,size:"small",children:b[e]})]})}))})})}return P?Object(v.jsx)(se,{}):Object(v.jsxs)("div",{children:[Object(v.jsxs)("h6",{children:["Pacientes de ",e.hospital]}),Object(v.jsx)(m.a,{style:{width:"20em"},placeholder:"Buscar Paciente",value:r,onChange:function(e){c(e.target.value),G(e.target.value)},addonAfter:Object(v.jsx)(hn.a,{})}),Object(v.jsx)("div",{className:"borderedTable",children:Object(v.jsx)(ba.a,{dataSource:W,columns:Y,pagination:!1,size:"small"})}),Object(v.jsx)(le.a,{width:1200,open:C,onOk:function(){I(!1)},onCancel:function(){I(!1),z(!1)},destroyOnClose:!0,children:"Enfermero"===w.rol?Object(v.jsx)(na,{paciente:b,setIsEditModalOpen:F}):Object(v.jsx)(X,{})}),Object(v.jsx)(mn,{getPacientesData:Z,isModalOpen:T,paciente:b,setIsModalOpen:F})]})}var pn=function(e){console.log(e)};function xn(){return R.forEach((function(e){e.label=e.nombre,e.key=e._id,e.children=Object(v.jsx)(On,{hospital:e.nombre,id_hospital:e._id})})),Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsx)("h4",{children:"Pacientes de los diferentes hospitaels"}),Object(v.jsx)(fe.a,{defaultActiveKey:"1",items:R,onChange:pn})]})}function fn(){var e=[{label:"Pacientes",key:"item-1",children:Object(v.jsx)(xn,{})},{label:"Registrar",key:"item-2",children:Object(v.jsx)(bn,{})}];return Object(v.jsx)("div",{children:Object(v.jsx)(fe.a,{items:e,tabPosition:"left"})})}function gn(e){var a=!e.balanceForEdit,t=Object(n.useState)([]),r=Object(U.a)(t,2),c=r[0],s=r[1],i=Object(n.useState)(!0),o=Object(U.a)(i,2),d=(o[0],o[1]),j=function(){e.setIsModalOpen(!1),e.setBalanceForEdit(null)};Object(n.useEffect)((function(){e.balanceForEdit&&e.balanceForEdit.medico&&u(e.balanceForEdit.medico)}),[e.balanceForEdit]);var u=function(e){k("mispacientes/".concat(e)).then((function(e){e&&(e.forEach((function(e){e.value=e._id,e.label=e.name})),console.log("Pacientes: ",e),s(e))})).finally((function(){d(!1)}))};return Object(v.jsx)(le.a,{title:e.balanceForEdit?"Editar Estado":"Agregar Ingreso",open:e.isModalOpen,onOk:function(){e.setIsModalOpen(!1)},onCancel:j,destroyOnClose:!0,footer:[Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",form:"edit_balance",children:"Guardar"}),Object(v.jsx)(O.a,{onClick:j,children:"Cancelar"})],children:Object(v.jsxs)(b.a,{name:"edit_balance",labelCol:{span:8},wrapperCol:{span:16},initialValues:e.balanceForEdit,onFinish:function(a){a.estado="pendiente",a.tipo=e.tipo,console.log("Ready to send:",a),console.log("For Edit: ",e.balanceForEdit),e.balanceForEdit&&0!==Object.keys(e.balanceForEdit).length?q("/balances/update/".concat(e.balanceForEdit._id),a).then((function(a){console.log(a),e.setBalanceForEdit({}),e.getIngresos(),e.setIsModalOpen(!1)})):D("balances/add",a).then((function(e){console.log(e),l.a.success(e.message||e.error)})).finally((function(){e.getIngresos(),e.setIsModalOpen(!1)}))},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[a?Object(v.jsxs)("div",{children:[" ",Object(v.jsx)(b.a.Item,{label:"Monto",name:"monto",rules:[{required:!0,message:"Ingresa el monto"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Concepto",name:"concepto",rules:[{required:!0,message:"Ingresa el concepto"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Medico",name:"medico",children:Object(v.jsx)(Z.a,{options:e.medicosData,onChange:function(e){u(e)}})}),Object(v.jsx)(b.a.Item,{label:"Paciente",name:"paciente",children:Object(v.jsx)(Z.a,{options:c})}),Object(v.jsx)(b.a.Item,{label:"Fecha y Hora",name:"fecha_hora",rules:[{required:!0,message:"Selecciona Fecha y Hora"}],children:Object(v.jsx)(oe.a,{showTime:!0,format:"DD-MM-YYYY HH:mm"})})]}):Object(v.jsx)("div",{}),Object(v.jsx)(b.a.Item,{label:"abono",name:"abono",rules:[{required:!0,message:"Ingresa el abobo"}],children:Object(v.jsx)(Be.a,{style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{label:"Forma de Pago",name:"forma_de_pago",children:Object(v.jsx)(Z.a,{options:[{value:"efectivo",label:"Efectivo"},{value:"tarjeta",label:"Tarjeta"},{value:"transferencia",label:"Transferencia"}]})})]})})}var vn=Ne.StyleSheet.create({titleContainer:{flexDirection:"row",justifyContent:"center",marginBottom:10},reportTitle:{fontSize:18,textAlign:"center",fontFamily:"Helvetica-Bold",textTransform:"uppercase"},subtitle:{fontSize:14,textAlign:"center",fontFamily:"Helvetica",marginBottom:20},text:{margin:10,fontSize:12,textAlign:"justify",fontFamily:"Helvetica"},sellerBuyerInfo:{flexDirection:"row",justifyContent:"space-between",marginBottom:10},infoTitle:{fontFamily:"Helvetica-Bold",fontSize:12},infoText:{fontFamily:"Helvetica",fontSize:12},table:{display:"table",width:"auto",marginTop:10,borderStyle:"solid",borderWidth:1,borderColor:"#bfbfbf"},tableRow:{margin:"auto",flexDirection:"row"},tableColHeader:{width:"25%",borderStyle:"solid",borderWidth:1,borderColor:"#bfbfbf",backgroundColor:"#f0f0f0",textAlign:"center",fontFamily:"Helvetica-Bold",fontSize:12,paddingTop:5,paddingBottom:5},tableCol:{width:"25%",borderStyle:"solid",borderWidth:1,borderColor:"#bfbfbf",textAlign:"center",fontFamily:"Helvetica",fontSize:10,paddingTop:5,paddingBottom:5},tableCellHeader:{margin:"auto",marginTop:5,marginBottom:5,flexDirection:"row"},total:{fontFamily:"Helvetica-Bold",fontSize:14,marginTop:30,textAlign:"right",paddingRight:50},page:{fontFamily:"Helvetica",fontSize:12,padding:40},header:{flexDirection:"row",alignItems:"center",borderBottom:"1pt solid #000",paddingBottom:10,marginBottom:10},logo:{width:80,height:"auto",marginRight:10},title:{fontSize:20,marginLeft:10},company:{fontSize:14,marginTop:5,marginLeft:10}});function yn(e){var a=e.ingreso,t=e.logo,n=e.hospital;e.seller,e.buyer;console.log("Received for print ",a),console.log("Received logo ",t);var r=a.usuario,c=(void 0===r?{}:r).name,s=a.cita,i=(void 0===s?{}:s).usuario,o=(void 0===i?{}:i).name;return Object(v.jsx)(Ne.PDFViewer,{height:500,width:550,children:Object(v.jsx)(Ne.Document,{children:Object(v.jsx)(Ne.Page,{size:"A4",style:vn.page,children:Object(v.jsxs)(Ne.View,{children:[Object(v.jsxs)(Ne.View,{style:vn.header,children:[Object(v.jsx)(Ne.Image,{style:vn.logo,src:t}),Object(v.jsxs)(Ne.View,{children:[Object(v.jsx)(Ne.Text,{style:vn.title,children:"Nota de Venta"}),Object(v.jsxs)(Ne.Text,{style:vn.company,children:[n," "]}),Object(v.jsxs)(Ne.Text,{style:vn.company,children:[new Date(a.createdAt).toLocaleString()," "]})]})]}),Object(v.jsxs)(Ne.View,{style:vn.sellerBuyerInfo,children:[Object(v.jsxs)(Ne.View,{children:[Object(v.jsx)(Ne.Text,{style:vn.infoTitle,children:"Medico:"}),Object(v.jsx)(Ne.Text,{style:vn.infoText,children:a.doctor.name})]}),Object(v.jsxs)(Ne.View,{children:[Object(v.jsx)(Ne.Text,{style:vn.infoTitle,children:"Paciente:"}),c&&Object(v.jsx)(Ne.Text,{style:vn.infoText,children:c}),o&&Object(v.jsx)(Ne.Text,{style:vn.infoText,children:o})]})]}),Object(v.jsxs)(Ne.View,{style:vn.table,children:[Object(v.jsxs)(Ne.View,{style:vn.tableRow,children:[Object(v.jsx)(Ne.Text,{style:vn.tableColHeader,children:"Concepto"}),Object(v.jsx)(Ne.Text,{style:vn.tableColHeader,children:"Cantidad"}),Object(v.jsx)(Ne.Text,{style:vn.tableColHeader,children:"Precio Unitario"}),Object(v.jsx)(Ne.Text,{style:vn.tableColHeader,children:"Subtotal"})]}),Object(v.jsxs)(Ne.View,{style:vn.tableRow,children:[Object(v.jsx)(Ne.Text,{style:vn.tableCol,children:a.concepto}),Object(v.jsx)(Ne.Text,{style:vn.tableCol,children:"1"}),Object(v.jsxs)(Ne.Text,{style:vn.tableCol,children:["$",a.monto.toFixed(2)]}),Object(v.jsxs)(Ne.Text,{style:vn.tableCol,children:["$",a.monto.toFixed(2)]})]},a.id)]}),Object(v.jsxs)(Ne.Text,{style:vn.total,children:["Total: $",a.monto]})]})})})})}var Cn=t(265),In=t.n(Cn),Sn=Me.a.Text;function _n(){var e=Object(n.useState)(!0),a=Object(U.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)({}),s=Object(U.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(null),b=Object(U.a)(l,2),m=b[0],h=(b[1],Object(n.useState)([])),p=Object(U.a)(h,2),x=p[0],y=p[1],C=Object(n.useState)({}),I=Object(U.a)(C,2),S=I[0],_=I[1],T=Object(n.useState)([]),E=Object(U.a)(T,2),F=E[0],q=E[1],N=Object(n.useState)(null),P=Object(U.a)(N,2),A=P[0],M=P[1],R=Object(n.useState)(null),z=Object(U.a)(R,2),L=z[0],V=z[1],B=Object(n.useState)(!1),G=Object(U.a)(B,2),Z=G[0],J=G[1],Y=Object(n.useState)(!1),W=Object(U.a)(Y,2),$=W[0],X=W[1],Q=function(){X(!0)},K=Object(n.useState)(!1),ee=Object(U.a)(K,2),ae=ee[0],te=ee[1],ne=Object(n.useState)(!1),re=Object(U.a)(ne,2);re[0],re[1];Object(n.useEffect)((function(){ce()}),[]);var ce=function(){var e=Object(g.a)(Object(f.a)().mark((function e(){var a,t;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D("users/getMany/hospitals",{ids_hospitales:H});case 2:(a=e.sent).forEach((function(e){e.label=e.name,e.value=e._id})),o(a),t=a.map((function(e){return k("balances/medico/".concat(e._id))})),Promise.all(t).then((function(e){var a=e.flat();console.log(a),a.forEach((function(e){e.doctor=e.medico,e.medico=e.medico._id,e.paciente&&(e.usuario=e.paciente,e.paciente=e.paciente._id)})),y(a.sort((function(e,a){return e.fecha_hora<a.fecha_hora}))),r(!1)})).catch((function(e){console.error(e)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=[{title:"M\xe9dico",dataIndex:"medico",key:"createdAt",render:function(e,a){var t=a.doctor;return Object(v.jsx)(v.Fragment,{children:t.name})}},{title:"Tipo",dataIndex:"tipo",key:"tipo",render:function(e,a){var t=a.tipo,n=t&&"ingreso"===t?"geekblue":"volcano";return t?Object(v.jsx)(La.a,{color:n,children:t.toUpperCase()}):Object(v.jsx)(La.a,{color:n,children:"Indefinido"})}},{title:"Fecha",dataIndex:"fecha_hora",key:"fecha_hora",render:function(e,a){var t=a.fecha_hora;return Object(v.jsx)(v.Fragment,{children:new Date(t).toLocaleString()})},defaultSortOrder:"descend",sorter:function(e,a){return e.fecha_hora>a.fecha_hora}},{title:"Monto",dataIndex:"monto",key:"monto",render:function(e,a){var t=a.monto;return Object(v.jsxs)(v.Fragment,{children:["$",t]})}},{title:"Abono",dataIndex:"abono",key:"abono",render:function(e,a){var t=a.abono;return t&&Object(v.jsxs)(v.Fragment,{children:["$",t]})}},{title:"Adeudo",dataIndex:"adeudo",key:"adeudo",render:function(e,a){return Object(v.jsxs)(v.Fragment,{children:["$",a.monto-a.abono]})}},{title:"Forma de pago",key:"forma_de_pago",dataIndex:"forma_de_pago",render:function(e,a){var t=a.forma_de_pago,n="efectivo"===t?"green":"geekblue";return Object(v.jsx)(La.a,{color:n,children:t.toUpperCase()})}},{title:"Paciente",key:"usuario",dataIndex:"usuario",render:function(e,a){return a.cita?Object(v.jsx)(v.Fragment,{children:a.cita.usuario.name}):a.usuario?Object(v.jsx)(v.Fragment,{children:a.usuario.name}):Object(v.jsx)(Sn,{type:"secondary",children:" Sin Paciente"})}},{title:"Factura",key:"Factura",dataIndex:"factura",render:function(e,a){return a.factura&&Object(v.jsx)(ut.a,{})}},{title:"Estado",key:"Estado",dataIndex:"estado",render:function(e,a){var t=a.abono===a.monto,n=t?"green":"volcano";return Object(v.jsxs)(La.a,{color:n,children:[" ",t?"PAGADO":"PENDIENTE"," "]})}},{title:"Acciones",key:"Editar",render:function(e,a){return Object(v.jsxs)("div",{style:{display:"flex",gap:2,flexDirection:"column"},children:[Object(v.jsx)(O.a,{size:"small",onClick:function(){return function(e){e.fecha_hora=In.a.utc(e.fecha_hora),_(e),Q()}(a)},children:"Editar Estado"}),Object(v.jsx)(O.a,{size:"small",onClick:function(){q(a),te(!0)},children:"Imprimir Nota"})]})}}];return t?Object(v.jsx)(se,{}):Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsx)("h4",{children:"Ingresos de todos los medicos"}),Object(v.jsx)("br",{}),Object(v.jsx)(O.a,{onClick:Q,type:"primary",style:{marginBottom:22},children:"Agregar Nuevo Ingreso"}),Object(v.jsx)(ba.a,{columns:ie,dataSource:x}),Object(v.jsx)("div",{style:{height:200}}),Object(v.jsx)(gn,{tipo:"ingreso",balanceForEdit:S,setBalanceForEdit:_,setIsModalOpen:X,isModalOpen:$,getIngresos:ce,medico:m,medicosData:i}),Object(v.jsx)(le.a,{title:"Imprimir Nota de Venta",open:ae,onOk:function(){te(!1),J(!1)},onCancel:function(){te(!1),J(!1)},width:600,children:Z?Object(v.jsx)(yn,{ingreso:F,logo:"https://api.recreamed.com/images/"+A,hospital:L,seller:"M\xe9dico: ",buyer:"Paciente: "}):Object(v.jsx)("div",{children:Object(v.jsx)(u.a,{title:"Selecciona un hospital",bordered:!1,children:w.horarios.map((function(e){return Object(v.jsx)(u.a.Grid,{style:{width:"100%"},onClick:function(){console.log(e.sucursal),M(e.sucursal.logo),V(e.sucursal.nombre),J(!0)},children:Object(v.jsxs)(d.a,{align:"middle",children:[Object(v.jsx)(j.a,{span:6,offset:4,children:Object(v.jsx)("img",{width:64,src:"https://api.recreamed.com/images/"+e.sucursal.logo,alt:"Logo"})}),Object(v.jsxs)(j.a,{span:10,children:[e.sucursal.nombre," ",Object(v.jsx)("br",{})," ",e.horario]})]})},e._id)}))})})})]})}var wn=t(219),kn=t(777);Z.a.Option;function Tn(e){var a=Object(n.useState)(null),t=Object(U.a)(a,2),r=t[0],c=t[1],s=Object(n.useState)(!0),i=Object(U.a)(s,2),o=i[0],d=i[1],j=Object(n.useState)({}),u=Object(U.a)(j,2),m=u[0],h=u[1],p=Object(n.useState)({}),x=Object(U.a)(p,2),f=x[0],g=x[1];Object(n.useEffect)((function(){y()}),[]);var y=function(){k("getuser/"+e.idpaciente).then((function(e){h(e)})),k("getuser/"+e.idmedico).then((function(e){g(e)})),k("encuestas/uuid/".concat(e.token)).then((function(e){console.log(e),c("The survey does not exist"===e.message)})).then((function(){d(!1),console.log("Not exists: ",r)}))},C={0:"0",10:"10"};return o?Object(v.jsx)("div",{style:{paddingTop:180},children:Object(v.jsx)("div",{style:{margin:"auto",width:"40%",textAlign:"center"},children:Object(v.jsx)("h3",{children:"Cargando"})})}):r?Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsx)("h4",{children:"Lista de verificaci\xf3n para Efectos Secundarios de Ketamina"}),Object(v.jsx)("br",{}),Object(v.jsxs)("h5",{children:["Medico: ",f.name]}),Object(v.jsxs)("h5",{children:["Paciente: ",m.name]}),Object(v.jsx)("br",{}),Object(v.jsxs)(b.a,{layout:"vertical",name:"efectos_form",initialValues:Object(B.a)(Object(B.a)({},Va),{},{ketamina:0,ketaminaiv:0,ketaminaivb:0}),onFinish:function(a){Object.keys(a).forEach((function(e){var t=e.replace(/ /g,"_");a[t]=a[e],e.includes(" ")&&delete a[e]}));var t={usuario:e.idpaciente,medico:e.idmedico,respuestas_ketamina:a,tipo:"ketamina",uuid:e.token};console.log("Efectos Form:",a),D("encuestas/add",t).then((function(e){console.log(e),l.a.success(e.message)})).then((function(){return y()}))},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[Object.keys(Va).map((function(e,a){return Object(v.jsx)(b.a.Item,{label:e,name:e,rules:[{required:!1,message:"Selecciona una respuesta"}],children:Object(v.jsx)(ie.a,{checkedChildren:"Si",unCheckedChildren:"No",defaultChecked:!1})})})),Object(v.jsx)("h4",{children:"Escala de 6 elementos simplificada de s\xedntomas disociativos administrada por el m\xe9dico  (CADSS)"}),Object(v.jsx)("h5",{children:"Desrealizacion"}),Object.keys(Ba).map((function(e,a){return Object(v.jsx)(b.a.Item,{label:e,name:"desrealizacion_"+a,rules:[{required:!0,message:"Selecciona una respuesta"}],children:Object(v.jsx)(wn.a.Group,{children:Object(v.jsx)(J.a,{direction:"vertical",children:Ba[e].map((function(e,a){return Object(v.jsx)(wn.a,{value:a,children:e})}))})})})})),Object(v.jsx)("h5",{children:"Despersonalizacion"}),Object.keys(Ga).map((function(e,a){return Object(v.jsx)(b.a.Item,{label:e,name:"despersonalizacion_"+a,rules:[{required:!0,message:"Selecciona una respuesta"}],children:Object(v.jsx)(wn.a.Group,{children:Object(v.jsx)(J.a,{direction:"vertical",children:Ga[e].map((function(e,a){return Object(v.jsx)(wn.a,{value:a,children:e})}))})})})})),Object(v.jsx)("h5",{children:"Amnesia"}),Object.keys(Ua).map((function(e,a){return Object(v.jsx)(b.a.Item,{label:e,name:"amnesia_"+a,rules:[{required:!0,message:"Selecciona una respuesta"}],children:Object(v.jsx)(wn.a.Group,{children:Object(v.jsx)(J.a,{direction:"vertical",children:Ua[e].map((function(e,a){return Object(v.jsx)(wn.a,{value:a,children:e})}))})})})})),Object(v.jsx)(b.a.Item,{label:"a)\tEn general mi gusto por la ketamina IV es:",name:"ketamina",children:Object(v.jsx)(kn.a,{min:0,max:10,marks:C,dots:!0,defaultValue:0})}),Object(v.jsx)(b.a.Item,{label:"a.)\tEn general, cu\xe1nto anhela, apetece el tratamiento de la ketamina IV para otros efectos adem\xe1s de los efectos antidepresivos? ",name:"ketaminaiv",children:Object(v.jsx)(kn.a,{min:0,max:10,marks:C,dots:!0,defaultValue:"0"})}),Object(v.jsx)(b.a.Item,{label:"b.)\tCu\xe1nto desea usar la ketamina IV en cantidades mayores con m\xe1s frecuencia de lo que su psiquiatra le esta prescribiendo por razones distintas a esperar m\xe1s efecto antidepresivo?  ",name:"ketaminaivb",children:Object(v.jsx)(kn.a,{min:0,max:10,marks:C,dots:!0})}),Object(v.jsx)(b.a.Item,{wrapperCol:{offset:8,span:16},children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Guardar"})})]})]}):Object(v.jsx)("div",{style:{paddingTop:180},children:Object(v.jsxs)("div",{style:{margin:"auto",width:"40%",textAlign:"center"},children:[Object(v.jsx)("h3",{children:"Gracias por contestar la encuesta"}),Object(v.jsx)("img",{width:256,src:L,alt:"recreamedLogo",style:{margin:"auto"}})]})})}var En=[{n:1,pregunta:"Conciliar el sue\xf1o",respuestas:["Nunca tard\xe9 m\xe1s de 30 minutos en dormirme.","Tard\xe9 por lo menos 30 minutos en dormirme, menos de la mitad de las veces.","Tard\xe9 por lo menos 30 minutos en dormirme, m\xe1s de la mitad de las veces.","Tard\xe9 m\xe1s de 60 minutos en dormirme, m\xe1s de la mitad de la veces"]},{n:2,pregunta:"Al dormir durante la noche",respuestas:["No me despert\xe9 durante la noche.","Tuve el sue\xf1o liviano e intranquilo; me despert\xe9 unas cuantas veces todas las noches por corto tiempo.","Me despert\xe9 al menos una vez cada noche, pero volv\xed a dormirme f\xe1cilmente.","Me despert\xe9 m\xe1s de una vez cada noche y me qued\xe9 despierto/a durante 20 minutos o m\xe1s, m\xe1s de la mitad de las veces"]},{n:3,pregunta:" Despertarse demasiado temprano",respuestas:["La mayor\xeda de las veces me despert\xe9 no m\xe1s de 30 minutos antes de lo necesario.","M\xe1s de la mitad de las veces me despert\xe9 m\xe1s de 30 minutos antes de lo necesario.","Casi siempre me despert\xe9 por lo menos una hora antes de lo necesario, pero finalmente me dorm\xed nuevamente","Me despert\xe9 por lo menos una hora antes de lo necesario y no pude volver a dormirme"]},{n:4,pregunta:" Dormir demasiado",respuestas:["Dorm\xed no m\xe1s de 7-8 horas por noche, sin haber dormido la siesta durante el d\xeda.","Dorm\xed no m\xe1s de 10 horas en un per\xedodo de 24 horas, incluyendo las siestas.","Dorm\xed no m\xe1s de 12 horas en un per\xedodo de 24 horas, incluyendo las siestas.","Dorm\xed m\xe1s de 12 horas en un per\xedodo de 24 horas, incluyendo las siestas."]},{n:5,pregunta:"Sensaci\xf3n de tristeza",respuestas:["No me sent\xed triste.","Me sent\xed triste menos de la mitad de las veces.","Me sent\xed triste m\xe1s de la mitad de las veces.","Me sent\xed triste casi todo el tiempo."]}],Fn=["Mi apetito no disminuy\xf3.","Com\xed con considerable menor frecuencia o menor cantidad de comida de lo habitual.","Com\xed mucho menos de lo habitual y s\xf3lo haciendo un esfuerzo.","Casi no com\xed dentro de un per\xedodo de 24 horas, y s\xf3lo haciendo un tremendo esfuerzo o cuando los dem\xe1s me convencieron de comer"],qn=["Mi apetito no aument\xf3.","Sent\xed la necesidad de comer con m\xe1s frecuencia de lo habitual.","A menudo com\xed con m\xe1s frecuencia y/o m\xe1s cantidad de comida de lo habitual.","Me sent\xed impulsado/a a comer de m\xe1s, tanto en las comidas como entre las comidas."],Nn=["No he perdido peso.","Siento que tuve una leve p\xe9rdida de peso.","He perdido 1 kg o m\xe1s.","He perdido 2 kg o m\xe1s."],Dn=["No he aumentado de peso.","Siento que tuve un leve aumento de peso.","He aumentado 1 kg o m\xe1s.","He aumentado 2 kg o m\xe1s."],Pn=[{n:10,pregunta:"Concentraci\xf3n/Toma de decisiones",respuestas:["No hubo cambio en mi capacidad habitual para concentrarme o tomar decisiones.","A veces me sent\xed indeciso/a o me di cuenta de que me distra\xeda.","La mayor parte del tiempo tuve que esforzarme para mantener la atenci\xf3n o para tomar decisiones.","No me pude concentrar suficientemente bien para leer ni tampoco pude tomar decisiones sin importancia"]},{n:11,pregunta:"Percepci\xf3n de m\xed mismo/a",respuestas:["Me consider\xe9 que valgo tanto y que tengo los mismos derechos que las dem\xe1s personas.","Me sent\xed m\xe1s culpable de lo habitual.","En gran medida, cre\xed que le caus\xe9 problemas a otras personas.","Pens\xe9 casi constantemente en mis defectos, tanto en los importantes como en los triviales."]},{n:12,pregunta:"Pensamientos de muerte o suicidio",respuestas:["No pens\xe9 en el suicidio o la muerte.","Sent\xed que mi vida estaba vac\xeda y me pregunt\xe9 si val\xeda la pena vivir.","Pens\xe9 en el suicidio o la muerte varias veces en la semana durante varios minutos.","Pens\xe9 en el suicidio o la muerte varias veces al d\xeda con cierto detalle, o hice planes de c\xf3mo suicidarme, o realmente intent\xe9 quitarme la vida."]},{n:13,pregunta:"Inter\xe9s general",respuestas:["No hubo cambio de lo habitual en cuanto a mi inter\xe9s en otras personas o actividades.","Not\xe9 que estaba menos interesado / a en la gente o en las actividades.","Me di cuenta que s\xf3lo me interesaban una o dos de las actividades que sol\xeda hacer.","No tuve pr\xe1cticamente ning\xfan inter\xe9s en las actividades que sol\xeda hacer."]},{n:14,pregunta:"Nivel de energ\xeda",respuestas:["No hubo cambio en mi nivel de energ\xeda habitual.","Me cans\xe9 m\xe1s f\xe1cilmente de lo habitual.","Tuve que hacer un gran esfuerzo para empezar o terminar mis actividades diarias habituales(porejemplo: hacer las compras, estudiar, cocinar o ir a trabajar).","Realmente, no pude realizar la mayor\xeda de mis actividades diarias habituales porque simplementeno tuve energ\xedas."]},{n:15,pregunta:" Sensaci\xf3n de estar m\xe1s lento/a",respuestas:["Pens\xe9, habl\xe9 y me mov\xed a mi nivel de velocidad habitual.","Me di cuenta de que mi pensamiento estaba m\xe1s lento de lo habitual o que mi voz sonabamon\xf3tona y achatada.","Tard\xe9 varios segundos para responder la mayor\xeda de las preguntas y estoy seguro / a de que mipensamiento estaba m\xe1s lento de lo habitual.","Con frecuencia no pude responder preguntas si no era haciendo un extremo esfuerzo."]},{n:16,pregunta:" Sensaci\xf3n de inquietud",respuestas:["No me sent\xed inquieto/a.","Con frecuencia me sent\xed intranquilo/a, me apretaba las manos o necesitaba cambiar la posici\xf3n enla que estaba sentado/a.","Tuve impulsos de estar en movimiento y me sent\xed bastante inquieto/a.","Por momentos, me result\xf3 imposible quedarme sentado/a y comenc\xe9 a dar vueltas."]}],An=t(787);function Mn(e){var a=Object(n.useState)(!1),t=Object(U.a)(a,2),r=t[0],c=t[1],s=Object(n.useState)(!1),i=Object(U.a)(s,2),o=i[0],u=i[1],m=Object(n.useState)(null),h=Object(U.a)(m,2),p=h[0],x=h[1],f=Object(n.useState)(!0),g=Object(U.a)(f,2),y=g[0],C=g[1],I=Object(n.useState)({}),S=Object(U.a)(I,2),_=S[0],w=S[1],T=Object(n.useState)({}),E=Object(U.a)(T,2),F=E[0],q=E[1];Object(n.useEffect)((function(){N()}),[]);var N=function(){k("getuser/"+e.idpaciente).then((function(e){w(e)})),k("getuser/"+e.idmedico).then((function(e){q(e)})),k("encuestas/uuid/".concat(e.token)).then((function(e){console.log(e),x("The survey does not exist"===e.message)})).then((function(){C(!1),console.log("Not exists: ",p)}))};return y?Object(v.jsx)("div",{style:{paddingTop:180},children:Object(v.jsx)("div",{style:{margin:"auto",width:"40%",textAlign:"center"},children:Object(v.jsx)("h3",{children:"Cargando"})})}):p?Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsx)("h4",{children:"Encuesta de sintomatologia depresiva QUIDS (QUICK INVENTORY OF DEPRESSIVE SYMPTOMATOLOGY)"}),Object(v.jsx)("br",{}),Object(v.jsxs)("h5",{children:["Medico: ",F.name]}),Object(v.jsxs)("h5",{children:["Paciente: ",_.name]}),Object(v.jsx)("br",{}),Object(v.jsxs)(b.a,{name:"basic",layout:"vertical",initialValues:{remember:!0},onFinish:function(a){var t=0,n=0,r=0;console.log("Sintomatologia:",a);for(var c=1;c<5;c++)a[c]>n&&(n=a[c]);for(c=6;c<10;c++)a[c]>r&&(r=a[c]);for(c=10;c<15;c++)t+=a[c];a[15]>a[16]?t+=a[15]:t+=a[16],t=t+n+a[5]+r,console.log("score: ",t);var s={usuario:e.idpaciente,medico:e.idmedico,score:t,tipo:"depresion",uuid:e.token};console.log("Efectos body:",s),D("encuestas/add",s).then((function(e){console.log(e),l.a.success(e.message)})).then((function(){return N()}))},onFinishFailed:function(e){console.log("Failed:",e),e.errorFields.map((function(e){l.a.error("Conteste la pregunta "+e.name)}))},autoComplete:"off",children:[En.map((function(e){return Object(v.jsx)(b.a.Item,{label:e.n+". "+e.pregunta,name:e.n,rules:[{required:!0,message:"Selecciona una opcion"}],children:Object(v.jsx)(wn.a.Group,{children:Object(v.jsx)(J.a,{direction:"vertical",children:e.respuestas.map((function(e,a){return Object(v.jsxs)(wn.a,{value:a,children:[" ",e," "]})}))})})})})),Object(v.jsxs)(An.a,{children:[Object(v.jsxs)(b.a.Item,{children:["Disminucion apetito ",Object(v.jsx)(ie.a,{onChange:function(){return u(!o)}})," Aumento Apetito"]}),Object(v.jsxs)(d.a,{children:[Object(v.jsx)(j.a,{md:10,children:Object(v.jsx)(b.a.Item,{label:"Disminucion Apetito",name:"6",rules:[{required:!o,message:"Selecciona una opcion"}],children:Object(v.jsx)(wn.a.Group,{disabled:o,children:Object(v.jsx)(J.a,{direction:"vertical",children:Fn.map((function(e,a){return Object(v.jsxs)(wn.a,{value:a,children:[" ",e," "]})}))})})})}),Object(v.jsx)(j.a,{children:Object(v.jsx)(b.a.Item,{label:"Aumento Apetito",name:"6",rules:[{required:o,message:"Selecciona una opcion"}],children:Object(v.jsx)(wn.a.Group,{disabled:!o,children:Object(v.jsx)(J.a,{direction:"vertical",children:qn.map((function(e,a){return Object(v.jsxs)(wn.a,{value:a,children:[" ",e," "]})}))})})})})]})]}),Object(v.jsxs)(An.a,{children:[Object(v.jsxs)(b.a.Item,{children:["Disminucion de Peso ",Object(v.jsx)(ie.a,{onChange:function(){return c(!r)}})," Aumento de Peso"]}),Object(v.jsxs)(d.a,{children:[Object(v.jsx)(j.a,{md:10,children:Object(v.jsx)(b.a.Item,{label:"Perdida de Peso",name:"8",rules:[{required:!r,message:"Selecciona una opcion"}],children:Object(v.jsx)(wn.a.Group,{disabled:r,children:Object(v.jsx)(J.a,{direction:"vertical",children:Nn.map((function(e,a){return Object(v.jsxs)(wn.a,{value:a,children:[" ",e," "]})}))})})})}),Object(v.jsx)(j.a,{children:Object(v.jsx)(b.a.Item,{label:"Aumento Peso",name:"8",rules:[{required:r,message:"Selecciona una opcion"}],children:Object(v.jsx)(wn.a.Group,{disabled:!r,children:Object(v.jsx)(J.a,{direction:"vertical",children:Dn.map((function(e,a){return Object(v.jsxs)(wn.a,{value:a,children:[" ",e," "]})}))})})})})]})]}),Object(v.jsx)("br",{}),Pn.map((function(e){return Object(v.jsx)(b.a.Item,{label:e.n+". "+e.pregunta,name:e.n,rules:[{required:!0,message:"Selecciona una opcion"}],children:Object(v.jsx)(wn.a.Group,{children:Object(v.jsx)(J.a,{direction:"vertical",children:e.respuestas.map((function(e,a){return Object(v.jsxs)(wn.a,{value:a,children:[" ",e," "]})}))})})})})),Object(v.jsx)(b.a.Item,{wrapperCol:{offset:8,span:16},children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Guardar"})})]})]}):Object(v.jsx)("div",{style:{paddingTop:180},children:Object(v.jsxs)("div",{style:{margin:"auto",width:"40%",textAlign:"center"},children:[Object(v.jsx)("h3",{children:"Gracias por contestar la encuesta"}),Object(v.jsx)("img",{width:256,src:L,alt:"recreamedLogo",style:{margin:"auto"}})]})})}var Rn=[{n:1,pregunta:". Humor deprimido (tristeza, depresi\xf3n, desamparo, inutilidad)",respuestas:["0. Ausente","1. Estas sensaciones se indican solamente al ser preguntado","2. Estas sensaciones se relatan oral y espont\xe1neamente","3. Sensaciones no comunicadas verbalmente, es decir, por la expresi\xf3n facial,la postura, la voz y la tendencia al llanto.","4. El paciente manifiesta estas sensaciones en su comunicaci\xf3n verbal y no verbal de forma espont\xe1nea"]},{n:2,pregunta:"2. Sensaci\xf3n de culpabilidad",respuestas:["0. Ausente","1. Se culpa a s\xed mismo, cree haber decepcionado a la gente","2. Ideas de culpabilidad, o meditaci\xf3n sobre errores pasados o malas acciones","3. La enfermedad actual es un castigo. Ideas delirantes de culpabilidad","4. Oye voces acusatorias o de denuncia y/o experimenta alucinaciones visuales amenazadoras"]},{n:3,pregunta:"3. Suicidio",respuestas:["0. Ausente","1. Le parece que la vida no merece la pena ser vivida","2. Desear\xeda estar muerto o tiene pensamientos sobre la posibilidad de morirse","3. Ideas de suicidio o amenazas","4. Intentos de suicidio(cualquier intento serio se califica 4)"]},{n:4,pregunta:" 4. Insomnio precoz",respuestas:["0. Ausente","1. Dificultades ocasionales para dormirse, por ejemplo, m\xe1s de media hora","2. Dificultades para dormirse cada noche"]},{n:5,pregunta:"5. Insomnio medio",respuestas:["0. Ausente","1. El paciente se queja de estar inquieto durante la noche","2. Est\xe1 despierto durante la noche; cualquier ocasi\xf3n de levantarse de la cama se califica 2(excepto si est\xe1 justificada: orinar, tomar o dar medicaci\xf3n, etc.)"]},{n:6,pregunta:"6. Insomnio tard\xedo ",respuestas:["0. Ausente","1. Se despierta a primeras horas de la madrugada pero vuelve a dormirse","2. No puede volver a dormirse si se levanta de la cama"]},{n:7,pregunta:"7. Trabajo y actividades",respuestas:["0. Ausente","1. Ideas y sentimientos de incapacidad.Fatiga o debilidad relacionadas con su actividad, trabajo o aficiones","2. P\xe9rdida de inter\xe9s en su actividad, aficiones, o trabajo, manifestado directamente por el enfermo o indirectamente por desatenci\xf3n, indecisi\xf3n y vacilaci\xf3n","3. Disminuci\xf3n del tiempo dedicado a actividades o descenso en la productividad","4. Dej\xf3 de trabajar por la presente enfermedad"]},{n:8,pregunta:" 8. Inhibici\xf3n(lentitud de pensamiento y de palabra, empeoramiento de la concentraci\xf3n, actividad motora disminuida)",respuestas:["0. Palabra y pensamiento normales","1. Ligero retraso en el di\xe1logo","2. Evidente retraso en el di\xe1logo","3. Di\xe1logo dif\xedcil","4. Torpeza absoluta"]},{n:9,pregunta:" 9. Agitaci\xf3n",respuestas:["0. Ninguna","1. \u201cJuega\u201d con sus manos, cabello, etc.","2. Se retuerce las manos, se muerde las u\xf1as, los labios, se tira de los cabellos, etc."]},{n:10,pregunta:"10. Ansiedad ps\xedquica",respuestas:["0. No hay dificultad","1. Tensi\xf3n subjetiva e irritabilidad","2. Preocupaci\xf3n por peque\xf1as cosas","3. Actitud aprensiva aparente en la expresi\xf3n o en el habla","4. Terrores expresados sin preguntarle"]},{n:11,pregunta:"11. Ansiedad som\xe1tica",respuestas:["0. Ausente","1. Ligera","2. Moderada","3. Grave","4. Incapacitante\nSignos fisiol\xf3gicos concomitantes de la ansiedad como: \n -Gastrointestinales: boca seca, flatulencia, diarrea, eructos, retortijones\n- Cardiovasculares: palpitaciones, cefalalgias\n- Respiratorios: hiperventilaci\xf3n, suspiros\n- Frecuencia urinaria\n- Sudoraci\xf3n"]},{n:12,pregunta:"12. S\xedntomas som\xe1ticos gastrointestinales",respuestas:["0. Ninguno","1. P\xe9rdida del apetito, pero come sin necesidad de que lo estimulen. Sensaci\xf3n de pesadez en el abdomen","2. Dificultad en comer si no se le insiste.Solicita o necesita laxantes o medicaci\xf3n intestinal para sus s\xedntomas gastrointestinales."]},{n:13,pregunta:"13. S\xedntomas som\xe1ticos generales",respuestas:["0. Ninguno","1. Pesadez en las extremidades, espalda o cabeza.Dorsalgias, cefalalgias, algias musculares.P\xe9rdida de energ\xeda y fatigabilidad.","2. Cualquier s\xedntoma bien definido se califica 2"]},{n:14,pregunta:"14. S\xedntomas genitales ",respuestas:["0. Ausente","1. D\xe9bil","2. Grave","3. Incapacitante\nS\xedntomas como\n- P\xe9rdida de la libido\n- Trastornos menstruales"]},{n:15,pregunta:"15. Hipocondr\xeda",respuestas:["0. No la hay","1. Preocupado de s\xed mismo(corporalmente)","2. Preocupado por su salud","3. Se lamenta constantemente, solicita ayudas, etc.","4. Ideas delirantes hipocondr\xedacas"]},{n:16,pregunta:"16. P\xe9rdida de peso, seg\xfan manifestaciones del paciente (primera evaluaci\xf3n)",respuestas:["0. No hay p\xe9rdida de peso","1. Probable p\xe9rdida de peso asociada con la enfermedad actual","2. P\xe9rdida de peso definida(seg\xfan el enfermo)"]},{n:"B16",pregunta:"16 B. P\xe9rdida de peso, seg\xfan pesaje hecho por el psiquiatra(evaluaciones siguientes)",respuestas:["0. P\xe9rdida de peso inferior a 500 g en una semana","1. P\xe9rdida de peso de m\xe1s de 500 g en una semana","2. P\xe9rdida de peso de m\xe1s de 1 kg en una semana(por t\xe9rmino medio)"]},{n:17,pregunta:"17. Insight(conciencia de enfermedad)",respuestas:["0. Se da cuenta de que est\xe1 deprimido y enfermo","1. Se da cuenta de su enfermedad pero atribuye la causa a la mala alimentaci\xf3n, clima, exceso de trabajo, virus, etc.","2. Niega que est\xe9 enfermo"]}],Hn=[{n:1,pregunta:"1. Tristeza observada",descripcion:"Representa el abatimiento, la melancol\xeda y la desesperaci\xf3n (algo m\xe1s que una simple tristeza normal y pasajera) que se refleja en la manera de hablar, la expresi\xf3n facial y la postura. Eval\xfae el grado de incapacidad para animarse.",respuestas:["0. Sin tristeza","1.","2. Parece deca\xeddo/a pero se anima sin dificultad","3.","4. Parece triste y desgraciado/a la mayor parte del tiempo","5.","6. Parece siempre desgraciado/a. Extremadamente abatido/a"]},{n:2,pregunta:"2. Tristeza declarada por el paciente",descripcion:"Representa un estado de \xe1nimo depresivoque se siente, sin tener en cuenta si se refleja en la apariencia o no.Incluye tristeza,abatimiento o el sentimiento de que no hayesperanza y nada ni nadie puede ayudarle.Eval\xfae de acuerdo con la intensidad, la duraci\xf3n y la medida en que el estado de \xe1nimo se ve influido por los acontecimientos.",respuestas:["0. Tristeza espor\xe1dica seg\xfan las circunstancias","1.","2. Triste o deca\xeddo / a, pero se anima sin dificultad","3.","4. Sentimientos generalizados de tristeza o melancol\xeda.El estado","de \xe1nimo todav\xeda se ve influido por circunstancias externas","5.","6. Abatimiento, desdicha o tristeza continuada o invariable"]},{n:3,pregunta:"3. Tensi\xf3n interna",descripcion:"Representa sentimientos de malestar mal definido, irritabilidad, confusi\xf3n interna y tensi\xf3n mental hasta llegar al p\xe1nico, terror o angustia.Eval\xfae de acuerdo con la intensidad, frecuencia, duraci\xf3n y la medida en que se busca consuelo.",respuestas:["0. Apacible.S\xf3lo tensi\xf3n interna pasajera","1.","2. Sentimientos ocasionales de nerviosismo y malestar indefinido","3.","4. Sentimientos continuados de tensi\xf3n interna o p\xe1nico intermitente que el sujeto s\xf3lo puede dominar con alguna dificultad","5.","6. Terror o angustia tenaz.P\xe1nico irresistible"]},{n:4,pregunta:"4. Sue\xf1o reducido",descripcion:"Representa la reducci\xf3n de la duraci\xf3n o profundidad del sue\xf1o comparada con las pautas normales del sujeto cuando se encuentra bien.",respuestas:["0. Duerme como siempre","1.","2. Ligera dificultad para dormirse o sue\xf1o ligeramente reducido, sue\xf1o ligero o perturbado","3.","4. Sue\xf1o reducido o interrumpido durante al menos 2 h","5.","6. Menos de 2 o 3 h de sue\xf1o"]},{n:5,pregunta:"5. Apetito reducido",descripcion:"Representa la sensaci\xf3n de p\xe9rdida de apetito comparada con el que tiene cuando se encuentra bien.Eval\xfae seg\xfan la p\xe9rdida del deseo por la comida o la necesidad de forzarse a s\xed mismo/a para comer.",respuestas:["0. Apetito normal o aumentado","1.","2. Apetito ligeramente reducido","3.","4. Sin apetito.La comida es ins\xedpida","5.","6. Necesita persuasi\xf3n para comer algo "]},{n:6,pregunta:"6. Dificultades para concentrarse",descripcion:"Representa las dificultades para centrar los pensamientos en algo hasta llegar a la falta de concentraci\xf3n incapacitante.Eval\xfae seg\xfan la intensidad, frecuencia y grado de incapacidad resultante.",respuestas:["0. Ninguna dificultad para concentrarse","1.","2. Dificultades ocasionales para centrar los pensamientos","3.","4. Dificultades para concentrarse y seguir una idea que reduce la","capacidad de leer o mantener una conversaci\xf3n","5.","6. Incapaz de leer o mantener una conversaci\xf3n si no es con gran dificultad"]},{n:7,pregunta:"7. Lasitud",descripcion:"Representa la dificultad para empezar algo o la lentitud para iniciar y realizar las actividades diarias.",respuestas:["0. Casi sin dificultad para empezar algo.Sin apat\xeda","1.","2. Dificultades para empezar actividades","3.","4. Dificultades para empezar actividades rutinarias sencillas que","se llevan a cabo con esfuerzo","5.","6. Lasitud total.Incapaz de hacer nada sin ayuda"]},{n:8,pregunta:"8. Incapacidad para sentir",descripcion:"Representa la experiencia subjetiva de un menor inter\xe9s por el entorno o por actividades que habitualmente dan placer.La capacidad para reaccionar con la emoci\xf3n adecuada a las circunstancias o personas se ve reducida.",respuestas:["0. Inter\xe9s normal por el entorno y por otras personas","1.","2. Menor capacidad para disfrutar de las cosas que normalmente le interesan","3.","4. P\xe9rdida de inter\xe9s por el entorno.P\xe9rdida de sentimientos","respecto a los amigos y conocidos","5.","6. La experiencia de estar emocionalmente paralizado, incapacidad para sentir enfado, pena o placer y una total o incluso dolorosa falta de sentimientos hacia los parientes pr\xf3ximos y amigos"]},{n:9,pregunta:"9. Pensamientos pesimistas",descripcion:"Representa los pensamientos de culpabilidad, inferioridad, autorreproche, pecado, remordimiento y ruina.",respuestas:["0. Sin pensamientos pesimistas","1.","2. Ideas variables de fracaso, autorreproche o autodesprecio","3.","4. Autoacusaciones persistentes o ideas definidas, pero a\xfan","racionales, de culpabilidad o pecado.Cada vez m\xe1s pesimista","respecto al futuro","5.","6. Alucinaciones de ruina, remordimiento o pecado irredimible. Autoacusaciones que son absurdas e inquebrantables"]},{n:10,pregunta:"10. Pensamientos suicidas",descripcion:"Representa el sentimiento de que no vale la pena vivir, que desear\xeda que le llegara una muerte natural, pensamientos suicidas y preparativos para el suicidio.Los intentos de suicidio en s\xed no deber\xedan influir en la evaluaci\xf3n.",respuestas:["0. Disfruta de la vida o la acepta tal como viene","1.","2. Cansado de vivir.S\xf3lo pensamientos suicidas pasajeros","3.","4. Probablemente estar\xeda mejor muerto / a.Los pensamientos","suicidas son habituales, y se considera el suicidio como una posible soluci\xf3n, pero sin ninguna intenci\xf3n o plan espec\xedfico","5.","6. Planes expl\xedcitos de suicidio cuando se presente una oportunidad.Preparativos activos para el suicidio"]}],zn=["Tener poco inter\xe9s o disfrutar poco haciendo las cosas","Sentirse desanimado/a, deprimido/a o sin esperanza","Tener problemas para dormir o para mantenerse dormido, o dormir demasiado","Sentirse cansado/a o tener poca energ\xeda","Tener poco apetito o comer en exceso","Sentirse mal consigo mismo/a-o sentirse fracasado/a, o pensar que se ha decepcionado a s\xed mismo o a los que le rodean","Tener dificultades para concentrarse en cosas tales como leer el peri\xf3dico o ver la televisi\xf3n","Moverse o hablar tan lentamente que los dem\xe1s lo han notado. O bien al contrario, estar tan agitado/a o inquieto/a que se mueve mucho m\xe1s de lo habitual","Tener pensamientos sobre estar muerto/a o sobre hacerse da\xf1o a s\xed mismo de alguna manera"],Ln="Si usted se identific\xf3 con cualquier problema en este cuestionario, \xbfle ha sido dif\xedcil cumplir con su trabajo, atender su casa, o relacionarse con otras personas debido a estos problemas?";Z.a.Option;function Vn(e){var a=Object(n.useState)(!1),t=Object(U.a)(a,2),r=(t[0],t[1],Object(n.useState)(!1)),c=Object(U.a)(r,2),s=(c[0],c[1],Object(n.useState)(null)),i=Object(U.a)(s,2),o=i[0],d=i[1],j=Object(n.useState)(!0),u=Object(U.a)(j,2),m=u[0],h=u[1],p=Object(n.useState)({}),x=Object(U.a)(p,2),f=x[0],g=x[1],y=Object(n.useState)({}),C=Object(U.a)(y,2),I=C[0],S=C[1];Object(n.useEffect)((function(){_()}),[]);var _=function(){k("getuser/"+e.idpaciente).then((function(e){g(e)})),k("getuser/"+e.idmedico).then((function(e){S(e)})),k("encuestas/uuid/".concat(e.token)).then((function(e){console.log(e),d("The survey does not exist"===e.message)})).then((function(){h(!1),console.log("Not exists: ",o)}))};return m?Object(v.jsx)("div",{style:{paddingTop:180},children:Object(v.jsx)("div",{style:{margin:"auto",width:"40%",textAlign:"center"},children:Object(v.jsx)("h3",{children:"Cargando"})})}):o?Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsx)("h4",{children:"Encuesta de las versiones validadas en espa\xf1ol de las escalas HRSD, MADRS y PHQ-9"}),Object(v.jsx)("br",{}),Object(v.jsxs)("h5",{children:["Medico: ",I.name]}),Object(v.jsxs)("h5",{children:["Paciente: ",f.name]}),Object(v.jsx)("br",{}),Object(v.jsxs)(b.a,{name:"basic",layout:"vertical",initialValues:{remember:!0},onFinish:function(a){var t=0,n=0,r=0;console.log("Sintomatologia gpc:",a);for(var c=1;c<17;c++)t+=a[c];for(var s=1;s<11;s++){n+=a["2_".concat(s)]}for(var i=1;i<10;i++){r+=a["3_".concat(i)]}var o={hrsd:t,madrs:n,phq:r};console.log("repuestas: ",o);var d={usuario:e.idpaciente,medico:e.idmedico,respuestas_depresion2_gpc:o,tipo:"depresion_gpc",uuid:e.token};console.log("Efectos body:",d),D("encuestas/add",d).then((function(e){console.log(e),l.a.success(e.message)})).then((function(){return _()}))},onFinishFailed:function(e){console.log("Failed:",e),e.errorFields.map((function(e){l.a.error("Conteste la pregunta "+e.name)}))},autoComplete:"off",children:[Object(v.jsx)("h4",{children:"Versi\xf3n validada en espa\xf1ol de la HRSD1"}),Rn.map((function(e){return Object(v.jsx)(b.a.Item,{label:e.pregunta,name:e.n,rules:[{required:!0,message:"Selecciona una opcion"}],children:Object(v.jsx)(wn.a.Group,{children:Object(v.jsx)(J.a,{direction:"vertical",children:e.respuestas.map((function(e,a){return Object(v.jsxs)(wn.a,{value:a,children:[" ",e," "]})}))})})},e.n)})),Object(v.jsx)("h4",{children:"Versi\xf3n validada en espa\xf1ol de la escala Montgomery-Asberg Depression Rating Scale (MADRS)1"}),Hn.map((function(e){return Object(v.jsx)(b.a.Item,{label:e.pregunta,name:"2_"+e.n,rules:[{required:!0,message:"Selecciona una opcion"}],children:Object(v.jsx)(wn.a.Group,{children:Object(v.jsx)(J.a,{direction:"vertical",children:e.respuestas.map((function(e,a){return Object(v.jsxs)(wn.a,{value:a,children:[" ",e," "]})}))})})},e.n)})),Object(v.jsx)("h4",{children:"Cuestionario sobre la Salud del Paciente (PHQ-9)108 \xa91999 Pfizer Inc."}),Object(v.jsx)("h5",{children:"Durante  las  \xfaltimas  2  semanas,  \xbfcon  qu\xe9  frecuencia  le  han  molestado  cada  uno  de  los  siguientes problemas?"}),zn.map((function(e,a){return Object(v.jsx)(b.a.Item,{label:e,name:"3_"+(a+1),rules:[{required:!0,message:"Selecciona una opcion"}],children:Object(v.jsx)(wn.a.Group,{children:Object(v.jsxs)(J.a,{direction:"vertical",children:[Object(v.jsx)(wn.a,{value:0,children:" Nunca "}),Object(v.jsx)(wn.a,{value:1,children:" Varios Dias "}),Object(v.jsx)(wn.a,{value:2,children:" M\xe1s de la mitad de los d\xedas "}),Object(v.jsx)(wn.a,{value:3,children:" Todos o casi todos los d\xedas "})]})})},a)})),Object(v.jsx)(b.a.Item,{label:Ln,name:"4_1",rules:[{required:!0,message:"Selecciona una opcion"}],children:Object(v.jsx)(wn.a.Group,{children:Object(v.jsxs)(J.a,{direction:"vertical",children:[Object(v.jsx)(wn.a,{value:"0",children:" Nada en absoluto "}),Object(v.jsx)(wn.a,{value:"1",children:" Algo dif\xedcil "}),Object(v.jsx)(wn.a,{value:"2",children:" Muy dif\xedcil "}),Object(v.jsx)(wn.a,{value:"3",children:" Extremadamente dif\xedcil "})]})})}),Object(v.jsx)(b.a.Item,{wrapperCol:{offset:8,span:16},children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Guardar"})})]})]}):Object(v.jsx)("div",{style:{paddingTop:180},children:Object(v.jsxs)("div",{style:{margin:"auto",width:"40%",textAlign:"center"},children:[Object(v.jsx)("h3",{children:"Gracias por contestar la encuesta"}),Object(v.jsx)("img",{width:256,src:L,alt:"recreamedLogo",style:{margin:"auto"}})]})})}function Bn(e){var a=Object(n.useState)(null),t=Object(U.a)(a,2),r=t[0],c=t[1],s=Object(n.useState)(!0),i=Object(U.a)(s,2),o=i[0],d=i[1],j=Object(n.useState)({}),u=Object(U.a)(j,2),p=u[0],x=u[1],f=Object(n.useState)({}),g=Object(U.a)(f,2),y=g[0],C=g[1];Object(n.useEffect)((function(){I()}),[]);var I=function(){k("getuser/"+e.idpaciente).then((function(e){x(e)})),k("getuser/"+e.idmedico).then((function(e){C(e)})),k("encuestas/uuid/".concat(e.token)).then((function(e){console.log(e),c("The survey does not exist"===e.message)})).then((function(){d(!1),console.log("Not exists: ",r)}))},S=function(e){console.log("checked = ",e)},_={0:"0",10:"10"};return o?Object(v.jsx)("div",{style:{paddingTop:180},children:Object(v.jsx)("div",{style:{margin:"auto",width:"40%",textAlign:"center"},children:Object(v.jsx)("h3",{children:"Cargando"})})}):r?Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsx)("h4",{children:"Encuesta de Dolor"}),Object(v.jsx)("br",{}),Object(v.jsxs)("h5",{children:["Medico: ",y.name]}),Object(v.jsxs)("h5",{children:["Paciente: ",p.name]}),Object(v.jsx)("br",{}),Object(v.jsxs)(b.a,{layout:"vertical",name:"basic",initialValues:nt,onFinish:function(a){var t={usuario:e.idpaciente,medico:e.idmedico,respuestas_dolor:a,tipo:"dolor",uuid:e.token};console.log("Body:",t),D("encuestas/add",t).then((function(e){console.log("add enc resp",e),l.a.success(e.message)})).then((function(){return I()}))},onFinishFailed:function(e){console.log("init",nt),console.log("Failed:",e),e.errorFields.map((function(e){l.a.error("Conteste la pregunta "+e.name)}))},autoComplete:"off",children:[tt.map((function(e){var a;switch(e.tipo){case"metrica":a=Object(v.jsx)(kn.a,{defaultValue:0,min:0,max:10,marks:_});break;case"multiple":a=Object(v.jsx)(h.a.Group,{options:e.respuestas,defaultValue:["Apple"],onChange:S});break;case"seleccion":a=Object(v.jsx)(wn.a.Group,{children:e.respuestas.map((function(e,a){return Object(v.jsx)(wn.a,{value:a,children:e})}))});break;default:a=Object(v.jsx)(m.a,{})}return"titulo"!==e.tipo?Object(v.jsx)(b.a.Item,{label:e.pregunta,name:e.n,rules:[{required:!0,message:"Conteste correctamente"}],children:a},e.n):Object(v.jsx)("h5",{children:"".concat(e.n,".  ").concat(e.pregunta)})})),Object(v.jsx)(b.a.Item,{wrapperCol:{offset:8,span:16},children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Guardar"})})]})]}):Object(v.jsx)("div",{style:{paddingTop:180},children:Object(v.jsxs)("div",{style:{margin:"auto",width:"40%",textAlign:"center"},children:[Object(v.jsx)("h3",{children:"Gracias por contestar la encuesta"}),Object(v.jsx)("img",{width:256,src:L,alt:"recreamedLogo",style:{margin:"auto"}})]})})}Z.a.Option;function Gn(e){var a=Object(n.useState)(!1),t=Object(U.a)(a,2),r=(t[0],t[1],Object(n.useState)(!1)),c=Object(U.a)(r,2),s=(c[0],c[1],Object(n.useState)(null)),i=Object(U.a)(s,2),o=i[0],d=i[1],j=Object(n.useState)(!0),h=Object(U.a)(j,2),p=h[0],x=h[1],f=Object(n.useState)({}),g=Object(U.a)(f,2),y=g[0],C=g[1],I=Object(n.useState)({}),S=Object(U.a)(I,2),_=S[0],w=S[1];Object(n.useEffect)((function(){T()}),[]);var T=function(){k("getuser/"+e.idpaciente).then((function(e){C(e)})),k("getuser/"+e.idmedico).then((function(e){w(e)})),k("encuestas/uuid/".concat(e.token)).then((function(e){console.log(e),d("The survey does not exist"===e.message)})).then((function(){x(!1),console.log("Not exists: ",o)}))};return p?Object(v.jsx)("div",{style:{paddingTop:180},children:Object(v.jsx)("div",{style:{margin:"auto",width:"40%",textAlign:"center"},children:Object(v.jsx)("h3",{children:"Cargando"})})}):o?Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsx)("h4",{children:"La Evaluaci\xf3n Del Trastorno Por Estr\xe9s Postraum\xe1tico: Aproximaci\xf3n A Las Propiedades Psicom\xe9tricas De La Escala De Trauma De Davidson"}),Object(v.jsx)("br",{}),Object(v.jsxs)("h5",{children:["Medico: ",_.name]}),Object(v.jsxs)("h5",{children:["Paciente: ",y.name]}),Object(v.jsx)("br",{}),Object(v.jsxs)(b.a,{name:"basic",layout:"vertical",initialValues:{remember:!0},onFinish:function(a){Object.keys(a).map((function(e){var t=[];Object.values(a[e]).forEach((function(e){t.push(Number(e))})),a[e]=t})),console.log("Values: ",a);var t={usuario:e.idpaciente,medico:e.idmedico,respuestas_ept1_davidson:a,tipo:"post_traumatico",uuid:e.token};console.log("Post Traum Body:",t),D("encuestas/add",t).then((function(e){console.log(e),l.a.success(e.message)})).then((function(){return T()}))},onFinishFailed:function(e){console.log("Failed:",e),e.errorFields.map((function(e){l.a.error("Conteste la pregunta "+e.name)}))},autoComplete:"off",children:[Wa.map((function(e,a){return Object(v.jsx)(b.a.Item,{label:e,children:Object(v.jsxs)(m.a.Group,{compact:!0,children:[Object(v.jsx)(b.a.Item,{label:"Frecuencia",name:[a+1,"Frecuencia"],noStyle:!0,rules:[{required:!0,message:"Selecciona Frecuencia"}],children:Object(v.jsx)(J.a,{direction:"vertical",children:Object(v.jsxs)(u.a,{style:{padding:6},children:[Object(v.jsx)("p",{style:{color:"#5fa1c4"},children:"Frecuencia: "}),Object(v.jsx)(wn.a.Group,{children:Object(v.jsxs)(J.a,{direction:"vertical",children:[Object(v.jsx)(wn.a,{value:0,children:" Nunca "}),Object(v.jsx)(wn.a,{value:1,children:" A Veces "}),Object(v.jsx)(wn.a,{value:2,children:" 2-3 Veces "}),Object(v.jsx)(wn.a,{value:3,children:" 4-6 Veces "}),Object(v.jsx)(wn.a,{value:4,children:" A diario "})]})})]})})}),Object(v.jsx)(b.a.Item,{label:"Gravedad",name:[a+1,"Gravedad"],noStyle:!0,rules:[{required:!0,message:"Selecciona Gravedad"}],children:Object(v.jsx)(J.a,{direction:"vertical",children:Object(v.jsxs)(u.a,{style:{padding:6},children:[Object(v.jsx)("p",{style:{color:"#5fa1c4"},children:"Gravedad: "}),Object(v.jsx)(wn.a.Group,{children:Object(v.jsxs)(J.a,{direction:"vertical",children:[Object(v.jsx)(wn.a,{value:0,children:" Nada "}),Object(v.jsx)(wn.a,{value:1,children:" Leve "}),Object(v.jsx)(wn.a,{value:2,children:" Moderada "}),Object(v.jsx)(wn.a,{value:3,children:" Marcada "}),Object(v.jsx)(wn.a,{value:4,children:" Extrema "})]})})]})})})]})})})),Object(v.jsx)(b.a.Item,{wrapperCol:{offset:8,span:16},children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Guardar"})})]})]}):Object(v.jsx)("div",{style:{paddingTop:180},children:Object(v.jsxs)("div",{style:{margin:"auto",width:"40%",textAlign:"center"},children:[Object(v.jsx)("h3",{children:"Gracias por contestar la encuesta"}),Object(v.jsx)("img",{width:256,src:L,alt:"recreamedLogo",style:{margin:"auto"}})]})})}var Un=[{n:"Acontecimiento 1",criterio:"A",pregunta:"\xbfQu\xe9 sucedi\xf3?(\xbfQu\xe9 edad ten\xeda? \xbfQui\xe9n m\xe1s estuvo implicado? \xbfCu\xe1ntas veces leocurri\xf3? \xbfPeligr\xf3 su vida? \xbfSufri\xf3 alguna lesi\xf3n grave?)\n\xbfC\xf3mo respondi\xf3 usted emocionalmente?(\xbfEstaba muy ansioso/a o asustado/a?\xbfHorrorizado/a? \xbfIndefenso? \xbfC\xf3mo fue? \xbfEstaba aturdido/a, o en un estado deshock tal que no sent\xeda nada en absoluto? \xbfA qu\xe9 se parec\xeda? \xbfC\xf3mo fue? \xbfQu\xe9notaron otras personas sobre su respuesta emocional? Y despu\xe9s del aconteci-miento \xbfc\xf3mo respondi\xf3 emocionalmente?)\nDescriba (p. ej., tipo de acontecimiento, v\xedctima, causante, edad, frecuencia):"},{n:"Acontecimiento 2",criterio:"B",pregunta:"\xbfQu\xe9 sucedi\xf3?(\xbfQu\xe9 edad ten\xeda? \xbfQui\xe9n m\xe1s estuvo implicado? \xbfCu\xe1ntas veces leocurri\xf3? \xbfPeligr\xf3 su vida? \xbfSufri\xf3 alguna lesi\xf3n grave?)\n\xbfC\xf3mo respondi\xf3 usted emocionalmente?(\xbfEstaba muy ansioso/a o asustado/a?\xbfHorrorizado/a? \xbfIndefenso? \xbfC\xf3mo fue? \xbfEstaba aturdido/a, o en un estado deshock tal que no sent\xeda nada en absoluto? \xbfA qu\xe9 se parec\xeda? \xbfC\xf3mo fue? \xbfQu\xe9notaron otras personas sobre su respuesta emocional? Y despu\xe9s del aconteci-miento, \xbfc\xf3mo respondi\xf3 emocionalmente?)\nDescriba (p. ej., tipo de acontecimiento, v\xedctima, causante, edad, frecuencia):"},{n:"Acontecimiento 3",criterio:"C",pregunta:"\xbfQu\xe9 sucedi\xf3?(\xbfQu\xe9 edad ten\xeda? \xbfQui\xe9n m\xe1s estuvo implicado? \xbfCu\xe1ntas veces le ocurri\xf3? \xbfPeligr\xf3 su vida? \xbfSufri\xf3 alguna lesi\xf3n grave?)\n\xbfC\xf3mo respondi\xf3 usted emocionalmente?(\xbfEstaba muy ansioso/a o asustado/a?\xbfHorrorizado/a? \xbfIndefenso? \xbfC\xf3mo fue? \xbfEstaba aturdido/a, o en un estado deshock tal que no sent\xeda nada en absoluto? \xbfA qu\xe9 se parec\xeda? \xbfC\xf3mo fue? \xbfQu\xe9notaron otras personas sobre su respuesta emocional? Y despu\xe9s del aconteci-miento, \xbfc\xf3mo respondi\xf3 emocionalmente?)\nDescriba (p. ej., tipo de acontecimiento, v\xedctima, causante, edad, frecuencia):"}],Zn=m.a.TextArea;function Jn(e){var a=Object(n.useState)(!1),t=Object(U.a)(a,2),r=(t[0],t[1],Object(n.useState)(!1)),c=Object(U.a)(r,2),s=(c[0],c[1],Object(n.useState)(null)),i=Object(U.a)(s,2),o=i[0],m=i[1],h=Object(n.useState)(!0),p=Object(U.a)(h,2),x=p[0],f=p[1],g=Object(n.useState)({}),y=Object(U.a)(g,2),C=y[0],I=y[1],S=Object(n.useState)({}),_=Object(U.a)(S,2),w=_[0],T=_[1];Object(n.useEffect)((function(){E()}),[]);var E=function(){k("getuser/"+e.idpaciente).then((function(e){I(e)})),k("getuser/"+e.idmedico).then((function(e){T(e)})),k("encuestas/uuid/".concat(e.token)).then((function(e){console.log(e),m("The survey does not exist"===e.message)})).then((function(){f(!1),console.log("Not exists: ",o)}))};if(x)return Object(v.jsx)("div",{style:{paddingTop:180},children:Object(v.jsx)("div",{style:{margin:"auto",width:"40%",textAlign:"center"},children:Object(v.jsx)("h3",{children:"Cargando"})})});if(!o)return Object(v.jsx)("div",{style:{paddingTop:180},children:Object(v.jsxs)("div",{style:{margin:"auto",width:"40%",textAlign:"center"},children:[Object(v.jsx)("h3",{children:"Gracias por contestar la encuesta"}),Object(v.jsx)("img",{width:256,src:L,alt:"recreamedLogo",style:{margin:"auto"}})]})});var F=function(e){var a=e.letra,t=e.numero;return Object(v.jsxs)("div",{children:[Object(v.jsx)("h6",{children:"A(1)"}),Object(v.jsx)(b.a.Item,{label:"\xbfAmenaza vital?",name:"Ac".concat(t,"_A1_1"),rules:[{required:!0,message:"Selecciona una opcion"}],children:Object(v.jsxs)(wn.a.Group,{name:e.nombre,children:[Object(v.jsx)(wn.a,{value:"No",children:"No"}),Object(v.jsx)(wn.a,{value:"Si",children:"Si"}),Object(v.jsx)(wn.a,{value:"Sujeto",children:"Sujeto"}),Object(v.jsx)(wn.a,{value:"Otro",children:"Otro"})]},e.nombre)}),Object(v.jsx)(b.a.Item,{label:"\xbfLesion Grave?",name:"Ac".concat(t,"_A1_2"),rules:[{required:!0,message:"Selecciona una opcion"}],children:Object(v.jsxs)(wn.a.Group,{name:e.nombre,children:[Object(v.jsx)(wn.a,{value:"No",children:"No"}),Object(v.jsx)(wn.a,{value:"Si",children:"Si"}),Object(v.jsx)(wn.a,{value:"Sujeto",children:"Sujeto"}),Object(v.jsx)(wn.a,{value:"Otro",children:"Otro"})]},e.nombre)}),Object(v.jsx)(b.a.Item,{label:"\xbfAmenaza de la integridad f\xedsica?",name:"Ac".concat(e.n,"_A2"),rules:[{required:!0,message:"Selecciona una opcion"}],children:Object(v.jsxs)(wn.a.Group,{name:e.nombre,children:[Object(v.jsx)(wn.a,{value:"No",children:"No"}),Object(v.jsx)(wn.a,{value:"Si",children:"Si"}),Object(v.jsx)(wn.a,{value:"Sujeto",children:"Sujeto"}),Object(v.jsx)(wn.a,{value:"Otro",children:"Otro"})]},e.nombre)}),Object(v.jsxs)("h6",{children:[a,"(2)"]}),Object(v.jsx)(b.a.Item,{label:"\xbfMiedo intenso/indefensi\xf3n/horror?",name:"Ac".concat(e.n,"_CritA"),rules:[{required:!0,message:"Selecciona una opcion"}],children:Object(v.jsxs)(wn.a.Group,{name:e.nombre,children:[Object(v.jsx)(wn.a,{value:"No",children:"No"}),Object(v.jsx)(wn.a,{value:"Si",children:"Si"}),Object(v.jsx)(wn.a,{value:"Durante",children:"Durante"}),Object(v.jsx)(wn.a,{value:"Despues",children:"Despues"})]},e.nombre)}),Object(v.jsx)("h6",{children:"Criterio A"}),Object(v.jsx)(b.a.Item,{label:"\xbfSe cumple?",name:"Ac".concat(e.n,"_A1_3"),rules:[{required:!0,message:"Selecciona una opcion"}],children:Object(v.jsxs)(wn.a.Group,{name:e.nombre,children:[Object(v.jsx)(wn.a,{value:"No",children:"No"}),Object(v.jsx)(wn.a,{value:"Probable",children:"Probable"}),Object(v.jsx)(wn.a,{value:"Si",children:"Si"})]},e.nombre)})]})};return Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsx)("h4",{children:"Escala para el Trastorno por Estr\xe9s Postraum\xe1tico Administradapor el Cl\xednico (Clinician Administered PTSD Scale, CAPS)"}),Object(v.jsx)("br",{}),Object(v.jsxs)("h5",{children:["Medico: ",w.name]}),Object(v.jsxs)("h5",{children:["Paciente: ",C.name]}),Object(v.jsx)("br",{}),Object(v.jsxs)(b.a,{name:"basic",layout:"vertical",initialValues:{remember:!0},onFinish:function(a){console.log("Vals EPTClinic: ",a);var t={usuario:e.idpaciente,medico:e.idmedico,score:a,tipo:"depresion",uuid:e.token};console.log("Efectos body:",t),D("encuestas/add",t).then((function(e){console.log(e),l.a.success(e.message)})).then((function(){return E()}))},onFinishFailed:function(e){console.log("Failed:",e),e.errorFields.map((function(e){l.a.error("Conteste la pregunta "+e.name)}))},autoComplete:"off",children:[Un.map((function(e){return Object(v.jsxs)("div",{children:[Object(v.jsx)("h5",{children:e.n}),Object(v.jsxs)(d.a,{children:[Object(v.jsx)(j.a,{span:12,style:{padding:6},children:Object(v.jsx)(b.a.Item,{label:e.pregunta,name:"Ac1",rules:[{required:!0,message:"Selecciona una opcion"}],children:Object(v.jsx)(Zn,{})})}),Object(v.jsx)(j.a,{span:12,children:Object(v.jsx)(u.a,{children:Object(v.jsx)(F,{letra:e.criterio})})})]})]})})),Object(v.jsx)(b.a.Item,{wrapperCol:{offset:8,span:16},children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Guardar"})})]})]})}function Yn(e){var a=Object(n.useState)(!1),t=Object(U.a)(a,2),r=(t[0],t[1],Object(n.useState)(!1)),c=Object(U.a)(r,2),s=(c[0],c[1],Object(n.useState)(null)),i=Object(U.a)(s,2),o=i[0],d=i[1],j=Object(n.useState)(!0),u=Object(U.a)(j,2),m=u[0],h=u[1],p=Object(n.useState)({}),x=Object(U.a)(p,2),f=x[0],g=x[1],y=Object(n.useState)({}),C=Object(U.a)(y,2),I=C[0],S=C[1];Object(n.useEffect)((function(){_()}),[]);var _=function(){k("getuser/"+e.idpaciente).then((function(e){g(e)})),k("getuser/"+e.idmedico).then((function(e){S(e)})),k("encuestas/uuid/".concat(e.token)).then((function(e){console.log(e),d("The survey does not exist"===e.message)})).then((function(){h(!1),console.log("Not exists: ",o)}))};return m?Object(v.jsx)("div",{style:{paddingTop:180},children:Object(v.jsx)("div",{style:{margin:"auto",width:"40%",textAlign:"center"},children:Object(v.jsx)("h3",{children:"Cargando"})})}):o?Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsx)("h4",{children:"Validaci\xf3n mexicana de la Escala de Estr\xe9s Traum\xe1tico Secundario  "}),Object(v.jsx)("br",{}),Object(v.jsxs)("h5",{children:["Medico: ",I.name]}),Object(v.jsxs)("h5",{children:["Paciente: ",f.name]}),Object(v.jsx)("br",{}),Object(v.jsxs)(b.a,{name:"p_t_mx",layout:"vertical",initialValues:{remember:!0},onFinish:function(a){console.log("vals depres MX: ",a),D("encuestas/add",{usuario:e.idpaciente,medico:e.idmedico,respuestas_ept_3mx:a,tipo:"post_traumatico_mx",uuid:e.token}).then((function(e){console.log(e),l.a.success(e.message)})).then((function(){return _()}))},onFinishFailed:function(e){console.log("Failed:",e),e.errorFields.map((function(e){l.a.error("Conteste la pregunta "+e.name)}))},autoComplete:"off",children:[Qa.map((function(e,a){return Object(v.jsx)(b.a.Item,{label:e,name:a+1,rules:[{required:!0,message:"Selecciona una opcion"}],children:Object(v.jsx)(wn.a.Group,{children:Object(v.jsxs)(J.a,{direction:"vertical",children:[Object(v.jsx)(wn.a,{value:1,children:"Totalmente en desacuerdo."}),Object(v.jsx)(wn.a,{value:2,children:"En desacuerdo. "}),Object(v.jsx)(wn.a,{value:3,children:"De acuerdo. "}),Object(v.jsx)(wn.a,{value:4,children:"Totalmente de acuerdo. "})]})})},a)})),Object(v.jsx)("br",{}),Object(v.jsx)(b.a.Item,{wrapperCol:{offset:8,span:16},children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Guardar"})})]})]}):Object(v.jsx)("div",{style:{paddingTop:180},children:Object(v.jsxs)("div",{style:{margin:"auto",width:"40%",textAlign:"center"},children:[Object(v.jsx)("h3",{children:"Gracias por contestar la encuesta"}),Object(v.jsx)("img",{width:256,src:L,alt:"recreamedLogo",style:{margin:"auto"}})]})})}function Wn(e){var a=Object(n.useState)(null),t=Object(U.a)(a,2),r=t[0],c=t[1],s=Object(n.useState)(!0),i=Object(U.a)(s,2),o=i[0],d=i[1],j=Object(n.useState)({}),u=Object(U.a)(j,2),p=u[0],x=u[1],f=Object(n.useState)({}),g=Object(U.a)(f,2),y=g[0],C=g[1];Object(n.useEffect)((function(){I()}),[]);var I=function(){k("getuser/"+e.idpaciente).then((function(e){x(e)})),k("getuser/"+e.idmedico).then((function(e){C(e)})),k("encuestas/uuid/".concat(e.token)).then((function(e){console.log(e),c("The survey does not exist"===e.message)})).then((function(){d(!1),console.log("Not exists: ",r)}))},S=function(e){console.log("checked = ",e)},_={0:"0",10:"10"};return o?Object(v.jsx)("div",{style:{paddingTop:180},children:Object(v.jsx)("div",{style:{margin:"auto",width:"40%",textAlign:"center"},children:Object(v.jsx)("h3",{children:"Cargando"})})}):r?Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsx)("h4",{children:"Encuesta de Satisfaccion"}),Object(v.jsx)("br",{}),Object(v.jsxs)("h5",{children:["Medico: ",y.name]}),Object(v.jsxs)("h5",{children:["Paciente: ",p.name]}),Object(v.jsx)("br",{}),Object(v.jsxs)(b.a,{layout:"vertical",name:"basic",onFinish:function(a){var t={usuario:e.idpaciente,medico:e.idmedico,encuesta_satisfaccion:a,tipo:"satisfaccion",uuid:e.token};console.log("Body:",t),D("encuestas/add",t).then((function(e){console.log("add enc resp",e),l.a.success(e.message)})).then((function(){return I()}))},onFinishFailed:function(e){console.log("Failed:",e),e.errorFields.map((function(e){l.a.error("Conteste la pregunta "+e.name)}))},autoComplete:"off",children:[st.map((function(e){var a;switch(e.tipo){case"radioButton":a=Object(v.jsx)(wn.a.Group,{onChange:S,defaultValue:"a",children:e.respuestas.map((function(e,a){return Object(v.jsx)(wn.a.Button,{value:a,children:e})}))});break;case"metrica":a=Object(v.jsx)(kn.a,{defaultValue:0,min:0,max:10,marks:_});break;case"multiple":a=Object(v.jsx)(h.a.Group,{options:e.respuestas,defaultValue:["Apple"],onChange:S});break;case"seleccion":a=Object(v.jsx)(wn.a.Group,{children:e.respuestas.map((function(e,a){return Object(v.jsxs)(wn.a,{value:0!==a,children:[e," val: ",0===a?"false":"true"]})}))});break;default:a=Object(v.jsx)(m.a,{})}return"titulo"!==e.tipo?Object(v.jsx)(b.a.Item,{label:e.pregunta,name:e.n,rules:[{required:!0,message:"Conteste correctamente"}],children:a},e.n):Object(v.jsx)("h5",{children:"".concat(e.n,".  ").concat(e.pregunta)})})),Object(v.jsx)(b.a.Item,{wrapperCol:{offset:8,span:16},children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Guardar"})})]})]}):Object(v.jsx)("div",{style:{paddingTop:180},children:Object(v.jsxs)("div",{style:{margin:"auto",width:"40%",textAlign:"center"},children:[Object(v.jsx)("h3",{children:"Gracias por contestar la encuesta"}),Object(v.jsx)("img",{width:256,src:L,alt:"recreamedLogo",style:{margin:"auto"}})]})})}function $n(){var e=Object(o.f)(),a=e.idmedico,t=e.idpaciente,n=e.key;return console.log(n),Object(v.jsx)("div",{children:Object(v.jsx)(Tn,{idmedico:a,idpaciente:t,token:n})})}function Xn(){var e=Object(o.f)(),a=e.idmedico,t=e.idpaciente,n=e.key;return console.log(n),Object(v.jsx)("div",{children:Object(v.jsx)(Mn,{idmedico:a,idpaciente:t,token:n})})}function Qn(){var e=Object(o.f)(),a=e.idmedico,t=e.idpaciente,n=e.key;return console.log(n),Object(v.jsx)("div",{children:Object(v.jsx)(Vn,{idmedico:a,idpaciente:t,token:n})})}function Kn(){var e=Object(o.f)(),a=e.idmedico,t=e.idpaciente,n=e.key;return console.log(n),Object(v.jsx)("div",{children:Object(v.jsx)(Bn,{idmedico:a,idpaciente:t,token:n})})}function er(){var e=Object(o.f)(),a=e.idmedico,t=e.idpaciente,n=e.key;return console.log(n),Object(v.jsx)("div",{children:Object(v.jsx)(Gn,{idmedico:a,idpaciente:t,token:n})})}function ar(){var e=Object(o.f)(),a=e.idmedico,t=e.idpaciente,n=e.key;return console.log(n),Object(v.jsx)("div",{children:Object(v.jsx)(Jn,{idmedico:a,idpaciente:t,token:n})})}function tr(){var e=Object(o.f)(),a=e.idmedico,t=e.idpaciente,n=e.key;return console.log(n),Object(v.jsx)("div",{children:Object(v.jsx)(Yn,{idmedico:a,idpaciente:t,token:n})})}function nr(){var e=Object(o.f)(),a=e.idmedico,t=e.idpaciente,n=e.key;return console.log(n),Object(v.jsx)("div",{children:Object(v.jsx)(Wn,{idmedico:a,idpaciente:t,token:n})})}var rr=[{key:"1",name:"25/04/2023",age:"8:00",address:"16:00"},{key:"1",name:"25/04/2023",age:"8:00",address:"16:00"},{key:"1",name:"25/04/2023",age:"8:00",address:"16:00"}],cr=[{title:"Fecha",dataIndex:"name",key:"name"},{title:"Hora de entrada",dataIndex:"age",key:"age"},{title:"Hora de salida",dataIndex:"address",key:"address"}];function sr(){return Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsx)("h4",{children:"Horarios de: 6334b651YNSDFN739FJNKSJD "}),Object(v.jsx)(ba.a,{dataSource:rr,columns:cr}),Object(v.jsx)("div",{style:{height:200}})]})}function ir(){return console.log("DoctorApp",w.name),Object(v.jsx)(ae.a,{bg:"primary",variant:"dark",expand:"lg",children:Object(v.jsxs)(te.a,{children:[Object(v.jsx)("img",{src:Ca,width:"40",height:"35",className:"d-inline-block align-top",alt:"Recreamed logo",style:{marginRight:6}}),Object(v.jsxs)(ae.a.Brand,{href:"#home",style:{fontFamily:"Poppins",color:"White"},children:["Bienvenido ",w.name]}),Object(v.jsx)(ae.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(v.jsx)(ae.a.Collapse,{id:"basic-navbar-nav",children:Object(v.jsxs)(ne.a,{className:"me-auto",children:[Object(v.jsx)(ne.a.Link,{href:"/",children:"Inicio"}),Object(v.jsx)(ne.a.Link,{href:"/pacientes",children:"Pacientes"}),Object(v.jsx)(ne.a.Link,{href:"/citas",children:"Citas"}),Object(v.jsx)(ne.a.Link,{href:"/escalas",children:"Escalas"}),Object(v.jsx)(ne.a.Link,{href:"/balances",children:"Balances"}),Object(v.jsx)(ne.a.Link,{href:"/perfil",children:"Mi Perfil"})]})}),Object(v.jsx)(ae.a.Collapse,{className:"justify-content-end",children:Object(v.jsx)(O.a,{onClick:S,ghost:!0,children:"Cerrar Sesion"})})]})})}function or(){return Object(v.jsxs)(i.a,{children:[Object(v.jsx)(ir,{}),Object(v.jsxs)(o.c,{children:[Object(v.jsx)(o.a,{path:"/pacientesdash",children:Object(v.jsx)(Jt,{})}),Object(v.jsx)(o.a,{path:"/pacientes",children:Object(v.jsx)(fn,{})}),Object(v.jsx)(o.a,{path:"/citas",children:Object(v.jsx)(Qt,{})}),Object(v.jsx)(o.a,{path:"/perfil",children:Object(v.jsx)(cn,{})}),Object(v.jsx)(o.a,{path:"/historial",children:Object(v.jsx)(dn,{})}),Object(v.jsx)(o.a,{path:"/balances",children:Object(v.jsx)(_n,{})}),Object(v.jsx)(o.a,{path:"/horarios",children:Object(v.jsx)(sr,{})}),Object(v.jsx)(o.a,{path:"/escalas",children:Object(v.jsx)(jt,{})}),Object(v.jsx)(o.a,{path:"/ketamina_public/:idmedico/:idpaciente/:key",children:Object(v.jsx)($n,{})}),Object(v.jsx)(o.a,{path:"/dolor_public/:idmedico/:idpaciente/:key",children:Object(v.jsx)(Kn,{})}),Object(v.jsx)(o.a,{path:"/depresion_qids_public/:idmedico/:idpaciente/:key",children:Object(v.jsx)(Xn,{})}),Object(v.jsx)(o.a,{path:"/depresion_gpc_public/:idmedico/:idpaciente/:key",children:Object(v.jsx)(Qn,{})}),Object(v.jsx)(o.a,{path:"/post_traumatico_public/:idmedico/:idpaciente/:key",children:Object(v.jsx)(er,{})}),Object(v.jsx)(o.a,{path:"/post_traumatico_clinico_public/:idmedico/:idpaciente/:key",children:Object(v.jsx)(ar,{})}),Object(v.jsx)(o.a,{path:"/post_traumatico_mx_public/:idmedico/:idpaciente/:key",children:Object(v.jsx)(tr,{})}),Object(v.jsx)(o.a,{path:"/",children:Object(v.jsx)(fn,{})})]}),Object(v.jsx)(A,{})]})}var lr=t(781),dr=t(784);function jr(){var e,a,t=Object(n.useState)(!1),r=Object(U.a)(t,2),c=r[0],s=r[1],i=Object(n.useState)([]),o=Object(U.a)(i,2),u=o[0],h=o[1],p=Object(n.useState)(!0),x=Object(U.a)(p,2),f=(x[0],x[1]),g=Object(n.useState)({}),C=Object(U.a)(g,2),I=C[0],S=C[1],_=Object(n.useState)(!1),k=Object(U.a)(_,2),T=k[0],E=k[1];Object(n.useEffect)((function(){F()}),[]);var F=function(){fetch(y+"citas/".concat(w._id)).then((function(e){return e.json()})).then((function(e){console.log(e),h(e)})).finally((function(){return f(!1)}))};return Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsxs)(d.a,{children:[Object(v.jsx)(j.a,{span:8,children:Object(v.jsx)("h4",{children:"CALENDARIO DE CITAS"})}),Object(v.jsx)(j.a,{children:Object(v.jsx)(O.a,{type:"primary",onClick:function(){s(!0)},children:"Nueva Cita"})})]}),Object(v.jsx)(dr.a,{dateCellRender:function(e){var a=e.format();return a=a.substring(0,10),Object(v.jsx)("ul",{className:"events",children:u.map((function(e){return e.fecha_hora=e.fecha_hora.substring(0,10),e.fecha_hora===a?Object(v.jsx)("li",{style:{listStyleType:"none"},children:Object(v.jsx)(lr.a,{status:"success",text:e.medico.name,onClick:function(){S(e),E(!0)}})},e._id):Object(v.jsx)(v.Fragment,{})}))})},monthCellRender:function(e){var a=function(e){if(8===e.month())return 1394}(e);return a?Object(v.jsxs)("div",{className:"notes-month",children:[Object(v.jsx)("section",{children:a}),Object(v.jsx)("span",{children:"Backlog number"})]}):null}}),Object(v.jsx)(le.a,{title:"Nuevo expediente",visible:c,onOk:function(){s(!1)},onCancel:function(){s(!1)},children:Object(v.jsxs)(b.a,{name:"expediente",labelCol:{span:8},wrapperCol:{span:12},onFinish:function(e){e.medico=w._id,console.log("Valores:",e),fetch(y+"citas/add",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),l.a.success(e.message||e.error)})).catch((function(e){return console.error("Error:",e)})).finally((function(){F(),s(!1)}))},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[Object(v.jsx)(b.a.Item,{label:"Paciente",name:"usuario",rules:[{required:!0,message:"Ingresa RFC"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Sucursal",name:"sucursal",rules:[{required:!0,message:"Ingresa RFC"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Fecha y Hora",name:"fecha_hora",rules:[{required:!0,message:"Selecciona Fecha y Hora"}],children:Object(v.jsx)(oe.a,{showTime:!0,onChange:function(e,a){console.log("Selected Time: ",e),console.log("Formatted Selected Time: ",a)},onOk:function(e){console.log("onOk: ",e)},placeholder:"Selecciona Fecha y Hora"})}),Object(v.jsx)(b.a.Item,{label:"Enlace a la reunion",name:"id_reunion",rules:[{required:!0,message:"Ingresa RFC"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Contrase\xf1a",name:"password_reunion",rules:[{required:!0,message:"Ingresa RFC"}],children:Object(v.jsx)(m.a,{placeholder:"Opcional"})}),Object(v.jsx)(b.a.Item,{label:"Comentarios",name:"comentarios",rules:[{required:!0,message:"Ingresa RFC"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{wrapperCol:{offset:8,span:16},children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",form:"expediente",children:"Guardar"})})]})}),Object(v.jsx)(le.a,{title:"Detalles de la cita",visible:T,onOk:function(){E(!1)},onCancel:function(){E(!1)},children:I?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("p",{children:["Paciente: ",null===(e=I.usuario)||void 0===e?void 0:e.name]}),Object(v.jsxs)("p",{children:["fecha y hora: ",I.fecha_hora]}),Object(v.jsxs)("p",{children:["Sucursal: ",null===(a=I.sucursal)||void 0===a?void 0:a.nombre]}),Object(v.jsxs)("p",{children:["Comentarios: ",I.comentarios]}),Object(v.jsxs)("p",{children:[" ",Object(v.jsx)("a",{href:I.id_reunion,target:"_blank",rel:"noreferrer",children:"ir a la cita "})," "]})]}):Object(v.jsx)("p",{children:"Sin cita seleccionada"})})]})}function ur(){var e=Object(n.useState)(!1),a=Object(U.a)(e,2),t=a[0],r=a[1],c=function(){r(!0)},s=[{title:"ID Receta",dataIndex:"key",key:"_id",render:function(e){return Object(v.jsx)("a",{children:e})}},{title:"ID Nota",dataIndex:"id_nota",key:"id_nota"},{title:"Prescripcion",dataIndex:"prescripcion",key:"prescripcion"},{title:"Detalles",key:"action",render:function(e,a){return Object(v.jsx)(J.a,{size:"middle",children:Object(v.jsx)(O.a,{onClick:c,children:"Detalles"})})}}];return Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsx)("h4",{children:"Mis Recetas"}),Object(v.jsx)(ba.a,{columns:s,dataSource:[{key:"62570ab89a6437369f835be7",id_nota:"62570a9a9a6437369f835be5",prescripcion:"Paracetamol cada 8 horas",createdAt:"2022-04-13T17:39:04.541Z",updatedAt:"2022-04-13T17:39:04.541Z",__v:0},{key:"62570ab89a6437369f835be8",id_nota:"62570a9a9a6437369f835be5",prescripcion:"Ibuprofeno",createdAt:"2022-04-13T17:39:04.541Z",updatedAt:"2022-04-13T17:39:04.541Z",__v:0}]}),Object(v.jsxs)(le.a,{title:"Basic Modal",visible:t,onOk:function(){r(!1)},onCancel:function(){r(!1)},children:[Object(v.jsx)("p",{children:' _id": "62570ab89a6437369f835be7",'}),Object(v.jsx)("p",{children:' id_nota": "62570a9a9a6437369f835be5",'}),Object(v.jsx)("p",{children:' prescripcion": "Paracetamol cada 8 horas",'}),Object(v.jsx)("p",{children:' createdAt": "2022-04-13T17:39:04.541Z",'}),Object(v.jsx)("p",{children:' updatedAt": "2022-04-13T17:39:04.541Z",'}),Object(v.jsx)("p",{children:' __v": 0'})]})]})}var br=["key","name"],mr=Z.a.Option,hr=ve.a.Dragger,Or={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:14}}},pr={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};function xr(e){var a=b.a.useForm(),t=Object(U.a)(a,1)[0],r=Object(n.useState)([]),c=Object(U.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(!0),u=Object(U.a)(o,2),h=u[0],p=u[1],x=Object(n.useState)(e.perfil.avatar),f=Object(U.a)(x,2),g=f[0],C=f[1],I={name:"file",multiple:!1,action:y+"imagenes/upload",onChange:function(e){var a=e.file.status;"uploading"!==a&&console.log(e.file,e.fileList),"done"===a?(l.a.success("".concat(e.file.name," file uploaded successfully.")),console.log("New Files: ",e.file.response.file),C(e.file.response.file)):"error"===a&&l.a.error("".concat(e.file.name," file upload failed."))},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}};Object(n.useEffect)((function(){console.log("received Medic: ",e.perfil),k("sucursales").then((function(e){i(e),p(!1)}))}),[]);var S=Object(v.jsx)(b.a.Item,{name:"prefix",noStyle:!0,children:Object(v.jsx)(Z.a,{style:{width:70},children:Object(v.jsx)(mr,{value:"+52",children:"+52"})})});b.a.Item,Z.a;return Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"Editar perfil"}),Object(v.jsx)("br",{}),Object(v.jsxs)(hr,Object(B.a)(Object(B.a)({},I),{},{children:[Object(v.jsx)("p",{className:"ant-upload-drag-icon",children:Object(v.jsx)(ye.a,{})}),Object(v.jsx)("p",{className:"ant-upload-text",children:"Arrastra la imagen de perfil o click ara buscar"}),Object(v.jsx)("p",{className:"ant-upload-hint",children:"Selecciona archivos en formato png, jpeg o webp"})]})),Object(v.jsx)("br",{}),Object(v.jsx)(b.a,Object(B.a)(Object(B.a)({},Or),{},{form:t,name:"register",onFinish:function(a){a.avatar=g,console.log("ready to send",a),fetch(y+"users/updateUser/"+e.perfil._id,{method:"PUt",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){console.log("Success:",a),a.message&&"Usuario actualizado correctamente"===a.message?e.setEditing(!1):l.a.error(a.error)})).catch((function(e){return console.error("Error:",e)}))},initialValues:e.perfil,scrollToFirstError:!0,children:Object(v.jsxs)(d.a,{children:[Object(v.jsxs)(j.a,{span:11,children:[Object(v.jsx)(b.a.Item,{name:"name",label:"Nombre",rules:[{required:!0,message:"Ingresa Nombre y apellidos"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"email",label:"Correo",rules:[{type:"email",message:"Ingresa un corrreo electronico valido"},{required:!0,message:"Please input your E-mail!"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"telefono",label:"Telefono",rules:[{required:!0,message:"Ingresa el numero de telefono correcto"}],children:Object(v.jsx)(m.a,{addonBefore:S,style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{label:"horarios",rules:[{required:!0,message:"Ingresa al menos un horario"}],children:Object(v.jsx)(b.a.List,{name:"horarios",label:"horarios list",children:function(e,a){var t=a.add,n=a.remove;return Object(v.jsxs)(v.Fragment,{children:[e.map((function(e){var a=e.key,t=e.name,r=Object(G.a)(e,br);return Object(v.jsxs)(J.a,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"sucursal"],rules:[{required:!0,message:"Elije Sucursal"}],children:Object(v.jsx)(Z.a,{placeholder:"Elije Sucursal",style:{width:"120px"},children:h?"Cargando":s.map((function(e){return Object(v.jsx)(mr,{value:e._id,children:e.nombre})}))})})),Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"horario"],rules:[{required:!0,message:"Missing last name"}],children:Object(v.jsx)(m.a,{placeholder:"Horario"})})),Object(v.jsx)(Y.a,{onClick:function(){return n(t)}})]},a)})),Object(v.jsx)(b.a.Item,{children:Object(v.jsx)(O.a,{type:"dashed",onClick:function(){return t()},block:!0,icon:Object(v.jsx)(W.a,{}),children:"Agregar Horario"})})]})}})})]}),Object(v.jsxs)(j.a,{span:12,children:[Object(v.jsx)(b.a.Item,{name:"cedula",label:"Cedula",rules:[{required:!1,message:"Ingresa cedula"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"certificacion",label:"Certificacion",rules:[{required:!1,message:"Ingresa tu certificacion"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"universidad",label:"Universidad",rules:[{required:!1,message:"Ingresa tu universidad"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},pr),{},{children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Guardar"})}))]})]})}))]})}function fr(){var e=Object(n.useState)([]),a=Object(U.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)(!0),s=Object(U.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)([]),b=Object(U.a)(l,2),m=(b[0],b[1]),h=Object(n.useState)(!1),x=Object(U.a)(h,2),C=x[0],I=x[1];Object(n.useEffect)((function(){S()}),[]);var S=function(){fetch(y+"userByMail/"+w.email).then((function(e){return e.json()})).then((function(e){console.log(e),r(e[0]),o(!1)}))},_=function(){return Object(v.jsxs)(d.a,{children:[Object(v.jsxs)(j.a,{span:8,offset:4,children:[t.avatar.length>8?Object(v.jsx)(ra.a,{style:{borderRadius:12},width:256,src:"https://api.recreamed.com/images/"+t.avatar}):Object(v.jsx)(Ke.a,{size:128,icon:Object(v.jsx)(p.a,{}),className:"btnIconCentered"}),Object(v.jsx)(ua.a,{}),Object(v.jsxs)("p",{className:"nombre",children:[t.name," "]}),Object(v.jsxs)("p",{className:"datos",children:[t.email," "]}),Object(v.jsxs)("p",{className:"datos",children:[t.telefono," "]})]}),Object(v.jsxs)(j.a,{span:8,children:[Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{className:"desc",children:"Estado:"})," ",t.estado]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{className:"desc",children:"Municipio:"})," ",t.municipio]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{className:"desc",children:"Colonia:"})," ",t.colonia]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{className:"desc",children:"Calle:"})," ",t.calle]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{className:"desc",children:"Codigo Postal:"}),t.codigopostal," "]})]})]})},k=function(){var e=Object(g.a)(Object(f.a)().mark((function e(a){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.horarios.forEach((function(e){e.sucursal=e.sucursal._id})),console.log("Horarios before edit profile: ",a.horarios),e.next=4,m(a);case 4:I(!0),console.log("Editar medico: ",a);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsxs)(J.a,{children:[Object(v.jsx)("h3",{children:"PERFIL"}),Object(v.jsx)(O.a,{onClick:function(){return k(t)},type:"primary",shape:"circle",icon:Object(v.jsx)(Fe.a,{})})]})," ",Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),i?Object(v.jsx)(se,{}):Object(v.jsx)(u.a,{children:C?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(xr,{perfil:t,setEditing:I}),Object(v.jsx)(O.a,{shape:"circle",title:"Cancelar"}),Object(v.jsx)(O.a,{onClick:function(){return I(!1)},children:"Cancelar"})]}):Object(v.jsx)(_,{})})]})}t(750),n.Component;var gr=function(){localStorage.removeItem("sessionToken"),localStorage.removeItem("userType"),window.location.href="/"};function vr(){return Object(v.jsx)(ae.a,{bg:"primary",variant:"dark",expand:"lg",children:Object(v.jsxs)(te.a,{children:[Object(v.jsx)("img",{src:Ca,width:"40",height:"35",className:"d-inline-block align-top",alt:"Recreamed logo",style:{marginRight:6}}),Object(v.jsxs)(ae.a.Brand,{href:"#home",style:{fontFamily:"Poppins",color:"White"},children:["Bienvenido ",w.name]}),Object(v.jsx)(ae.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(v.jsx)(ae.a.Collapse,{id:"basic-navbar-nav",children:Object(v.jsxs)(ne.a,{className:"me-auto",children:[Object(v.jsx)(ne.a.Link,{href:"/citas",children:"Mis Citas"}),Object(v.jsx)(ne.a.Link,{href:"/recetas",children:"Mis Recetas"}),Object(v.jsx)(ne.a.Link,{href:"/perfil",children:"Mi Perfil"})]})}),Object(v.jsx)(ae.a.Collapse,{className:"justify-content-end",children:Object(v.jsx)(O.a,{onClick:gr,ghost:!0,children:"Cerrar Sesion"})})]})})}function yr(){return Object(v.jsxs)(i.a,{children:[Object(v.jsx)(vr,{}),Object(v.jsxs)(o.c,{children:[Object(v.jsx)(o.a,{path:"/citas",children:Object(v.jsx)(jr,{})}),Object(v.jsx)(o.a,{path:"/recetas",children:Object(v.jsx)(ur,{})}),Object(v.jsx)(o.a,{path:"/perfil",children:Object(v.jsx)(fr,{})}),Object(v.jsx)(o.a,{path:"/",children:Object(v.jsx)(jr,{})})]})]})}function Cr(e){var a=!e.cita||0===Object.keys(e.cita).length,t=Object(n.useState)([]),r=Object(U.a)(t,2),c=r[0],s=r[1],i=Object(n.useState)([]),o=Object(U.a)(i,2),d=o[0],j=o[1],u=Object(n.useState)(""),h=Object(U.a)(u,2),p=h[0],x=h[1],f=Object(n.useState)(!0),g=Object(U.a)(f,2),y=g[0],C=g[1],I=Object(n.useState)(!1),S=Object(U.a)(I,2),_=(S[0],S[1]),w=Object(n.useState)(0),k=Object(U.a)(w,2),T=k[0],E=k[1],F=Object(n.useState)(0),N=Object(U.a)(F,2),P=N[0],A=N[1],M=Object(n.useState)(!1),R=Object(U.a)(M,2),H=R[0],z=R[1];Object(n.useEffect)((function(){console.log("Received Cita for edit",e.cita),e.cita&&e.cita.usuario&&(V(e.cita.usuario),B(e.cita.medico))}),[]),Object(n.useEffect)((function(){e.cita&&e.cita.medico&&B(e.cita.medico)}),[c]);var L=function(e,a,t,n,r){var c={tipo:"ingreso",medico:a,cita:e,monto:T,forma_de_pago:n,fecha_hora:t,estado:"pendiente",concepto:r};console.log("Balance ready to send: ",c),D("balances/add",c).then((function(e){l.a.success(e.message||e.error),console.log(e)}))},V=function(a){var t=e.pacientesData.find((function(e){return e._id===a}));if(t){C(!0);var n=t.medicos_asignados;n.forEach((function(e){e.label=e.name,e.value=e._id})),console.log("Found",t),console.log("meds",n),s(n)}else C(!1),x("Usuario no encontrado")},B=function(a){if(console.log("selected",a),console.log("all medics handle med chang",c),c.length>0){var t=c.find((function(e){return e._id===a}));if(t&&t.configuracion.tratamientos_ofrecidos){x(""),C(!0),e.enableCreateCita&&e.setEditingCita(!1);var n=t.configuracion.tratamientos_ofrecidos;console.log("found tr",n),n.forEach((function(e){e.label="".concat(e.tratamiento," - $").concat(e.costo),e.value=e.costo,e.title=e.tratamiento}));var r=t.configuracion.costo_cita;A(void 0===r?0:r),j(n)}else C(!1),x("No se puede crear la cita para este m\xe9dico, no cuenta con servicios"),e.enableCreateCita&&e.enableCreateCita(!1)}};return Object(v.jsxs)(b.a,{name:"nueva_cita_admin",labelCol:{span:8},wrapperCol:{span:12},onFinish:function(a){var t=a.tipo_pago;a.sucursal=e.hospital,delete a.tratamiento,a.servicio=a.servicio.title,delete a.tipo_pago,console.log("cita ready",a),e.cita?q("citas/update/".concat(e.cita._id),a).then((function(a){e.setIsModalOpen(!1),e.setEditingCita(!1)})).finally((function(){e.getCitasData()})):D("citas/add",a).then((function(e){l.a.success(e.message||e.error),L(e.id_nueva_cita,a.medico,a.fecha_hora,t,a.servicio)})).finally((function(){e.getCitasData(),e.setIsModalOpen(!1)}))},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",initialValues:e.cita?e.cita:{isOnline:!1,tratamiento:"Sin servicio",fecha_hora:e.fecha_hora,duracion:60},children:[Object(v.jsx)("div",{children:p}),Object(v.jsx)(b.a.Item,{label:"Paciente",name:"usuario",rules:[{required:!0,message:"Selecciona Usuario"}],children:Object(v.jsx)(Z.a,{options:e.pacientesData,onChange:V,optionFilterProp:"children",onSearch:function(e){},showSearch:!0,filterOption:function(e,a){var t;return(null!==(t=null===a||void 0===a?void 0:a.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())}})}),Object(v.jsx)(b.a.Item,{label:"Medico",name:"medico",rules:[{required:!0,message:"Selecciona Medico"}],children:Object(v.jsx)(Z.a,{options:c,onChange:B})}),Object(v.jsx)(b.a.Item,{label:"VideoLlamada",name:"isOnline",children:Object(v.jsx)(ie.a,{onChange:function(e){_(e)}})}),Object(v.jsx)(b.a.Item,{label:"Comentarios",name:"comentarios",rules:[{required:!1,message:"Ingresa Comentarios"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Fecha y Hora",name:"fecha_hora",rules:[{required:!1,message:"Selecciona Fecha y Hora"}],children:Object(v.jsx)(oe.a,{showTime:!0,format:"DD/MM/YYYY HH:mm",use12Hours:!0})}),Object(v.jsx)(b.a.Item,{label:"Duracion",name:"duracion",rules:[{required:!0,message:"Selecciona la duracion de la cita"}],children:Object(v.jsx)(Z.a,{options:[{label:"Media Hora",value:30},{label:"Una Hora",value:60},{label:"Una Hora y Media",value:90},{label:"Dos Horas",value:120},{label:"Dos Horas Y Media",value:150},{label:"Tres Horas",value:180},{label:"Cuatro Horas",value:210},{label:"Cuatro Horas y Media",value:240},{label:"Cinco Horas",value:270},{label:"Cinco Horas y Media",value:300}]})}),Object(v.jsx)(b.a.Item,{label:"Servicio",name:"servicio",rules:[{required:!0,message:"Selecciona Medico"}],children:Object(v.jsx)(Z.a,{options:d,onChange:function(e){E(e.value),console.log("selected service",e)},labelInValue:!0})}),a&&Object(v.jsxs)("div",{children:[Object(v.jsx)(b.a.Item,{label:"Tipo de pago",name:"tipo_pago",rules:[{required:!0,message:"Selecciona tipo de pago"}],children:Object(v.jsx)(Z.a,{options:[{value:"efectivo",label:"Efectivo"},{value:"tarjeta",label:"Tarjeta"},{value:"transferencia",label:"Transferencia"}]})}),Object(v.jsx)(b.a.Item,{label:"costo de la cita $".concat(P),children:Object(v.jsx)(ie.a,{onChange:function(e){console.log("switch to ".concat(e)),z(e)}})}),Object(v.jsx)(b.a.Item,{wrapperCol:{offset:8,span:16},children:Object(v.jsx)("div",{className:"fila",children:Object(v.jsxs)("h6",{children:["Costo Total: $",H?T+P:T," "]})})})]}),e.cita&&Object(v.jsx)("div",{children:Object(v.jsx)(b.a.Item,{wrapperCol:{offset:8,span:16},children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",form:"nueva_cita_admin",disabled:!y,children:"Guardar"})})})]})}function Ir(e){var a=Object(n.useState)(!0),t=Object(U.a)(a,2),r=t[0],c=(t[1],function(){e.setIsModalOpen(!1)});return Object(v.jsx)(le.a,{title:"Nueva Cita",open:e.isOpenModal,onOk:function(){e.setIsModalOpen(!1)},onCancel:c,destroyOnClose:!0,footer:[Object(v.jsx)(O.a,{onClick:c,children:"Cancelar"}),Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",form:"nueva_cita_admin",disabled:!r,children:"Guardar"})],children:Object(v.jsx)(Cr,Object(B.a)({},e))})}var Sr=Object(re.b)(me.a);function _r(e){var a=Object(n.useState)(!1),t=Object(U.a)(a,2),r=t[0],c=t[1],s=Object(n.useState)({}),i=Object(U.a)(s,2),o=i[0],l=i[1],d=Object(n.useState)([]),j=Object(U.a)(d,2),u=j[0],b=j[1],m=Object(n.useState)(!0),h=Object(U.a)(m,2),p=h[0],x=h[1],f=Object(n.useState)(!1),g=Object(U.a)(f,2),y=g[0],C=g[1],I=function(){C(!1),c(!1)},S=Object(n.useState)(""),_=Object(U.a)(S,2),w=_[0],T=_[1],F=Object(n.useState)(!1),q=Object(U.a)(F,2),N=q[0],D=q[1],P=Object(n.useState)([]),A=Object(U.a)(P,2),M=A[0],R=A[1],H=function(){k("users_by_rol/Paciente").then((function(a){R(function(a){var t=[];return a.forEach((function(a){a.medicos_asignados.forEach((function(n){n.horarios.forEach((function(n){n.sucursal!==e.id_hospital||t.includes(a)||(a.label=a.name,a.value=a._id,t.push(a))}))}))})),t}(a))}))};Object(n.useEffect)((function(){H(),z()}),[]);var z=function(){k("citas/sucursal/".concat(e.id_hospital)).then((function(a){console.log("getCitasData ".concat(e.id_hospiatl," before format admin"),a[a.length-1]),a.forEach((function(e){var a,t;e.start=new Date(Date.parse(e.fecha_hora));var n=new Date(Date.parse(e.fecha_hora));n.setTime(n.getTime()+1*(null!==(a=e.duracion)&&void 0!==a?a:60)*60*1e3),e.end=new Date(Date.parse(n)),e.title=null===(t=e.usuario)||void 0===t?void 0:t.name,e.key=e._id})),console.log("getCitasData ".concat(e.id_hospiatl," before format admin"),a[a.length-1]),b(a)})).finally((function(){return x(!1)}))};return p?Object(v.jsx)("p",{children:"Cargando..."}):Object(v.jsxs)("div",{children:[Object(v.jsx)("br",{}),Object(v.jsxs)("h6",{children:["Citas del hospital ",e.hospital]}),Object(v.jsx)("br",{}),Object(v.jsx)(re.a,{scrollToTime:new Date(Date.now()),selectable:"true",localizer:Sr,events:u,startAccessor:"start",endAccessor:"end",style:{height:500},messages:{next:"Sig",previous:"Ant",today:"Hoy",month:"Mes",week:"Semana",day:"D\xeda"},defaultView:"week",onDoubleClickEvent:function(e){return console.log(e)},onSelectEvent:function(e){console.log("For eedit",e),e.doctor||(e.doctor=e.medico),e.paciente||(e.paciente=e.usuario),e.medico&&e.medico._id&&(e.medico=e.medico._id),e.usuario&&e.usuario._id&&(e.usuario=e.usuario._id),e.fecha_hora=me()(e.fecha_hora),l(e),o&&C(!0)},onSelecting:function(e){return console.log(e)},onSelectSlot:function(e){var a=e.start;e.end,e.action;return T(me()(a)),D(!0),{style:{backgroundColor:"red"}}}}),Object(v.jsx)(le.a,{title:"Detalles Cita",open:y,onOk:function(){C(!1),c(!1)},onCancel:I,destroyOnClose:!0,footer:[Object(v.jsx)(ue.a,{title:"Eliminar Cita",description:"Seguro que quiere eliminar la cita?",onConfirm:function(e){E("citas/remove/".concat(o._id)).then((function(e){console.log(e),z(),I()})),E("balances/remove/cita/".concat(o._id))},onCancel:function(e){console.log(e)},okText:"Si",cancelText:"No",children:Object(v.jsx)(O.a,{danger:!0,children:"Eliminar"})}),Object(v.jsx)(O.a,{onClick:function(){return c(!r)},children:r?"Cancelar":"Modificar"}),Object(v.jsx)(O.a,{onClick:I,children:"Cerrar"})],children:r?Object(v.jsx)(Cr,{cita:o,setIsModalOpen:C,getCitasData:z,setEditingCita:c,hospital:e.id_hospital,pacientesData:M}):Object(v.jsx)("div",{children:o&&Object(v.jsxs)("div",{children:[Object(v.jsxs)("p",{children:[Object(v.jsx)("strong",{children:"Medico "}),o.doctor?o.doctor.name:"Sin medico"]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("strong",{children:"Paciente "}),o.paciente?o.paciente.name:"Sin paciente"]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("strong",{children:"Fecha "}),new Date(o.fecha_hora).toLocaleDateString()]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("strong",{children:"Hora "}),new Date(o.fecha_hora).toLocaleTimeString()]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("strong",{children:"Servicio "}),o.servicio]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("strong",{children:"Comentarios "}),o.comentarios]})]})})}),Object(v.jsx)(Ir,{setIsModalOpen:D,isOpenModal:N,hospital:e.id_hospital,fecha_hora:w,getCitasData:z,pacientesData:M})]})}function wr(){return R.forEach((function(e){e.label=e.nombre,e.key=e._id,e.children=Object(v.jsx)(_r,{hospital:e.nombre,id_hospital:e._id})})),Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsx)("h4",{children:"Citas"}),Object(v.jsx)(fe.a,{defaultActiveKey:"1",items:R})]})}var kr=Z.a.Option,Tr=w&&w.horarios.map((function(e){return e.sucursal._id}));function Er(e){var a=b.a.useForm(),t=Object(U.a)(a,1)[0],r=Object(n.useState)(e.paciente?e.paciente.avatar:"noimg.jpg"),c=Object(U.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)([]),d=Object(U.a)(o,2),j=d[0],u=d[1];Object(n.useEffect)((function(){k("users_by_rol/Medico").then((function(e){u(h(e))}))}),[]);var h=function(e){var a=[];return e.forEach((function(e){e.horarios.forEach((function(t){Tr.includes(t.sucursal._id)&&!a.includes(e)&&(e.label=e.name,e.value=e._id,a.push(e))}))})),a};function p(){return x.apply(this,arguments)}function x(){return(x=Object(g.a)(Object(f.a)().mark((function e(){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(y+"historias/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({historial:"Historia clinica al "+new Date})}).then((function(e){return e.json()})).then((function(e){return console.log("Story Created: ",e),e})).catch((function(e){return console.error("Error:",e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=function(){var e=Object(g.a)(Object(f.a)().mark((function e(a){var t,n;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return t=e.sent,console.log("historia on Register: ",t),n={usuario:a,historia:t.id_historia,notas:[],recetas:[]},console.log("postBodyForExpedient: ",n),e.next=8,fetch(y+"expedientes/add",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),l.a.success(e.message||e.error)})).catch((function(e){return console.error("Error:",e)}));case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),S=function(){var a=Object(g.a)(Object(f.a)().mark((function a(t){var n;return Object(f.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.avatar=s,t.estatus="1",t.rol="Paciente",t.password=""+t.telefono,t.universidades=[],t.certificacion="",t.cedula="",t.horarios=[],t.responsable=e.paciente?e.paciente.responsable:{nombre:t.res_name,telefono:t.res_phone},delete t.prefix,delete t.res_name,delete t.res_phone,n=e.paciente?y+"users/updateUser/"+e.paciente._id:C+"register",console.log(t),console.log("url: ",n),a.next=17,fetch(n,{method:e.paciente?"PUT":"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){l.a.success(a.message||a.error),e.paciente?console.log("Editing, not creating patient"):I(a.user_id),"Usuario creado correctamente"===a.message?window.location.reload(!1):console.log(a),"Usuario actualizado correctamente"===a.message?e.setAdding(!1):console.log(a)})).catch((function(e){return console.error("Error:",e)}));case 17:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),_={name:"file",multiple:!1,action:y+"imagenes/upload",onChange:function(e){var a=e.file.status;"uploading"!==a&&console.log(e.file,e.fileList),"done"===a?(l.a.success("".concat(e.file.name," file uploaded successfully.")),console.log("New Files: ",e.file.response.file),i(e.file.response.file)):"error"===a&&l.a.error("".concat(e.file.name," file upload failed."))}};return Object(v.jsxs)("div",{className:"mainContainer",children:[e.paciente?Object(v.jsx)("h4",{children:"Editar paciente"}):Object(v.jsx)("h4",{children:"Registrar Paciente"}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(v.jsx)(ve.a,Object(B.a)(Object(B.a)({},_),{},{children:Object(v.jsx)(O.a,{type:"dashed",icon:Object(v.jsx)(Ia.a,{style:{fontSize:24,color:"#0d6efd"}}),style:{width:400,height:80},block:!0,children:"Selecciona la foto de perfil"})}))}),Object(v.jsx)("br",{}),Object(v.jsxs)(b.a,{labelCol:{span:6},wrapperCol:{span:16},form:t,name:"register",onFinish:S,onFinishFailed:function(e){console.log("Failed:",e),e.errorFields.forEach((function(e){l.a.error("Ingrese el campo "+e.name)}))},initialValues:e.paciente,scrollToFirstError:!0,children:[Object(v.jsx)(b.a.Item,{name:"name",label:"Nombre",rules:[{required:!0,message:"Ingresa Nombre y apellidos"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"email",label:"Correo",rules:[{type:"email",message:"Ingresa un correo electronico vaido!"},{required:!0,message:"Ingresa un correo electronico"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"telefono",label:"Telefono",rules:[{required:!0,message:"Ingresa tu numero de telefono"}],children:Object(v.jsx)(Be.a,{maxLength:10,minLength:10,style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{name:"medicos_asignados",label:"Medicos Asignados",rules:[{required:!0,message:"Agrega al mennos un medico"}],children:Object(v.jsx)(b.a.List,{name:"medicos_asignados",children:function(e,a,t){var n=a.add,r=a.remove,c=t.errors;return Object(v.jsxs)(v.Fragment,{children:[e.map((function(a,t){return Object(v.jsxs)(b.a.Item,{label:"",required:!1,children:[Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},a),{},{noStyle:!0,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Selecciona un Medico o elimina este campo"}],children:Object(v.jsx)(Z.a,{options:j,placeholder:"Selecciona Medico",style:{width:e.length>1?"90%":"100%"}})})),e.length>1?Object(v.jsx)(Y.a,{className:"dynamic-delete-button",onClick:function(){return r(a.name)}}):null]},a.key)})),Object(v.jsxs)(b.a.Item,{children:[Object(v.jsx)(O.a,{type:"dashed",onClick:function(){return n()},icon:Object(v.jsx)(W.a,{}),children:"Agregar Medico"}),Object(v.jsx)(b.a.ErrorList,{errors:c})]})]})}})}),Object(v.jsx)(ua.a,{children:"Responsable (opcional) "}),Object(v.jsx)(b.a.Item,{name:"res_name",label:"Nombre Responsable",children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"res_phone",label:"Telefono Responsable",children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(ua.a,{}),Object(v.jsx)(b.a.Item,{name:"calle",label:"Calle",rules:[{required:!1,message:"Ingresa calle",whitespace:!0}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"numexterior",label:"Num Exterior",rules:[{required:!1,message:"Ingresa numero exterior"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"numinterior",label:"Num Interior",rules:[{required:!1,message:"Ingresa numinterior"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Colonia",name:"colonia",rules:[{required:!1,message:"Ingresa "}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"estado",label:"Estado",rules:[{required:!1,message:"Apellido materno"}],children:Object(v.jsx)(Z.a,{placeholder:"Elije tu estado",showSearch:!0,children:M.map((function(e){return Object(v.jsx)(kr,{value:e,children:e})}))})}),Object(v.jsx)(b.a.Item,{name:"municipio",label:"Municipio",rules:[{required:!1,message:"Ingresa tu municipio"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"codigopostal",label:"Codigo Postal",rules:[{required:!1,message:"Ingresa codigopostal"}],children:Object(v.jsx)(Be.a,{style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{name:"sexo",label:"sexo",rules:[{required:!1,message:"Selecciona una opcion"}],children:Object(v.jsxs)(Z.a,{placeholder:"Elije el sexo",children:[Object(v.jsx)(kr,{value:"H",children:"H"}),Object(v.jsx)(kr,{value:"M",children:"M"}),Object(v.jsx)(kr,{value:"Otro",children:"Otro"})]})}),Object(v.jsx)(b.a.Item,{name:"edad",label:"Edad",rules:[{required:!1,message:"Ingresa edad"}],children:Object(v.jsx)(Be.a,{min:1,max:120})}),Object(v.jsx)(b.a.Item,{name:"diagnostico",label:"Diagnostico",rules:[{required:!1,message:"Ingresa el diagnostico"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"peso",label:"Peso",rules:[{required:!1,message:"Ingresa el peso"}],children:Object(v.jsx)(Be.a,{min:1,max:200})}),Object(v.jsx)(b.a.Item,{name:"talla",label:"Talla",rules:[{required:!1,message:"Ingresa la talla"}],children:Object(v.jsx)(Be.a,{min:1,max:200})}),Object(v.jsx)(b.a.Item,{name:"ocupacion",label:"Ocupacion",rules:[{required:!1,message:"Ingresa ocupacion"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"estado_civil",label:"Estado Civil",rules:[{required:!1,message:"Ingresa estado civil"}],children:Object(v.jsxs)(Z.a,{placeholder:"Elije el estado civil",children:[Object(v.jsx)(kr,{value:"Soltero",children:"Soltero"}),Object(v.jsx)(kr,{value:"Casado",children:"Casado"}),Object(v.jsx)(kr,{value:"Divorciado",children:"Divorciado"}),Object(v.jsx)(kr,{value:"Separaci\xf3n en proceso judicial",children:"Separaci\xf3n en proceso judicial"}),Object(v.jsx)(kr,{value:"Viudo",children:"Viudo"}),Object(v.jsx)(kr,{value:"Concubinato",children:"Concubinato"})]})}),Object(v.jsx)(b.a.Item,{name:"escolaridad",label:"Escolaridad",rules:[{required:!1,message:"Ingresa escolaridad"}],children:Object(v.jsxs)(Z.a,{placeholder:"Elije escolaridad",children:[Object(v.jsx)(kr,{value:"Ninguno",children:"Ninguno"}),Object(v.jsx)(kr,{value:"Preescolar",children:"Preescolar"}),Object(v.jsx)(kr,{value:"Primaria",children:"Primaria"}),Object(v.jsx)(kr,{value:"Secundaria",children:"Secundaria"}),Object(v.jsx)(kr,{value:"Medio Superior",children:"Medio Superior"}),Object(v.jsx)(kr,{value:"Superior",children:"Superior"}),Object(v.jsx)(kr,{value:"Posgrado",children:"Posgrado"})]})}),Object(v.jsx)(b.a.Item,{name:"lugar_de_nacimiento",label:"Lugar De Nacimiento",rules:[{required:!1,message:"Ingresa el lugar de nacimiento"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"fecha_nacimiento",label:"Fecha De Nacimiento",rules:[{required:!1,message:"Ingresa la fecha de nacimiento"}],children:Object(v.jsx)(oe.a,{})}),Object(v.jsx)(b.a.Item,{name:"ciudad",label:"Ciudad de residencia",rules:[{required:!1,message:"Ingresa ciudad"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"fuma",label:"Fuma",rules:[{required:!1,message:"Ingresa tu universidad"}],children:Object(v.jsx)(ie.a,{defaultChecked:!1})}),Object(v.jsx)(b.a.Item,{name:"alcohol",label:"Alcohol",rules:[{required:!1,message:"Ingresa tu universidad"}],children:Object(v.jsx)(ie.a,{defaultChecked:!1})}),Object(v.jsx)(b.a.Item,{name:"drogas",label:"Drogas",rules:[{required:!1,message:"Selecciona una opcion"}],children:Object(v.jsxs)(Z.a,{placeholder:"Elije una opcion",children:[Object(v.jsx)(kr,{value:"Antes",children:"Antes"}),Object(v.jsx)(kr,{value:"Ahora",children:"Ahora"}),Object(v.jsx)(kr,{value:"Nunca",children:"Nunca"})]})}),Object(v.jsx)(b.a.Item,{name:"cuales_drogas",label:"Cuales Drogas",rules:[{required:!1,message:"Selecciona una opcion"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"enfermedades_familiares",label:"Enfermedades Familiares",rules:[{required:!1,message:"Ingresa tu universidad"}],children:Object(v.jsx)(b.a.List,{name:"enfermedades_familiares",children:function(e,a,t){var n=a.add,r=a.remove,c=t.errors;return Object(v.jsxs)(v.Fragment,{children:[e.map((function(a,t){return Object(v.jsxs)(b.a.Item,{label:"",required:!1,children:[Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},a),{},{noStyle:!0,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Ingresa la enfermedad o elimina este campo"}],children:Object(v.jsx)(m.a,{placeholder:"Ingresa enfermedad",style:{width:e.length>1?"90%":"100%"}})})),e.length>1?Object(v.jsx)(Y.a,{className:"dynamic-delete-button",onClick:function(){return r(a.name)}}):null]},a.key)})),Object(v.jsxs)(b.a.Item,{children:[Object(v.jsx)(O.a,{type:"dashed",onClick:function(){return n()},icon:Object(v.jsx)(W.a,{}),children:"Agregar Enfermedad Familiar"}),Object(v.jsx)(b.a.ErrorList,{errors:c})]})]})}})}),Object(v.jsx)(b.a.Item,{name:"enfermedades_medicas",label:"Enfermedades Medicas",rules:[{required:!1,message:"Ingresa tu universidad"}],children:Object(v.jsx)(b.a.List,{name:"enfermedades_medicas",children:function(e,a,t){var n=a.add,r=a.remove,c=t.errors;return Object(v.jsxs)(v.Fragment,{children:[e.map((function(a,t){return Object(v.jsxs)(b.a.Item,{label:"",required:!1,children:[Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},a),{},{noStyle:!0,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Ingresa la enfermedad o elimina este campo"}],children:Object(v.jsx)(m.a,{placeholder:"Ingresa enfermedad",style:{width:e.length>1?"90%":"100%"}})})),e.length>1?Object(v.jsx)(Y.a,{className:"dynamic-delete-button",onClick:function(){return r(a.name)}}):null]},a.key)})),Object(v.jsxs)(b.a.Item,{children:[Object(v.jsx)(O.a,{type:"dashed",onClick:function(){return n()},icon:Object(v.jsx)(W.a,{}),children:"Agregar Enfermedad Medica"}),Object(v.jsx)(b.a.ErrorList,{errors:c})]})]})}})}),Object(v.jsx)(b.a.Item,{name:"tratamiento_actual",label:"Tratamiento actual",rules:[{required:!1,message:"Ingresa tu universidad"}],children:Object(v.jsx)(b.a.List,{name:"tratamiento_actual",children:function(e,a,t){var n=a.add,r=a.remove,c=t.errors;return Object(v.jsxs)(v.Fragment,{children:[e.map((function(a,t){return Object(v.jsxs)(b.a.Item,{label:"",required:!1,children:[Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},a),{},{noStyle:!0,validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Ingresa la enfermedad o elimina este campo"}],children:Object(v.jsx)(m.a,{placeholder:"Ingresa enfermedad",style:{width:e.length>1?"90%":"100%"}})})),e.length>1?Object(v.jsx)(Y.a,{className:"dynamic-delete-button",onClick:function(){return r(a.name)}}):null]},a.key)})),Object(v.jsxs)(b.a.Item,{children:[Object(v.jsx)(O.a,{type:"dashed",onClick:function(){return n()},icon:Object(v.jsx)(W.a,{}),children:"Agregar Tratamiento"}),Object(v.jsx)(b.a.ErrorList,{errors:c})]})]})}})}),Object(v.jsx)(b.a.Item,{labelCol:{span:6},wrapperCol:{offset:6,span:16},children:Object(v.jsxs)(J.a,{children:[Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:e.paciente?"Guardar":"Registrar"}),e.setAdding&&Object(v.jsx)(O.a,{onClick:function(){return e.setAdding(!1)},children:"Cancelar"})]})})]})]})}function Fr(e){var a=Object(n.useState)(!0),t=Object(U.a)(a,2),r=t[0],c=t[1],s=Object(n.useState)(""),i=Object(U.a)(s,2),o=i[0],l=i[1],d=Object(n.useState)([]),j=Object(U.a)(d,2),b=j[0],h=j[1],x=Object(n.useState)(""),y=Object(U.a)(x,2),C=y[0],I=y[1],S=Object(n.useState)({}),_=Object(U.a)(S,2),w=_[0],T=_[1],F=Object(n.useState)(!1),q=Object(U.a)(F,2),N=q[0],P=q[1],A=Object(n.useState)(!1),M=Object(U.a)(A,2),R=M[0],H=M[1];Object(n.useEffect)((function(){z()}),[]);var z=function(){var a=Object(g.a)(Object(f.a)().mark((function a(){var t;return Object(f.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,k("users/hospital/".concat(e.id_hospital));case 2:t=a.sent,D("pacientes/medicos",{medicos:t.map((function(e){return e._id}))}).then((function(e){h(e),c(!1)}));case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),L=[{title:"Rol",dataIndex:"rol",key:"rol",onFilter:function(e,a){return"Medico"===a.rol}},{title:"Avatar",dataIndex:"avatar",key:"avatar",render:function(e,a){var t=a.avatar;return t.length>9?Object(v.jsx)("img",{width:64,src:"https://api.recreamed.com/images/"+t,alt:"ProfilePic"}):Object(v.jsx)(Ke.a,{size:64,icon:Object(v.jsx)(p.a,{}),className:"btnIconCentered"})}},{title:"Nombre",dataIndex:"name",key:"name"},{title:"Medicos Asignados",dataIndex:"medicos_asignados",key:"medicos_asignados",render:function(e,a){var t=a.medicos_asignados;return Object(v.jsx)("ul",{children:t.map((function(e){return Object(v.jsx)("li",{children:e.name},e._id)}))})}},{title:"Correo",dataIndex:"email",key:"email"},{title:"Telefono",dataIndex:"telefono",key:"telefono"},{title:"Acciones",key:"detalles",render:function(e,a){return Object(v.jsxs)(J.a,{size:"middle",children:[Object(v.jsx)(O.a,{onClick:function(){T(a),P(!0)},children:"Detalles"}),Object(v.jsx)(ue.a,{title:"Borrar Paciente",description:"Esta seguro que quiere eliminar al paciente?",onConfirm:function(){return function(e){var a=b.filter((function(a){return a._id!==e}));E("users/remove/".concat(e)).then((function(e){h(a)}))}(a._id)},onCancel:function(e){return console.log(e)},okText:"Si",cancelText:"No",children:Object(v.jsx)(O.a,{danger:!0,children:"Eliminar"})})]})}}],V=b.filter((function(e){return e.name.toLowerCase().includes(C.toLowerCase())})),B={width:"50%",height:"50px",textAlign:"center",display:"inline-flex",justifyContent:"center",alignItems:"center"};function G(){return Object(v.jsx)("div",{children:R?Object(v.jsx)(Er,{paciente:w,setAdding:H}):Object(v.jsx)(u.a,{bordered:!1,title:Object(v.jsxs)(J.a,{children:[Object(v.jsx)("h4",{children:"Detalles del paciente "})," ",Object(v.jsx)(O.a,{type:"primary",ghost:!0,onClick:H,shape:"circle",icon:Object(v.jsx)(Ge.a,{}),title:"Editar",className:"btnIconCentered"})]}),children:["rol","name","email","telefono","calle","municipio","estado","codigopostal","alcohol","ciudad","colonia","cuales_drogas","diagnostico","drogas","edad","escolaridad","estado_civil","fuma","lugar_de_nacimiento","numexterior","numinterior","ocupacion","peso","sexo","talla"].map((function(e){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(u.a.Grid,{style:B,children:e}),Object(v.jsx)(u.a.Grid,{style:B,size:"small",children:w[e]})]})}))})})}return r?Object(v.jsx)(se,{}):Object(v.jsxs)("div",{children:[Object(v.jsxs)("h6",{children:["Pacientes de ",e.hospital]}),Object(v.jsx)(m.a,{style:{width:"20em"},placeholder:"Buscar Paciente",value:o,onChange:function(e){l(e.target.value),I(e.target.value)},addonAfter:Object(v.jsx)(hn.a,{})}),Object(v.jsx)(ba.a,{dataSource:V,columns:L,pagination:!1}),Object(v.jsx)(le.a,{width:800,open:N,onOk:function(){P(!1)},onCancel:function(){P(!1),H(!1)},destroyOnClose:!0,children:Object(v.jsx)(G,{})})]})}var qr=function(e){console.log(e)};function Nr(){return R.forEach((function(e){e.label=e.nombre,e.key=e._id,e.children=Object(v.jsx)(Fr,{hospital:e.nombre,id_hospital:e._id})})),Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsx)("h4",{children:"Pacientes de los diferentes hospitaels"}),Object(v.jsx)(fe.a,{defaultActiveKey:"1",items:R,onChange:qr})]})}function Dr(){var e=[{label:"Pacientes",key:"item-1",children:Object(v.jsx)(Nr,{})},{label:"Registrar",key:"item-2",children:Object(v.jsx)(Er,{})}];return Object(v.jsx)("div",{children:Object(v.jsx)(fe.a,{items:e,tabPosition:"left"})})}var Pr=t(801),Ar=Z.a.Option;function Mr(){var e=b.a.useForm(),a=Object(U.a)(e,1)[0],t=Object(v.jsx)(b.a.Item,{name:"prefix",noStyle:!0,children:Object(v.jsx)(Z.a,{style:{width:70},children:Object(v.jsx)(Ar,{value:"+52",children:"+52"})})}),n=Object(v.jsx)(b.a.Item,{name:"suffix",noStyle:!0,children:Object(v.jsxs)(Z.a,{style:{width:70},children:[Object(v.jsx)(Ar,{value:"USD",children:"$"}),Object(v.jsx)(Ar,{value:"CNY",children:"\xa5"})]})});return Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsx)("h1",{children:"Registrar doctor"}),Object(v.jsx)("br",{}),Object(v.jsxs)(b.a,{labelCol:{span:6},wrapperCol:{span:16},form:a,name:"register",onFinish:function(e){e.avatar="https://",e.estatus="1",e.rol="Medico",delete e.confirm,delete e.prefix,delete e.agreement,console.log(e),fetch(C+"register",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),l.a.success(e.message||e.error)})).catch((function(e){return console.error("Error:",e)}))},initialValues:{residence:["zhejiang","hangzhou","xihu"],prefix:"52"},scrollToFirstError:!0,children:[Object(v.jsx)(b.a.Item,{name:"email",label:"Correo",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"password",label:"Contrase\xf1a",rules:[{required:!0,message:"Por favor ingrese su contrase\xf1a!"}],hasFeedback:!0,children:Object(v.jsx)(m.a.Password,{})}),Object(v.jsx)(b.a.Item,{name:"confirm",label:"Confirmar contrase\xf1a",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var a=e.getFieldValue;return{validator:function(e,t){return t&&a("password")!==t?Promise.reject(new Error("Las contrase\xf1as deben coincidir!")):Promise.resolve()}}}],children:Object(v.jsx)(m.a.Password,{})}),Object(v.jsx)(b.a.Item,{name:"telefono",label:"Telefono",rules:[{required:!0,message:"Please input your phone number!"}],children:Object(v.jsx)(m.a,{addonBefore:t,style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{name:"id_sucursal",label:"Id Sucursal",rules:[{required:!0,message:"Ingresa el ID de la sucursal"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"id_medicoasignado",label:"Id Medico Asignado",rules:[{required:!0,message:"Ingresa el ID del medico "}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"name",label:"Nombre",rules:[{required:!0,message:"Ingresa Nombre y apellidos"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"cedula",label:"Cedula",rules:[{required:!0,message:"Ingresa cedula"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"calle",label:"Calle",rules:[{required:!0,message:"Ingresa calle",whitespace:!0}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"numexterior",label:"Num Exterior",rules:[{required:!0,message:"Ingresa numero exterior"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"numinterior",label:"Num Interior",rules:[{required:!0,message:"Ingresa numinterior"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Colonia",name:"colonia",rules:[{required:!0,message:"Please input your colobnia!"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"estado",label:"Estado",rules:[{required:!0,message:"Apellido materno"}],children:Object(v.jsx)(Z.a,{placeholder:"Elije tu estado",showSearch:!0,children:M.map((function(e){return Object(v.jsx)(Ar,{value:e,children:e})}))})}),Object(v.jsx)(b.a.Item,{name:"municipio",label:"Municipio",rules:[{required:!0,message:"Ingresa tu municipio"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"codigopostal",label:"Codigo Postal",rules:[{required:!0,message:"Ingresa codigopostal"}],children:Object(v.jsx)(Be.a,{addonAfter:n,style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{name:"certificacion",label:"Certificacion",rules:[{required:!0,message:"Ingresa tu certificacion"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"universidad",label:"Universidad",rules:[{required:!0,message:"Ingresa tu universidad"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{wrapperCol:{offset:6,span:16},children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Registrar"})})]})]})}function Rr(e){var a=Object(n.useState)([]),t=Object(U.a)(a,2),r=t[0],c=t[1],s=Object(n.useState)(!1),i=Object(U.a)(s,2),o=i[0],l=i[1];Object(n.useEffect)((function(){d()}),[]);var d=function(){k("users_by_rol/Medico").then((function(e){c(e)})).finally((function(){return l(!1)}))},j=[{title:"Avatar",dataIndex:"avatar",key:"avatar",render:function(e,a){var t=a.avatar;return t.length>9?Object(v.jsx)("img",{width:64,src:"https://api.recreamed.com/images/"+t,alt:"ProfilePic"}):Object(v.jsx)(Ke.a,{size:64,icon:Object(v.jsx)(p.a,{}),className:"btnIconCentered"})}},{title:"Nombre",dataIndex:"name",key:"name"},{title:"Correo",dataIndex:"email",key:"email"},{title:"Telefono",dataIndex:"telefono",key:"telefono"}],u=function(e){var a=[];return r.forEach((function(t){t.horarios.forEach((function(n){a.includes(t)||n.sucursal._id!==e||a.push(t)}))})),console.log("Founds for ".concat(e,": "),a),a}(e.id_hospital);return o?Object(v.jsx)(se,{}):Object(v.jsxs)("div",{children:[Object(v.jsxs)("h6",{children:["Doctores del hospital ",e.hospital]}),Object(v.jsx)(ba.a,{dataSource:u,columns:j})]})}function Hr(){return R.forEach((function(e){e.label=e.nombre,e.key=e._id,e.children=Object(v.jsx)(Rr,{hospital:e.nombre,id_hospital:e._id})})),Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{className:"spacedTitle",children:"Recepcionistas de los diferentes hospitales"}),Object(v.jsx)(fe.a,{defaultActiveKey:"1",items:R})]})}var zr=[{key:"1",label:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Pr.a,{})," Medicos"]}),children:Object(v.jsx)(Hr,{})},{key:"2",label:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Ft.a,{})," Registrar Medico"]}),children:Object(v.jsx)(Mr,{})}],Lr=function(e){console.log(e)};function Vr(){return Object(v.jsx)("div",{children:Object(v.jsx)(fe.a,{defaultActiveKey:"1",items:zr,onChange:Lr,tabPosition:"left"})})}function Br(){return Object(v.jsx)("div",{children:"Perfil de la sucursal"})}var Gr=["key","name"],Ur=Z.a.Option,Zr=ve.a.Dragger,Jr={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:14}}},Yr={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};function Wr(e){var a=b.a.useForm(),t=Object(U.a)(a,1)[0],r=Object(n.useState)([]),c=Object(U.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(!0),u=Object(U.a)(o,2),h=u[0],p=u[1],x=Object(n.useState)(e.perfil.avatar),f=Object(U.a)(x,2),g=f[0],C=f[1],I={name:"file",multiple:!1,action:y+"imagenes/upload",onChange:function(e){var a=e.file.status;"uploading"!==a&&console.log(e.file,e.fileList),"done"===a?(l.a.success("".concat(e.file.name," file uploaded successfully.")),console.log("New Files: ",e.file.response.file),C(e.file.response.file)):"error"===a&&l.a.error("".concat(e.file.name," file upload failed."))},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}};Object(n.useEffect)((function(){console.log("received Medic: ",e.perfil),k("sucursales").then((function(e){i(e),p(!1)}))}),[]);var S=Object(v.jsx)(b.a.Item,{name:"prefix",noStyle:!0,children:Object(v.jsx)(Z.a,{style:{width:70},children:Object(v.jsx)(Ur,{value:"+52",children:"+52"})})});return Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"Editar perfil"}),Object(v.jsx)("br",{}),Object(v.jsxs)(Zr,Object(B.a)(Object(B.a)({},I),{},{children:[Object(v.jsx)("p",{className:"ant-upload-drag-icon",children:Object(v.jsx)(ye.a,{})}),Object(v.jsx)("p",{className:"ant-upload-text",children:"Arrastra la imagen de perfil o click ara buscar"}),Object(v.jsx)("p",{className:"ant-upload-hint",children:"Selecciona archivos en formato png, jpeg o webp"})]})),Object(v.jsx)("br",{}),Object(v.jsx)(b.a,Object(B.a)(Object(B.a)({},Jr),{},{form:t,name:"register",onFinish:function(a){a.avatar=g,console.log("ready to send",a),fetch(y+"users/updateUser/"+e.perfil._id,{method:"PUt",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){console.log("Success:",a),a.message&&"Usuario actualizado correctamente"===a.message?e.setEditing(!1):l.a.error(a.error)})).catch((function(e){return console.error("Error:",e)}))},initialValues:e.perfil,scrollToFirstError:!0,children:Object(v.jsxs)(d.a,{children:[Object(v.jsxs)(j.a,{span:11,children:[Object(v.jsx)(b.a.Item,{name:"name",label:"Nombre",rules:[{required:!0,message:"Ingresa Nombre y apellidos"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"email",label:"Correo",rules:[{type:"email",message:"Ingresa un corrreo electronico valido"},{required:!0,message:"Please input your E-mail!"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"telefono",label:"Telefono",rules:[{required:!0,message:"Ingresa el numero de telefono correcto"}],children:Object(v.jsx)(m.a,{addonBefore:S,style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{label:"horarios",rules:[{required:!0,message:"Ingresa al menos un horario"}],children:Object(v.jsx)(b.a.List,{name:"horarios",label:"horarios list",children:function(e,a){var t=a.add,n=a.remove;return Object(v.jsxs)(v.Fragment,{children:[e.map((function(e){var a=e.key,t=e.name,r=Object(G.a)(e,Gr);return Object(v.jsxs)(J.a,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"sucursal"],rules:[{required:!0,message:"Elije Sucursal"}],children:Object(v.jsx)(Z.a,{placeholder:"Elije Sucursal",style:{width:"120px"},children:h?"Cargando":s.map((function(e){return Object(v.jsx)(Ur,{value:e._id,children:e.nombre})}))})})),Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"horario"],rules:[{required:!0,message:"Missing last name"}],children:Object(v.jsx)(m.a,{placeholder:"Horario"})})),Object(v.jsx)(Y.a,{onClick:function(){return n(t)}})]},a)})),Object(v.jsx)(b.a.Item,{children:Object(v.jsx)(O.a,{type:"dashed",onClick:function(){return t()},block:!0,icon:Object(v.jsx)(W.a,{}),children:"Agregar Horario"})})]})}})})]}),Object(v.jsxs)(j.a,{span:12,children:[Object(v.jsx)(b.a.Item,{name:"cedula",label:"Cedula",rules:[{required:!1,message:"Ingresa cedula"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"certificacion",label:"Certificacion",rules:[{required:!1,message:"Ingresa tu certificacion"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"universidad",label:"Universidad",rules:[{required:!1,message:"Ingresa tu universidad"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},Yr),{},{children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Guardar"})}))]})]})}))]})}function $r(){var e=Object(n.useState)([]),a=Object(U.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)(!1),s=Object(U.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(!0),b=Object(U.a)(l,2),m=b[0],h=b[1];Object(n.useEffect)((function(){x()}),[]),Object(n.useEffect)((function(){x()}),[i]);var x=function(){fetch(y+"userByMail/"+w.email).then((function(e){return e.json()})).then((function(e){console.log(e),r(e[0]),h(!1)}))},C=function(){var e=Object(g.a)(Object(f.a)().mark((function e(a){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.horarios.forEach((function(e){e.sucursal=e.sucursal._id})),console.log("Horarios before edit profile: ",a.horarios),o(!0),console.log("Editar medico: ",a);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),I=function(){return Object(v.jsxs)(d.a,{children:[Object(v.jsxs)(j.a,{span:8,offset:4,children:[t.avatar.length>9?Object(v.jsx)(ra.a,{style:{borderRadius:12},width:256,src:"https://api.recreamed.com/images/"+t.avatar}):Object(v.jsx)(Ke.a,{size:128,icon:Object(v.jsx)(p.a,{}),style:{marginLeft:80},className:"btnIconCentered"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsxs)("p",{className:"nombre",children:[" ",t.name," "]}),Object(v.jsxs)("p",{className:"datos",children:[" ",t.rol," "]}),Object(v.jsxs)("p",{className:"datos",children:["Correo: ",t.email," "]}),Object(v.jsxs)("p",{className:"datos",children:["Telefono: ",t.telefono," "]})]}),Object(v.jsxs)(j.a,{span:7,offset:1,children:[Object(v.jsx)(u.a,{title:"Horarios",style:{borderRadius:12},children:t.horarios.map((function(e){return Object(v.jsx)(u.a.Grid,{style:{width:"100%"},children:Object(v.jsxs)(d.a,{align:"middle",children:[Object(v.jsx)(j.a,{span:6,offset:4,children:Object(v.jsx)("img",{width:64,src:"https://api.recreamed.com/images/"+e.sucursal.logo,alt:"Logo"})}),Object(v.jsxs)(j.a,{span:10,children:[e.sucursal.nombre," ",Object(v.jsx)("br",{})," ",e.horario]})]})})}))}),Object(v.jsx)("br",{})]})]})};return Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsxs)(J.a,{children:[Object(v.jsx)("h3",{children:"PERFIL"}),Object(v.jsx)(O.a,{onClick:function(){return C(t)},type:"primary",shape:"circle",icon:Object(v.jsx)(Fe.a,{}),className:"btnIconCentered"})]}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),m?Object(v.jsx)(se,{}):Object(v.jsx)(u.a,{style:{borderRadius:16},children:i?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Wr,{perfil:t,setEditing:o}),Object(v.jsx)(O.a,{onClick:function(){return o(!1)},children:"Cancelar"})]}):Object(v.jsx)(I,{})})]})}function Xr(e){var a=!e.balanceForEdit||0===Object.keys(e.balanceForEdit).length,t=Object(n.useState)([]),r=Object(U.a)(t,2),c=r[0],s=r[1],i=Object(n.useState)(!0),o=Object(U.a)(i,2),d=(o[0],o[1]),j=function(){e.setIsModalOpen(!1),e.setBalanceForEdit(null)};Object(n.useEffect)((function(){console.log("receivd for edit",e),e.balanceForEdit&&e.balanceForEdit.medico&&u(e.balanceForEdit.medico)}),[e.balanceForEdit]);var u=function(e){k("mispacientes/".concat(e)).then((function(e){e&&(e.forEach((function(e){e.value=e._id,e.label=e.name})),console.log("Pacientes: ",e),s(e))})).finally((function(){d(!1)}))};return Object(v.jsx)(le.a,{title:a?"Agregar ".concat(e.tipo):"Editar ".concat(e.tipo),open:e.isModalOpen,onOk:function(){e.setIsModalOpen(!1)},onCancel:j,destroyOnClose:!0,footer:[Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",form:"edit_balance",children:"Guardar"}),Object(v.jsx)(O.a,{onClick:j,children:"Cancelar"})],children:Object(v.jsxs)(b.a,{name:"edit_balance",labelCol:{span:8},wrapperCol:{span:16},initialValues:e.balanceForEdit,onFinish:function(t){t.tipo=e.tipo,console.log("Ready to send:",t),console.log("For Edit: ",e.balanceForEdit),a?D("balances/add",t).then((function(e){console.log(e),l.a.success(e.message||e.error)})).finally((function(){e.getIngresos(),e.setIsModalOpen(!1)})):q("/balances/update/".concat(e.balanceForEdit._id),t).then((function(a){e.getIngresos(),e.setBalanceForEdit({}),e.setIsModalOpen(!1)}))},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[Object(v.jsx)(b.a.Item,{label:"Monto",name:"monto",rules:[{required:!0,message:"Ingresa el monto"}],children:Object(v.jsx)(Be.a,{style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{label:"abono",name:"abono",rules:[{required:!0,message:"Ingresa el abobo"}],children:Object(v.jsx)(Be.a,{style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{label:"Forma de Pago",name:"forma_de_pago",children:Object(v.jsx)(Z.a,{options:[{value:"efectivo",label:"Efectivo"},{value:"tarjeta",label:"Tarjeta"},{value:"transferencia",label:"Transferencia"}]})}),a&&Object(v.jsxs)("div",{children:[Object(v.jsx)(b.a.Item,{label:"Estado",name:"estado",rules:[{required:!0,message:"Ingresa el monto"}],children:Object(v.jsx)(Z.a,{options:[{value:"pendiente",label:"Pendiente"},{value:"pagado",label:"Pagado"},{value:"pago parcial",label:"Pago parcial"}]})}),Object(v.jsx)(b.a.Item,{label:"Medico",name:"medico",children:Object(v.jsx)(Z.a,{options:e.medicosData,onChange:function(e){u(e)}})}),(!e.balanceForEdit||0===Object.keys(e.balanceForEdit).length)&&Object(v.jsxs)("div",{children:[Object(v.jsx)(b.a.Item,{label:"Concepto",name:"concepto",rules:[{required:!0,message:"Ingresa el concepto"}],children:Object(v.jsx)(m.a,{})}),"ingreso"===e.tipo&&Object(v.jsx)(b.a.Item,{label:"Paciente",name:"paciente",children:Object(v.jsx)(Z.a,{options:c})})]}),Object(v.jsx)(b.a.Item,{label:"Fecha y Hora",name:"fecha_hora",rules:[{required:!0,message:"Selecciona Fecha y Hora"}],children:Object(v.jsx)(oe.a,{showTime:!0,format:"DD-MM-YYYY HH:mm"})})," "]})]})})}var Qr=Ne.StyleSheet.create({titleContainer:{flexDirection:"row",justifyContent:"center",marginBottom:10},reportTitle:{fontSize:18,textAlign:"center",fontFamily:"Helvetica-Bold",textTransform:"uppercase"},subtitle:{fontSize:14,textAlign:"center",fontFamily:"Helvetica",marginBottom:20},text:{margin:10,fontSize:12,textAlign:"justify",fontFamily:"Helvetica"},sellerBuyerInfo:{flexDirection:"row",justifyContent:"space-between",marginBottom:10},infoTitle:{fontFamily:"Helvetica-Bold",fontSize:12},infoText:{fontFamily:"Helvetica",fontSize:12},table:{display:"table",width:"auto",marginTop:10,borderStyle:"solid",borderWidth:1,borderColor:"#bfbfbf"},tableRow:{margin:"auto",flexDirection:"row"},tableColHeader:{width:"25%",borderStyle:"solid",borderWidth:1,borderColor:"#bfbfbf",backgroundColor:"#f0f0f0",textAlign:"center",fontFamily:"Helvetica-Bold",fontSize:12,paddingTop:5,paddingBottom:5},tableCol:{width:"25%",borderStyle:"solid",borderWidth:1,borderColor:"#bfbfbf",textAlign:"center",fontFamily:"Helvetica",fontSize:10,paddingTop:5,paddingBottom:5},tableCellHeader:{margin:"auto",marginTop:5,marginBottom:5,flexDirection:"row"},total:{fontFamily:"Helvetica-Bold",fontSize:14,marginTop:30,textAlign:"right",paddingRight:50},page:{fontFamily:"Helvetica",fontSize:12,padding:40},header:{flexDirection:"row",alignItems:"center",borderBottom:"1pt solid #000",paddingBottom:10,marginBottom:10},logo:{width:80,height:"auto",marginRight:10},title:{fontSize:20,marginLeft:10},company:{fontSize:14,marginTop:5,marginLeft:10}});function Kr(e){var a=e.ingresos,t=e.logo,n=e.hospital;e.seller,e.buyer;console.log("Received for print ",a);var r=a[0].usuario,c=(void 0===r?{}:r).name,s=a[0].cita,i=(void 0===s?{}:s).usuario,o=(void 0===i?{}:i).name;return Object(v.jsx)(Ne.PDFViewer,{height:500,width:550,children:Object(v.jsx)(Ne.Document,{children:Object(v.jsx)(Ne.Page,{size:"A4",style:Qr.page,children:Object(v.jsxs)(Ne.View,{children:[Object(v.jsxs)(Ne.View,{style:Qr.header,children:[Object(v.jsx)(Ne.Image,{style:Qr.logo,src:t}),Object(v.jsxs)(Ne.View,{children:[Object(v.jsx)(Ne.Text,{style:Qr.title,children:"Nota de Venta"}),Object(v.jsxs)(Ne.Text,{style:Qr.company,children:[n," "]}),Object(v.jsxs)(Ne.Text,{style:Qr.company,children:[new Date(a[0].createdAt).toLocaleString()," "]})]})]}),Object(v.jsxs)(Ne.View,{style:Qr.sellerBuyerInfo,children:[Object(v.jsxs)(Ne.View,{children:[Object(v.jsx)(Ne.Text,{style:Qr.infoTitle,children:"Medico:"}),Object(v.jsx)(Ne.Text,{style:Qr.infoText,children:a[0].doctor.name})]}),Object(v.jsxs)(Ne.View,{children:[Object(v.jsx)(Ne.Text,{style:Qr.infoTitle,children:"Paciente:"}),c&&Object(v.jsx)(Ne.Text,{style:Qr.infoText,children:c}),o&&Object(v.jsx)(Ne.Text,{style:Qr.infoText,children:o})]})]}),Object(v.jsxs)(Ne.View,{style:Qr.table,children:[Object(v.jsxs)(Ne.View,{style:Qr.tableRow,children:[Object(v.jsx)(Ne.Text,{style:Qr.tableColHeader,children:"Concepto"}),Object(v.jsx)(Ne.Text,{style:Qr.tableColHeader,children:"Cantidad"}),Object(v.jsx)(Ne.Text,{style:Qr.tableColHeader,children:"Precio Unitario"}),Object(v.jsx)(Ne.Text,{style:Qr.tableColHeader,children:"Subtotal"})]}),a.map((function(e){return Object(v.jsxs)(Ne.View,{style:Qr.tableRow,children:[Object(v.jsx)(Ne.Text,{style:Qr.tableCol,children:e.concepto}),Object(v.jsx)(Ne.Text,{style:Qr.tableCol,children:"1"}),Object(v.jsxs)(Ne.Text,{style:Qr.tableCol,children:["$",e.monto.toFixed(2)]}),Object(v.jsxs)(Ne.Text,{style:Qr.tableCol,children:["$",e.monto.toFixed(2)]})]},e.id)}))]}),Object(v.jsxs)(Ne.Text,{style:Qr.total,children:["Total: $",a.reduce((function(e,a){return e+1*a.monto}),0).toFixed(2)]})]})})})})}var ec=Me.a.Text;function ac(){var e=Object(n.useState)(!0),a=Object(U.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)({}),s=Object(U.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(null),b=Object(U.a)(l,2),m=b[0],h=(b[1],Object(n.useState)([])),p=Object(U.a)(h,2),x=p[0],y=p[1],C=Object(n.useState)({}),I=Object(U.a)(C,2),S=I[0],_=I[1],T=Object(n.useState)([]),E=Object(U.a)(T,2),F=E[0],q=E[1],N=Object(n.useState)(!1),P=Object(U.a)(N,2),A=P[0],M=P[1],R=function(){M(!0)},z=Object(n.useState)(!1),L=Object(U.a)(z,2),V=L[0],B=L[1],G=Object(n.useState)(null),Z=Object(U.a)(G,2),J=Z[0],Y=Z[1],W=Object(n.useState)(null),$=Object(U.a)(W,2),X=$[0],Q=$[1],K=Object(n.useState)(!1),ee=Object(U.a)(K,2),ae=ee[0],te=ee[1],ne=Object(n.useState)(!1),re=Object(U.a)(ne,2),ce=re[0],ie=re[1],oe=Object(n.useState)(""),de=Object(U.a)(oe,2),je=(de[0],de[1]),ue=Object(n.useState)(""),be=Object(U.a)(ue,2),me=(be[0],be[1]);function he(e,a){return e.setMonth(e.getMonth()-a),e}Object(n.useEffect)((function(){Oe()}),[]);var Oe=function(){var e=Object(g.a)(Object(f.a)().mark((function e(){var a,t,n,c;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D("users/getMany/hospitals",{ids_hospitales:H});case 2:return(a=e.sent).forEach((function(e){e.label=e.name,e.value=e._id})),o(a),e.next=7,k("cortes/".concat(w._id)).then((function(e){return me(e.at(0).fecha_cierre),je(e.length>1?e.at(-1).fecha_cierre:he(new Date,3).toString()),e.length>1?e.at(-1).fecha_cierre:he(new Date,3)}));case 7:t=e.sent,n=a.map((function(e){return e._id})),c={fecha_inicio:t,medico:n},console.log(c),D("balances",c).then((function(e){console.log(e),e.forEach((function(e){e.doctor=e.medico,e.medico=e.medico._id,e.paciente&&(e.usuario=e.paciente,e.paciente=e.paciente._id)})),y(e)})).finally((function(){return r(!1)}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=[{title:"M\xe9dico",dataIndex:"medico",key:"createdAt",render:function(e,a){var t=a.doctor;return Object(v.jsx)(v.Fragment,{children:t.name})}},{title:"Tipo",dataIndex:"tipo",key:"tipo",render:function(e,a){var t=a.tipo,n=t&&"ingreso"===t?"geekblue":"volcano";return t?Object(v.jsx)(La.a,{color:n,children:t.toUpperCase()}):Object(v.jsx)(La.a,{color:n,children:"Indefinido"})}},{title:"Fecha",dataIndex:"fecha_hora",key:"fecha_hora",render:function(e,a){var t=a.fecha_hora;return Object(v.jsx)(v.Fragment,{children:new Date(t).toLocaleString()})},defaultSortOrder:"descend"},{title:"Monto",dataIndex:"monto",key:"monto",render:function(e,a){var t=a.monto;return Object(v.jsxs)(v.Fragment,{children:["$",t]})}},{title:"Abono",dataIndex:"abono",key:"abono",render:function(e,a){var t=a.abono;return t&&Object(v.jsxs)(v.Fragment,{children:["$",t]})}},{title:"Adeudo",dataIndex:"adeudo",key:"adeudo",render:function(e,a){return Object(v.jsxs)(v.Fragment,{children:["$",a.monto-a.abono]})}},{title:"Forma de pago",key:"forma_de_pago",dataIndex:"forma_de_pago",render:function(e,a){var t=a.forma_de_pago,n="efectivo"===t?"geekblue":"green";return Object(v.jsx)(La.a,{color:n,children:t.toUpperCase()})}},{title:"Paciente",key:"usuario",dataIndex:"usuario",render:function(e,a){return a.cita?Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[a.cita.usuario.name," ",Object(v.jsx)("span",{style:{fontSize:9},children:"Tomado de la cita"})]}):a.usuario?Object(v.jsx)(v.Fragment,{children:a.usuario.name}):Object(v.jsx)(ec,{type:"secondary",children:" Sin Paciente"})}},{title:"Factura",key:"Factura",dataIndex:"factura",render:function(e,a){return a.factura&&Object(v.jsx)(ut.a,{})}},{title:"Estado",key:"Estado",dataIndex:"estado",render:function(e,a){var t=a.abono===a.monto,n=t?"green":"volcano";return Object(v.jsxs)(La.a,{color:n,children:[" ",t?"PAGADO":"PENDIENTE"," "]})}},{title:"Acciones",key:"Editar",render:function(e,a){return Object(v.jsxs)("div",{style:{display:"flex",gap:2,flexDirection:"column"},children:[Object(v.jsx)(O.a,{size:"small",onClick:function(){return function(e){e.fecha_hora=In.a.utc(e.fecha_hora),_(e),R()}(a)},children:"Editar Monto"}),Object(v.jsx)(O.a,{size:"small",onClick:function(){q([a]),ie(!0)},children:"Imprimir Nota"})]})}}];return t?Object(v.jsx)(se,{}):Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsx)("h4",{children:"Ingresos de todos los medicos"}),Object(v.jsx)("br",{}),Object(v.jsx)(O.a,{ghost:!0,onClick:R,type:"primary",style:{marginBottom:22},children:"Agregar Nuevo Ingreso"}),Object(v.jsx)(O.a,{ghost:!0,onClick:function(){B(!0)},type:"primary",style:{marginBottom:22,marginLeft:6},children:"Agregar Nuevo Gasto"}),Object(v.jsx)(ba.a,{columns:pe,dataSource:x}),Object(v.jsx)("div",{style:{height:200}}),Object(v.jsx)(Xr,{tipo:"ingreso",balanceForEdit:S,setBalanceForEdit:_,setIsModalOpen:M,isModalOpen:A,getIngresos:Oe,medico:m,medicosData:i}),Object(v.jsx)(Xr,{tipo:"egreso",balanceForEdit:S,setBalanceForEdit:_,setIsModalOpen:B,isModalOpen:V,getIngresos:Oe,medico:m,medicosData:i}),Object(v.jsx)(le.a,{title:"Imprimir Nota de Venta",open:ce,onOk:function(){ie(!1),te(!1)},onCancel:function(){ie(!1),te(!1)},width:600,children:ae?Object(v.jsx)(Kr,{ingresos:F,logo:"https://api.recreamed.com/images/"+J,hospital:X,seller:"M\xe9dico: ",buyer:"Paciente: "}):Object(v.jsx)("div",{children:Object(v.jsx)(u.a,{title:"Selecciona un hospital",bordered:!1,children:w.horarios.map((function(e){return Object(v.jsx)(u.a.Grid,{style:{width:"100%"},onClick:function(){console.log(e.sucursal),Y(e.sucursal.logo),Q(e.sucursal.nombre),te(!0)},children:Object(v.jsxs)(d.a,{align:"middle",children:[Object(v.jsx)(j.a,{span:6,offset:4,children:Object(v.jsx)("img",{width:64,src:"https://api.recreamed.com/images/"+e.sucursal.logo,alt:"Logo"})}),Object(v.jsxs)(j.a,{span:10,children:[e.sucursal.nombre," ",Object(v.jsx)("br",{})," ",e.horario]})]})},e._id)}))})})})]})}var tc=Me.a.Text;function nc(e){console.log("Corte for details ",e.corte);var a=Object(n.useState)(!1),t=Object(U.a)(a,2),r=t[0],c=t[1],s=Object(n.useState)([]),i=Object(U.a)(s,2),o=(i[0],i[1]),l=Object(n.useState)({}),d=Object(U.a)(l,2),j=d[0],u=d[1],b=function(){e.setIsModalOpen(!1)};Object(n.useEffect)((function(){return m()}),[]),Object(n.useEffect)((function(){D("balances/ingresos/corte",e.corte).then((function(e){console.log(e);var a=0,t=0,n=e.length,r=0,c=0,s=[],i=[];e.forEach((function(e){e&&"pagado"===e.estado||e.monto===e.abono?(a+=e.monto,r++,i.push(e)):(t+=e.monto,c++,s.push(e))})),u({ingresosTotales:a,deudasTotales:t,cobrosTotales:n,pagados:r,pendientes:c,listOfDeudors:s,listOfPagados:i})}))}),[e.corte]);var m=function(){k("mispacientes/".concat(w._id)).then((function(e){o(e)}))},h=[{title:"Paciente",key:"cita.paciente",dataIndex:"cita",render:function(e,a){return a.cita?Object(v.jsx)(v.Fragment,{children:a.cita.usuario.name}):a.paciente?Object(v.jsx)(v.Fragment,{children:a.paciente.name}):Object(v.jsx)(tc,{type:"secondary",children:" Sin Paciente"})}},{title:"Monto",dataIndex:"monto",key:"monto",render:function(e,a){var t=a.monto;return Object(v.jsxs)(v.Fragment,{children:["$",t]})}},{title:"Fecha y Hora",dataIndex:"fecha_hora",key:"fecha_hora",render:function(e,a){var t=a.fecha_hora;return Object(v.jsx)(v.Fragment,{children:new Date(t).toLocaleString()})}}],p=function(){var e=Object(g.a)(Object(f.a)().mark((function e(){var a,t,n,r;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=gt.a.utils.json_to_sheet([j]),t={Sheets:{data:a},SheetNames:["data"]},n=gt.a.write(t,{bookType:"xlsx",type:"array"}),r=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),xt.saveAs(r,"corte"+(new Date).toLocaleDateString()+".xlsx");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)(le.a,{title:"Detalles del corte",open:e.isModalOpen,onCancel:b,destroyOnClose:!0,footer:[Object(v.jsx)(O.a,{onClick:function(){return c(!r)},children:r?"Cancelar Impresion":"Imprimir PDF"}),Object(v.jsx)(O.a,{onClick:function(){return p()},children:"Exportar a excel"}),Object(v.jsx)(O.a,{onClick:b,children:"Cerrar"})],children:r?Object(v.jsx)(yt,{totales:j,logo:"https://api.recreamed.com/images/bd71d914-1f11-4bea-81e5-81b55e11a4e1.jpg",company:"Hospital: ",seller:"M\xe9dico: ",buyer:"Paciente: "}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("h5",{children:["Total ingresos: ",Object(v.jsxs)("span",{style:{color:"#3277a8"},children:["$",j.ingresosTotales]})]}),j.listOfPagados&&j.listOfPagados.length>0&&Object(v.jsx)(ba.a,{dataSource:j.listOfPagados,columns:h,bordered:!1,size:"small"}),Object(v.jsx)("h5",{children:"Pendientes"}),Object(v.jsxs)("h5",{children:["Total: ",Object(v.jsxs)("span",{style:{color:"#eb3d43"},children:["$",j.deudasTotales]})]}),j.listOfDeudors&&j.listOfDeudors.length>0&&Object(v.jsx)(ba.a,{dataSource:j.listOfDeudors,columns:h,bordered:!1,size:"small"})]})})}function rc(e){var a=e.isModalOpen,t=e.handleOk,n=e.handleCancel;return Object(v.jsx)(le.a,{title:"Basic Modal",open:a,onOk:t,onCancel:n,footer:[Object(v.jsx)(O.a,{onClick:n,children:"Cancelar"}),Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",form:"create_corte_medic",children:"Guardar"})],children:Object(v.jsxs)(b.a,{name:"create_corte_medic",labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600},initialValues:{fecha_cierre:me()(new Date)},onFinish:function(e){console.log("Success:",e)},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[Object(v.jsx)(b.a.Item,{label:"Comentario",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Fecha Cierre",name:"fecha_cierre",rules:[{required:!0,message:"Please input your username!"}],children:Object(v.jsx)(oe.a,{defaultValue:me()()})})]})})}function cc(){var e=Object(n.useState)(null),a=Object(U.a)(e,2),t=(a[0],a[1],Object(n.useState)({})),r=Object(U.a)(t,2),c=(r[0],r[1],Object(n.useState)([])),s=Object(U.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(!0),d=Object(U.a)(l,2),j=(d[0],d[1]),u=Object(n.useState)([]),b=Object(U.a)(u,2),m=(b[0],b[1]),h=Object(n.useState)(!0),p=Object(U.a)(h,2),x=(p[0],p[1],Object(n.useState)([])),f=Object(U.a)(x,2),g=f[0],y=f[1],C=Object(n.useState)({}),I=Object(U.a)(C,2),S=I[0],_=I[1],T=Object(n.useState)(!1),E=Object(U.a)(T,2),F=E[0],q=E[1],N=Object(n.useState)(!1),P=Object(U.a)(N,2),A=P[0],M=P[1];Object(n.useEffect)((function(){R(),z(w._id)}),[]);var R=function(){D("users/getMany/hospitals",{ids_hospitales:H}).then((function(e){var a=e.map((function(e){return e._id}));e.forEach((function(e){e.value=e._id,e.label=e.name})),m(e),y(a)})).finally((function(){return j(!1)}))},z=function(e){k("cortes/".concat(e)).then((function(e){console.log("cortesData",e),o(e.reverse())})).finally((function(){j(!1)}))},L=[{title:"fecha y hora de Inicio",dataIndex:"fecha_inicio",key:"fecha_inicio",render:function(e,a){var t=a.fecha_inicio;return Object(v.jsxs)(v.Fragment,{children:[" ",new Date(t).toLocaleString()]})}},{title:"Fecha y hora de Cierre",dataIndex:"fecha_cierre",key:"fecha_cierre",render:function(e,a){var t=a.fecha_cierre;return Object(v.jsxs)(v.Fragment,{children:[" ",new Date(t).toLocaleString()]})}},{title:"Comentario",dataIndex:"comentario",key:"comentario"},{title:"Acciones",key:"Acciones",render:function(e,a){return Object(v.jsx)(J.a,{size:"middle",children:Object(v.jsx)(O.a,{onClick:function(){var e;(e=a).medico=g,_(e),q(!0)},children:"Ver Detalles"})})}}];return Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsx)("h4",{children:"Cortes de cada Medico"}),Object(v.jsx)("br",{}),Object(v.jsx)(O.a,{onClick:function(){M(!0)},type:"primary",style:{marginLeft:12},children:"Generar corte"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(ba.a,{columns:L,dataSource:i}),Object(v.jsx)("div",{style:{height:200}}),Object(v.jsx)(nc,{corte:S,isModalOpen:F,setIsModalOpen:q}),Object(v.jsx)(rc,{isModalOpen:A,handleOk:function(){M(!1)},handleCancel:function(){M(!1)}})]})}var sc=Z.a.Option;function ic(){var e=b.a.useForm(),a=Object(U.a)(e,1)[0],t=Object(v.jsx)(b.a.Item,{name:"prefix",noStyle:!0,children:Object(v.jsx)(Z.a,{style:{width:70},children:Object(v.jsx)(sc,{value:"+52",children:"+52"})})}),n=Object(v.jsx)(b.a.Item,{name:"suffix",noStyle:!0,children:Object(v.jsxs)(Z.a,{style:{width:70},children:[Object(v.jsx)(sc,{value:"USD",children:"$"}),Object(v.jsx)(sc,{value:"CNY",children:"\xa5"})]})});return Object(v.jsxs)("div",{className:"mainContainer",children:[Object(v.jsx)("h1",{children:"Registrar doctor"}),Object(v.jsx)("br",{}),Object(v.jsxs)(b.a,{labelCol:{span:6},wrapperCol:{span:16},form:a,name:"register",onFinish:function(e){e.avatar="https://",e.estatus="1",e.rol="Recepcion",delete e.confirm,delete e.prefix,delete e.agreement,console.log(e),fetch(C+"register",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),l.a.success(e.message||e.error)})).catch((function(e){return console.error("Error:",e)}))},initialValues:{residence:["zhejiang","hangzhou","xihu"],prefix:"52"},scrollToFirstError:!0,children:[Object(v.jsx)(b.a.Item,{name:"email",label:"Correo",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"password",label:"Contrase\xf1a",rules:[{required:!0,message:"Por favor ingrese su contrase\xf1a!"}],hasFeedback:!0,children:Object(v.jsx)(m.a.Password,{})}),Object(v.jsx)(b.a.Item,{name:"confirm",label:"Confirmar contrase\xf1a",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var a=e.getFieldValue;return{validator:function(e,t){return t&&a("password")!==t?Promise.reject(new Error("Las contrase\xf1as deben coincidir!")):Promise.resolve()}}}],children:Object(v.jsx)(m.a.Password,{})}),Object(v.jsx)(b.a.Item,{name:"telefono",label:"Telefono",rules:[{required:!0,message:"Please input your phone number!"}],children:Object(v.jsx)(m.a,{addonBefore:t,style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{name:"id_sucursal",label:"Id Sucursal",rules:[{required:!0,message:"Ingresa el ID de la sucursal"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"id_medicoasignado",label:"Id Medico Asignado",rules:[{required:!0,message:"Ingresa el ID del medico "}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"name",label:"Nombre",rules:[{required:!0,message:"Ingresa Nombre y apellidos"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"cedula",label:"Cedula",rules:[{required:!0,message:"Ingresa cedula"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"calle",label:"Calle",rules:[{required:!0,message:"Ingresa calle",whitespace:!0}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"numexterior",label:"Num Exterior",rules:[{required:!0,message:"Ingresa numero exterior"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"numinterior",label:"Num Interior",rules:[{required:!0,message:"Ingresa numinterior"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Colonia",name:"colonia",rules:[{required:!0,message:"Please input your colobnia!"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"estado",label:"Estado",rules:[{required:!0,message:"Apellido materno"}],children:Object(v.jsx)(Z.a,{placeholder:"Elije tu estado",showSearch:!0,children:M.map((function(e){return Object(v.jsx)(sc,{value:e,children:e})}))})}),Object(v.jsx)(b.a.Item,{name:"municipio",label:"Municipio",rules:[{required:!0,message:"Ingresa tu municipio"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"codigopostal",label:"Codigo Postal",rules:[{required:!0,message:"Ingresa codigopostal"}],children:Object(v.jsx)(Be.a,{addonAfter:n,style:{width:"100%"}})}),Object(v.jsx)(b.a.Item,{name:"certificacion",label:"Certificacion",rules:[{required:!0,message:"Ingresa tu certificacion"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"universidad",label:"Universidad",rules:[{required:!0,message:"Ingresa tu universidad"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{wrapperCol:{offset:6,span:16},children:Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Registrar"})})]})]})}function oc(e){var a=Object(n.useState)([]),t=Object(U.a)(a,2),r=t[0],c=t[1],s=Object(n.useState)(!1),i=Object(U.a)(s,2),o=i[0],l=i[1];Object(n.useEffect)((function(){d()}),[]);var d=function(){k("users_by_rol/Recepcion").then((function(e){c(e)})).finally((function(){return l(!1)}))},j=[{title:"Avatar",dataIndex:"avatar",key:"avatar",render:function(e,a){var t=a.avatar;return t.length>9?Object(v.jsx)("img",{width:64,src:"https://api.recreamed.com/images/"+t,alt:"ProfilePic"}):Object(v.jsx)(Ke.a,{size:64,icon:Object(v.jsx)(p.a,{}),className:"btnIconCentered"})}},{title:"Nombre",dataIndex:"name",key:"name"},{title:"Correo",dataIndex:"email",key:"email"},{title:"Telefono",dataIndex:"telefono",key:"telefono"}],u=function(e){var a=[];return r.forEach((function(t){t.horarios.forEach((function(n){a.includes(t)||n.sucursal._id!==e||a.push(t)}))})),console.log("Founds for ".concat(e,": "),a),a}(e.id_hospital);return o?Object(v.jsx)(se,{}):Object(v.jsxs)("div",{children:[Object(v.jsxs)("h6",{children:["Recepcionistas del hospital ",e.hospital]}),Object(v.jsx)(ba.a,{dataSource:u,columns:j})]})}function lc(){return R.forEach((function(e){e.label=e.nombre,e.key=e._id,e.children=Object(v.jsx)(oc,{hospital:e.nombre,id_hospital:e._id})})),Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{className:"spacedTitle",children:"Recepcionistas de los diferentes hospitales"}),Object(v.jsx)(fe.a,{defaultActiveKey:"1",items:R})]})}function dc(){return R.forEach((function(e){e.label=e.nombre,e.key=e._id,e.children=Object(v.jsx)(jc,{hospital:e.nombre,id_hospital:e._id})})),Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{className:"spacedTitle",children:"Recepcionistas de los diferentes hospitales"}),Object(v.jsx)(fe.a,{defaultActiveKey:"1",items:R})]})}function jc(e){var a=Object(n.useState)([]),t=Object(U.a)(a,2),r=t[0],c=t[1],s=Object(n.useState)(!1),i=Object(U.a)(s,2),o=i[0],l=i[1],d=Object(n.useState)(null),j=Object(U.a)(d,2),u=(j[0],j[1]),b=Object(n.useState)([]),m=Object(U.a)(b,2),h=m[0],O=m[1],p=Object(n.useState)(!0),x=Object(U.a)(p,2),y=(x[0],x[1],[{title:"Fecha",dataIndex:"createdAt",key:"createdAt",render:function(e,a){var t=a.createdAt;return Object(v.jsx)("div",{children:new Date(t).toLocaleDateString()})}},{title:"Hora de Entrada",dataIndex:"fecha_hora_entrada",key:"fecha_hora_entrada",render:function(e,a){var t=a.fecha_hora_entrada;return Object(v.jsx)("div",{children:new Date(t).toLocaleTimeString()})}},{title:"Hora de Salida",dataIndex:"fecha_hora_salida",key:"fecha_hora_salida",render:function(e,a){var t=a.fecha_hora_salida;return Object(v.jsx)("div",{children:new Date(t).toLocaleTimeString()})}}]);Object(n.useEffect)((function(){C()}),[]);var C=function(){k("users_by_rol/Recepcion").then((function(e){c(e)})).finally((function(){return l(!1)}))},I=function(e){var a=[];return r.forEach((function(t){t.horarios.forEach((function(n){a.includes(t)||n.sucursal._id!==e||(t.label=t.name,t.value=t._id,a.push(t))}))})),a}(e.id_hospital),S=function(){var e=Object(g.a)(Object(f.a)().mark((function e(a){var t;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("selected ".concat(a)),e.next=3,k("asistencias/".concat(a));case 3:t=e.sent,console.log(t),O(t),u(a);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return o?Object(v.jsx)(se,{}):Object(v.jsxs)("div",{children:[Object(v.jsxs)("h6",{children:["Recepcionistas del hospital ",e.hospital]}),Object(v.jsx)(Z.a,{style:{width:260},onChange:S,options:I}),Object(v.jsx)(ba.a,{columns:y,dataSource:h})]})}var uc=[{key:"1",label:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Pr.a,{})," Recepcionistas"]}),children:Object(v.jsx)(lc,{})},{key:"2",label:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Pr.a,{})," Horarios"]}),children:Object(v.jsx)(dc,{})},{key:"3",label:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Ft.a,{})," Registrar"]}),children:Object(v.jsx)(ic,{})}],bc=function(e){console.log(e)};function mc(){return Object(v.jsx)("div",{children:Object(v.jsx)(fe.a,{defaultActiveKey:"1",items:uc,onChange:bc,tabPosition:"left"})})}var hc=["key","name"],Oc=["key","name"],pc=Z.a.Option,xc=ve.a.Dragger,fc={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:14}}},gc={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};function vc(e){var a=b.a.useForm(),t=Object(U.a)(a,1)[0],r=Object(n.useState)([]),c=Object(U.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(!0),u=Object(U.a)(o,2),h=u[0],p=u[1],x=Object(n.useState)(e.medico?e.medico.avatar:"https://"),f=Object(U.a)(x,2),g=f[0],I=f[1],S={name:"file",multiple:!1,action:y+"imagenes/upload",onChange:function(e){var a=e.file.status;"uploading"!==a&&console.log(e.file,e.fileList),"done"===a?(l.a.success("".concat(e.file.name," file uploaded successfully.")),console.log("New Files: ",e.file.response.file),I(e.file.response.file)):"error"===a&&l.a.error("".concat(e.file.name," file upload failed."))},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}};Object(n.useEffect)((function(){console.log("received Medic: ",e.medico),k("sucursales").then((function(e){i(e),p(!1)}))}),[]);var _=Object(v.jsx)(b.a.Item,{name:"prefix",noStyle:!0,children:Object(v.jsx)(Z.a,{style:{width:70},children:Object(v.jsx)(pc,{value:"+52",children:"+52"})})});b.a.Item,Z.a;return Object(v.jsxs)("div",{children:[e.medico?Object(v.jsx)(v.Fragment,{}):Object(v.jsx)("h1",{children:"Registrar enfermero"}),Object(v.jsx)("br",{}),Object(v.jsxs)(xc,Object(B.a)(Object(B.a)({},S),{},{children:[Object(v.jsx)("p",{className:"ant-upload-drag-icon",children:Object(v.jsx)(ye.a,{})}),Object(v.jsx)("p",{className:"ant-upload-text",children:"Arrastra la imagen de perfil o click ara buscar"}),Object(v.jsx)("p",{className:"ant-upload-hint",children:"Selecciona archivos en formato png, jpeg o webp"})]})),Object(v.jsx)("br",{}),Object(v.jsx)(b.a,Object(B.a)(Object(B.a)({},fc),{},{form:t,name:"register",onFinish:e.medico?function(a){a.avatar=g,console.log("ready to send",a),fetch(y+"users/updateUser/"+e.medico._id,{method:"PUT",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){console.log("Success:",a),a.message&&"Usuario actualizado correctamente"===a.message?e.setIsModalVisible(!1):l.a.error(a.error)})).catch((function(e){return console.error("Error:",e)}))}:function(e){e.avatar=g,e.estatus="1",e.rol="Enfermero",delete e.confirm,delete e.prefix,console.log("ready to send",e),fetch(C+"register",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),e.message&&"Usuario creado correctamente"===e.message?window.location.href="enfermeros":l.a.error(e.error)})).catch((function(e){return console.error("Error:",e)}))},initialValues:e.medico,scrollToFirstError:!0,children:Object(v.jsxs)(d.a,{children:[Object(v.jsxs)(j.a,{span:11,children:[Object(v.jsx)(b.a.Item,{name:"name",label:"Nombre",rules:[{required:!0,message:"Ingresa Nombre y apellidos"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"email",label:"Correo",rules:[{type:"email",message:"Ingresa un corrreo electronico valido"},{required:!0,message:"Please input your E-mail!"}],children:Object(v.jsx)(m.a,{})}),e.medico?Object(v.jsx)(v.Fragment,{}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(b.a.Item,{name:"password",label:"Contrase\xf1a",rules:[{required:!0,message:"Por favor ingrese su contrase\xf1a!"}],hasFeedback:!0,children:Object(v.jsx)(m.a.Password,{})}),Object(v.jsx)(b.a.Item,{name:"confirm",label:"Confirmar contrase\xf1a",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var a=e.getFieldValue;return{validator:function(e,t){return t&&a("password")!==t?Promise.reject(new Error("Las contrase\xf1as deben coincidir!")):Promise.resolve()}}}],children:Object(v.jsx)(m.a.Password,{})})]}),Object(v.jsx)(b.a.Item,{name:"telefono",label:"Telefono",rules:[{required:!0,message:"Ingresa el numero de telefono correcto"}],children:Object(v.jsx)(m.a,{addonBefore:_,style:{width:"100%"}})})]}),Object(v.jsxs)(j.a,{span:11,children:[Object(v.jsx)(b.a.Item,{label:"horarios",rules:[{required:!0,message:"Ingresa al menos un horario"}],children:Object(v.jsx)(b.a.List,{name:"horarios",label:"horarios list",children:function(e,a){var t=a.add,n=a.remove;return Object(v.jsxs)(v.Fragment,{children:[e.map((function(e){var a=e.key,t=e.name,r=Object(G.a)(e,hc);return Object(v.jsxs)(J.a,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"sucursal"],rules:[{required:!0,message:"Elije Sucursal"}],children:Object(v.jsx)(Z.a,{placeholder:"Elije Sucursal",style:{width:"120px"},children:h?"Cargando":s.map((function(e){return Object(v.jsx)(pc,{value:e._id,children:e.nombre})}))})})),Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"horario"],rules:[{required:!1,message:"Missing last name"}],children:Object(v.jsx)(m.a,{placeholder:"Horario"})})),Object(v.jsx)(Y.a,{onClick:function(){return n(t)}})]},a)})),Object(v.jsx)(b.a.Item,{children:Object(v.jsx)(O.a,{type:"dashed",onClick:function(){return t()},block:!0,icon:Object(v.jsx)(W.a,{}),children:"Agregar Horario"})})]})}})}),Object(v.jsx)(b.a.Item,{name:"certificacion",label:"Certificacion",rules:[{required:!1,message:"Ingresa tu certificacion"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Universidades",rules:[{required:!0,message:"Ingresa al menos una universidad"}],children:Object(v.jsx)(b.a.List,{name:"universidades",label:"universidades list",children:function(e,a){var t=a.add,n=a.remove;return Object(v.jsxs)(v.Fragment,{children:[e.map((function(e){var a=e.key,t=e.name,r=Object(G.a)(e,Oc);return Object(v.jsxs)(J.a,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"universidad"],rules:[{required:!0,message:"Ingresa la universidad"}],children:Object(v.jsx)(m.a,{placeholder:"Universidad"})})),Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"carrera"],rules:[{required:!0,message:"Ingresa la carrera"}],children:Object(v.jsx)(m.a,{placeholder:"Carrera"})})),Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"cedula"],rules:[{required:!1,message:"Ingresa la cedula"}],children:Object(v.jsx)(m.a,{placeholder:"Cedula"})})),Object(v.jsx)(Y.a,{onClick:function(){return n(t)}})]},a)})),Object(v.jsx)(b.a.Item,{children:Object(v.jsx)(O.a,{type:"dashed",onClick:function(){return t()},block:!0,icon:Object(v.jsx)(W.a,{}),children:"Agregar Universidad"})})]})}})}),Object(v.jsx)(b.a.Item,{name:"especialidad",label:"Especialidad",rules:[{required:!1,message:"Ingresa especialidad"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsxs)(b.a.Item,Object(B.a)(Object(B.a)({},gc),{},{children:[e.setIsModalVisible&&Object(v.jsx)(O.a,{onClick:function(){return e.setIsModalVisible(!1)},style:{marginRight:6},children:"Cancelar"}),Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Guardar"})]}))]})]})}))]})}function yc(e){var a=Object(n.useState)([]),t=Object(U.a)(a,2),r=t[0],c=t[1],s=Object(n.useState)(!1),i=Object(U.a)(s,2),o=i[0],l=i[1];Object(n.useEffect)((function(){d()}),[]);var d=function(){k("users_by_rol/Enfermero").then((function(e){c(e)})).finally((function(){return l(!1)}))},j=[{title:"Avatar",dataIndex:"avatar",key:"avatar",render:function(e,a){var t=a.avatar;return t.length>9?Object(v.jsx)("img",{width:64,src:"https://api.recreamed.com/images/"+t,alt:"ProfilePic"}):Object(v.jsx)(Ke.a,{size:64,icon:Object(v.jsx)(p.a,{}),className:"btnIconCentered"})}},{title:"Nombre",dataIndex:"name",key:"name"},{title:"Correo",dataIndex:"email",key:"email"},{title:"Telefono",dataIndex:"telefono",key:"telefono"}],u=function(e){var a=[];return r.forEach((function(t){t.horarios.forEach((function(n){a.includes(t)||n.sucursal._id!==e||a.push(t)}))})),console.log("Founds for ".concat(e,": "),a),a}(e.id_hospital);return o?Object(v.jsx)(se,{}):Object(v.jsxs)("div",{children:[Object(v.jsxs)("h6",{children:["Enfermeros del hospital ",e.hospital]}),Object(v.jsx)(ba.a,{dataSource:u,columns:j})]})}function Cc(){return R.forEach((function(e){e.label=e.nombre,e.key=e._id,e.children=Object(v.jsx)(yc,{hospital:e.nombre,id_hospital:e._id})})),Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{className:"spacedTitle",children:"Enfermeros de los diferentes hospitales"}),Object(v.jsx)(fe.a,{defaultActiveKey:"1",items:R})]})}var Ic=[{key:"1",label:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Pr.a,{})," Enfermeros"]}),children:Object(v.jsx)(Cc,{})},{key:"3",label:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Ft.a,{})," Registrar"]}),children:Object(v.jsx)(vc,{})}],Sc=function(e){console.log(e)};function _c(){return Object(v.jsx)("div",{children:Object(v.jsx)(fe.a,{defaultActiveKey:"1",items:Ic,onChange:Sc,tabPosition:"left"})})}var wc=function(){localStorage.removeItem("sessionToken"),localStorage.removeItem("userType"),window.location.href="/"};function kc(){return Object(v.jsx)(ae.a,{bg:"primary",variant:"dark",expand:"lg",children:Object(v.jsxs)(te.a,{children:[Object(v.jsx)("img",{src:Ca,width:"40",height:"35",className:"d-inline-block align-top",alt:"Recreamed logo",style:{marginRight:6}}),Object(v.jsxs)(ae.a.Brand,{href:"#home",style:{fontFamily:"Poppins",color:"White"},children:["Bienvenido ",w.name]}),Object(v.jsx)(ae.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(v.jsx)(ae.a.Collapse,{id:"basic-navbar-nav",children:Object(v.jsxs)(ne.a,{className:"me-auto",children:[Object(v.jsx)(ne.a.Link,{href:"/",children:"Inicio"}),Object(v.jsx)(ne.a.Link,{href:"pacientes",children:"Pacientes"}),Object(v.jsx)(ne.a.Link,{href:"doctores",children:"Medicos"}),Object(v.jsx)(ne.a.Link,{href:"recepcionistas",children:"Recepcionistas"}),Object(v.jsx)(ne.a.Link,{href:"enfermeros",children:"Enfermeros"}),Object(v.jsx)(ne.a.Link,{href:"citas",children:"Citas"}),Object(v.jsx)(ne.a.Link,{href:"escalas",children:"Escalas"}),Object(v.jsx)(ne.a.Link,{href:"balances",children:"Balances"}),Object(v.jsx)(ne.a.Link,{href:"cortes",children:"Cortes"}),Object(v.jsx)(ne.a.Link,{href:"perfil",children:"Perfil"})]})}),Object(v.jsx)(ae.a.Collapse,{className:"justify-content-end",children:Object(v.jsx)(O.a,{onClick:wc,ghost:!0,children:"Cerrar Sesion"})})]})})}function Tc(){return Object(v.jsxs)(i.a,{children:[Object(v.jsx)(kc,{}),Object(v.jsxs)(o.c,{children:[Object(v.jsx)(o.a,{path:"/sucursal",children:Object(v.jsx)(Br,{})}),Object(v.jsx)(o.a,{path:"/recepcionistas",children:Object(v.jsx)(mc,{})}),Object(v.jsx)(o.a,{path:"/enfermeros",children:Object(v.jsx)(_c,{})}),Object(v.jsx)(o.a,{path:"/doctores",children:Object(v.jsx)(Vr,{})}),Object(v.jsx)(o.a,{path:"/citas",children:Object(v.jsx)(wr,{})}),Object(v.jsx)(o.a,{path:"/pacientes",children:Object(v.jsx)(Dr,{})}),Object(v.jsx)(o.a,{path:"/escalas",children:Object(v.jsx)(jt,{})}),Object(v.jsx)(o.a,{path:"/balances",children:Object(v.jsx)(ac,{})}),Object(v.jsx)(o.a,{path:"/cortes",children:Object(v.jsx)(cc,{})}),Object(v.jsx)(o.a,{path:"/perfil",children:Object(v.jsx)($r,{})}),Object(v.jsx)(o.a,{path:"/",children:Object(v.jsx)(Dr,{})})]})]})}var Ec=Z.a.Option,Fc=ve.a.Dragger,qc={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},Nc={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}};function Dc(e){var a=b.a.useForm(),t=Object(U.a)(a,1)[0],r=Object(n.useState)(null),c=Object(U.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(!0),u=Object(U.a)(o,2),h=u[0],p=u[1],x=Object(n.useState)(e.paciente?e.paciente.avatar:"https://"),I=Object(U.a)(x,2),S=I[0],_=I[1];Object(n.useEffect)((function(){k("/users_by_rol/Medico").then((function(e){i(e),p(!1)}))}),[]);var w={name:"file",multiple:!1,action:y+"imagenes/upload",onChange:function(e){var a=e.file.status;"uploading"!==a&&console.log(e.file,e.fileList),"done"===a?(l.a.success("".concat(e.file.name," file uploaded successfully.")),console.log("New Files: ",e.file.response.file),_(e.file.response.file)):"error"===a&&l.a.error("".concat(e.file.name," file upload failed."))},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}};function T(){return E.apply(this,arguments)}function E(){return(E=Object(g.a)(Object(f.a)().mark((function e(){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(y+"historias/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({historial:"Historia clinica al "+new Date})}).then((function(e){return e.json()})).then((function(e){return console.log("Story Created: ",e),e})).catch((function(e){return console.error("Error:",e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=function(){var e=Object(g.a)(Object(f.a)().mark((function e(a){var t,n;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:return t=e.sent,console.log("historia on Register: ",t),n={usuario:a,historia:t.id_historia,notas:[],recetas:[]},console.log("postBodyForExpedient: ",n),e.next=8,fetch(y+"expedientes/add",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("Exp on register pat:",e),l.a.success(e.message||e.error),e.message&&"Expediente creado correctamente"===e.message&&(window.location.href="/pacientes",console.log("Ready to navigate"))})).catch((function(e){return console.error("Error:",e)}));case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),q=function(){var a=Object(g.a)(Object(f.a)().mark((function a(t){var n;return Object(f.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.avatar=S,t.estatus="1",t.rol="Paciente",t.password=""+t.telefono,t.universidades=[],t.certificacion="",t.cedula="",t.horarios=[],t.responsable=e.paciente?e.paciente.responsable:{nombre:t.res_name,telefono:t.res_phone},delete t.prefix,delete t.res_name,delete t.res_phone,n=e.paciente?y+"users/updateUser/"+e.paciente._id:C+"register",console.log(t),console.log("url: ",n),a.next=17,fetch(n,{method:e.paciente?"PUT":"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){console.log("Create User Response:",a),l.a.success(a.message||a.error),e.paciente?console.log("Editing, not creating patient"):F(a.user_id)})).catch((function(e){return console.error("Error:",e)}));case 17:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),N=Object(v.jsx)(b.a.Item,{name:"prefix",noStyle:!0,children:Object(v.jsx)(Z.a,{style:{width:70},children:Object(v.jsx)(Ec,{value:"+52",children:"+52"})})});b.a.Item,Z.a;return Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"Registrar Usuario"}),Object(v.jsx)("br",{}),Object(v.jsxs)(Fc,Object(B.a)(Object(B.a)({},w),{},{children:[Object(v.jsx)("p",{className:"ant-upload-drag-icon",children:Object(v.jsx)(ye.a,{})}),Object(v.jsx)("p",{className:"ant-upload-text",children:"Arrastra la imagen de perfil o click ara buscar"}),Object(v.jsx)("p",{className:"ant-upload-hint",children:"Selecciona archivos en formato png, jpeg o webp"})]})),Object(v.jsx)("br",{}),Object(v.jsx)(b.a,{labelCol:{span:6},wrapperCol:{span:16},form:t,name:"register",onFinish:q,initialValues:e.paciente,scrollToFirstError:!0,children:Object(v.jsxs)(d.a,{children:[Object(v.jsxs)(j.a,{span:10,children:[Object(v.jsx)(b.a.Item,{name:"name",label:"Nombre",rules:[{required:!0,message:"Ingresa Nombre y apellidos"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.List,{name:"medicos_asignados",rules:[{validator:function(){var e=Object(g.a)(Object(f.a)().mark((function e(a,t){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&!(t.length<1)){e.next=2;break}return e.abrupt("return",Promise.reject(new Error("Ingrese al menos un medico")));case 2:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()}],children:function(e,a,t){var r=a.add,c=a.remove,i=t.errors;return Object(v.jsxs)(v.Fragment,{children:[e.map((function(a,t){return Object(n.createElement)(b.a.Item,Object(B.a)(Object(B.a)({},0===t?qc:Nc),{},{label:0===t?"Medico":"",required:!1,key:a.key}),Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},a),{},{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Ingrese nombre del medico o borre este campo."}],noStyle:!0,children:Object(v.jsx)(Z.a,{style:{marginLeft:36,width:"80%"},children:h?Object(v.jsx)(Ec,{value:"loading",children:"Cargando..."}):s.map((function(e){return Object(v.jsx)(Ec,{value:e._id,children:e.name})}))})})),e.length>1?Object(v.jsx)(Y.a,{style:{marginLeft:2},className:"dynamic-delete-button",onClick:function(){return c(a.name)}}):null)})),Object(v.jsxs)(b.a.Item,{children:[Object(v.jsx)(O.a,{type:"dashed",onClick:function(){return r()},style:{width:"100%",marginLeft:108},icon:Object(v.jsx)(W.a,{}),children:"Asignar Medico"}),Object(v.jsx)(b.a.ErrorList,{errors:i})]})]})}}),Object(v.jsx)(b.a.Item,{name:"email",label:"Correo",rules:[{type:"email",message:"Ingresa un correo electronico vaido!"},{required:!0,message:"Please input your E-mail!"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"telefono",label:"Telefono",rules:[{required:!0,message:"Please input your phone number!"}],children:Object(v.jsx)(m.a,{addonBefore:N,style:{width:"100%"}})}),Object(v.jsx)(ua.a,{children:"Responsable (opcional)"}),Object(v.jsx)(b.a.Item,{name:"res_name",label:"Nombre",rules:[{message:"Ingresa Nombre y apellidos"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"res_phone",label:"Telefono",rules:[{message:"Ingresa Nombre y apellidos"}],children:Object(v.jsx)(m.a,{})})]}),Object(v.jsxs)(j.a,{span:10,children:[Object(v.jsx)(b.a.Item,{name:"calle",label:"Calle",rules:[{required:!1,message:"Ingresa calle",whitespace:!0}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"numexterior",label:"Num Exterior",rules:[{required:!1,message:"Ingresa numero exterior"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"numinterior",label:"Num Interior",rules:[{required:!1,message:"Ingresa numinterior"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Colonia",name:"colonia",rules:[{required:!1,message:"Please input your colobnia!"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"estado",label:"Estado",rules:[{required:!0,message:"Apellido materno"}],children:Object(v.jsx)(Z.a,{placeholder:"Elije tu estado",showSearch:!0,children:M.map((function(e){return Object(v.jsx)(Ec,{value:e,children:e})}))})}),Object(v.jsx)(b.a.Item,{name:"municipio",label:"Municipio",rules:[{required:!0,message:"Ingresa tu municipio"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"codigopostal",label:"Codigo Postal",rules:[{required:!1,message:"Ingresa codigopostal"}],children:Object(v.jsx)(Be.a,{style:{width:"100%"}})}),Object(v.jsxs)(b.a.Item,{wrapperCol:{span:12},labelCol:{span:2},children:[e.setIsModalVisible&&Object(v.jsx)(O.a,{onClick:function(){return e.setIsModalVisible(!1)},style:{marginRight:8},children:"Cancelar"}),Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Registrar"})]})]})]})})]})}function Pc(){var e=Object(n.useState)({}),a=Object(U.a)(e,2),t=a[0],r=(a[1],Object(n.useState)(!1)),c=Object(U.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(!1),l=Object(U.a)(o,2),d=l[0],j=l[1],b=Object(n.useState)(!0),m=Object(U.a)(b,2),h=m[0],x=m[1],C=Object(n.useState)([]),I=Object(U.a)(C,2),S=I[0],_=I[1],w=Object(n.useState)(null),k=Object(U.a)(w,2),T=k[0],F=k[1];Object(n.useEffect)((function(){q()}),[]);var q=function(){fetch(y+"users_by_rol/Paciente").then((function(e){return e.json()})).then((function(e){console.log(e),_(e)})).finally((function(){return x(!1)}))},N=function(){var e=Object(g.a)(Object(f.a)().mark((function e(a){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(a);case 2:j(!0),console.log("Editar paciente: ",a);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),D=[{title:"Foto",dataIndex:"avatar",key:"avatar",render:function(e,a){var t=a.avatar;return t.lenght>12?Object(v.jsx)("img",{src:"https://api.recreamed.com/images/"+t,alt:"Logo",width:64}):Object(v.jsx)(Ke.a,{icon:Object(v.jsx)(p.a,{}),size:64,className:"btnIconCentered"})}},{title:"Nombre",dataIndex:"name",key:"name"},{title:"Correo",dataIndex:"email",key:"email"},{title:"Telefono",dataIndex:"telefono",key:"tel"},{title:"Opciones",key:"action",render:function(e,a){return Object(v.jsxs)(J.a,{size:"middle",children:[Object(v.jsx)(O.a,{size:"small",onClick:function(){N(a)},children:"Editar"}),Object(v.jsx)(ue.a,{title:"Seguro que quiere borrar este paciente?",onConfirm:function(){var e;E("/users/remove/"+(e=a)._id).then((function(){console.log("removed: ",e._id),q()}))},okText:"Si",cancelText:"No",children:Object(v.jsx)(O.a,{danger:!0,size:"small",children:"Borrar"})})]})}}],P={width:"50%",height:"50px",textAlign:"center",display:"inline-flex",justifyContent:"center",alignItems:"center"};function A(){return Object(v.jsx)("div",{children:Object(v.jsx)(u.a,{bordered:!1,children:Object.keys(t).map((function(e){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(u.a.Grid,{style:P,children:e}),Object(v.jsx)(u.a.Grid,{style:P,size:"small",children:t[e]})]})}))})})}return Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"Pacientes"}),h?Object(v.jsx)(se,{}):Object(v.jsx)(ba.a,{dataSource:S,columns:D}),Object(v.jsx)(le.a,{width:800,title:Object(v.jsx)("h4",{children:"Datos del paciente "}),open:s,onOk:function(){i(!1)},onCancel:function(){i(!1)},destroyOnClose:!0,children:Object(v.jsx)(A,{})}),Object(v.jsx)(le.a,{width:1e3,title:Object(v.jsx)("h4",{children:"Editar Paciente"}),open:d,onOk:function(){j(!1)},onCancel:function(){j(!1)},destroyOnClose:!0,footer:[],children:Object(v.jsx)(Dc,{paciente:T,setIsModalVisible:j})})]})}var Ac=function(e){console.log(e)},Mc=[{key:"1",label:"Pacientes",children:Object(v.jsx)(Pc,{})},{key:"2",label:"Registrar Paciente",children:Object(v.jsx)(Dc,{})}];function Rc(){return Object(v.jsx)("div",{style:{marginTop:6},children:Object(v.jsx)(fe.a,{tabPosition:"left",defaultActiveKey:"1",items:Mc,onChange:Ac})})}var Hc=["key","name"],zc=Z.a.Option,Lc=ve.a.Dragger,Vc={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:14}}},Bc={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};function Gc(e){var a=b.a.useForm(),t=Object(U.a)(a,1)[0],r=Object(n.useState)([]),c=Object(U.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(!0),u=Object(U.a)(o,2),h=u[0],p=u[1],x=Object(n.useState)(e.medico?e.medico.avatar:"https://"),f=Object(U.a)(x,2),g=f[0],I=f[1],S={name:"file",multiple:!1,action:y+"imagenes/upload",onChange:function(e){var a=e.file.status;"uploading"!==a&&console.log(e.file,e.fileList),"done"===a?(l.a.success("".concat(e.file.name," file uploaded successfully.")),console.log("New Files: ",e.file.response.file),I(e.file.response.file)):"error"===a&&l.a.error("".concat(e.file.name," file upload failed."))},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}};Object(n.useEffect)((function(){console.log("received Medic: ",e.medico),k("sucursales").then((function(e){i(e),p(!1)}))}),[]);var _=Object(v.jsx)(b.a.Item,{name:"prefix",noStyle:!0,children:Object(v.jsx)(Z.a,{style:{width:70},children:Object(v.jsx)(zc,{value:"+52",children:"+52"})})});b.a.Item,Z.a;return Object(v.jsxs)("div",{children:[e.medico?Object(v.jsx)(v.Fragment,{}):Object(v.jsx)("h1",{children:"Registrar doctor"}),Object(v.jsx)("br",{}),Object(v.jsxs)(Lc,Object(B.a)(Object(B.a)({},S),{},{children:[Object(v.jsx)("p",{className:"ant-upload-drag-icon",children:Object(v.jsx)(ye.a,{})}),Object(v.jsx)("p",{className:"ant-upload-text",children:"Arrastra la imagen de perfil o click ara buscar"}),Object(v.jsx)("p",{className:"ant-upload-hint",children:"Selecciona archivos en formato png, jpeg o webp"})]})),Object(v.jsx)("br",{}),Object(v.jsx)(b.a,Object(B.a)(Object(B.a)({},Vc),{},{form:t,name:"register",onFinish:e.medico?function(a){a.avatar=g,console.log("ready to send",a),fetch(y+"users/updateUser/"+e.medico._id,{method:"PUT",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){console.log("Success:",a),a.message&&"Usuario actualizado correctamente"===a.message?e.setIsModalVisible(!1):l.a.error(a.error)})).catch((function(e){return console.error("Error:",e)}))}:function(e){e.avatar=g,e.estatus="1",e.rol="Medico",delete e.confirm,delete e.prefix,console.log("ready to send",e),fetch(C+"register",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),e.message&&"Usuario creado correctamente"===e.message?window.location.href="doctores":l.a.error(e.error)})).catch((function(e){return console.error("Error:",e)}))},initialValues:e.medico,scrollToFirstError:!0,children:Object(v.jsxs)(d.a,{children:[Object(v.jsxs)(j.a,{span:11,children:[Object(v.jsx)(b.a.Item,{name:"name",label:"Nombre",rules:[{required:!0,message:"Ingresa Nombre y apellidos"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"email",label:"Correo",rules:[{type:"email",message:"Ingresa un corrreo electronico valido"},{required:!0,message:"Please input your E-mail!"}],children:Object(v.jsx)(m.a,{})}),e.medico?Object(v.jsx)(v.Fragment,{}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(b.a.Item,{name:"password",label:"Contrase\xf1a",rules:[{required:!0,message:"Por favor ingrese su contrase\xf1a!"}],hasFeedback:!0,children:Object(v.jsx)(m.a.Password,{})}),Object(v.jsx)(b.a.Item,{name:"confirm",label:"Confirmar contrase\xf1a",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var a=e.getFieldValue;return{validator:function(e,t){return t&&a("password")!==t?Promise.reject(new Error("Las contrase\xf1as deben coincidir!")):Promise.resolve()}}}],children:Object(v.jsx)(m.a.Password,{})})]}),Object(v.jsx)(b.a.Item,{name:"telefono",label:"Telefono",rules:[{required:!0,message:"Ingresa el numero de telefono correcto"}],children:Object(v.jsx)(m.a,{addonBefore:_,style:{width:"100%"}})})]}),Object(v.jsxs)(j.a,{span:11,children:[Object(v.jsx)(b.a.Item,{label:"horarios",rules:[{required:!0,message:"Ingresa al menos un horario"}],children:Object(v.jsx)(b.a.List,{name:"horarios",label:"horarios list",children:function(e,a){var t=a.add,n=a.remove;return Object(v.jsxs)(v.Fragment,{children:[e.map((function(e){var a=e.key,t=e.name,r=Object(G.a)(e,Hc);return Object(v.jsxs)(J.a,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"sucursal"],rules:[{required:!0,message:"Elije Sucursal"}],children:Object(v.jsx)(Z.a,{placeholder:"Elije Sucursal",style:{width:"120px"},children:h?"Cargando":s.map((function(e){return Object(v.jsx)(zc,{value:e._id,children:e.nombre})}))})})),Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"horario"],rules:[{required:!1,message:"Missing last name"}],children:Object(v.jsx)(m.a,{placeholder:"Horario"})})),Object(v.jsx)(Y.a,{onClick:function(){return n(t)}})]},a)})),Object(v.jsx)(b.a.Item,{children:Object(v.jsx)(O.a,{type:"dashed",onClick:function(){return t()},block:!0,icon:Object(v.jsx)(W.a,{}),children:"Agregar Horario"})})]})}})}),Object(v.jsx)(b.a.Item,{name:"cedula",label:"Cedula",rules:[{required:!1,message:"Ingresa cedula"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"certificacion",label:"Certificacion",rules:[{required:!1,message:"Ingresa tu certificacion"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"universidad",label:"Universidad",rules:[{required:!1,message:"Ingresa tu universidad"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"especialidad",label:"Especialidad",rules:[{required:!1,message:"Ingresa especialidad"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsxs)(b.a.Item,Object(B.a)(Object(B.a)({},Bc),{},{children:[e.setIsModalVisible&&Object(v.jsx)(O.a,{onClick:function(){return e.setIsModalVisible(!1)},style:{marginRight:6},children:"Cancelar"}),Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Guardar"})]}))]})]})}))]})}var Uc=t(802);function Zc(){var e=Object(n.useState)(!0),a=Object(U.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)([]),s=Object(U.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(null),d=Object(U.a)(l,2),j=d[0],u=d[1],b=Object(n.useState)(!1),m=Object(U.a)(b,2),h=m[0],x=m[1];Object(n.useEffect)((function(){C()}),[]),Object(n.useEffect)((function(){C()}),[h]);var C=function(){fetch(y+"users_by_rol/Medico").then((function(e){return e.json()})).then((function(e){console.log(e),o(e)})).finally((function(){return r(!1)}))},I=function(){var e=Object(g.a)(Object(f.a)().mark((function e(a){var t;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=JSON.parse(JSON.stringify(a))).horarios.forEach((function(e){e.sucursal=e.sucursal._id})),console.log("Horarios before edit: ",t.horarios),e.next=5,u(t);case 5:x(!0),console.log("Editar medico: ",t);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),S=[{title:"Foto",key:"avatar",render:function(e,a){var t=a.avatar;return t.lenght>12?Object(v.jsx)("img",{src:"https://api.recreamed.com/images/"+t,alt:"Logo",width:64}):Object(v.jsx)(Ke.a,{icon:Object(v.jsx)(p.a,{}),size:64,className:"btnIconCentered"})}},{title:"Nombre",dataIndex:"name",key:"name"},{title:"Correo",dataIndex:"email",key:"email"},{title:"Telefono",dataIndex:"telefono",key:"telefono"},{title:"Horarios",dataIndex:"horarios",key:"horarios",render:function(e,a){return Object(v.jsx)("p",{children:a.horarios.map((function(e){return Object(v.jsxs)(J.a,{size:"small",children:[Object(v.jsxs)("p",{children:[Object(v.jsx)(Uc.a,{style:{marginTop:-6}}),e.sucursal.nombre]}),Object(v.jsxs)("p",{children:[Object(v.jsx)(ze.a,{}),e.horario]})]})}))})}},{title:"Opciones",key:"action",render:function(e,a){return Object(v.jsxs)(J.a,{size:"middle",children:[Object(v.jsx)(O.a,{size:"small",onClick:function(){I(a)},children:"Editar"}),Object(v.jsx)(ue.a,{title:"Seguro que quiere borrar este doctor?",onConfirm:function(){var e;E("/users/remove/"+(e=a)._id).then((function(){console.log("removed: ",e._id),C()}))},okText:"Si",cancelText:"No",children:Object(v.jsx)(O.a,{danger:!0,size:"small",children:"Borrar"})})]})}}];return Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"Doctores"}),t?Object(v.jsx)(se,{}):Object(v.jsx)(ba.a,{dataSource:i,columns:S}),Object(v.jsx)(le.a,{width:900,title:"Editar Medico",visible:h,onCancel:function(){x(!1)},destroyOnClose:!0,footer:[],children:Object(v.jsx)(Gc,{medico:j,setIsModalVisible:x})})]})}var Jc=Tt.a.Header,Yc=Tt.a.Content,Wc=Tt.a.Footer,$c=Tt.a.Sider,Xc=function(e){Object(ga.a)(t,e);var a=Object(va.a)(t);function t(){var e;Object(xa.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).handleClick=function(e){console.log("click ",e)},e.state={collapsed:!1},e.onCollapse=function(a){e.setState({collapsed:a})},e.toggle=function(){e.setState({collapsed:!e.state.collapsed})},e}return Object(fa.a)(t,[{key:"render",value:function(){return Object(v.jsx)(i.a,{children:Object(v.jsxs)(Tt.a,{style:{minHeight:"100vh"},children:[Object(v.jsxs)($c,{theme:"light",collapsible:!0,collapsed:this.state.collapsed,onCollapse:this.onCollapse,children:[Object(v.jsx)("div",{className:"logo"}),Object(v.jsxs)(Et.a,{defaultSelectedKeys:["1"],mode:"inline",children:[Object(v.jsxs)(Et.a.Item,{icon:Object(v.jsx)(Pr.a,{}),children:[Object(v.jsx)("span",{children:"M\xe9dicos"}),Object(v.jsx)(i.b,{to:"/doctores"})]},"1"),Object(v.jsxs)(Et.a.Item,{icon:Object(v.jsx)(Ft.a,{}),children:[Object(v.jsx)("span",{children:"Registrar M\xe9dico"}),Object(v.jsx)(i.b,{to:"/registrar"})]},"2")]})]}),Object(v.jsxs)(Tt.a,{children:[Object(v.jsx)(Jc,{style:{background:"#fff",padding:0,paddingLeft:16},children:Object(v.jsx)(Nt.a,{className:"trigger",style:{cursor:"pointer"},onClick:this.toggle})}),Object(v.jsxs)(Yc,{style:{margin:"24px 16px",padding:24,background:"#fff",minHeight:280},children:[Object(v.jsx)(o.a,{exact:!0,path:"/registrar",component:Gc}),Object(v.jsx)(o.a,{path:"/doctores",component:Zc})]}),Object(v.jsx)(Wc,{style:{textAlign:"center"},children:"RECREAMED \xa92021 Created by Realidad Creativa"})]})]})})}}]),t}(n.Component),Qc=Xc,Kc=function(e){Object(ga.a)(t,e);var a=Object(va.a)(t);function t(){return Object(xa.a)(this,t),a.apply(this,arguments)}return Object(fa.a)(t,[{key:"render",value:function(){return Object(v.jsx)("div",{children:Object(v.jsx)("div",{children:Object(v.jsx)(Qc,{})})})}}]),t}(n.Component),es=Kc,as=t(803),ts=t(804),ns=ve.a.Dragger;function rs(e){var a=Object(n.useState)("https://"),t=Object(U.a)(a,2),r=t[0],c=t[1],s={name:"file",multiple:!1,action:y+"imagenes/upload",beforeUpload:function(e){var a="image/png"===e.type||"image/jpeg"===e.type;return a||l.a.error("".concat(e.name," no es una imagen tipo PNG o JPG")),a||ve.a.LIST_IGNORE},onChange:function(e){var a=e.file.status;"uploading"!==a&&console.log(e.file,e.fileList),"done"===a?(l.a.success("".concat(e.file.name," file uploaded successfully.")),console.log("New Files: ",e.file.response.file),c(e.file.response.file)):"error"===a&&l.a.error("".concat(e.file.name," file upload failed."))},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}};return Object(v.jsxs)("div",{children:[e.hospital?Object(v.jsx)(v.Fragment,{}):Object(v.jsx)("h4",{children:"Registrar Nuevo Hospital"}),Object(v.jsxs)(ns,Object(B.a)(Object(B.a)({},s),{},{children:[Object(v.jsx)("p",{className:"ant-upload-drag-icon",children:Object(v.jsx)(ye.a,{})}),Object(v.jsx)("p",{className:"ant-upload-text",children:"Arrastra la imagen con el logotipo o click ara buscar"}),Object(v.jsx)("p",{className:"ant-upload-hint",children:"Selecciona archivos en formato png, jpeg o webp"})]})),Object(v.jsx)("br",{}),Object(v.jsxs)(b.a,{name:"basic",labelCol:{span:12},wrapperCol:{span:12},initialValues:e.hospital,onFinish:e.hospital?function(a){a.logo=r,console.log("Ready to send editing:",a),q("sucursales/update/"+e.hospital._id,a).then((function(){e.setModalVisible(!1)}))}:function(e){e.logo=r,e.estatus="1",e.delete="0",console.log("Ready to send:",e),D("sucursales/add",e).then((function(a){console.log("resp: ",a),a.message&&"Sucursal creada correctamente"===a.message?window.location.href="/hospitales":l.a.warning(a.message||a.error),console.log("tosend: ",e)}))},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[Object(v.jsxs)(d.a,{children:[Object(v.jsxs)(j.a,{children:[Object(v.jsx)(b.a.Item,{label:"Nombre",name:"nombre",rules:[{required:!0,message:"Please input your username!"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"RFC",name:"rfc",rules:[{required:!0,message:"Ingresa RFC"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Calle",name:"calle",rules:[{required:!0,message:"Ingresa nombre de la calle"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Numero exterior",name:"num_exterior",rules:[{required:!0,message:"Ingresa numero exterion"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Numero Interior",name:"num_interior",rules:[{required:!1,message:"Ingresa numero interior"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Colonia",name:"colonia",rules:[{required:!0,message:"Ingresa nombre de colonia"}],children:Object(v.jsx)(m.a,{})})]}),Object(v.jsxs)(j.a,{children:[Object(v.jsx)(b.a.Item,{label:"Codigo Postal",name:"codigo_postal",rules:[{required:!0,message:"Ingresa codigo postal"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Ciudad Municipio",name:"ciudad_municipio",rules:[{required:!0,message:"Ingresa ciudad/municipio"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Estado",name:"estado",rules:[{required:!0,message:"Ingresa estado"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Telefono",name:"telefono",rules:[{required:!0,message:"Ingresa numero de telefono"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Correo Electronico",name:"email",rules:[{required:!0,message:"Correo@Hopspital.com"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{label:"Sitio Web",name:"sitio_web",rules:[{required:!0,message:"www.hospital.com"}],children:Object(v.jsx)(m.a,{})})]})]}),Object(v.jsxs)(b.a.Item,{wrapperCol:{offset:9},children:[Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",style:{marginRight:8},children:"Guardar"}),e.setModalVisible&&Object(v.jsx)(O.a,{onClick:function(){return e.setModalVisible(!1)},children:"Cancelar"})]})]})]})}function cs(){var e=Object(n.useState)(!0),a=Object(U.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)([]),s=Object(U.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(null),d=Object(U.a)(l,2),j=d[0],u=d[1],b=Object(n.useState)(!1),m=Object(U.a)(b,2),h=m[0],p=m[1];Object(n.useEffect)((function(){x()}),[]),Object(n.useEffect)((function(){x()}),[h]);var x=function(){fetch(y+"sucursales").then((function(e){return e.json()})).then((function(e){console.log(e),o(e),r(!1)}))},C=function(){var e=Object(g.a)(Object(f.a)().mark((function e(a){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(a);case 2:p(!0),console.log("Editar hospital: ",a);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),I=function(e){console.log(e)},S=[{title:"Logo",key:"logo",render:function(e,a){return Object(v.jsx)("img",{src:"https://api.recreamed.com/images/"+a.logo,alt:"Logo",width:64})}},{title:"Sucursal",dataIndex:"nombre"},{title:"Ciudad_municipio",dataIndex:"ciudad_municipio",defaultSortOrder:"descend"},{title:"Colonia",dataIndex:"colonia"},{title:"calle",dataIndex:"calle"},{title:"Telefono",dataIndex:"telefono",defaultSortOrder:"descend"},{title:"Opciones",key:"action",render:function(e,a){return Object(v.jsxs)(J.a,{size:"middle",children:[Object(v.jsx)(O.a,{size:"small",onClick:function(){C(a)},children:"Editar"}),Object(v.jsx)(ue.a,{title:"Seguro que quiere borrar esta sucursal?",onConfirm:function(){return e=a,console.log("toDel: ",e),void E("sucursales/remove/"+e._id).then((function(){return x()}));var e},onCancel:I,okText:"Si",cancelText:"No",children:Object(v.jsx)(O.a,{danger:!0,size:"small",children:"Borrar"})})]})}}];return t?Object(v.jsx)(se,{}):Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:"Hospitales"}),Object(v.jsx)(ba.a,{columns:S,dataSource:i,onChange:function(e,a,t,n){console.log("params",e,a,t,n)}}),Object(v.jsx)(le.a,{width:800,title:"Editar Hospital",visible:h,onOk:function(){p(!1)},onCancel:function(){p(!1)},destroyOnClose:!0,footer:[],children:Object(v.jsx)(rs,{hospital:j,setModalVisible:p})})]})}var ss=Tt.a.Header,is=Tt.a.Content,os=Tt.a.Footer,ls=Tt.a.Sider,ds=function(e){Object(ga.a)(t,e);var a=Object(va.a)(t);function t(){var e;Object(xa.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).handleClick=function(e){console.log("click ",e)},e.state={collapsed:!1},e.onCollapse=function(a){e.setState({collapsed:a})},e.toggle=function(){e.setState({collapsed:!e.state.collapsed})},e}return Object(fa.a)(t,[{key:"render",value:function(){return Object(v.jsx)(i.a,{children:Object(v.jsxs)(Tt.a,{style:{minHeight:"100vh"},children:[Object(v.jsxs)(ls,{theme:"light",collapsible:!0,collapsed:this.state.collapsed,onCollapse:this.onCollapse,children:[Object(v.jsx)("div",{className:"logo"}),Object(v.jsxs)(Et.a,{defaultSelectedKeys:["1"],mode:"inline",children:[Object(v.jsxs)(Et.a.Item,{icon:Object(v.jsx)(as.a,{}),children:[Object(v.jsx)("span",{children:"Hospitales"}),Object(v.jsx)(i.b,{to:"/hospitales"})]},"1"),Object(v.jsxs)(Et.a.Item,{icon:Object(v.jsx)(ts.a,{}),children:[Object(v.jsx)("span",{children:"Registrar Hospital"}),Object(v.jsx)(i.b,{to:"/registrar"})]},"2")]})]}),Object(v.jsxs)(Tt.a,{children:[Object(v.jsx)(ss,{style:{background:"#fff",padding:0,paddingLeft:16},children:Object(v.jsx)(Nt.a,{className:"trigger",style:{cursor:"pointer"},onClick:this.toggle})}),Object(v.jsxs)(is,{style:{margin:"24px 16px",padding:24,background:"#fff",minHeight:280},children:[Object(v.jsx)(o.a,{exact:!0,path:"/registrar",component:rs}),Object(v.jsx)(o.a,{path:"/hospitales",component:cs})]}),Object(v.jsx)(os,{style:{textAlign:"center"},children:"Ant Design \xa92016 Created by Ant UED"})]})]})})}}]),t}(n.Component),js=ds,us=function(e){Object(ga.a)(t,e);var a=Object(va.a)(t);function t(){return Object(xa.a)(this,t),a.apply(this,arguments)}return Object(fa.a)(t,[{key:"render",value:function(){return Object(v.jsx)("div",{children:Object(v.jsx)(js,{})})}}]),t}(n.Component),bs=["key","name"],ms=Z.a.Option,hs=ve.a.Dragger,Os={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:14}}},ps={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};function xs(e){var a=b.a.useForm(),t=Object(U.a)(a,1)[0],r=Object(n.useState)([]),c=Object(U.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(!0),u=Object(U.a)(o,2),h=u[0],p=u[1],x=Object(n.useState)(e.medico?e.medico.avatar:"https://"),f=Object(U.a)(x,2),g=f[0],I=f[1],S={name:"file",multiple:!1,action:y+"imagenes/upload",onChange:function(e){var a=e.file.status;"uploading"!==a&&console.log(e.file,e.fileList),"done"===a?(l.a.success("".concat(e.file.name," file uploaded successfully.")),console.log("New Files: ",e.file.response.file),I(e.file.response.file)):"error"===a&&l.a.error("".concat(e.file.name," file upload failed."))},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}};Object(n.useEffect)((function(){console.log("received Medic: ",e.medico),k("sucursales").then((function(e){i(e),p(!1)}))}),[]);var _=Object(v.jsx)(b.a.Item,{name:"prefix",noStyle:!0,children:Object(v.jsx)(Z.a,{style:{width:70},children:Object(v.jsx)(ms,{value:"+52",children:"+52"})})});b.a.Item,Z.a;return Object(v.jsxs)("div",{children:[e.medico?Object(v.jsx)(v.Fragment,{}):Object(v.jsx)("h1",{children:"Registrar doctor"}),Object(v.jsx)("br",{}),Object(v.jsxs)(hs,Object(B.a)(Object(B.a)({},S),{},{children:[Object(v.jsx)("p",{className:"ant-upload-drag-icon",children:Object(v.jsx)(ye.a,{})}),Object(v.jsx)("p",{className:"ant-upload-text",children:"Arrastra la imagen de perfil o click ara buscar"}),Object(v.jsx)("p",{className:"ant-upload-hint",children:"Selecciona archivos en formato png, jpeg o webp"})]})),Object(v.jsx)("br",{}),Object(v.jsx)(b.a,Object(B.a)(Object(B.a)({},Os),{},{form:t,name:"register",onFinish:e.medico?function(a){a.avatar=g,console.log("ready to send",a),fetch(y+"users/updateUser/"+e.medico._id,{method:"PUT",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){console.log("Success:",a),a.message&&"Usuario actualizado correctamente"===a.message?e.setIsModalVisible(!1):l.a.error(a.error)})).catch((function(e){return console.error("Error:",e)}))}:function(e){e.avatar=g,e.estatus="1",e.rol="Administrador",delete e.confirm,delete e.prefix,console.log("ready to send",e),fetch(C+"register",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),e.message&&"Usuario creado correctamente"===e.message?window.location.href="doctores":l.a.error(e.error)})).catch((function(e){return console.error("Error:",e)}))},initialValues:e.medico,scrollToFirstError:!0,children:Object(v.jsxs)(d.a,{children:[Object(v.jsxs)(j.a,{span:11,children:[Object(v.jsx)(b.a.Item,{name:"name",label:"Nombre",rules:[{required:!0,message:"Ingresa Nombre y apellidos"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"email",label:"Correo",rules:[{type:"email",message:"Ingresa un corrreo electronico valido"},{required:!0,message:"Please input your E-mail!"}],children:Object(v.jsx)(m.a,{})}),e.medico?Object(v.jsx)(v.Fragment,{}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(b.a.Item,{name:"password",label:"Contrase\xf1a",rules:[{required:!0,message:"Por favor ingrese su contrase\xf1a!"}],hasFeedback:!0,children:Object(v.jsx)(m.a.Password,{})}),Object(v.jsx)(b.a.Item,{name:"confirm",label:"Confirmar contrase\xf1a",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var a=e.getFieldValue;return{validator:function(e,t){return t&&a("password")!==t?Promise.reject(new Error("Las contrase\xf1as deben coincidir!")):Promise.resolve()}}}],children:Object(v.jsx)(m.a.Password,{})})]}),Object(v.jsx)(b.a.Item,{name:"telefono",label:"Telefono",rules:[{required:!0,message:"Ingresa el numero de telefono correcto"}],children:Object(v.jsx)(m.a,{addonBefore:_,style:{width:"100%"}})})]}),Object(v.jsxs)(j.a,{span:11,children:[Object(v.jsx)(b.a.Item,{label:"horarios",rules:[{required:!0,message:"Ingresa al menos un horario"}],children:Object(v.jsx)(b.a.List,{name:"horarios",label:"horarios list",children:function(e,a){var t=a.add,n=a.remove;return Object(v.jsxs)(v.Fragment,{children:[e.map((function(e){var a=e.key,t=e.name,r=Object(G.a)(e,bs);return Object(v.jsxs)(J.a,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"sucursal"],rules:[{required:!0,message:"Elije Sucursal"}],children:Object(v.jsx)(Z.a,{placeholder:"Elije Sucursal",style:{width:"120px"},children:h?"Cargando":s.map((function(e){return Object(v.jsx)(ms,{value:e._id,children:e.nombre})}))})})),Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"horario"],rules:[{required:!1,message:"Missing last name"}],children:Object(v.jsx)(m.a,{placeholder:"Horario"})})),Object(v.jsx)(Y.a,{onClick:function(){return n(t)}})]},a)})),Object(v.jsx)(b.a.Item,{children:Object(v.jsx)(O.a,{type:"dashed",onClick:function(){return t()},block:!0,icon:Object(v.jsx)(W.a,{}),children:"Agregar Horario"})})]})}})}),Object(v.jsx)(b.a.Item,{name:"cedula",label:"Cedula",rules:[{required:!1,message:"Ingresa cedula"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"certificacion",label:"Certificacion",rules:[{required:!1,message:"Ingresa tu certificacion"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"universidad",label:"Universidad",rules:[{required:!1,message:"Ingresa tu universidad"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsxs)(b.a.Item,Object(B.a)(Object(B.a)({},ps),{},{children:[e.setIsModalVisible&&Object(v.jsx)(O.a,{onClick:function(){return e.setIsModalVisible(!1)},style:{marginRight:6},children:"Cancelar"}),Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Guardar"})]}))]})]})}))]})}function fs(){var e=Object(n.useState)(!0),a=Object(U.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)([]),s=Object(U.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(null),d=Object(U.a)(l,2),j=d[0],u=d[1],b=Object(n.useState)(!1),m=Object(U.a)(b,2),h=m[0],x=m[1];Object(n.useEffect)((function(){C()}),[]),Object(n.useEffect)((function(){C()}),[h]);var C=function(){fetch(y+"users_by_rol/Administrador").then((function(e){return e.json()})).then((function(e){console.log(e),o(e)})).finally((function(){return r(!1)}))},I=function(){var e=Object(g.a)(Object(f.a)().mark((function e(a){var t;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=JSON.parse(JSON.stringify(a))).horarios.forEach((function(e){e.sucursal=e.sucursal._id})),console.log("Horarios before edit: ",t.horarios),e.next=5,u(t);case 5:x(!0),console.log("Editar medico: ",t);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),S=[{title:"Foto",key:"avatar",render:function(e,a){var t=a.avatar;return t.lenght>8?Object(v.jsx)("img",{src:"https://api.recreamed.com/images/"+t,alt:"Logo",width:64}):Object(v.jsx)(Ke.a,{size:64,icon:Object(v.jsx)(p.a,{}),className:"btnIconCentered"})}},{title:"Nombre",dataIndex:"name",key:"name"},{title:"Correo",dataIndex:"email",key:"email"},{title:"Telefono",dataIndex:"telefono",key:"telefono"},{title:"Horarios",dataIndex:"horarios",key:"horarios",render:function(e,a){return Object(v.jsx)("p",{children:a.horarios.map((function(e){return Object(v.jsxs)(J.a,{size:"small",children:[Object(v.jsxs)("p",{children:[Object(v.jsx)(Uc.a,{style:{marginTop:-6}}),e.sucursal?e.sucursal.nombre:"Sin Sucursal"]}),Object(v.jsxs)("p",{children:[Object(v.jsx)(ze.a,{}),e.horario]})]})}))})}},{title:"Opciones",key:"action",render:function(e,a){return Object(v.jsxs)(J.a,{size:"middle",children:[Object(v.jsx)(O.a,{size:"small",onClick:function(){I(a)},children:"Editar"}),Object(v.jsx)(ue.a,{title:"Seguro que quiere borrar este doctor?",onConfirm:function(){var e;E("/users/remove/"+(e=a)._id).then((function(){console.log("removed: ",e._id),C()}))},okText:"Si",cancelText:"No",children:Object(v.jsx)(O.a,{danger:!0,size:"small",children:"Borrar"})})]})}}];return Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"Administradores"}),t?Object(v.jsx)(se,{}):Object(v.jsx)(ba.a,{dataSource:i,columns:S}),Object(v.jsx)(le.a,{width:900,title:"Editar Medico",visible:h,onCancel:function(){x(!1)},destroyOnClose:!0,footer:[],children:Object(v.jsx)(xs,{medico:j,setIsModalVisible:x})})]})}var gs=Tt.a.Header,vs=Tt.a.Content,ys=Tt.a.Footer,Cs=Tt.a.Sider,Is=function(e){Object(ga.a)(t,e);var a=Object(va.a)(t);function t(){var e;Object(xa.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).handleClick=function(e){console.log("click ",e)},e.state={collapsed:!1},e.onCollapse=function(a){e.setState({collapsed:a})},e.toggle=function(){e.setState({collapsed:!e.state.collapsed})},e}return Object(fa.a)(t,[{key:"render",value:function(){return Object(v.jsx)(i.a,{children:Object(v.jsxs)(Tt.a,{style:{minHeight:"100vh"},children:[Object(v.jsxs)(Cs,{theme:"light",collapsible:!0,collapsed:this.state.collapsed,onCollapse:this.onCollapse,children:[Object(v.jsx)("div",{className:"logo"}),Object(v.jsxs)(Et.a,{defaultSelectedKeys:["1"],mode:"inline",children:[Object(v.jsxs)(Et.a.Item,{icon:Object(v.jsx)(Pr.a,{}),children:[Object(v.jsx)("span",{children:"Administradores"}),Object(v.jsx)(i.b,{to:"/administradores"})]},"1"),Object(v.jsxs)(Et.a.Item,{icon:Object(v.jsx)(Ft.a,{}),children:[Object(v.jsx)("span",{children:"Registrar Administrador"}),Object(v.jsx)(i.b,{to:"/registrar"})]},"2")]})]}),Object(v.jsxs)(Tt.a,{children:[Object(v.jsx)(gs,{style:{background:"#fff",padding:0,paddingLeft:16},children:Object(v.jsx)(Nt.a,{className:"trigger",style:{cursor:"pointer"},onClick:this.toggle})}),Object(v.jsxs)(vs,{style:{margin:"24px 16px",padding:24,background:"#fff",minHeight:280},children:[Object(v.jsx)(o.a,{exact:!0,path:"/registrar",component:xs}),Object(v.jsx)(o.a,{path:"/administradores",component:fs})]}),Object(v.jsx)(ys,{style:{textAlign:"center"},children:"RECREAMED \xa92021 Created by Realidad Creativa"})]})]})})}}]),t}(n.Component),Ss=Is,_s=function(e){Object(ga.a)(t,e);var a=Object(va.a)(t);function t(){return Object(xa.a)(this,t),a.apply(this,arguments)}return Object(fa.a)(t,[{key:"render",value:function(){return Object(v.jsx)("div",{children:Object(v.jsx)("div",{children:Object(v.jsx)(Ss,{})})})}}]),t}(n.Component),ws=_s,ks=["key","name"],Ts=Z.a.Option,Es=ve.a.Dragger,Fs={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:14}}},qs={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};function Ns(e){var a=b.a.useForm(),t=Object(U.a)(a,1)[0],r=Object(n.useState)([]),c=Object(U.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(!0),u=Object(U.a)(o,2),h=u[0],p=u[1],x=Object(n.useState)(e.medico?e.medico.avatar:"https://"),f=Object(U.a)(x,2),g=f[0],I=f[1],S={name:"file",multiple:!1,action:y+"imagenes/upload",onChange:function(e){var a=e.file.status;"uploading"!==a&&console.log(e.file,e.fileList),"done"===a?(l.a.success("".concat(e.file.name," file uploaded successfully.")),console.log("New Files: ",e.file.response.file),I(e.file.response.file)):"error"===a&&l.a.error("".concat(e.file.name," file upload failed."))},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}};Object(n.useEffect)((function(){console.log("received Medic: ",e.medico),k("sucursales").then((function(e){i(e),p(!1)}))}),[]);var _=Object(v.jsx)(b.a.Item,{name:"prefix",noStyle:!0,children:Object(v.jsx)(Z.a,{style:{width:70},children:Object(v.jsx)(Ts,{value:"+52",children:"+52"})})});b.a.Item,Z.a;return Object(v.jsxs)("div",{children:[e.medico?Object(v.jsx)(v.Fragment,{}):Object(v.jsx)("h1",{children:"Registrar Recepcionista"}),Object(v.jsx)("br",{}),Object(v.jsxs)(Es,Object(B.a)(Object(B.a)({},S),{},{children:[Object(v.jsx)("p",{className:"ant-upload-drag-icon",children:Object(v.jsx)(ye.a,{})}),Object(v.jsx)("p",{className:"ant-upload-text",children:"Arrastra la imagen de perfil o click ara buscar"}),Object(v.jsx)("p",{className:"ant-upload-hint",children:"Selecciona archivos en formato png, jpeg o webp"})]})),Object(v.jsx)("br",{}),Object(v.jsx)(b.a,Object(B.a)(Object(B.a)({},Fs),{},{form:t,name:"register",onFinish:e.medico?function(a){a.avatar=g,console.log("ready to send",a),fetch(y+"users/updateUser/"+e.medico._id,{method:"PUT",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){console.log("Success:",a),a.message&&"Usuario actualizado correctamente"===a.message?e.setIsModalVisible(!1):l.a.error(a.error)})).catch((function(e){return console.error("Error:",e)}))}:function(e){e.avatar=g,e.estatus="1",e.rol="Recepcion",delete e.confirm,delete e.prefix,console.log("ready to send",e),fetch(C+"register",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e),e.message&&"Usuario creado correctamente"===e.message?window.location.href="recepcionistas":l.a.error(e.error)})).catch((function(e){return console.error("Error:",e)}))},initialValues:e.medico,scrollToFirstError:!0,children:Object(v.jsxs)(d.a,{children:[Object(v.jsxs)(j.a,{span:11,children:[Object(v.jsx)(b.a.Item,{name:"name",label:"Nombre",rules:[{required:!0,message:"Ingresa Nombre y apellidos"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"email",label:"Correo",rules:[{type:"email",message:"Ingresa un corrreo electronico valido"},{required:!0,message:"Please input your E-mail!"}],children:Object(v.jsx)(m.a,{})}),e.medico?Object(v.jsx)(v.Fragment,{}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(b.a.Item,{name:"password",label:"Contrase\xf1a",rules:[{required:!0,message:"Por favor ingrese su contrase\xf1a!"}],hasFeedback:!0,children:Object(v.jsx)(m.a.Password,{})}),Object(v.jsx)(b.a.Item,{name:"confirm",label:"Confirmar contrase\xf1a",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var a=e.getFieldValue;return{validator:function(e,t){return t&&a("password")!==t?Promise.reject(new Error("Las contrase\xf1as deben coincidir!")):Promise.resolve()}}}],children:Object(v.jsx)(m.a.Password,{})})]}),Object(v.jsx)(b.a.Item,{name:"telefono",label:"Telefono",rules:[{required:!0,message:"Ingresa el numero de telefono correcto"}],children:Object(v.jsx)(m.a,{addonBefore:_,style:{width:"100%"}})})]}),Object(v.jsxs)(j.a,{span:11,children:[Object(v.jsx)(b.a.Item,{label:"horarios",rules:[{required:!0,message:"Ingresa al menos un horario"}],children:Object(v.jsx)(b.a.List,{name:"horarios",label:"horarios list",children:function(e,a){var t=a.add,n=a.remove;return Object(v.jsxs)(v.Fragment,{children:[e.map((function(e){var a=e.key,t=e.name,r=Object(G.a)(e,ks);return Object(v.jsxs)(J.a,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"sucursal"],rules:[{required:!0,message:"Elije Sucursal"}],children:Object(v.jsx)(Z.a,{placeholder:"Elije Sucursal",style:{width:"120px"},children:h?"Cargando":s.map((function(e){return Object(v.jsx)(Ts,{value:e._id,children:e.nombre})}))})})),Object(v.jsx)(b.a.Item,Object(B.a)(Object(B.a)({},r),{},{name:[t,"horario"],rules:[{required:!1,message:"Missing last name"}],children:Object(v.jsx)(m.a,{placeholder:"Horario"})})),Object(v.jsx)(Y.a,{onClick:function(){return n(t)}})]},a)})),Object(v.jsx)(b.a.Item,{children:Object(v.jsx)(O.a,{type:"dashed",onClick:function(){return t()},block:!0,icon:Object(v.jsx)(W.a,{}),children:"Agregar Horario"})})]})}})}),Object(v.jsx)(b.a.Item,{name:"cedula",label:"Cedula",rules:[{required:!1,message:"Ingresa cedula"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"certificacion",label:"Certificacion",rules:[{required:!1,message:"Ingresa tu certificacion"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(b.a.Item,{name:"universidad",label:"Universidad",rules:[{required:!1,message:"Ingresa tu universidad"}],children:Object(v.jsx)(m.a,{})}),Object(v.jsxs)(b.a.Item,Object(B.a)(Object(B.a)({},qs),{},{children:[e.setIsModalVisible&&Object(v.jsx)(O.a,{onClick:function(){return e.setIsModalVisible(!1)},style:{marginRight:6},children:"Cancelar"}),Object(v.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Guardar"})]}))]})]})}))]})}function Ds(){var e=Object(n.useState)(!0),a=Object(U.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)([]),s=Object(U.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(null),d=Object(U.a)(l,2),j=d[0],u=d[1],b=Object(n.useState)(!1),m=Object(U.a)(b,2),h=m[0],x=m[1];Object(n.useEffect)((function(){C()}),[]),Object(n.useEffect)((function(){C()}),[h]);var C=function(){fetch(y+"users_by_rol/Recepcion").then((function(e){return e.json()})).then((function(e){console.log(e),o(e)})).finally((function(){return r(!1)}))},I=function(){var e=Object(g.a)(Object(f.a)().mark((function e(a){var t;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=JSON.parse(JSON.stringify(a))).horarios.forEach((function(e){e.sucursal=e.sucursal._id})),console.log("Horarios before edit: ",t.horarios),e.next=5,u(t);case 5:x(!0),console.log("Editar medico: ",t);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),S=[{title:"Foto",key:"avatar",render:function(e,a){var t=a.avatar;return t.lenght>12?Object(v.jsx)("img",{src:"https://api.recreamed.com/images/"+t,alt:"Logo",width:64}):Object(v.jsx)(Ke.a,{icon:Object(v.jsx)(p.a,{}),size:64,className:"btnIconCentered"})}},{title:"Nombre",dataIndex:"name",key:"name"},{title:"Correo",dataIndex:"email",key:"email"},{title:"Telefono",dataIndex:"telefono",key:"telefono"},{title:"Horarios",dataIndex:"horarios",key:"horarios",render:function(e,a){return Object(v.jsx)("p",{children:a.horarios.map((function(e){return Object(v.jsxs)(J.a,{size:"small",children:[Object(v.jsxs)("p",{children:[Object(v.jsx)(Uc.a,{style:{marginTop:-6}}),e.sucursal.nombre]}),Object(v.jsxs)("p",{children:[Object(v.jsx)(ze.a,{}),e.horario]})]})}))})}},{title:"Opciones",key:"action",render:function(e,a){return Object(v.jsxs)(J.a,{size:"middle",children:[Object(v.jsx)(O.a,{size:"small",onClick:function(){I(a)},children:"Editar"}),Object(v.jsx)(ue.a,{title:"Seguro que quiere borrar este doctor?",onConfirm:function(){var e;E("/users/remove/"+(e=a)._id).then((function(){console.log("removed: ",e._id),C()}))},okText:"Si",cancelText:"No",children:Object(v.jsx)(O.a,{danger:!0,size:"small",children:"Borrar"})})]})}}];return Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"Recepcionistas"}),t?Object(v.jsx)(se,{}):Object(v.jsx)(ba.a,{dataSource:i,columns:S}),Object(v.jsx)(le.a,{width:900,title:"Editar Medico",visible:h,onCancel:function(){x(!1)},destroyOnClose:!0,footer:[],children:Object(v.jsx)(Ns,{medico:j,setIsModalVisible:x})})]})}var Ps=Tt.a.Header,As=Tt.a.Content,Ms=Tt.a.Footer,Rs=Tt.a.Sider,Hs=function(e){Object(ga.a)(t,e);var a=Object(va.a)(t);function t(){var e;Object(xa.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).handleClick=function(e){console.log("click ",e)},e.state={collapsed:!1},e.onCollapse=function(a){e.setState({collapsed:a})},e.toggle=function(){e.setState({collapsed:!e.state.collapsed})},e}return Object(fa.a)(t,[{key:"render",value:function(){return Object(v.jsx)(i.a,{children:Object(v.jsxs)(Tt.a,{style:{minHeight:"100vh"},children:[Object(v.jsxs)(Rs,{theme:"light",collapsible:!0,collapsed:this.state.collapsed,onCollapse:this.onCollapse,children:[Object(v.jsx)("div",{className:"logo"}),Object(v.jsxs)(Et.a,{defaultSelectedKeys:["1"],mode:"inline",children:[Object(v.jsxs)(Et.a.Item,{icon:Object(v.jsx)(Pr.a,{}),children:[Object(v.jsx)("span",{children:"Recepcionistas"}),Object(v.jsx)(i.b,{to:"/recepcionistas"})]},"1"),Object(v.jsxs)(Et.a.Item,{icon:Object(v.jsx)(Ft.a,{}),children:[Object(v.jsx)("span",{children:"Registrar Recepcionista"}),Object(v.jsx)(i.b,{to:"/registrar"})]},"2")]})]}),Object(v.jsxs)(Tt.a,{children:[Object(v.jsx)(Ps,{style:{background:"#fff",padding:0,paddingLeft:16},children:Object(v.jsx)(Nt.a,{className:"trigger",style:{cursor:"pointer"},onClick:this.toggle})}),Object(v.jsxs)(As,{style:{margin:"24px 16px",padding:24,background:"#fff",minHeight:280},children:[Object(v.jsx)(o.a,{exact:!0,path:"/registrar",component:Ns}),Object(v.jsx)(o.a,{path:"/recepcionistas",component:Ds})]}),Object(v.jsx)(Ms,{style:{textAlign:"center"},children:"RECREAMED \xa92021 Created by Realidad Creativa"})]})]})})}}]),t}(n.Component),zs=Hs,Ls=function(e){Object(ga.a)(t,e);var a=Object(va.a)(t);function t(){return Object(xa.a)(this,t),a.apply(this,arguments)}return Object(fa.a)(t,[{key:"render",value:function(){return Object(v.jsx)(zs,{})}}]),t}(n.Component),Vs=Ls,Bs=function(){localStorage.removeItem("sessionToken"),localStorage.removeItem("userType"),window.location.href="/"};function Gs(){return Object(v.jsx)(ae.a,{bg:"primary",variant:"dark",expand:"lg",children:Object(v.jsxs)(te.a,{children:[Object(v.jsx)("img",{src:Ca,width:"40",height:"35",className:"d-inline-block align-top",alt:"Recreamed logo"}),Object(v.jsxs)(ae.a.Brand,{href:"#home",style:{fontFamily:"Poppins",color:"White"},children:["Bienvenido ",w.name]}),Object(v.jsx)(ae.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(v.jsx)(ae.a.Collapse,{id:"basic-navbar-nav",children:Object(v.jsxs)(ne.a,{className:"me-auto",children:[Object(v.jsx)(ne.a.Link,{href:"hospitales",children:"Hospitales"}),Object(v.jsx)(ne.a.Link,{href:"administradores",children:"Administradores"}),Object(v.jsx)(ne.a.Link,{href:"recepcionistas",children:"Recepcionistas"}),Object(v.jsx)(ne.a.Link,{href:"doctores",children:"Medicos"}),Object(v.jsx)(ne.a.Link,{href:"pacientes",children:"Pacientes"})]})}),Object(v.jsx)(ae.a.Collapse,{className:"justify-content-end",children:Object(v.jsx)(O.a,{onClick:Bs,ghost:!0,children:"Cerrar Sesion"})})]})})}function Us(){return Object(v.jsxs)(i.a,{children:[Object(v.jsx)(Gs,{}),Object(v.jsxs)(o.c,{children:[Object(v.jsx)(o.a,{path:"/hospitales",children:Object(v.jsx)(us,{})}),Object(v.jsx)(o.a,{path:"/administradores",children:Object(v.jsx)(ws,{})}),Object(v.jsx)(o.a,{path:"/doctores",children:Object(v.jsx)(es,{})}),Object(v.jsx)(o.a,{path:"/recepcionistas",children:Object(v.jsx)(Vs,{})}),Object(v.jsx)(o.a,{path:"/pacientes",children:Object(v.jsx)(Rc,{})}),Object(v.jsx)(o.a,{path:"/",children:Object(v.jsx)(Rc,{})})]})]})}var Zs=localStorage.getItem("userType");function Js(){if(!localStorage.getItem("sessionToken"))return console.log("tok:",localStorage.getItem("sessionToken")),Object(v.jsx)(i.a,{children:Object(v.jsxs)(o.c,{children:[Object(v.jsx)(o.a,{path:"/ketamina_public/:idmedico/:idpaciente/:key",children:Object(v.jsx)($n,{})}),Object(v.jsx)(o.a,{path:"/dolor_public/:idmedico/:idpaciente/:key",children:Object(v.jsx)(Kn,{})}),Object(v.jsx)(o.a,{path:"/depresion_qids_public/:idmedico/:idpaciente/:key",children:Object(v.jsx)(Xn,{})}),Object(v.jsx)(o.a,{path:"/depresion_gpc_public/:idmedico/:idpaciente/:key",children:Object(v.jsx)(Qn,{})}),Object(v.jsx)(o.a,{path:"/post_traumatico_public/:idmedico/:idpaciente/:key",children:Object(v.jsx)(er,{})}),Object(v.jsx)(o.a,{path:"/post_traumatico_clinico_public/:idmedico/:idpaciente/:key",children:Object(v.jsx)(ar,{})}),Object(v.jsx)(o.a,{path:"/post_traumatico_mx_public/:idmedico/:idpaciente/:key",children:Object(v.jsx)(tr,{})}),Object(v.jsx)(o.a,{path:"/satisfaccion_public/:idmedico/:idpaciente/:key",children:Object(v.jsx)(nr,{})}),Object(v.jsx)(o.a,{path:"/register",children:Object(v.jsx)(ee,{})}),Object(v.jsx)(i.a,{path:"/",children:Object(v.jsx)(V,{})})]})});switch(Zs){case"SuperAdministrador":return Object(v.jsx)(Us,{});case"Administrador":return Object(v.jsx)(Tc,{});case"Recepcion":case"Enfermero":return Object(v.jsx)(or,{});case"Paciente":return Object(v.jsx)(yr,{});case"Medico":return Object(v.jsx)(kt,{});default:return"foo"}}s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(Js,{})}),document.getElementById("root"))}},[[751,1,2]]]);
//# sourceMappingURL=main.99719331.chunk.js.map