{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Table,Button,Tag,Modal}from'antd';import CreateBalanceHosptal from'./create-ingreso-hosptal';import{getData}from'../../resources';import Loading from'../../loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function IngersosHosptal(_ref){let{ids_hospitales}=_ref;const[ingresosData,setIngresosData]=useState([]);const[loading,setLoading]=useState(true);// Modal For Add/Edit Inreso\nconst[isIngresoModalOpen,setIsIngresoModalOpen]=useState(false);const showIngresoModal=()=>{console.log('opening hosp create modal');setIsIngresoModalOpen(true);};useEffect(()=>{getIngresos();},[]);const getIngresos=()=>{getData(\"balances/hospital/\".concat(ids_hospitales[0])).then(rs=>{setIngresosData(rs);}).finally(()=>setLoading(false));};const columns=[{title:'Concepto',dataIndex:'concepto',key:'concepto'},{title:'Tipo',dataIndex:'tipo',key:'tipo',render:(_,_ref2)=>{let{tipo}=_ref2;let color=tipo&&tipo==='ingreso'?'geekblue':'volcano';return tipo?/*#__PURE__*/_jsx(Tag,{color:color,children:tipo.toUpperCase()}):/*#__PURE__*/_jsx(Tag,{color:color,children:\"Indefinido\"});}},{title:'Fecha',dataIndex:'fecha_hora',key:'fecha_hora',render:(_,_ref3)=>{let{fecha_hora}=_ref3;return/*#__PURE__*/_jsx(_Fragment,{children:new Date(fecha_hora).toLocaleString()});},defaultSortOrder:'descend'// sorter: (a, b) => a.fecha_hora > b.fecha_hora,\n},{title:'Monto',dataIndex:'monto',key:'monto',render:(_,_ref4)=>{let{monto}=_ref4;return/*#__PURE__*/_jsxs(_Fragment,{children:[\"$\",monto]});}},{title:'Abono',dataIndex:'abono',key:'abono',render:(_,_ref5)=>{let{abono}=_ref5;return abono&&/*#__PURE__*/_jsxs(_Fragment,{children:[\"$\",abono]});}},{title:'Adeudo',dataIndex:'adeudo',key:'adeudo',render:(_,record)=>{return/*#__PURE__*/_jsxs(_Fragment,{children:[\"$\",record.monto-record.abono]});}},{title:'Forma de pago',key:'forma_de_pago',dataIndex:'forma_de_pago',render:(_,_ref6)=>{let{forma_de_pago}=_ref6;let color=forma_de_pago==='efectivo'?'geekblue':'green';return/*#__PURE__*/_jsx(Tag,{color:color,children:forma_de_pago.toUpperCase()});}},// {\n//     title: 'Factura',\n//     key: 'Factura',\n//     dataIndex: 'factura',\n//     render: (_, { factura }) => { return factura && <CheckCircleTwoTone /> }\n// },\n{title:'Estado',key:'Estado',dataIndex:'estado',// render: (_, { estado }) => {\n//     let color = estado === 'pagado' ? 'green' : 'geekblue';\n//     if (estado === 'pendiente' || estado === 'sin pagar') color = 'volcano';\n//     return <Tag color={color}> {estado.toUpperCase()} </Tag>\n// }\nrender:(_,_ref7)=>{let{abono,monto}=_ref7;const pagado=abono===monto;let color=pagado?'green':'volcano';return/*#__PURE__*/_jsxs(Tag,{color:color,children:[\" \",pagado?'PAGADO':'PENDIENTE',\" \"]});}}// {\n//     title: 'Acciones',\n//     key: 'Editar',\n//     render: (_, record) => <div style={{ display: 'flex', gap: 2, flexDirection: 'column' }}>\n//         {/* <Button onClick={() => { deleteData(`balances/remove/${record._id}`).then(()=>getIngresos()) }}>Eliminar</Button> */}\n//         <Button size='small' onClick={() => handleEditIngreso(record)}>Editar Monto</Button>\n//         <Button size='small' onClick={() => { setIngresoForPrint([record]); showTicketModal() }}>Imprimir Nota</Button>\n//     </div>\n// },\n];// if (loading) return <Loading />\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'row',gap:12,alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Ingresos del hospital\"}),/*#__PURE__*/_jsx(Button,{ghost:true,size:\"small\",onClick:()=>setIsIngresoModalOpen(true),type:\"primary\",children:\"Agregar Nuevo Ingreso del Hospital\"})]}),/*#__PURE__*/_jsx(Table,{dataSource:ingresosData,columns:columns,size:\"small\"}),\";\",/*#__PURE__*/_jsx(CreateBalanceHosptal,{tipo:\"ingreso\",setIsModalOpen:setIsIngresoModalOpen,isModalOpen:isIngresoModalOpen,getIngresos:getIngresos})]});}","map":{"version":3,"names":["React","useState","useEffect","Table","Button","Tag","Modal","CreateBalanceHosptal","getData","Loading","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","IngersosHosptal","_ref","ids_hospitales","ingresosData","setIngresosData","loading","setLoading","isIngresoModalOpen","setIsIngresoModalOpen","showIngresoModal","console","log","getIngresos","concat","then","rs","finally","columns","title","dataIndex","key","render","_","_ref2","tipo","color","children","toUpperCase","_ref3","fecha_hora","Date","toLocaleString","defaultSortOrder","_ref4","monto","_ref5","abono","record","_ref6","forma_de_pago","_ref7","pagado","style","display","flexDirection","gap","alignItems","ghost","size","onClick","type","dataSource","setIsModalOpen","isModalOpen"],"sources":["C:/Users/Gil/Documents/ReCreaMed/src/admHospitalViews/ingresos/ingresos.hospital.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { Table, Button, Tag, Modal } from 'antd'\r\nimport CreateBalanceHosptal from './create-ingreso-hosptal';\r\nimport { getData } from '../../resources';\r\nimport Loading from '../../loading';\r\n\r\nexport default function IngersosHosptal({ ids_hospitales }) {\r\n\r\n    const [ingresosData, setIngresosData] = useState([])\r\n    const [loading, setLoading] = useState(true)\r\n\r\n    // Modal For Add/Edit Inreso\r\n    const [isIngresoModalOpen, setIsIngresoModalOpen] = useState(false);\r\n    const showIngresoModal = () => {\r\n        console.log('opening hosp create modal')\r\n        setIsIngresoModalOpen(true)\r\n    };\r\n\r\n    useEffect(() => {\r\n        getIngresos()\r\n    }, [])\r\n\r\n    const getIngresos = () => {\r\n        getData(`balances/hospital/${ids_hospitales[0]}`).then((rs) => {\r\n            setIngresosData(rs)\r\n        }).finally(() => setLoading(false))\r\n    }\r\n\r\n    const columns = [\r\n        {\r\n            title: 'Concepto',\r\n            dataIndex: 'concepto',\r\n            key: 'concepto',\r\n        },\r\n        {\r\n            title: 'Tipo',\r\n            dataIndex: 'tipo',\r\n            key: 'tipo',\r\n            render: (_, { tipo }) => {\r\n                let color = (tipo && tipo === 'ingreso') ? 'geekblue' : 'volcano';\r\n                return tipo ? <Tag color={color} >{tipo.toUpperCase()}</Tag> : <Tag color={color}>Indefinido</Tag>\r\n            },\r\n        },\r\n        {\r\n            title: 'Fecha',\r\n            dataIndex: 'fecha_hora',\r\n            key: 'fecha_hora',\r\n            render: (_, { fecha_hora }) => { return <>{new Date(fecha_hora).toLocaleString()}</> },\r\n            defaultSortOrder: 'descend',\r\n            // sorter: (a, b) => a.fecha_hora > b.fecha_hora,\r\n        },\r\n        {\r\n            title: 'Monto',\r\n            dataIndex: 'monto',\r\n            key: 'monto',\r\n            render: (_, { monto }) => { return <>${monto}</> }\r\n        },\r\n        {\r\n            title: 'Abono',\r\n            dataIndex: 'abono',\r\n            key: 'abono',\r\n            render: (_, { abono }) => { return abono && <>${abono}</> }\r\n        },\r\n        {\r\n            title: 'Adeudo',\r\n            dataIndex: 'adeudo',\r\n            key: 'adeudo',\r\n            render: (_, record) => { return <>${record.monto - record.abono}</> }\r\n\r\n        },\r\n        {\r\n            title: 'Forma de pago',\r\n            key: 'forma_de_pago',\r\n            dataIndex: 'forma_de_pago',\r\n            render: (_, { forma_de_pago }) => {\r\n                let color = forma_de_pago === 'efectivo' ? 'geekblue' : 'green';\r\n                return <Tag color={color} >{forma_de_pago.toUpperCase()}</Tag>\r\n            },\r\n        },\r\n\r\n        // {\r\n        //     title: 'Factura',\r\n        //     key: 'Factura',\r\n        //     dataIndex: 'factura',\r\n        //     render: (_, { factura }) => { return factura && <CheckCircleTwoTone /> }\r\n\r\n        // },\r\n        {\r\n            title: 'Estado',\r\n            key: 'Estado',\r\n            dataIndex: 'estado',\r\n            // render: (_, { estado }) => {\r\n            //     let color = estado === 'pagado' ? 'green' : 'geekblue';\r\n            //     if (estado === 'pendiente' || estado === 'sin pagar') color = 'volcano';\r\n            //     return <Tag color={color}> {estado.toUpperCase()} </Tag>\r\n            // }\r\n            render: (_, { abono, monto }) => {\r\n                const pagado = abono === monto;\r\n                let color = pagado ? 'green' : 'volcano';\r\n                return <Tag color={color}> {pagado ? 'PAGADO' : 'PENDIENTE'} </Tag>\r\n            }\r\n\r\n        },\r\n        // {\r\n        //     title: 'Acciones',\r\n        //     key: 'Editar',\r\n        //     render: (_, record) => <div style={{ display: 'flex', gap: 2, flexDirection: 'column' }}>\r\n        //         {/* <Button onClick={() => { deleteData(`balances/remove/${record._id}`).then(()=>getIngresos()) }}>Eliminar</Button> */}\r\n        //         <Button size='small' onClick={() => handleEditIngreso(record)}>Editar Monto</Button>\r\n        //         <Button size='small' onClick={() => { setIngresoForPrint([record]); showTicketModal() }}>Imprimir Nota</Button>\r\n        //     </div>\r\n        // },\r\n    ];\r\n\r\n    // if (loading) return <Loading />\r\n\r\n    return <div>\r\n\r\n        <div style={{ display: 'flex', flexDirection: 'row', gap: 12, alignItems: 'center' }}>\r\n            <h4>Ingresos del hospital</h4>\r\n            <Button ghost size='small' onClick={() => setIsIngresoModalOpen(true)} type='primary'  >Agregar Nuevo Ingreso del Hospital</Button>\r\n        </div>\r\n\r\n        <Table dataSource={ingresosData} columns={columns} size='small' />;\r\n\r\n        {/* Ingreso of Hospital*/}\r\n        <CreateBalanceHosptal tipo='ingreso' setIsModalOpen={setIsIngresoModalOpen} isModalOpen={isIngresoModalOpen} getIngresos={getIngresos} />\r\n\r\n        {/* <Modal title=\"Basic Modal\" open={isIngresoModalOpen} onOk={()=>setIsIngresoModalOpen(false)} onCancel={()=>setIsIngresoModalOpen(false)}>\r\n            <p>Some contents...</p>\r\n            <p>Some contents...</p>\r\n            <p>Some contents...</p>\r\n        </Modal> */}\r\n\r\n    </div>\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}