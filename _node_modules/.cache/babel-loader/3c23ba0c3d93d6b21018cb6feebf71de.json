{"ast":null,"code":"import React,{useState,useEffect}from'react';import{satisfaccion_catalog}from'./satisfaccion_catalog';import{Form,Input,Button,Slider,Checkbox,Radio,message}from'antd';import{getData,sendDataBody}from'../../resources';import logo from\"../../assets/Logo.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SatisfaccionEncuesta(props){// For check if the encuesta existts on db\nconst[encuestaNotExists,setEncuestaNotExists]=useState(null);const[checking,setChecking]=useState(true);const[pacienteData,setPacienteData]=useState({});const[medicoData,setMedicoData]=useState({});useEffect(()=>{checkEncuesta();},[]);const checkEncuesta=()=>{getData('getuser/'+props.idpaciente).then(rs=>{setPacienteData(rs);});getData('getuser/'+props.idmedico).then(rs=>{setMedicoData(rs);});getData(\"encuestas/uuid/\".concat(props.token)).then(rs=>{console.log(rs);setEncuestaNotExists(rs.message==='The survey does not exist');}).then(()=>{setChecking(false);console.log('Not exists: ',encuestaNotExists);});};const onFinish=values=>{const body={usuario:props.idpaciente,medico:props.idmedico,encuesta_satisfaccion:values,tipo:'satisfaccion',uuid:props.token,cat:[props.protocolo,props.momento]};console.log('Body:',body);sendDataBody('encuestas/add',body).then(rs=>{console.log('add enc resp',rs);message.success(rs.message);}).then(()=>checkEncuesta());};const onFinishFailed=errorInfo=>{console.log('Failed:',errorInfo);errorInfo.errorFields.map(p=>{message.error('Conteste la pregunta '+p.name);});};const onChange=checkedValues=>{console.log('checked = ',checkedValues);};const marks={0:'0',10:'10'};// Loading state\nif(checking)return/*#__PURE__*/_jsx(\"div\",{style:{paddingTop:180},children:/*#__PURE__*/_jsx(\"div\",{style:{margin:'auto',width:'40%',textAlign:'center'},children:/*#__PURE__*/_jsx(\"h3\",{children:\"Cargando\"})})});if(!encuestaNotExists)return/*#__PURE__*/_jsx(\"div\",{style:{paddingTop:180},children:/*#__PURE__*/_jsxs(\"div\",{style:{margin:'auto',width:'40%',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Gracias por contestar la encuesta\"}),/*#__PURE__*/_jsx(\"img\",{width:256,src:logo,alt:\"recreamedLogo\",style:{margin:'auto'}})]})});return/*#__PURE__*/_jsxs(\"div\",{className:\"mainContainer\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Encuesta de Satisfaccion\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"Medico: \",medicoData.name]}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"Paciente: \",pacienteData.name]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Form,{layout:\"vertical\",name:\"basic\"// labelCol={{ span: 24 }}\n// wrapperCol={{ span: 24 }}\n// initialValues={initialDolorValues}\n,onFinish:onFinish,onFinishFailed:onFinishFailed,autoComplete:\"off\",children:[satisfaccion_catalog.map(p=>{let input;switch(p.tipo){case'radioButton':input=/*#__PURE__*/_jsx(Radio.Group,{onChange:onChange,defaultValue:\"a\",children:p.respuestas.map((r,i)=>{return/*#__PURE__*/_jsx(Radio.Button,{value:i,children:r});})});break;case'metrica':input=/*#__PURE__*/_jsx(Slider,{defaultValue:0,min:0,max:10,marks:marks});break;case'multiple':input=/*#__PURE__*/_jsx(Checkbox.Group,{options:p.respuestas,defaultValue:['Apple'],onChange:onChange});break;case'seleccion':input=/*#__PURE__*/_jsx(Radio.Group,{children:p.respuestas.map((r,i)=>{return/*#__PURE__*/_jsx(Radio,{value:i===0?false:true,children:r});})});break;case'texto':input=/*#__PURE__*/_jsx(Input,{});break;default:input=/*#__PURE__*/_jsx(Input,{});}return p.tipo!=='titulo'?/*#__PURE__*/_jsx(Form.Item,{label:p.pregunta,name:p.n,rules:[{required:true,message:'Conteste correctamente'}],children:input},p.n):/*#__PURE__*/_jsx(\"h5\",{children:\"\".concat(p.n,\".  \").concat(p.pregunta)});}),/*#__PURE__*/_jsx(Form.Item,{wrapperCol:{offset:8,span:16},children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",children:\"Enviar respuestas\"})})]})]});}","map":{"version":3,"names":["React","useState","useEffect","satisfaccion_catalog","Form","Input","Button","Slider","Checkbox","Radio","message","getData","sendDataBody","logo","jsx","_jsx","jsxs","_jsxs","SatisfaccionEncuesta","props","encuestaNotExists","setEncuestaNotExists","checking","setChecking","pacienteData","setPacienteData","medicoData","setMedicoData","checkEncuesta","idpaciente","then","rs","idmedico","concat","token","console","log","onFinish","values","body","usuario","medico","encuesta_satisfaccion","tipo","uuid","cat","protocolo","momento","success","onFinishFailed","errorInfo","errorFields","map","p","error","name","onChange","checkedValues","marks","style","paddingTop","children","margin","width","textAlign","src","alt","className","layout","autoComplete","input","Group","defaultValue","respuestas","r","i","value","min","max","options","Item","label","pregunta","n","rules","required","wrapperCol","offset","span","type","htmlType"],"sources":["C:/Users/Gil/Documents/ReCreaMed/src/escalas/satisfaccion/satisfaccionEncuesta.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { satisfaccion_catalog } from './satisfaccion_catalog';\r\nimport { Form, Input, Button, Slider, Checkbox, Radio, message } from 'antd';\r\nimport { getData, sendDataBody } from '../../resources';\r\nimport logo from \"../../assets/Logo.png\";\r\n\r\nexport default function SatisfaccionEncuesta(props) {\r\n    // For check if the encuesta existts on db\r\n    const [encuestaNotExists, setEncuestaNotExists] = useState(null)\r\n    const [checking, setChecking] = useState(true)\r\n    const [pacienteData, setPacienteData] = useState({})\r\n    const [medicoData, setMedicoData] = useState({})\r\n\r\n    useEffect(() => {\r\n        checkEncuesta()\r\n    }, [])\r\n\r\n\r\n    const checkEncuesta = () => {\r\n\r\n        getData('getuser/' + props.idpaciente).then((rs) => { setPacienteData(rs) })\r\n        getData('getuser/' + props.idmedico).then((rs) => { setMedicoData(rs) })\r\n\r\n\r\n        getData(`encuestas/uuid/${props.token}`).then(rs => {\r\n            console.log(rs);\r\n            setEncuestaNotExists(rs.message === 'The survey does not exist')\r\n        }).then(() => { setChecking(false); console.log('Not exists: ', encuestaNotExists); })\r\n    }\r\n\r\n    const onFinish = (values) => {\r\n        const body = {\r\n            usuario: props.idpaciente,\r\n            medico: props.idmedico,\r\n            encuesta_satisfaccion: values,\r\n            tipo: 'satisfaccion',\r\n            uuid: props.token,\r\n            cat: [props.protocolo, props.momento]\r\n        }\r\n        console.log('Body:', body);\r\n        sendDataBody('encuestas/add', body).then((rs) => {\r\n            console.log('add enc resp', rs)\r\n            message.success(rs.message)\r\n        }).then(() => checkEncuesta())\r\n    };\r\n    const onFinishFailed = (errorInfo) => {\r\n        console.log('Failed:', errorInfo);\r\n        errorInfo.errorFields.map((p) => {\r\n            message.error('Conteste la pregunta ' + p.name)\r\n        })\r\n    };\r\n    const onChange = (checkedValues) => {\r\n        console.log('checked = ', checkedValues);\r\n    };\r\n\r\n    const marks = { 0: '0', 10: '10' };\r\n\r\n    // Loading state\r\n    if (checking) return <div style={{ paddingTop: 180 }}>\r\n        <div style={{ margin: 'auto', width: '40%', textAlign: 'center' }}>\r\n            <h3 >Cargando</h3>\r\n        </div>\r\n    </div>\r\n\r\n    if (!encuestaNotExists) return <div style={{ paddingTop: 180 }}>\r\n        <div style={{ margin: 'auto', width: '40%', textAlign: 'center' }}>\r\n            <h3 >Gracias por contestar la encuesta</h3>\r\n            <img width={256} src={logo} alt=\"recreamedLogo\" style={{ margin: 'auto' }} />\r\n        </div>\r\n    </div>\r\n    return (\r\n        <div className='mainContainer'>\r\n            <h4>Encuesta de Satisfaccion</h4>\r\n            <br />\r\n            <h5>Medico: {medicoData.name}</h5>\r\n            <h5>Paciente: {pacienteData.name}</h5>\r\n            <br />\r\n            <Form\r\n                layout='vertical'\r\n                name=\"basic\"\r\n                // labelCol={{ span: 24 }}\r\n                // wrapperCol={{ span: 24 }}\r\n                // initialValues={initialDolorValues}\r\n                onFinish={onFinish}\r\n                onFinishFailed={onFinishFailed}\r\n                autoComplete=\"off\"\r\n            >\r\n                {\r\n                    satisfaccion_catalog.map((p) => {\r\n                        let input;\r\n                        switch (p.tipo) {\r\n                            case 'radioButton':\r\n                                input = <Radio.Group onChange={onChange} defaultValue=\"a\">\r\n                                    {p.respuestas.map((r, i) => { return <Radio.Button value={i}>{r}</Radio.Button> })}\r\n                                </Radio.Group>\r\n                                break;\r\n                            case 'metrica':\r\n                                input = <Slider defaultValue={0} min={0} max={10} marks={marks} />\r\n                                break;\r\n                            case 'multiple':\r\n                                input = <Checkbox.Group options={p.respuestas} defaultValue={['Apple']} onChange={onChange} />\r\n                                break;\r\n                            case 'seleccion':\r\n                                input = <Radio.Group>\r\n                                    {p.respuestas.map((r, i) => { return <Radio value={i === 0 ? false : true}>{r}</Radio> })}\r\n                                </Radio.Group>;\r\n                                break;\r\n                            case 'texto':\r\n                                input = < Input />;\r\n                                break;\r\n                            default:\r\n                                input = < Input />;\r\n                        }\r\n\r\n                        return p.tipo !== 'titulo' ? <Form.Item\r\n                            key={p.n}\r\n                            label={p.pregunta}\r\n                            name={p.n}\r\n                            rules={[{ required: true, message: 'Conteste correctamente' }]}\r\n                        >\r\n                            {input}\r\n                        </Form.Item> : <h5>{`${p.n}.  ${p.pregunta}`}</h5>\r\n                    })\r\n                }\r\n\r\n\r\n                <Form.Item\r\n                    wrapperCol={{\r\n                        offset: 8,\r\n                        span: 16,\r\n                    }}\r\n                >\r\n                    <Button type=\"primary\" htmlType=\"submit\">\r\n                        Enviar respuestas\r\n                    </Button>\r\n                </Form.Item>\r\n            </Form>\r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}