{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Button,Select,List,Row,Col}from'antd';import{API}from'../../resources';import Loading from'../../loading';import{usuario}from'../../resources';import Expedientes from'../expedientes/expedientes';// import DetallesPaciente from './detalles.paciente_old'\nimport DetallesPaciente from'./detalles.paciente';import Register from'./register.patient';import{PlusOutlined,MobileOutlined,UserOutlined}from'@ant-design/icons';import dayjs from'dayjs';import ExpedienteFisio from'../expedieteFisio/expediente';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const{Option}=Select;export default function MainPacientes(){var _pacientesData$;const TIPO=\"psique\";const[pacientesData,setPacientesData]=useState([]);const[isLoading,setIsLoading]=useState(true);// const [paciente, setPaciente] = useState(null)\nconst[isRegisterModalOpen,setIsRegisterModalOpen]=useState(false);const[isEditModalOpen,setIsEditModalOpen]=useState(false);const[activePatient,setActivePatient]=useState((_pacientesData$=pacientesData[0])===null||_pacientesData$===void 0?void 0:_pacientesData$._id);useEffect(()=>{getPacientesData();},[]);useEffect(()=>{getPacientesData();},[isRegisterModalOpen]);const getPacientesData=()=>{fetch(API+\"mispacientes/\".concat(usuario._id)).then(response=>response.json()).then(data=>{data.forEach(paciente=>{paciente.res_name=paciente.responsable.nombre;paciente.res_phone=paciente.responsable.telefono;paciente.fecha_nacimiento=dayjs(paciente.fecha_nacimiento);});// console.log(data); \nsetPacientesData(data);if(data&&data.length>0)setActivePatient(data[0]);}).finally(()=>setIsLoading(false));};const onChange=data=>{const found=pacientesData.find(p=>p._id===data);setActivePatient(found);console.log('active patient',found);};const onSearch=value=>{console.log('search:',value);};if(isLoading)return/*#__PURE__*/_jsx(Loading,{});return/*#__PURE__*/_jsxs(\"div\",{className:\"mainContainer\",style:{backgroundColor:'#f5f6f8'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Pacientes\"}),/*#__PURE__*/_jsxs(Row,{justify:\"start\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"div\",{className:\"my-select-container\",children:/*#__PURE__*/_jsx(Select// Widget para buscar pacientes\n,{style:{borderRadius:8,width:320},dropdownStyle:{borderRadius:8},showSearch:true,placeholder:\"Buscar paciente\",optionFilterProp:\"children\",onChange:onChange,onSearch:onSearch,filterOption:(input,option)=>option.children.toLowerCase().includes(input.toLowerCase()),children:pacientesData.map(p=>/*#__PURE__*/_jsx(Option,{value:p._id,children:p.name},p._id))})})}),/*#__PURE__*/_jsxs(Col,{style:{marginLeft:12},children:[/*#__PURE__*/_jsx(Button,{className:\"btnIconCentered\",style:{height:30},onClick:()=>setIsRegisterModalOpen(!isRegisterModalOpen),size:\"small\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),shape:\"round\",type:\"primary\",title:\"Agregar paciente\",children:\"Agregar Paciente\"}),\" \"]})]}),\" \",/*#__PURE__*/_jsx(\"div\",{style:{height:'16px'}}),TIPO==='fisio'?/*#__PURE__*/_jsx(ExpedienteFisio,{paciente:activePatient}):/*#__PURE__*/_jsx(Expedientes,{paciente:activePatient,setIsEditModalOpen:setIsEditModalOpen}),/*#__PURE__*/_jsx(Register,{setIsModalOpen:setIsRegisterModalOpen,isModalOpen:isRegisterModalOpen,getPacientesData:getPacientesData}),/*#__PURE__*/_jsx(Register,{setIsModalOpen:setIsEditModalOpen,isModalOpen:isEditModalOpen,paciente:activePatient,getPacientesData:getPacientesData})]});}","map":{"version":3,"names":["React","useState","useEffect","Button","Select","List","Row","Col","API","Loading","usuario","Expedientes","DetallesPaciente","Register","PlusOutlined","MobileOutlined","UserOutlined","dayjs","ExpedienteFisio","jsx","_jsx","jsxs","_jsxs","Option","MainPacientes","_pacientesData$","TIPO","pacientesData","setPacientesData","isLoading","setIsLoading","isRegisterModalOpen","setIsRegisterModalOpen","isEditModalOpen","setIsEditModalOpen","activePatient","setActivePatient","_id","getPacientesData","fetch","concat","then","response","json","data","forEach","paciente","res_name","responsable","nombre","res_phone","telefono","fecha_nacimiento","length","finally","onChange","found","find","p","console","log","onSearch","value","className","style","backgroundColor","children","justify","borderRadius","width","dropdownStyle","showSearch","placeholder","optionFilterProp","filterOption","input","option","toLowerCase","includes","map","name","marginLeft","height","onClick","size","icon","shape","type","title","setIsModalOpen","isModalOpen"],"sources":["C:/Users/Gil/Documents/ReCreaMed/src/doctorViews/pacientes/main.pacientes.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { Button, Select, List, Row, Col } from 'antd'\r\nimport { API } from '../../resources'\r\nimport Loading from '../../loading'\r\nimport { usuario } from '../../resources'\r\nimport Expedientes from '../expedientes/expedientes'\r\n// import DetallesPaciente from './detalles.paciente_old'\r\nimport DetallesPaciente from './detalles.paciente'\r\nimport Register from './register.patient'\r\nimport { PlusOutlined, MobileOutlined, UserOutlined } from '@ant-design/icons';\r\nimport dayjs from 'dayjs'\r\nimport ExpedienteFisio from '../expedieteFisio/expediente'\r\nconst { Option } = Select;\r\n\r\nexport default function MainPacientes() {\r\n\r\n  const TIPO = \"psique\"\r\n\r\n  const [pacientesData, setPacientesData] = useState([])\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  // const [paciente, setPaciente] = useState(null)\r\n  const [isRegisterModalOpen, setIsRegisterModalOpen] = useState(false)\r\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false)\r\n  const [activePatient, setActivePatient] = useState(pacientesData[0]?._id)\r\n\r\n  useEffect(() => {\r\n    getPacientesData()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    getPacientesData()\r\n  }, [isRegisterModalOpen])\r\n\r\n  const getPacientesData = () => {\r\n    fetch(API + `mispacientes/${usuario._id}`)\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        data.forEach(paciente => {\r\n          paciente.res_name = paciente.responsable.nombre;\r\n          paciente.res_phone = paciente.responsable.telefono;\r\n          paciente.fecha_nacimiento = dayjs(paciente.fecha_nacimiento);\r\n        });\r\n        // console.log(data); \r\n        setPacientesData(data);\r\n        if (data && data.length > 0) setActivePatient(data[0])\r\n      })\r\n      .finally(() => setIsLoading(false))\r\n  }\r\n\r\n\r\n\r\n\r\n  const onChange = (data) => {\r\n    const found = pacientesData.find(p => p._id === data)\r\n    setActivePatient(found)\r\n    console.log('active patient', found)\r\n  };\r\n\r\n  const onSearch = (value) => {\r\n    console.log('search:', value);\r\n  };\r\n\r\n  if (isLoading) return <Loading />\r\n\r\n  return (\r\n    <div className='mainContainer' style={{ backgroundColor: '#f5f6f8' }}>\r\n      {/* <Col ></Col> */}\r\n      <h3 >Pacientes</h3>\r\n      <Row justify=\"start\">\r\n        <Col>\r\n          <div className=\"my-select-container\">\r\n            <Select\r\n              // Widget para buscar pacientes\r\n              style={{ borderRadius: 8, width: 320 }}\r\n              dropdownStyle={{ borderRadius: 8 }}\r\n              showSearch\r\n              placeholder=\"Buscar paciente\"\r\n              optionFilterProp=\"children\"\r\n              onChange={onChange}\r\n              onSearch={onSearch}\r\n              filterOption={(input, option) => option.children.toLowerCase().includes(input.toLowerCase())}\r\n            >\r\n              {\r\n                pacientesData.map((p) => <Option key={p._id} value={p._id}>{p.name}</Option>)\r\n              }\r\n            </Select>\r\n          </div>\r\n        </Col>\r\n        <Col style={{ marginLeft: 12 }}><Button className='btnIconCentered' style={{ height: 30 }} onClick={() => setIsRegisterModalOpen(!isRegisterModalOpen)} size='small' icon={<PlusOutlined />} shape='round' type=\"primary\" title='Agregar paciente' >Agregar Paciente</Button> </Col>\r\n      </Row> <div style={{ height: '16px' }}></div>\r\n\r\n\r\n      {\r\n        TIPO === 'fisio' ?\r\n          <ExpedienteFisio  paciente={activePatient}/> :\r\n          <Expedientes paciente={activePatient} setIsEditModalOpen={setIsEditModalOpen} />\r\n      }\r\n\r\n\r\n\r\n      {/* Modal For Register */}\r\n      <Register setIsModalOpen={setIsRegisterModalOpen} isModalOpen={isRegisterModalOpen} getPacientesData={getPacientesData} />\r\n\r\n      {/* Modal For Edit */}\r\n      <Register setIsModalOpen={setIsEditModalOpen} isModalOpen={isEditModalOpen} paciente={activePatient} getPacientesData={getPacientesData} />\r\n\r\n    </div >\r\n  )\r\n\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,MAAM,CAAEC,MAAM,CAAEC,IAAI,CAAEC,GAAG,CAAEC,GAAG,KAAQ,MAAM,CACrD,OAASC,GAAG,KAAQ,iBAAiB,CACrC,MAAO,CAAAC,OAAO,KAAM,eAAe,CACnC,OAASC,OAAO,KAAQ,iBAAiB,CACzC,MAAO,CAAAC,WAAW,KAAM,4BAA4B,CACpD;AACA,MAAO,CAAAC,gBAAgB,KAAM,qBAAqB,CAClD,MAAO,CAAAC,QAAQ,KAAM,oBAAoB,CACzC,OAASC,YAAY,CAAEC,cAAc,CAAEC,YAAY,KAAQ,mBAAmB,CAC9E,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,eAAe,KAAM,8BAA8B,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAC1D,KAAM,CAAEC,MAAO,CAAC,CAAGnB,MAAM,CAEzB,cAAe,SAAS,CAAAoB,aAAaA,CAAA,CAAG,KAAAC,eAAA,CAEtC,KAAM,CAAAC,IAAI,CAAG,QAAQ,CAErB,KAAM,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAG3B,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAAC4B,SAAS,CAAEC,YAAY,CAAC,CAAG7B,QAAQ,CAAC,IAAI,CAAC,CAChD;AACA,KAAM,CAAC8B,mBAAmB,CAAEC,sBAAsB,CAAC,CAAG/B,QAAQ,CAAC,KAAK,CAAC,CACrE,KAAM,CAACgC,eAAe,CAAEC,kBAAkB,CAAC,CAAGjC,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAACkC,aAAa,CAAEC,gBAAgB,CAAC,CAAGnC,QAAQ,EAAAwB,eAAA,CAACE,aAAa,CAAC,CAAC,CAAC,UAAAF,eAAA,iBAAhBA,eAAA,CAAkBY,GAAG,CAAC,CAEzEnC,SAAS,CAAC,IAAM,CACdoC,gBAAgB,CAAC,CAAC,CACpB,CAAC,CAAE,EAAE,CAAC,CAENpC,SAAS,CAAC,IAAM,CACdoC,gBAAgB,CAAC,CAAC,CACpB,CAAC,CAAE,CAACP,mBAAmB,CAAC,CAAC,CAEzB,KAAM,CAAAO,gBAAgB,CAAGA,CAAA,GAAM,CAC7BC,KAAK,CAAC/B,GAAG,iBAAAgC,MAAA,CAAmB9B,OAAO,CAAC2B,GAAG,CAAE,CAAC,CACvCI,IAAI,CAACC,QAAQ,EAAIA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACjCF,IAAI,CAACG,IAAI,EAAI,CACZA,IAAI,CAACC,OAAO,CAACC,QAAQ,EAAI,CACvBA,QAAQ,CAACC,QAAQ,CAAGD,QAAQ,CAACE,WAAW,CAACC,MAAM,CAC/CH,QAAQ,CAACI,SAAS,CAAGJ,QAAQ,CAACE,WAAW,CAACG,QAAQ,CAClDL,QAAQ,CAACM,gBAAgB,CAAGnC,KAAK,CAAC6B,QAAQ,CAACM,gBAAgB,CAAC,CAC9D,CAAC,CAAC,CACF;AACAxB,gBAAgB,CAACgB,IAAI,CAAC,CACtB,GAAIA,IAAI,EAAIA,IAAI,CAACS,MAAM,CAAG,CAAC,CAAEjB,gBAAgB,CAACQ,IAAI,CAAC,CAAC,CAAC,CAAC,CACxD,CAAC,CAAC,CACDU,OAAO,CAAC,IAAMxB,YAAY,CAAC,KAAK,CAAC,CAAC,CACvC,CAAC,CAKD,KAAM,CAAAyB,QAAQ,CAAIX,IAAI,EAAK,CACzB,KAAM,CAAAY,KAAK,CAAG7B,aAAa,CAAC8B,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACrB,GAAG,GAAKO,IAAI,CAAC,CACrDR,gBAAgB,CAACoB,KAAK,CAAC,CACvBG,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEJ,KAAK,CAAC,CACtC,CAAC,CAED,KAAM,CAAAK,QAAQ,CAAIC,KAAK,EAAK,CAC1BH,OAAO,CAACC,GAAG,CAAC,SAAS,CAAEE,KAAK,CAAC,CAC/B,CAAC,CAED,GAAIjC,SAAS,CAAE,mBAAOT,IAAA,CAACX,OAAO,GAAE,CAAC,CAEjC,mBACEa,KAAA,QAAKyC,SAAS,CAAC,eAAe,CAACC,KAAK,CAAE,CAAEC,eAAe,CAAE,SAAU,CAAE,CAAAC,QAAA,eAEnE9C,IAAA,OAAA8C,QAAA,CAAK,WAAS,CAAI,CAAC,cACnB5C,KAAA,CAAChB,GAAG,EAAC6D,OAAO,CAAC,OAAO,CAAAD,QAAA,eAClB9C,IAAA,CAACb,GAAG,EAAA2D,QAAA,cACF9C,IAAA,QAAK2C,SAAS,CAAC,qBAAqB,CAAAG,QAAA,cAClC9C,IAAA,CAAChB,MACC;AAAA,EACA4D,KAAK,CAAE,CAAEI,YAAY,CAAE,CAAC,CAAEC,KAAK,CAAE,GAAI,CAAE,CACvCC,aAAa,CAAE,CAAEF,YAAY,CAAE,CAAE,CAAE,CACnCG,UAAU,MACVC,WAAW,CAAC,iBAAiB,CAC7BC,gBAAgB,CAAC,UAAU,CAC3BlB,QAAQ,CAAEA,QAAS,CACnBM,QAAQ,CAAEA,QAAS,CACnBa,YAAY,CAAEA,CAACC,KAAK,CAAEC,MAAM,GAAKA,MAAM,CAACV,QAAQ,CAACW,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACH,KAAK,CAACE,WAAW,CAAC,CAAC,CAAE,CAAAX,QAAA,CAG3FvC,aAAa,CAACoD,GAAG,CAAErB,CAAC,eAAKtC,IAAA,CAACG,MAAM,EAAauC,KAAK,CAAEJ,CAAC,CAACrB,GAAI,CAAA6B,QAAA,CAAER,CAAC,CAACsB,IAAI,EAA5BtB,CAAC,CAACrB,GAAmC,CAAC,CAAC,CAEzE,CAAC,CACN,CAAC,CACH,CAAC,cACNf,KAAA,CAACf,GAAG,EAACyD,KAAK,CAAE,CAAEiB,UAAU,CAAE,EAAG,CAAE,CAAAf,QAAA,eAAC9C,IAAA,CAACjB,MAAM,EAAC4D,SAAS,CAAC,iBAAiB,CAACC,KAAK,CAAE,CAAEkB,MAAM,CAAE,EAAG,CAAE,CAACC,OAAO,CAAEA,CAAA,GAAMnD,sBAAsB,CAAC,CAACD,mBAAmB,CAAE,CAACqD,IAAI,CAAC,OAAO,CAACC,IAAI,cAAEjE,IAAA,CAACN,YAAY,GAAE,CAAE,CAACwE,KAAK,CAAC,OAAO,CAACC,IAAI,CAAC,SAAS,CAACC,KAAK,CAAC,kBAAkB,CAAAtB,QAAA,CAAE,kBAAgB,CAAQ,CAAC,IAAC,EAAK,CAAC,EACjR,CAAC,IAAC,cAAA9C,IAAA,QAAK4C,KAAK,CAAE,CAAEkB,MAAM,CAAE,MAAO,CAAE,CAAM,CAAC,CAI3CxD,IAAI,GAAK,OAAO,cACdN,IAAA,CAACF,eAAe,EAAE4B,QAAQ,CAAEX,aAAc,CAAC,CAAC,cAC5Cf,IAAA,CAACT,WAAW,EAACmC,QAAQ,CAAEX,aAAc,CAACD,kBAAkB,CAAEA,kBAAmB,CAAE,CAAC,cAMpFd,IAAA,CAACP,QAAQ,EAAC4E,cAAc,CAAEzD,sBAAuB,CAAC0D,WAAW,CAAE3D,mBAAoB,CAACO,gBAAgB,CAAEA,gBAAiB,CAAE,CAAC,cAG1HlB,IAAA,CAACP,QAAQ,EAAC4E,cAAc,CAAEvD,kBAAmB,CAACwD,WAAW,CAAEzD,eAAgB,CAACa,QAAQ,CAAEX,aAAc,CAACG,gBAAgB,CAAEA,gBAAiB,CAAE,CAAC,EAEvI,CAAC,CAGX"},"metadata":{},"sourceType":"module"}