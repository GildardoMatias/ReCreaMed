{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Gil\\\\Documents\\\\ReCreaMed\\\\src\\\\recepcionViews\\\\pacientesDash\\\\move.patients.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Button, Form, Input, Select, message } from 'antd';\nimport { API } from '../../resources';\nimport { usuario } from '../../resources';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Option\n} = Select;\nexport default function MovePatients() {\n  _s();\n  const [pacientesData, setPacientesData] = useState([]);\n  const [medicosData, setMedicosData] = useState([]);\n  useEffect(() => {\n    getPacientesData();\n    getMedicosData();\n  }, []);\n  const getPacientesData = () => {\n    fetch(API + `mispacientes/${usuario._id}`).then(response => response.json()).then(data => {\n      console.log(\"Pacientes: \", data);\n      setPacientesData(data);\n      // setILoading(false);\n    });\n  };\n  const getMedicosData = () => {\n    fetch(API + `users_by_rol/Medico`).then(response => response.json()).then(data => {\n      console.log(data);\n      setMedicosData(data);\n      // setILoading(false);\n    });\n  };\n  const onFinish = values => {\n    // console.log('Valores:', values);\n    const userFound = pacientesData.find(p => p._id === values.id_usuario);\n    let userMedicos = userFound.medicos_asignados;\n    userMedicos.push(values.medico);\n    const postBody = {\n      medicos_asignados: userMedicos\n    };\n    fetch(API + `users/updateMedicos/${values.id_usuario}`, {\n      method: 'PUT',\n      body: JSON.stringify(postBody),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(response => {\n      console.log('Success:', response);\n      message.success(response.message || response.error);\n    }).catch(error => console.error('Error:', error));\n  };\n  const onFinishFailed = errorInfo => {\n    console.log('Failed:', errorInfo);\n  };\n\n  //Select paciente widget\n  function onChange(value) {\n    console.log(`selected ${value}`);\n  }\n  function onSearch(val) {\n    console.log('search:', val);\n  }\n  //End of select paciente widget\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \" Asignar pacientes a otro m\\xE9dico \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      name: \"expediente\",\n      labelCol: {\n        span: 8\n      },\n      wrapperCol: {\n        span: 12\n      },\n      onFinish: onFinish,\n      onFinishFailed: onFinishFailed,\n      autoComplete: \"off\",\n      children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n        label: \"Paciente\",\n        name: \"id_usuario\",\n        rules: [{\n          required: true,\n          message: 'Selecciona Usuario'\n        }],\n        children: /*#__PURE__*/_jsxDEV(Select, {\n          showSearch: true,\n          placeholder: \"Select a person\",\n          optionFilterProp: \"children\",\n          onChange: onChange,\n          onSearch: onSearch,\n          children: pacientesData.map(p => /*#__PURE__*/_jsxDEV(Option, {\n            value: p._id,\n            children: p.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 52\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        label: \"Medico\",\n        name: \"medico\",\n        rules: [{\n          required: true,\n          message: 'Ingresa RFC'\n        }],\n        children: /*#__PURE__*/_jsxDEV(Select, {\n          showSearch: true,\n          placeholder: \"Select a person\",\n          optionFilterProp: \"children\",\n          onChange: onChange,\n          onSearch: onSearch,\n          children: medicosData.map(p => /*#__PURE__*/_jsxDEV(Option, {\n            value: p._id,\n            children: p.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 50\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        wrapperCol: {\n          offset: 8,\n          span: 16\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          htmlType: \"submit\",\n          form: \"expediente\",\n          children: \"Guardar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n}\n_s(MovePatients, \"i7/6pDyjDzjqfhJCsBxSSJStOQ4=\");\n_c = MovePatients;\nvar _c;\n$RefreshReg$(_c, \"MovePatients\");","map":{"version":3,"names":["React","useState","useEffect","Button","Form","Input","Select","message","API","usuario","jsxDEV","_jsxDEV","Option","MovePatients","_s","pacientesData","setPacientesData","medicosData","setMedicosData","getPacientesData","getMedicosData","fetch","_id","then","response","json","data","console","log","onFinish","values","userFound","find","p","id_usuario","userMedicos","medicos_asignados","push","medico","postBody","method","body","JSON","stringify","headers","res","success","error","catch","onFinishFailed","errorInfo","onChange","value","onSearch","val","children","fileName","_jsxFileName","lineNumber","columnNumber","name","labelCol","span","wrapperCol","autoComplete","Item","label","rules","required","showSearch","placeholder","optionFilterProp","map","offset","type","htmlType","form","_c","$RefreshReg$"],"sources":["C:/Users/Gil/Documents/ReCreaMed/src/recepcionViews/pacientesDash/move.patients.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { Button, Form, Input, Select, message } from 'antd';\r\nimport { API } from '../../resources';\r\nimport { usuario } from '../../resources';\r\nconst { Option } = Select;\r\n\r\n\r\nexport default function MovePatients() {\r\n    const [pacientesData, setPacientesData] = useState([]);\r\n    const [medicosData, setMedicosData] = useState([]);\r\n\r\n    useEffect(() => {\r\n        getPacientesData()\r\n        getMedicosData()\r\n    }, [])\r\n\r\n    const getPacientesData = () => {\r\n        fetch(API + `mispacientes/${usuario._id}`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                console.log(\"Pacientes: \", data);\r\n                setPacientesData(data);\r\n                // setILoading(false);\r\n            });\r\n    }\r\n\r\n    const getMedicosData = () => {\r\n        fetch(API + `users_by_rol/Medico`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                console.log(data);\r\n                setMedicosData(data);\r\n                // setILoading(false);\r\n            });\r\n    }\r\n\r\n    const onFinish = (values) => {\r\n        // console.log('Valores:', values);\r\n        const userFound = pacientesData.find(p => p._id === values.id_usuario);\r\n        let userMedicos = userFound.medicos_asignados;\r\n        userMedicos.push(values.medico);\r\n        const postBody = { medicos_asignados: userMedicos }\r\n        fetch(API + `users/updateMedicos/${values.id_usuario}`, { \r\n            method: 'PUT',\r\n            body: JSON.stringify(postBody),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then(res => res.json())\r\n            .then(response => { console.log('Success:', response); message.success(response.message || response.error); })\r\n            .catch(error => console.error('Error:', error))\r\n    };\r\n\r\n    const onFinishFailed = (errorInfo) => {\r\n        console.log('Failed:', errorInfo);\r\n    };\r\n\r\n\r\n\r\n    //Select paciente widget\r\n    function onChange(value) {\r\n        console.log(`selected ${value}`);\r\n    }\r\n    function onSearch(val) {\r\n        console.log('search:', val);\r\n    }\r\n    //End of select paciente widget\r\n    return (\r\n        <div>\r\n            <h4> Asignar pacientes a otro m√©dico </h4>\r\n            <br />\r\n            <Form name=\"expediente\" labelCol={{ span: 8 }} wrapperCol={{ span: 12 }} onFinish={onFinish} onFinishFailed={onFinishFailed} autoComplete=\"off\" >\r\n\r\n                <Form.Item label=\"Paciente\" name=\"id_usuario\" rules={[{ required: true, message: 'Selecciona Usuario' }]} >\r\n                    <Select\r\n                        showSearch\r\n                        placeholder=\"Select a person\"\r\n                        optionFilterProp=\"children\"\r\n                        onChange={onChange}\r\n                        onSearch={onSearch}\r\n                    >\r\n                        {\r\n                            pacientesData.map(p => <Option value={p._id}>{p.name}</Option>)\r\n                        }\r\n                    </Select>\r\n                </Form.Item>\r\n                <Form.Item label=\"Medico\" name=\"medico\" rules={[{ required: true, message: 'Ingresa RFC' }]} >\r\n                    <Select\r\n                        showSearch\r\n                        placeholder=\"Select a person\"\r\n                        optionFilterProp=\"children\"\r\n                        onChange={onChange}\r\n                        onSearch={onSearch}\r\n                    >\r\n                        {\r\n                            medicosData.map(p => <Option value={p._id}>{p.name}</Option>)\r\n                        }\r\n                    </Select>\r\n                </Form.Item>\r\n\r\n                <Form.Item wrapperCol={{ offset: 8, span: 16 }}>\r\n                    <Button type=\"primary\" htmlType=\"submit\" form='expediente'>\r\n                        Guardar\r\n                    </Button>\r\n                </Form.Item>\r\n            </Form>\r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}