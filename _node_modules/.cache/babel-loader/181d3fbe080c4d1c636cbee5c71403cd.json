{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Table,Space,Button,Popconfirm,Modal,Avatar}from'antd';import{API,deleteData}from'../../resources';import Loading from'../../loading';import{HomeOutlined,ClockCircleOutlined,UserOutlined}from'@ant-design/icons';import Register from'./register.doctor';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Dash(){const[isLoading,setILoading]=useState(true);const[doctoresData,setDoctoresData]=useState([]);const[doctorForEdit,setDoctorForEdit]=useState(null);const[isModalVisible,setIsModalVisible]=useState(false);useEffect(()=>{getDoctoresData();},[]);useEffect(()=>{getDoctoresData();},[isModalVisible]);const getDoctoresData=()=>{fetch(API+'users_by_rol/Medico').then(response=>response.json()).then(data=>{console.log(data);setDoctoresData(data);}).finally(()=>setILoading(false));};const editDoctor=async rd=>{let d=JSON.parse(JSON.stringify(rd));d.horarios.forEach(h=>{h.sucursal=h.sucursal._id;});console.log('Horarios before edit: ',d.horarios);await setDoctorForEdit(d);setIsModalVisible(true);console.log('Editar medico: ',d);};const deleteDoctor=doctor=>{deleteData('/users/remove/'+doctor._id).then(()=>{console.log('removed: ',doctor._id);getDoctoresData();});};const handleCancel=()=>{setIsModalVisible(false);};const columns=[{title:'Foto',key:'avatar',render:(_,_ref)=>{let{avatar}=_ref;return avatar.lenght>12?/*#__PURE__*/_jsx(\"img\",{src:'https://api.recreamed.com/images/'+avatar,alt:\"Logo\",width:64}):/*#__PURE__*/_jsx(Avatar,{icon:/*#__PURE__*/_jsx(UserOutlined,{}),size:64,className:\"btnIconCentered\"});}},{title:'Nombre',dataIndex:'name',key:'name'},{title:'Correo',dataIndex:'email',key:'email'},{title:'Telefono',dataIndex:'telefono',key:'telefono'},{title:'Horarios',dataIndex:'horarios',key:'horarios',render:(_,record)=>/*#__PURE__*/_jsx(\"p\",{children:record.horarios.map(h=>{return/*#__PURE__*/_jsxs(Space,{size:\"small\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(HomeOutlined,{style:{marginTop:-6}}),h.sucursal.nombre]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(ClockCircleOutlined,{}),h.horario]})]});})})},{title:'Opciones',key:'action',render:(_,record)=>/*#__PURE__*/_jsxs(Space,{size:\"middle\",children:[/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:()=>{editDoctor(record);},children:\"Editar\"}),/*#__PURE__*/_jsx(Popconfirm,{title:\"Seguro que quiere borrar este doctor?\",onConfirm:()=>deleteDoctor(record)// onCancel={cancel}\n,okText:\"Si\",cancelText:\"No\",children:/*#__PURE__*/_jsx(Button,{danger:true,size:\"small\",children:\"Borrar\"})})]})}];return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Doctores\"}),isLoading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(Table,{dataSource:doctoresData,columns:columns}),/*#__PURE__*/_jsx(Modal,{width:900,title:\"Editar Medico\",visible:isModalVisible,onCancel:handleCancel,destroyOnClose:true,footer:[],children:/*#__PURE__*/_jsx(Register,{medico:doctorForEdit,setIsModalVisible:setIsModalVisible})})]});}","map":{"version":3,"names":["React","useState","useEffect","Table","Space","Button","Popconfirm","Modal","Avatar","API","deleteData","Loading","HomeOutlined","ClockCircleOutlined","UserOutlined","Register","jsx","_jsx","jsxs","_jsxs","Dash","isLoading","setILoading","doctoresData","setDoctoresData","doctorForEdit","setDoctorForEdit","isModalVisible","setIsModalVisible","getDoctoresData","fetch","then","response","json","data","console","log","finally","editDoctor","rd","d","JSON","parse","stringify","horarios","forEach","h","sucursal","_id","deleteDoctor","doctor","handleCancel","columns","title","key","render","_","_ref","avatar","lenght","src","alt","width","icon","size","className","dataIndex","record","children","map","style","marginTop","nombre","horario","onClick","onConfirm","okText","cancelText","danger","dataSource","visible","onCancel","destroyOnClose","footer","medico"],"sources":["C:/Users/Gil/Documents/ReCreaMed/src/superAdminViews/doctors/dash.doctors.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { Table, Space, Button, Popconfirm, Modal, Avatar } from 'antd';\r\nimport { API, deleteData } from '../../resources'\r\nimport Loading from '../../loading';\r\nimport { HomeOutlined, ClockCircleOutlined, UserOutlined } from '@ant-design/icons'\r\nimport Register from './register.doctor';\r\n\r\nexport default function Dash() {\r\n\r\n  const [isLoading, setILoading] = useState(true);\r\n  const [doctoresData, setDoctoresData] = useState([]);\r\n  const [doctorForEdit, setDoctorForEdit] = useState(null)\r\n  const [isModalVisible, setIsModalVisible] = useState(false)\r\n\r\n  useEffect(() => { getDoctoresData() }, [])\r\n  useEffect(() => { getDoctoresData() }, [isModalVisible])\r\n\r\n  const getDoctoresData = () => {\r\n    fetch(API + 'users_by_rol/Medico')\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        console.log(data); setDoctoresData(data);\r\n      })\r\n      .finally(() => setILoading(false))\r\n  }\r\n\r\n  const editDoctor = async (rd) => {\r\n    let d = JSON.parse(JSON.stringify(rd));\r\n    d.horarios.forEach((h) => { h.sucursal = h.sucursal._id })\r\n    console.log('Horarios before edit: ', d.horarios);\r\n    await setDoctorForEdit(d)\r\n    setIsModalVisible(true);\r\n    console.log('Editar medico: ', d)\r\n  }\r\n\r\n  const deleteDoctor = (doctor) => {\r\n    deleteData('/users/remove/' + doctor._id).then(() => {\r\n      console.log('removed: ', doctor._id);\r\n      getDoctoresData()\r\n    })\r\n  }\r\n\r\n\r\n\r\n  const handleCancel = () => {\r\n    setIsModalVisible(false);\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Foto',\r\n      key: 'avatar',\r\n      render: (_, { avatar }) => (\r\n        avatar.lenght > 12 ?\r\n          <img src={'https://api.recreamed.com/images/' + avatar} alt=\"Logo\" width={64} />\r\n          : <Avatar icon={<UserOutlined />} size={64} className='btnIconCentered' />\r\n\r\n      ),\r\n    },\r\n    {\r\n      title: 'Nombre',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n    },\r\n    {\r\n      title: 'Correo',\r\n      dataIndex: 'email',\r\n      key: 'email',\r\n    },\r\n    {\r\n      title: 'Telefono',\r\n      dataIndex: 'telefono',\r\n      key: 'telefono',\r\n    },\r\n    {\r\n      title: 'Horarios',\r\n      dataIndex: 'horarios',\r\n      key: 'horarios',\r\n      render: (_, record) => (\r\n\r\n        <p>{record.horarios.map((h) => { return <Space size='small'><p><HomeOutlined style={{ marginTop: -6 }} />{h.sucursal.nombre}</p><p><ClockCircleOutlined />{h.horario}</p></Space> })}</p>\r\n\r\n      ),\r\n    },\r\n    {\r\n      title: 'Opciones',\r\n      key: 'action',\r\n      render: (_, record) => (\r\n        <Space size=\"middle\">\r\n          <Button size='small' onClick={() => { editDoctor(record) }}>\r\n            Editar\r\n          </Button>\r\n          <Popconfirm\r\n            title=\"Seguro que quiere borrar este doctor?\"\r\n            onConfirm={() => deleteDoctor(record)}\r\n            // onCancel={cancel}\r\n            okText=\"Si\"\r\n            cancelText=\"No\"\r\n          >\r\n            <Button danger size='small'>\r\n              Borrar\r\n            </Button>\r\n          </Popconfirm>\r\n\r\n        </Space>\r\n      ),\r\n    }\r\n  ];\r\n  return (\r\n    <div>\r\n      <h4>Doctores</h4>\r\n      {isLoading ? <Loading /> :\r\n        <Table dataSource={doctoresData} columns={columns} />\r\n      }\r\n\r\n      <Modal width={900} title=\"Editar Medico\" visible={isModalVisible} onCancel={handleCancel} destroyOnClose={true} footer={[]}>\r\n        <Register medico={doctorForEdit} setIsModalVisible={setIsModalVisible} />\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}