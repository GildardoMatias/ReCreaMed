{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { Circle, Line } from '@antv/g';\nimport { sort, group, mean, bisector, minIndex } from 'd3-array';\nimport { deepMix, lowerFirst, throttle } from '@antv/util';\nimport { Tooltip as TooltipComponent } from '@antv/component';\nimport { Constant, Band } from '@antv/scale';\nimport { defined, subObject } from '../utils/helper';\nimport { isTranspose, isPolar } from '../utils/coordinate';\nimport { angle, sub } from '../utils/vector';\nimport { invert } from '../utils/scale';\nimport { selectG2Elements, createXKey, selectPlotArea, mousePosition, selectFacetG2Elements, createDatumof, selectElementByData, bboxOf } from './utils';\nimport { dataOf } from './event';\nfunction getContainer(group, mount) {\n  if (mount) {\n    return typeof mount === 'string' ? document.querySelector(mount) : mount;\n  }\n  const canvas = group.ownerDocument.defaultView.getContextService().getDomElement();\n  return canvas.parentElement;\n}\nfunction getBounding(root) {\n  const bbox = root.getRenderBounds();\n  const {\n    min: [x1, y1],\n    max: [x2, y2]\n  } = bbox;\n  return {\n    x: x1,\n    y: y1,\n    width: x2 - x1,\n    height: y2 - y1\n  };\n}\nfunction getContainerOffset(container1, container2) {\n  const r1 = container1.getBoundingClientRect();\n  const r2 = container2.getBoundingClientRect();\n  return {\n    x: r1.x - r2.x,\n    y: r1.y - r2.y\n  };\n}\nfunction createTooltip(container, x0, y0, position, enterable, bounding, containerOffset) {\n  let css = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : {};\n  const defaults = {\n    '.g2-tooltip': {},\n    '.g2-tooltip-title': {\n      overflow: 'hidden',\n      'white-space': 'nowrap',\n      'text-overflow': 'ellipsis'\n    }\n  };\n  const tooltipElement = new TooltipComponent({\n    className: 'tooltip',\n    style: {\n      x: x0,\n      y: y0,\n      container: containerOffset,\n      data: [],\n      bounding,\n      position,\n      enterable,\n      title: '',\n      offset: [10, 10],\n      template: {\n        prefixCls: 'g2-'\n      },\n      style: deepMix(defaults, css)\n    }\n  });\n  container.appendChild(tooltipElement.HTMLTooltipElement);\n  return tooltipElement;\n}\nfunction showTooltip(_ref) {\n  let {\n    root,\n    data,\n    x,\n    y,\n    render,\n    event,\n    single,\n    position = 'right-bottom',\n    enterable = false,\n    css,\n    mount,\n    bounding\n  } = _ref;\n  const container = getContainer(root, mount);\n  const canvasContainer = getContainer(root);\n  // All the views share the same tooltip.\n  const parent = single ? canvasContainer : root;\n  const b = bounding || getBounding(root);\n  const containerOffset = getContainerOffset(canvasContainer, container);\n  const {\n    tooltipElement = createTooltip(container, x, y, position, enterable, b, containerOffset, css)\n  } = parent;\n  const {\n    items,\n    title = ''\n  } = data;\n  tooltipElement.update(Object.assign({\n    x,\n    y,\n    data: items,\n    title,\n    position,\n    enterable\n  }, render !== undefined && {\n    content: render(event, {\n      items,\n      title\n    })\n  }));\n  parent.tooltipElement = tooltipElement;\n}\nfunction hideTooltip(_ref2) {\n  let {\n    root,\n    single,\n    emitter,\n    nativeEvent = true,\n    event = null\n  } = _ref2;\n  if (nativeEvent) {\n    emitter.emit('tooltip:hide', {\n      nativeEvent\n    });\n  }\n  const container = getContainer(root);\n  const parent = single ? container : root;\n  const {\n    tooltipElement\n  } = parent;\n  if (tooltipElement) {\n    // Must be clientX, clientY.\n    tooltipElement.hide(event === null || event === void 0 ? void 0 : event.clientX, event === null || event === void 0 ? void 0 : event.clientY);\n  }\n}\nfunction destroyTooltip(_ref3) {\n  let {\n    root,\n    single\n  } = _ref3;\n  const container = getContainer(root);\n  const parent = single ? container : root;\n  if (!parent) return;\n  const {\n    tooltipElement\n  } = parent;\n  if (tooltipElement) {\n    tooltipElement.destroy();\n    parent.tooltipElement = undefined;\n  }\n}\nfunction showUndefined(item) {\n  const {\n    value\n  } = item;\n  return Object.assign(Object.assign({}, item), {\n    value: value === undefined ? 'undefined' : value\n  });\n}\nfunction singleItem(element) {\n  const {\n    __data__: datum\n  } = element;\n  const {\n    title,\n    items = []\n  } = datum;\n  const newItems = items.filter(defined).map(_a => {\n    var {\n        color = itemColorOf(element)\n      } = _a,\n      item = __rest(_a, [\"color\"]);\n    return Object.assign(Object.assign({}, item), {\n      color\n    });\n  }).map(showUndefined);\n  return Object.assign(Object.assign({}, title && {\n    title\n  }), {\n    items: newItems\n  });\n}\nfunction groupNameOf(scale, datum) {\n  const {\n    color: scaleColor,\n    series: scaleSeries,\n    facet = false\n  } = scale;\n  const {\n    color,\n    series\n  } = datum;\n  const invertAble = scale => {\n    return scale && scale.invert && !(scale instanceof Band) && !(scale instanceof Constant);\n  };\n  // For non constant color channel.\n  if (invertAble(scaleSeries)) {\n    const cloned = scaleSeries.clone();\n    return cloned.invert(series);\n  }\n  if (series && scaleSeries instanceof Band && scaleSeries.invert(series) !== color && !facet) {\n    return scaleSeries.invert(series);\n  }\n  if (invertAble(scaleColor)) {\n    const name = scaleColor.invert(color);\n    // For threshold scale.\n    if (Array.isArray(name)) return null;\n    return name;\n  }\n  return null;\n}\nfunction itemColorOf(element) {\n  const fill = element.getAttribute('fill');\n  const stroke = element.getAttribute('stroke');\n  const {\n    __data__: datum\n  } = element;\n  const {\n    color = fill && fill !== 'transparent' ? fill : stroke\n  } = datum;\n  return color;\n}\nfunction unique(items) {\n  let key = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : d => d;\n  const valueName = new Map(items.map(d => [key(d), d]));\n  return Array.from(valueName.values());\n}\nfunction groupItems(elements, scale, groupName) {\n  let data = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : elements.map(d => d['__data__']);\n  let theme = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n  const key = d => d instanceof Date ? +d : d;\n  const T = unique(data.map(d => d.title), key).filter(defined);\n  const newItems = data.flatMap((datum, i) => {\n    const element = elements[i];\n    const {\n      items = [],\n      title\n    } = datum;\n    const definedItems = items.filter(defined);\n    // If there is only one item, use groupName as title by default.\n    const useGroupName = groupName !== undefined ? groupName : items.length <= 1 ? true : false;\n    return definedItems.map(_a => {\n      var {\n          color = itemColorOf(element) || theme.color,\n          name\n        } = _a,\n        item = __rest(_a, [\"color\", \"name\"]);\n      const groupName = groupNameOf(scale, datum);\n      const name1 = useGroupName ? groupName || name : name || groupName;\n      return Object.assign(Object.assign({}, item), {\n        color,\n        name: name1 || title\n      });\n    });\n  }).map(showUndefined);\n  return Object.assign(Object.assign({}, T.length > 0 && {\n    title: T.join(',')\n  }), {\n    items: unique(newItems, d => \"(\".concat(key(d.name), \", \").concat(key(d.value), \", \").concat(key(d.color), \")\"))\n  });\n}\nfunction updateRuleY(root, points, _a) {\n  var {\n      plotWidth,\n      plotHeight,\n      mainWidth,\n      mainHeight,\n      startX,\n      startY,\n      transposed,\n      polar,\n      insetLeft,\n      insetTop\n    } = _a,\n    rest = __rest(_a, [\"plotWidth\", \"plotHeight\", \"mainWidth\", \"mainHeight\", \"startX\", \"startY\", \"transposed\", \"polar\", \"insetLeft\", \"insetTop\"]);\n  const defaults = Object.assign({\n    lineWidth: 1,\n    stroke: '#1b1e23',\n    strokeOpacity: 0.5\n  }, rest);\n  const Y = points.map(p => p[1]);\n  const X = points.map(p => p[0]);\n  const y = mean(Y);\n  const x = mean(X);\n  const pointsOf = () => {\n    if (polar) {\n      const r = Math.min(mainWidth, mainHeight) / 2;\n      const cx = startX + insetLeft + mainWidth / 2;\n      const cy = startY + insetTop + mainHeight / 2;\n      const a = angle(sub([x, y], [cx, cy]));\n      const x0 = cx + r * Math.cos(a);\n      const y0 = cy + r * Math.sin(a);\n      return [cx, x0, cy, y0];\n    }\n    if (transposed) return [startX, startX + plotWidth, y + startY, y + startY];\n    return [x + startX, x + startX, startY, startY + plotHeight];\n  };\n  const [x1, x2, y1, y2] = pointsOf();\n  const createLine = () => {\n    const line = new Line({\n      style: Object.assign({\n        x1,\n        x2,\n        y1,\n        y2\n      }, defaults)\n    });\n    root.appendChild(line);\n    return line;\n  };\n  // Only update rule with defined series elements.\n  if (X.length > 0) {\n    const ruleY = root.ruleY || createLine();\n    ruleY.style.x1 = x1;\n    ruleY.style.x2 = x2;\n    ruleY.style.y1 = y1;\n    ruleY.style.y2 = y2;\n    root.ruleY = ruleY;\n  }\n}\nfunction hideRuleY(root) {\n  if (root.ruleY) {\n    root.ruleY.remove();\n    root.ruleY = undefined;\n  }\n}\nfunction updateMarker(root, _ref4) {\n  let {\n    data,\n    style,\n    theme\n  } = _ref4;\n  if (root.markers) root.markers.forEach(d => d.remove());\n  const markers = data.filter(d => {\n    const [{\n      x,\n      y\n    }] = d;\n    return defined(x) && defined(y);\n  }).map(d => {\n    const [{\n      color,\n      element\n    }, point] = d;\n    const fill = color ||\n    // encode value\n    element.style.fill || element.style.stroke || theme.color;\n    const shape = new Circle({\n      style: Object.assign({\n        cx: point[0],\n        cy: point[1],\n        fill,\n        r: 4,\n        stroke: '#fff',\n        strokeWidth: 2\n      }, style)\n    });\n    return shape;\n  });\n  for (const marker of markers) root.appendChild(marker);\n  root.markers = markers;\n}\nfunction hideMarker(root) {\n  if (root.markers) {\n    root.markers.forEach(d => d.remove());\n    root.markers = [];\n  }\n}\nfunction interactionKeyof(markState, key) {\n  return Array.from(markState.values()).some(\n  // @ts-ignore\n  d => {\n    var _a;\n    return (_a = d.interaction) === null || _a === void 0 ? void 0 : _a[key];\n  });\n}\nfunction maybeValue(specified, defaults) {\n  return specified === undefined ? defaults : specified;\n}\nfunction isEmptyTooltipData(data) {\n  const {\n    title,\n    items\n  } = data;\n  if (items.length === 0 && title === undefined) return true;\n  return false;\n}\nfunction hasSeries(markState) {\n  return Array.from(markState.values()).some(\n  // @ts-ignore\n  d => {\n    var _a;\n    return ((_a = d.interaction) === null || _a === void 0 ? void 0 : _a.seriesTooltip) && d.tooltip;\n  });\n}\n/**\n * Show tooltip for series item.\n */\nexport function seriesTooltip(root, _a) {\n  var {\n      elements: elementsof,\n      sort: sortFunction,\n      filter: filterFunction,\n      scale,\n      coordinate,\n      crosshairs,\n      render,\n      groupName,\n      emitter,\n      wait = 50,\n      leading = true,\n      trailing = false,\n      startX = 0,\n      startY = 0,\n      body = true,\n      single = true,\n      position,\n      enterable,\n      mount,\n      bounding,\n      theme,\n      disableNative = false,\n      marker = true,\n      preserve = false,\n      style: _style = {},\n      css = {}\n    } = _a,\n    rest = __rest(_a, [\"elements\", \"sort\", \"filter\", \"scale\", \"coordinate\", \"crosshairs\", \"render\", \"groupName\", \"emitter\", \"wait\", \"leading\", \"trailing\", \"startX\", \"startY\", \"body\", \"single\", \"position\", \"enterable\", \"mount\", \"bounding\", \"theme\", \"disableNative\", \"marker\", \"preserve\", \"style\", \"css\"]);\n  const elements = elementsof(root);\n  const transposed = isTranspose(coordinate);\n  const polar = isPolar(coordinate);\n  const style = deepMix(_style, rest);\n  const {\n    innerWidth: plotWidth,\n    innerHeight: plotHeight,\n    width: mainWidth,\n    height: mainHeight,\n    insetLeft,\n    insetTop\n  } = coordinate.getOptions();\n  // Split elements into series elements and item elements.\n  const seriesElements = [];\n  const itemElements = [];\n  for (const element of elements) {\n    const {\n      __data__: data\n    } = element;\n    const {\n      seriesX,\n      title,\n      items\n    } = data;\n    if (seriesX) seriesElements.push(element);else if (title || items) itemElements.push(element);\n  }\n  const isBandScale = !!(transposed ? scale.y : scale.x).getBandWidth;\n  const closest = isBandScale && itemElements.length > 0;\n  // Sorted elements from top to bottom visually,\n  // or from right to left in transpose coordinate.\n  seriesElements.sort((a, b) => {\n    const index = transposed ? 0 : 1;\n    const minY = d => d.getBounds().min[index];\n    return transposed ? minY(b) - minY(a) : minY(a) - minY(b);\n  });\n  const extent = d => {\n    const index = transposed ? 1 : 0;\n    const {\n      min,\n      max\n    } = d.getLocalBounds();\n    return sort([min[index], max[index]]);\n  };\n  // Sort itemElements by x or y.\n  itemElements.sort((a, b) => {\n    const [minA, maxA] = extent(a);\n    const [minB, maxB] = extent(b);\n    const midA = (minA + maxA) / 2;\n    const midB = (minB + maxB) / 2;\n    return transposed ? midB - midA : midA - midB;\n  });\n  // Get sortedIndex and X for each series elements\n  const elementSortedX = new Map(seriesElements.map(element => {\n    const {\n      __data__: data\n    } = element;\n    const {\n      seriesX\n    } = data;\n    const seriesIndex = seriesX.map((_, i) => i);\n    const sortedIndex = sort(seriesIndex, i => seriesX[+i]);\n    return [element, [sortedIndex, seriesX]];\n  }));\n  const {\n    x: scaleX\n  } = scale;\n  // Apply offset for band scale x.\n  const offsetX = (scaleX === null || scaleX === void 0 ? void 0 : scaleX.getBandWidth) ? scaleX.getBandWidth() / 2 : 0;\n  const abstractX = focus => {\n    const [normalizedX] = coordinate.invert(focus);\n    return normalizedX - offsetX;\n  };\n  const indexByFocus = (focus, I, X) => {\n    const finalX = abstractX(focus);\n    const DX = X.filter(defined);\n    const [minX, maxX] = sort([DX[0], DX[DX.length - 1]]);\n    // If only has one element(minX == maxX), show tooltip when hover whole chart\n    const isOnlyOneElement = minX === maxX;\n    // If closest is true, always find at least one element.\n    // Otherwise, skip element out of plot area.\n    if (!closest && (finalX < minX || finalX > maxX) && !isOnlyOneElement) return null;\n    const search = bisector(i => X[+i]).center;\n    const i = search(I, finalX);\n    return I[i];\n  };\n  const elementsByFocus = (focus, elements) => {\n    const index = transposed ? 1 : 0;\n    const x = focus[index];\n    const filtered = elements.filter(element => {\n      const [min, max] = extent(element);\n      return x >= min && x <= max;\n    });\n    // If closet is true, always find at least one element.\n    if (!closest || filtered.length > 0) return filtered;\n    // Search the closet element to the focus.\n    const search = bisector(element => {\n      const [min, max] = extent(element);\n      return (min + max) / 2;\n    }).center;\n    const i = search(elements, x);\n    return [elements[i]].filter(defined);\n  };\n  const seriesData = (element, index) => {\n    const {\n      __data__: data\n    } = element;\n    return Object.fromEntries(Object.entries(data).filter(_ref5 => {\n      let [key] = _ref5;\n      return key.startsWith('series') && key !== 'series';\n    }).map(_ref6 => {\n      let [key, V] = _ref6;\n      const d = V[index];\n      return [lowerFirst(key.replace('series', '')), d];\n    }));\n  };\n  const update = throttle(event => {\n    const mouse = mousePosition(root, event);\n    if (!mouse) return;\n    const bbox = bboxOf(root);\n    const x = bbox.min[0];\n    const y = bbox.min[1];\n    const focus = [mouse[0] - startX, mouse[1] - startY];\n    if (!focus) return;\n    // Get selected item element.\n    const selectedItems = elementsByFocus(focus, itemElements);\n    // Get selected data item from both series element and item element.\n    const selectedSeriesElements = [];\n    const selectedSeriesData = [];\n    for (const element of seriesElements) {\n      const [sortedIndex, X] = elementSortedX.get(element);\n      const index = indexByFocus(focus, sortedIndex, X);\n      if (index !== null) {\n        selectedSeriesElements.push(element);\n        const d = seriesData(element, index);\n        const {\n          x,\n          y\n        } = d;\n        const p = coordinate.map([(x || 0) + offsetX, y || 0]);\n        selectedSeriesData.push([Object.assign(Object.assign({}, d), {\n          element\n        }), p]);\n      }\n    }\n    // Filter selectedSeriesData with different x,\n    // make sure there is only one x closest to focusX.\n    const SX = Array.from(new Set(selectedSeriesData.map(d => d[0].x)));\n    const closestX = SX[minIndex(SX, x => Math.abs(x - abstractX(focus)))];\n    const filteredSeriesData = selectedSeriesData.filter(d => d[0].x === closestX);\n    const selectedData = [...filteredSeriesData.map(d => d[0]), ...selectedItems.map(d => d.__data__)];\n    // Get the displayed tooltip data.\n    const selectedElements = [...selectedSeriesElements, ...selectedItems];\n    const tooltipData = groupItems(selectedElements, scale, groupName, selectedData, theme);\n    // Sort items and filter items.\n    if (sortFunction) {\n      tooltipData.items.sort((a, b) => sortFunction(a) - sortFunction(b));\n    }\n    if (filterFunction) {\n      tooltipData.items = tooltipData.items.filter(filterFunction);\n    }\n    // Hide tooltip with no selected tooltip.\n    if (selectedElements.length === 0 || isEmptyTooltipData(tooltipData)) {\n      hide(event);\n      return;\n    }\n    if (body) {\n      showTooltip({\n        root,\n        data: tooltipData,\n        x: mouse[0] + x,\n        y: mouse[1] + y,\n        render,\n        event,\n        single,\n        position,\n        enterable,\n        mount,\n        bounding,\n        css\n      });\n    }\n    if (crosshairs) {\n      const points = filteredSeriesData.map(d => d[1]);\n      const ruleStyle = subObject(style, 'crosshairs');\n      updateRuleY(root, points, Object.assign(Object.assign({}, ruleStyle), {\n        plotWidth,\n        plotHeight,\n        mainWidth,\n        mainHeight,\n        insetLeft,\n        insetTop,\n        startX,\n        startY,\n        transposed,\n        polar\n      }));\n    }\n    if (marker) {\n      const markerStyles = subObject(style, 'marker');\n      updateMarker(root, {\n        data: filteredSeriesData,\n        style: markerStyles,\n        theme\n      });\n    }\n    emitter.emit('tooltip:show', Object.assign(Object.assign({}, event), {\n      nativeEvent: true,\n      data: {\n        data: {\n          x: invert(scale.x, abstractX(focus), true)\n        }\n      }\n    }));\n  }, wait, {\n    leading,\n    trailing\n  });\n  const hide = event => {\n    hideTooltip({\n      root,\n      single,\n      emitter,\n      event\n    });\n    if (crosshairs) hideRuleY(root);\n    if (marker) hideMarker(root);\n  };\n  const destroy = () => {\n    destroyTooltip({\n      root,\n      single\n    });\n    if (crosshairs) hideRuleY(root);\n    if (marker) hideMarker(root);\n  };\n  const onTooltipShow = _ref7 => {\n    let {\n      nativeEvent,\n      data\n    } = _ref7;\n    if (nativeEvent) return;\n    const {\n      x\n    } = data.data;\n    const {\n      x: scaleX\n    } = scale;\n    const x1 = scaleX.map(x);\n    const [x2, y2] = coordinate.map([x1, 0.5]);\n    const {\n      min: [minX, minY]\n    } = root.getRenderBounds();\n    update({\n      offsetX: x2 + minX,\n      offsetY: y2 + minY\n    });\n  };\n  const onTooltipHide = () => {\n    hideTooltip({\n      root,\n      single,\n      emitter,\n      nativeEvent: false\n    });\n  };\n  const onTooltipDisable = () => {\n    removeEventListeners();\n    destroy();\n  };\n  const onTooltipEnable = () => {\n    addEventListeners();\n  };\n  const addEventListeners = () => {\n    if (!disableNative) {\n      root.addEventListener('pointerenter', update);\n      root.addEventListener('pointermove', update);\n      root.addEventListener('pointerleave', hide);\n    }\n  };\n  const removeEventListeners = () => {\n    if (!disableNative) {\n      root.removeEventListener('pointerenter', update);\n      root.removeEventListener('pointermove', update);\n      root.removeEventListener('pointerleave', hide);\n    }\n  };\n  addEventListeners();\n  emitter.on('tooltip:show', onTooltipShow);\n  emitter.on('tooltip:hide', onTooltipHide);\n  emitter.on('tooltip:disable', onTooltipDisable);\n  emitter.on('tooltip:enable', onTooltipEnable);\n  return () => {\n    removeEventListeners();\n    emitter.off('tooltip:show', onTooltipShow);\n    emitter.off('tooltip:hide', onTooltipHide);\n    emitter.off('tooltip:disable', onTooltipDisable);\n    emitter.off('tooltip:enable', onTooltipEnable);\n    if (preserve) {\n      hideTooltip({\n        root,\n        single,\n        emitter,\n        nativeEvent: false\n      });\n    } else {\n      destroy();\n    }\n  };\n}\n/**\n * Show tooltip for non-series item.\n */\nexport function tooltip(root, _ref8) {\n  let {\n    elements: elementsof,\n    scale,\n    render,\n    groupName,\n    sort: sortFunction,\n    filter: filterFunction,\n    emitter,\n    wait = 50,\n    leading = true,\n    trailing = false,\n    groupKey = d => d,\n    // group elements by specified key\n    single = true,\n    position,\n    enterable,\n    datum,\n    view,\n    mount,\n    bounding,\n    theme,\n    shared = false,\n    body = true,\n    disableNative = false,\n    preserve = false,\n    css = {}\n  } = _ref8;\n  const elements = elementsof(root);\n  const elementSet = new Set(elements);\n  const keyGroup = group(elements, groupKey);\n  const pointermove = throttle(event => {\n    const {\n      target: element\n    } = event;\n    if (!elementSet.has(element)) {\n      hideTooltip({\n        root,\n        single,\n        emitter,\n        event\n      });\n      return;\n    }\n    const k = groupKey(element);\n    const group = keyGroup.get(k);\n    const data = group.length === 1 && !shared ? singleItem(group[0]) : groupItems(group, scale, groupName, undefined, theme);\n    // Sort items and sort.\n    if (sortFunction) {\n      data.items.sort((a, b) => sortFunction(a) - sortFunction(b));\n    }\n    if (filterFunction) {\n      data.items = data.items.filter(filterFunction);\n    }\n    if (isEmptyTooltipData(data)) {\n      hideTooltip({\n        root,\n        single,\n        emitter,\n        event\n      });\n      return;\n    }\n    const {\n      offsetX,\n      offsetY\n    } = event;\n    if (body) {\n      showTooltip({\n        root,\n        data,\n        x: offsetX,\n        y: offsetY,\n        render,\n        event,\n        single,\n        position,\n        enterable,\n        mount,\n        bounding,\n        css\n      });\n    }\n    emitter.emit('tooltip:show', Object.assign(Object.assign({}, event), {\n      nativeEvent: true,\n      data: {\n        data: dataOf(element, view)\n      }\n    }));\n  }, wait, {\n    leading,\n    trailing\n  });\n  const pointerleave = event => {\n    hideTooltip({\n      root,\n      single,\n      emitter,\n      event\n    });\n  };\n  const addEventListeners = () => {\n    if (!disableNative) {\n      root.addEventListener('pointermove', pointermove);\n      // Only emit pointerleave event when the pointer is not in the root area.\n      // !!!DO NOT USE pointerout event, it will emit when the pointer is in the child area.\n      root.addEventListener('pointerleave', pointerleave);\n    }\n  };\n  const removeEventListeners = () => {\n    if (!disableNative) {\n      root.removeEventListener('pointermove', pointermove);\n      root.removeEventListener('pointerleave', pointerleave);\n    }\n  };\n  const onTooltipShow = _ref9 => {\n    let {\n      nativeEvent,\n      data\n    } = _ref9;\n    if (nativeEvent) return;\n    const element = selectElementByData(elements, data.data, datum);\n    if (!element) return;\n    const bbox = element.getBBox();\n    const {\n      x,\n      y,\n      width,\n      height\n    } = bbox;\n    pointermove({\n      target: element,\n      offsetX: x + width / 2,\n      offsetY: y + height / 2\n    });\n  };\n  const onTooltipHide = function () {\n    let {\n      nativeEvent\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (nativeEvent) return;\n    hideTooltip({\n      root,\n      single,\n      emitter,\n      nativeEvent: false\n    });\n  };\n  const onTooltipDisable = () => {\n    removeEventListeners();\n    destroyTooltip({\n      root,\n      single\n    });\n  };\n  const onTooltipEnable = () => {\n    addEventListeners();\n  };\n  emitter.on('tooltip:show', onTooltipShow);\n  emitter.on('tooltip:hide', onTooltipHide);\n  emitter.on('tooltip:enable', onTooltipEnable);\n  emitter.on('tooltip:disable', onTooltipDisable);\n  addEventListeners();\n  return () => {\n    removeEventListeners();\n    emitter.off('tooltip:show', onTooltipShow);\n    emitter.off('tooltip:hide', onTooltipHide);\n    if (preserve) {\n      hideTooltip({\n        root,\n        single,\n        emitter,\n        nativeEvent: false\n      });\n    } else {\n      destroyTooltip({\n        root,\n        single\n      });\n    }\n  };\n}\nexport function Tooltip(options) {\n  const {\n      shared,\n      crosshairs,\n      series,\n      name,\n      item = () => ({}),\n      facet = false\n    } = options,\n    rest = __rest(options, [\"shared\", \"crosshairs\", \"series\", \"name\", \"item\", \"facet\"]);\n  return (target, viewInstances, emitter) => {\n    const {\n      container,\n      view\n    } = target;\n    const {\n      scale,\n      markState,\n      coordinate,\n      theme\n    } = view;\n    // Get default value from mark states.\n    const defaultSeries = interactionKeyof(markState, 'seriesTooltip');\n    const defaultShowCrosshairs = interactionKeyof(markState, 'crosshairs');\n    const plotArea = selectPlotArea(container);\n    const isSeries = maybeValue(series, defaultSeries);\n    // For non-facet and series tooltip.\n    if (isSeries && hasSeries(markState) && !facet) {\n      return seriesTooltip(plotArea, Object.assign(Object.assign({}, rest), {\n        theme,\n        elements: selectG2Elements,\n        scale,\n        coordinate,\n        crosshairs: maybeValue(crosshairs, defaultShowCrosshairs),\n        item,\n        emitter\n      }));\n    }\n    // For facet and series tooltip.\n    if (isSeries && facet) {\n      // Get sub view instances for this view.\n      const facetInstances = viewInstances.filter(d => d !== target && d.options.parentKey === target.options.key);\n      const elements = selectFacetG2Elements(target, viewInstances);\n      // Use the scale of the first view.\n      const scale = facetInstances[0].view.scale;\n      const bbox = plotArea.getBounds();\n      const startX = bbox.min[0];\n      const startY = bbox.min[1];\n      Object.assign(scale, {\n        facet: true\n      });\n      // @todo Nested structure rather than flat structure for facet?\n      // Add listener to the root area.\n      // @ts-ignore\n      return seriesTooltip(plotArea.parentNode.parentNode, Object.assign(Object.assign({}, rest), {\n        theme,\n        elements: () => elements,\n        scale,\n        coordinate,\n        crosshairs: maybeValue(crosshairs, defaultShowCrosshairs),\n        item,\n        startX,\n        startY,\n        emitter\n      }));\n    }\n    return tooltip(plotArea, Object.assign(Object.assign({}, rest), {\n      datum: createDatumof(view),\n      elements: selectG2Elements,\n      scale,\n      coordinate,\n      groupKey: shared ? createXKey(view) : undefined,\n      item,\n      emitter,\n      view,\n      theme,\n      shared\n    }));\n  };\n}\nTooltip.props = {\n  reapplyWhenUpdate: true\n};","map":{"version":3,"names":["Circle","Line","sort","group","mean","bisector","minIndex","deepMix","lowerFirst","throttle","Tooltip","TooltipComponent","Constant","Band","defined","subObject","isTranspose","isPolar","angle","sub","invert","selectG2Elements","createXKey","selectPlotArea","mousePosition","selectFacetG2Elements","createDatumof","selectElementByData","bboxOf","dataOf","getContainer","mount","document","querySelector","canvas","ownerDocument","defaultView","getContextService","getDomElement","parentElement","getBounding","root","bbox","getRenderBounds","min","x1","y1","max","x2","y2","x","y","width","height","getContainerOffset","container1","container2","r1","getBoundingClientRect","r2","createTooltip","container","x0","y0","position","enterable","bounding","containerOffset","css","arguments","length","undefined","defaults","overflow","tooltipElement","className","style","data","title","offset","template","prefixCls","appendChild","HTMLTooltipElement","showTooltip","_ref","render","event","single","canvasContainer","parent","b","items","update","Object","assign","content","hideTooltip","_ref2","emitter","nativeEvent","emit","hide","clientX","clientY","destroyTooltip","_ref3","destroy","showUndefined","item","value","singleItem","element","__data__","datum","newItems","filter","map","_a","color","itemColorOf","__rest","groupNameOf","scale","scaleColor","series","scaleSeries","facet","invertAble","cloned","clone","name","Array","isArray","fill","getAttribute","stroke","unique","key","d","valueName","Map","from","values","groupItems","elements","groupName","theme","Date","T","flatMap","i","definedItems","useGroupName","name1","join","concat","updateRuleY","points","plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop","rest","lineWidth","strokeOpacity","Y","p","X","pointsOf","r","Math","cx","cy","a","cos","sin","createLine","line","ruleY","hideRuleY","remove","updateMarker","_ref4","markers","forEach","point","shape","strokeWidth","marker","hideMarker","interactionKeyof","markState","some","interaction","maybeValue","specified","isEmptyTooltipData","hasSeries","seriesTooltip","tooltip","elementsof","sortFunction","filterFunction","coordinate","crosshairs","wait","leading","trailing","body","disableNative","preserve","_style","innerWidth","innerHeight","getOptions","seriesElements","itemElements","seriesX","push","isBandScale","getBandWidth","closest","index","minY","getBounds","extent","getLocalBounds","minA","maxA","minB","maxB","midA","midB","elementSortedX","seriesIndex","_","sortedIndex","scaleX","offsetX","abstractX","focus","normalizedX","indexByFocus","I","finalX","DX","minX","maxX","isOnlyOneElement","search","center","elementsByFocus","filtered","seriesData","fromEntries","entries","_ref5","startsWith","_ref6","V","replace","mouse","selectedItems","selectedSeriesElements","selectedSeriesData","get","SX","Set","closestX","abs","filteredSeriesData","selectedData","selectedElements","tooltipData","ruleStyle","markerStyles","onTooltipShow","_ref7","offsetY","onTooltipHide","onTooltipDisable","removeEventListeners","onTooltipEnable","addEventListeners","addEventListener","removeEventListener","on","off","_ref8","groupKey","view","shared","elementSet","keyGroup","pointermove","target","has","k","pointerleave","_ref9","getBBox","options","viewInstances","defaultSeries","defaultShowCrosshairs","plotArea","isSeries","facetInstances","parentKey","parentNode","props","reapplyWhenUpdate"],"sources":["src/interaction/tooltip.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module"}