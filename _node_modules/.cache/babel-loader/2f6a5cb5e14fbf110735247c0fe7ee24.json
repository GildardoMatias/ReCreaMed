{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Row,Col,Space,Button,Image}from'antd';import{Avatar,Card}from'antd';import{UserOutlined}from'@ant-design/icons';import{API,usuario}from'../../resources';import Loading from'../../loading';import{FormOutlined}from'@ant-design/icons';import PerfilEdit from'./perfil.edit';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function PerfilAdministrador(){const[profileData,setProfileData]=useState([]);const[editing,setEditing]=useState(false);const[isLoading,setIsLoading]=useState(true);useEffect(()=>{getProfileData();},[]);useEffect(()=>{getProfileData();},[editing]);const getProfileData=()=>{fetch(API+'userByMail/'+usuario.email).then(response=>response.json()).then(data=>{console.log(data);setProfileData(data[0]);setIsLoading(false);});};const editPerfil=async p=>{p.horarios.forEach(h=>{h.sucursal=h.sucursal._id;});console.log('Horarios before edit profile: ',p.horarios);setEditing(true);console.log('Editar medico: ',p);};const DetailsProfile=()=>{// Two Columns of 8 spaces with space of 4 around\nreturn/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{span:8,offset:4,children:[// Profile Pic \nprofileData.avatar.length>9?/*#__PURE__*/_jsx(Image,{style:{borderRadius:12},width:256,src:'https://api.recreamed.com/images/'+profileData.avatar}):/*#__PURE__*/_jsx(Avatar,{size:128,icon:/*#__PURE__*/_jsx(UserOutlined,{}),style:{marginLeft:80},className:\"btnIconCentered\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"p\",{className:\"nombre\",children:[\" \",profileData.name,\" \"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"datos\",children:[\" \",profileData.rol,\" \"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"datos\",children:[\"Correo: \",profileData.email,\" \"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"datos\",children:[\"Telefono: \",profileData.telefono,\" \"]})]}),/*#__PURE__*/_jsxs(Col,{span:7,offset:1,children:[/*#__PURE__*/_jsx(Card,{title:\"Horarios\",style:{borderRadius:12},children:profileData.horarios.map(h=>{return/*#__PURE__*/_jsx(Card.Grid,{style:{width:'100%'},children:/*#__PURE__*/_jsxs(Row,{align:\"middle\",children:[/*#__PURE__*/_jsx(Col,{span:6,offset:4,children:/*#__PURE__*/_jsx(\"img\",{width:64,src:'https://api.recreamed.com/images/'+h.sucursal.logo,alt:\"Logo\"})}),/*#__PURE__*/_jsxs(Col,{span:10,children:[h.sucursal.nombre,\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",h.horario]})]})});})}),/*#__PURE__*/_jsx(\"br\",{})]})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"mainContainer\",children:[/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"PERFIL\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>editPerfil(profileData),type:\"primary\",shape:\"circle\",icon:/*#__PURE__*/_jsx(FormOutlined,{}),className:\"btnIconCentered\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),isLoading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(Card,{style:{borderRadius:16},children:editing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PerfilEdit,{perfil:profileData,setEditing:setEditing}),/*#__PURE__*/_jsx(Button,{onClick:()=>setEditing(false),children:\"Cancelar\"})]}):/*#__PURE__*/_jsx(DetailsProfile,{})})]});}","map":{"version":3,"names":["React","useState","useEffect","Row","Col","Space","Button","Image","Avatar","Card","UserOutlined","API","usuario","Loading","FormOutlined","PerfilEdit","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PerfilAdministrador","profileData","setProfileData","editing","setEditing","isLoading","setIsLoading","getProfileData","fetch","email","then","response","json","data","console","log","editPerfil","p","horarios","forEach","h","sucursal","_id","DetailsProfile","children","span","offset","avatar","length","style","borderRadius","width","src","size","icon","marginLeft","className","name","rol","telefono","title","map","Grid","align","logo","alt","nombre","horario","onClick","type","shape","perfil"],"sources":["C:/Users/Gil/Documents/ReCreaMed/src/admHospitalViews/perfil/perfil.administrador.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { Row, Col, Space, Button, Image } from 'antd';\r\nimport { Avatar, Card } from 'antd';\r\nimport { UserOutlined } from '@ant-design/icons';\r\nimport { API, usuario } from '../../resources';\r\nimport Loading from '../../loading';\r\nimport { FormOutlined } from '@ant-design/icons';\r\nimport PerfilEdit from './perfil.edit';\r\n\r\nexport default function PerfilAdministrador() {\r\n\r\n  const [profileData, setProfileData] = useState([]);\r\n  const [editing, setEditing] = useState(false)\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => { getProfileData() }, [])\r\n\r\n  useEffect(() => {\r\n    getProfileData()\r\n  }, [editing])\r\n\r\n  const getProfileData = () => {\r\n    fetch(API + 'userByMail/' + usuario.email)\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        console.log(data);\r\n        setProfileData(data[0]);\r\n        setIsLoading(false);\r\n      });\r\n  }\r\n\r\n  const editPerfil = async (p) => {\r\n    p.horarios.forEach((h) => { h.sucursal = h.sucursal._id })\r\n    console.log('Horarios before edit profile: ', p.horarios);\r\n\r\n    setEditing(true);\r\n    console.log('Editar medico: ', p)\r\n  }\r\n\r\n  const DetailsProfile = () => {\r\n    // Two Columns of 8 spaces with space of 4 around\r\n    return <Row>\r\n      <Col span={8} offset={4}>\r\n        {\r\n          // Profile Pic \r\n          profileData.avatar.length > 9 ?\r\n            <Image style={{ borderRadius: 12 }} width={256} src={'https://api.recreamed.com/images/' + profileData.avatar} />\r\n            :\r\n            <Avatar size={128} icon={<UserOutlined />} style={{ marginLeft: 80 }} className='btnIconCentered' />\r\n        }\r\n        <br /><br /><br />\r\n        <p className='nombre'> {profileData.name} </p>\r\n        <p className='datos'> {profileData.rol} </p>\r\n        <p className='datos'>Correo: {profileData.email} </p>\r\n        <p className='datos'>Telefono: {profileData.telefono} </p>\r\n      </Col>\r\n      {/* <Col span={8}>\r\n                <p>Estado: {profileData.estado}</p>\r\n                <p>Municipio: {profileData.municipio}</p>\r\n                <p>Colonia: {profileData.colonia}</p>\r\n                <p>Calle: {profileData.calle}</p>\r\n                <p>Codigo Postal:{profileData.codigopostal} </p>\r\n            </Col> */}\r\n      <Col span={7} offset={1}>\r\n        <Card title='Horarios' style={{ borderRadius: 12 }}>\r\n          {\r\n            profileData.horarios.map((h) => {\r\n              return <Card.Grid style={{ width: '100%' }} >\r\n                <Row align=\"middle\">\r\n                  <Col span={6} offset={4}><img width={64} src={'https://api.recreamed.com/images/' + h.sucursal.logo} alt=\"Logo\" /></Col>\r\n                  <Col span={10}>{h.sucursal.nombre} <br /> {h.horario}</Col>\r\n                </Row>\r\n              </Card.Grid>\r\n            })\r\n          }\r\n        </Card>\r\n        <br />\r\n        {/* <p>Universidad: {profileData.universidad} </p> */}\r\n      </Col>\r\n\r\n\r\n\r\n    </Row>\r\n  }\r\n\r\n  return (\r\n    <div className='mainContainer'>\r\n\r\n      <Space>\r\n        <h3>PERFIL</h3>\r\n        <Button onClick={() => editPerfil(profileData)} type=\"primary\" shape=\"circle\" icon={<FormOutlined />} className='btnIconCentered' />\r\n      </Space>\r\n      <br /><br />\r\n      {isLoading ? <Loading /> :\r\n        <Card style={{ borderRadius: 16 }}>\r\n          {\r\n            editing ?\r\n              <>\r\n                <PerfilEdit perfil={profileData} setEditing={setEditing} />\r\n                <Button onClick={() => setEditing(false)}>Cancelar</Button>\r\n              </> :\r\n              <DetailsProfile />\r\n          }\r\n        </Card>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}