{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { Rect, Path } from '@antv/g';\nimport { subObject, omitPrefixObject } from '../utils/helper';\nimport { selectionOf, pixelsOf } from '../utils/scale';\nimport { createElement } from '../utils/createElement';\nimport { select } from '../utils/selection';\nimport { selectG2Elements, selectPlotArea, createDatumof, useState, createValueof, setCursor, brushMousePosition, selectFacetG2Elements, mergeState, selectFacetViews } from './utils';\nfunction intersect(bbox1, bbox2) {\n  const [minX1, minY1, maxX1, maxY1] = bbox1;\n  const [minX2, minY2, maxX2, maxY2] = bbox2;\n  return !(minX2 > maxX1 || maxX2 < minX1 || minY2 > maxY1 || maxY2 < minY1);\n}\nfunction normalizeBounds(x, y, x1, y1, extent) {\n  const [minX, minY, maxX, maxY] = extent;\n  return [Math.max(minX, Math.min(x, x1)), Math.max(minY, Math.min(y, y1)), Math.min(maxX, Math.max(x, x1)), Math.min(maxY, Math.max(y, y1))];\n}\nfunction bboxOf(root) {\n  const {\n    width,\n    height\n  } = root.getBBox();\n  return [0, 0, width, height];\n}\nfunction applyStyle(selection, style) {\n  for (const [key, value] of Object.entries(style)) {\n    selection.style(key, value);\n  }\n}\nconst ResizableMask = createElement(g => {\n  const _a = g.attributes,\n    {\n      x,\n      y,\n      width,\n      height,\n      class: className,\n      renders = {},\n      handleSize: size = 10,\n      document\n    } = _a,\n    style = __rest(_a, [\"x\", \"y\", \"width\", \"height\", \"class\", \"renders\", \"handleSize\", \"document\"]);\n  if (!document || width === undefined || height === undefined || x === undefined || y === undefined) return;\n  const half = size / 2;\n  const renderRect = (g, options, document) => {\n    if (!g.handle) {\n      g.handle = document.createElement('rect');\n      g.append(g.handle);\n    }\n    const {\n      handle\n    } = g;\n    handle.attr(options);\n    return handle;\n  };\n  const _b = subObject(omitPrefixObject(style, 'handleNW', 'handleNE'), 'handleN'),\n    {\n      render: handleNRender = renderRect\n    } = _b,\n    handleNStyle = __rest(_b, [\"render\"]);\n  const _c = subObject(style, 'handleE'),\n    {\n      render: handleERender = renderRect\n    } = _c,\n    handleEStyle = __rest(_c, [\"render\"]);\n  const _d = subObject(omitPrefixObject(style, 'handleSE', 'handleSW'), 'handleS'),\n    {\n      render: handleSRender = renderRect\n    } = _d,\n    handleSStyle = __rest(_d, [\"render\"]);\n  const _e = subObject(style, 'handleW'),\n    {\n      render: handleWRender = renderRect\n    } = _e,\n    handleWStyle = __rest(_e, [\"render\"]);\n  const _f = subObject(style, 'handleNW'),\n    {\n      render: handleNWRender = renderRect\n    } = _f,\n    handleNWStyle = __rest(_f, [\"render\"]);\n  const _g = subObject(style, 'handleNE'),\n    {\n      render: handleNERender = renderRect\n    } = _g,\n    handleNEStyle = __rest(_g, [\"render\"]);\n  const _h = subObject(style, 'handleSE'),\n    {\n      render: handleSERender = renderRect\n    } = _h,\n    handleSEStyle = __rest(_h, [\"render\"]);\n  const _j = subObject(style, 'handleSW'),\n    {\n      render: handleSWRender = renderRect\n    } = _j,\n    handleSWStyle = __rest(_j, [\"render\"]);\n  const renderHandle = (g, renderNode) => {\n    const {\n      id\n    } = g;\n    const _a = g.attributes,\n      {\n        x,\n        y\n      } = _a,\n      style = __rest(_a, [\"x\", \"y\"]);\n    const handle = renderNode(g, Object.assign({\n      x: 0,\n      y: 0\n    }, style), document);\n    handle.id = id;\n    handle.style.draggable = true;\n  };\n  const appendHandle = handleRender => {\n    return () => {\n      const Node = createElement(g => renderHandle(g, handleRender));\n      return new Node({});\n    };\n  };\n  const container = select(g).attr('className', className).style('x', x).style('y', y).style('draggable', true);\n  container.maybeAppend('selection', 'rect').style('draggable', true).style('fill', 'transparent').call(applyStyle, Object.assign({\n    width,\n    height\n  }, omitPrefixObject(style, 'handle')));\n  container.maybeAppend('handle-n', appendHandle(handleNRender)).style('x', half).style('y', -half).style('width', width - size).style('height', size).style('fill', 'transparent').call(applyStyle, handleNStyle);\n  container.maybeAppend('handle-e', appendHandle(handleERender)).style('x', width - half).style('y', half).style('width', size).style('height', height - size).style('fill', 'transparent').call(applyStyle, handleEStyle);\n  container.maybeAppend('handle-s', appendHandle(handleSRender)).style('x', half).style('y', height - half).style('width', width - size).style('height', size).style('fill', 'transparent').call(applyStyle, handleSStyle);\n  container.maybeAppend('handle-w', appendHandle(handleWRender)).style('x', -half).style('y', half).style('width', size).style('height', height - size).style('fill', 'transparent').call(applyStyle, handleWStyle);\n  container.maybeAppend('handle-nw', appendHandle(handleNWRender)).style('x', -half).style('y', -half).style('width', size).style('height', size).style('fill', 'transparent').call(applyStyle, handleNWStyle);\n  container.maybeAppend('handle-ne', appendHandle(handleNERender)).style('x', width - half).style('y', -half).style('width', size).style('height', size).style('fill', 'transparent').call(applyStyle, handleNEStyle);\n  container.maybeAppend('handle-se', appendHandle(handleSERender)).style('x', width - half).style('y', height - half).style('width', size).style('height', size).style('fill', 'transparent').call(applyStyle, handleSEStyle);\n  container.maybeAppend('handle-sw', appendHandle(handleSWRender)).style('x', -half).style('y', height - half).style('width', size).style('height', size).style('fill', 'transparent').call(applyStyle, handleSWStyle);\n});\nexport function brush(root, _a) {\n  var {\n      brushed = () => {},\n      brushended = () => {},\n      brushcreated = () => {},\n      brushstarted = () => {},\n      brushupdated = () => {},\n      extent = bboxOf(root),\n      brushRegion = (x, y, x1, y1, extent) => [x, y, x1, y1],\n      reverse = false,\n      fill = '#777',\n      fillOpacity = '0.3',\n      stroke = '#fff',\n      selectedHandles = ['handle-n', 'handle-e', 'handle-s', 'handle-w', 'handle-nw', 'handle-ne', 'handle-se', 'handle-sw']\n    } = _a,\n    style = __rest(_a, [\"brushed\", \"brushended\", \"brushcreated\", \"brushstarted\", \"brushupdated\", \"extent\", \"brushRegion\", \"reverse\", \"fill\", \"fillOpacity\", \"stroke\", \"selectedHandles\"]);\n  let start = null; // Start point of mask.\n  let end = null; // End point of mask.\n  let moveStart = null; // Start point of moving mask.\n  let mask = null; // Mask instance.\n  let background = null;\n  let creating = false;\n  const [originX, originY, width, height] = extent;\n  setCursor(root, 'crosshair');\n  root.style.draggable = true; // Make it response to drag event.\n  // Remove old mask and init new mask.\n  const initMask = (x, y, event) => {\n    brushstarted(event);\n    if (mask) mask.remove();\n    if (background) background.remove();\n    start = [x, y];\n    if (reverse) return initReverseMask();\n    initNormalMask();\n  };\n  const initReverseMask = () => {\n    background = new Path({\n      style: Object.assign(Object.assign({}, style), {\n        fill,\n        fillOpacity,\n        stroke,\n        pointerEvents: 'none'\n      })\n    });\n    mask = new ResizableMask({\n      // @ts-ignore\n      style: {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n        draggable: true,\n        document: root.ownerDocument\n      },\n      className: 'mask'\n    });\n    root.appendChild(background);\n    root.appendChild(mask);\n  };\n  const initNormalMask = () => {\n    mask = new ResizableMask({\n      // @ts-ignore\n      style: Object.assign(Object.assign({\n        document: root.ownerDocument,\n        x: 0,\n        y: 0\n      }, style), {\n        fill,\n        fillOpacity,\n        stroke,\n        draggable: true\n      }),\n      className: 'mask'\n    });\n    root.appendChild(mask);\n  };\n  // Remove mask and reset states.\n  const removeMask = function () {\n    let emit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    if (mask) mask.remove();\n    if (background) background.remove();\n    start = null;\n    end = null;\n    moveStart = null;\n    creating = false;\n    mask = null;\n    background = null;\n    brushended(emit);\n  };\n  // Update mask and invoke brushended callback.\n  const updateMask = function (start, end) {\n    let emit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    const [x, y, x1, y1] = normalizeBounds(start[0], start[1], end[0], end[1], extent);\n    const [fx, fy, fx1, fy1] = brushRegion(x, y, x1, y1, extent);\n    if (reverse) updateReverseMask(fx, fy, fx1, fy1);else updateNormalMask(fx, fy, fx1, fy1);\n    brushed(fx, fy, fx1, fy1, emit);\n    return [fx, fy, fx1, fy1];\n  };\n  const updateNormalMask = (x, y, x1, y1) => {\n    mask.style.x = x;\n    mask.style.y = y;\n    mask.style.width = x1 - x;\n    mask.style.height = y1 - y;\n  };\n  const updateReverseMask = (x, y, x1, y1) => {\n    background.style.d = \"\\n      M\".concat(originX, \",\").concat(originY, \"L\").concat(width, \",\").concat(originY, \"L\").concat(width, \",\").concat(height, \"L\").concat(originX, \",\").concat(height, \"Z\\n      M\").concat(x, \",\").concat(y, \"L\").concat(x, \",\").concat(y1, \"L\").concat(x1, \",\").concat(y1, \"L\").concat(x1, \",\").concat(y, \"Z\\n    \");\n    mask.style.x = x;\n    mask.style.y = y;\n    mask.style.width = x1 - x;\n    mask.style.height = y1 - y;\n  };\n  // Move and update mask.\n  const moveMask = current => {\n    const clip = (dt, start, end, min, max) => {\n      if (dt + start < min) return min - start;\n      if (dt + end > max) return max - end;\n      return dt;\n    };\n    const dx = current[0] - moveStart[0];\n    const dy = current[1] - moveStart[1];\n    const dx1 = clip(dx, start[0], end[0], originX, width);\n    const dy1 = clip(dy, start[1], end[1], originY, height);\n    const currentStart = [start[0] + dx1, start[1] + dy1];\n    const currentEnd = [end[0] + dx1, end[1] + dy1];\n    updateMask(currentStart, currentEnd);\n  };\n  const handles = {\n    'handle-n': {\n      vector: [0, 1, 0, 0],\n      cursor: 'ns-resize'\n    },\n    'handle-e': {\n      vector: [0, 0, 1, 0],\n      cursor: 'ew-resize'\n    },\n    'handle-s': {\n      vector: [0, 0, 0, 1],\n      cursor: 'ns-resize'\n    },\n    'handle-w': {\n      vector: [1, 0, 0, 0],\n      cursor: 'ew-resize'\n    },\n    'handle-nw': {\n      vector: [1, 1, 0, 0],\n      cursor: 'nwse-resize'\n    },\n    'handle-ne': {\n      vector: [0, 1, 1, 0],\n      cursor: 'nesw-resize'\n    },\n    'handle-se': {\n      vector: [0, 0, 1, 1],\n      cursor: 'nwse-resize'\n    },\n    'handle-sw': {\n      vector: [1, 0, 0, 1],\n      cursor: 'nesw-resize'\n    }\n  };\n  const isMask = target => {\n    return isSelection(target) || isHandle(target);\n  };\n  const isHandle = target => {\n    const {\n      id\n    } = target;\n    if (selectedHandles.indexOf(id) === -1) return false;\n    return new Set(Object.keys(handles)).has(id);\n  };\n  const isSelection = target => {\n    return target === mask.getElementById('selection');\n  };\n  // If target is plot area, create mask.\n  // If target is mask, about to update position.\n  const dragstart = event => {\n    const {\n      target\n    } = event;\n    const [offsetX, offsetY] = brushMousePosition(root, event);\n    if (!mask || !isMask(target)) {\n      initMask(offsetX, offsetY, event);\n      creating = true;\n      return;\n    }\n    if (isMask(target)) {\n      moveStart = [offsetX, offsetY];\n    }\n  };\n  const drag = event => {\n    const {\n      target\n    } = event;\n    const mouse = brushMousePosition(root, event);\n    if (!start) return;\n    // If target is plot area, resize mask.\n    if (!moveStart) return updateMask(start, mouse);\n    // If target is selection area, move mask.\n    if (isSelection(target)) return moveMask(mouse);\n    // If target is handle area, resize mask.\n    const [dx, dy] = [mouse[0] - moveStart[0], mouse[1] - moveStart[1]];\n    const {\n      id\n    } = target;\n    if (handles[id]) {\n      const [sx, sy, ex, ey] = handles[id].vector;\n      return updateMask([start[0] + dx * sx, start[1] + dy * sy], [end[0] + dx * ex, end[1] + dy * ey]);\n    }\n  };\n  // If target is plot area, finish creating.\n  // If target is mask, finish moving mask.\n  const dragend = event => {\n    if (moveStart) {\n      moveStart = null;\n      // Update start and end;\n      const {\n        x,\n        y,\n        width,\n        height\n      } = mask.style;\n      start = [x, y];\n      end = [x + width, y + height];\n      brushupdated(x, y, x + width, y + height, event);\n      return;\n    }\n    end = brushMousePosition(root, event);\n    const [fx, fy, fx1, fy1] = updateMask(start, end);\n    creating = false;\n    brushcreated(fx, fy, fx1, fy1, event);\n  };\n  // Hide mask.\n  const click = event => {\n    const {\n      target\n    } = event;\n    if (mask && !isMask(target)) removeMask();\n  };\n  // Update cursor depends on hovered element.\n  const pointermove = event => {\n    const {\n      target\n    } = event;\n    if (!mask || !isMask(target) || creating) setCursor(root, 'crosshair');else if (isSelection(target)) setCursor(root, 'move');else if (isHandle(target)) setCursor(root, handles[target.id].cursor);\n  };\n  const pointerleave = () => {\n    setCursor(root, 'default');\n  };\n  root.addEventListener('dragstart', dragstart);\n  root.addEventListener('drag', drag);\n  root.addEventListener('dragend', dragend);\n  root.addEventListener('click', click);\n  root.addEventListener('pointermove', pointermove);\n  root.addEventListener('pointerleave', pointerleave);\n  return {\n    mask,\n    move(x, y, x1, y1) {\n      let emit = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n      if (!mask) initMask(x, y, {});\n      start = [x, y];\n      end = [x1, y1];\n      updateMask([x, y], [x1, y1], emit);\n    },\n    remove() {\n      let emit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      if (mask) removeMask(emit);\n    },\n    destroy() {\n      // Do not emit brush:end event.\n      if (mask) removeMask(false);\n      setCursor(root, 'default');\n      root.removeEventListener('dragstart', dragstart);\n      root.removeEventListener('drag', drag);\n      root.removeEventListener('dragend', dragend);\n      root.removeEventListener('click', click);\n      root.removeEventListener('pointermove', pointermove);\n      root.removeEventListener('pointerleave', pointerleave);\n    }\n  };\n}\nfunction selectSiblingViews(target, viewInstances, brushKey) {\n  return viewInstances.filter(d => {\n    if (d === target) return false;\n    const {\n      interaction = {}\n    } = d.options;\n    return Object.values(interaction).find(d => d.brushKey === brushKey);\n  });\n}\nfunction selectSiblingContainers(target, viewInstances, brushKey) {\n  return selectSiblingViews(target, viewInstances, brushKey).map(d => selectPlotArea(d.container));\n}\nfunction selectSiblingOptions(target, viewInstances, brushKey) {\n  return selectSiblingViews(target, viewInstances, brushKey).map(d => d.options);\n}\n/**\n * @todo Brush over view for series view.\n * @todo Test perf.\n */\nexport function brushHighlight(root, _a) {\n  var {\n      elements: elementof,\n      selectedHandles,\n      siblings: siblingsof = root => [],\n      datum,\n      brushRegion,\n      extent: optionalExtent,\n      reverse,\n      scale,\n      coordinate,\n      series = false,\n      key = d => d,\n      bboxOf = root => {\n        const {\n          x,\n          y,\n          width,\n          height\n        } = root.style;\n        return {\n          x,\n          y,\n          width,\n          height\n        };\n      },\n      state = {},\n      emitter\n    } = _a,\n    rest = __rest(_a, [\"elements\", \"selectedHandles\", \"siblings\", \"datum\", \"brushRegion\", \"extent\", \"reverse\", \"scale\", \"coordinate\", \"series\", \"key\", \"bboxOf\", \"state\", \"emitter\"]);\n  const elements = elementof(root);\n  const siblings = siblingsof(root);\n  const siblingElements = siblings.flatMap(elementof);\n  const valueof = createValueof(elements, datum);\n  const brushStyle = subObject(rest, 'mask');\n  const {\n    setState,\n    removeState\n  } = useState(state, valueof);\n  const clonedElement = new Map();\n  const {\n    width: rootWidth,\n    height: rootHeight,\n    x: ordinalX = 0,\n    y: ordinalY = 0\n  } = bboxOf(root);\n  const extent = optionalExtent ? optionalExtent : [0, 0, rootWidth, rootHeight];\n  const brushended = () => {\n    for (const element of [...elements, ...siblingElements]) {\n      removeState(element, 'active', 'inactive');\n    }\n  };\n  const brushed = (x, y, x1, y1) => {\n    var _a;\n    // Hide brush for the sibling view.\n    for (const sibling of siblings) (_a = sibling.brush) === null || _a === void 0 ? void 0 : _a.remove();\n    // Store the key of the active element.\n    const keys = new Set();\n    // Highlight and store selected elements.\n    for (const element of elements) {\n      const {\n        min,\n        max\n      } = element.getLocalBounds();\n      const [ex, ey] = min;\n      const [ex1, ey1] = max;\n      if (!intersect([ex, ey, ex1, ey1], [x, y, x1, y1])) {\n        setState(element, 'inactive');\n      } else {\n        setState(element, 'active');\n        keys.add(key(element));\n      }\n    }\n    // Highlight elements with same key in sibling view.\n    for (const element of siblingElements) {\n      if (keys.has(key(element))) setState(element, 'active');else setState(element, 'inactive');\n    }\n  };\n  const seriesBrushend = () => {\n    for (const element of elements) removeState(element, 'inactive');\n    for (const cloned of clonedElement.values()) cloned.remove();\n    clonedElement.clear();\n  };\n  const seriesBrushed = (x, y, x1, y1) => {\n    const clone = element => {\n      const cloned = element.cloneNode();\n      cloned.__data__ = element.__data__;\n      element.parentNode.appendChild(cloned);\n      clonedElement.set(element, cloned);\n      return cloned;\n    };\n    for (const element of elements) {\n      const cloned = clonedElement.get(element) || clone(element);\n      cloned.style.clipPath = new Rect({\n        style: {\n          x: x + ordinalX,\n          y: y + ordinalY,\n          width: x1 - x,\n          height: y1 - y\n        }\n      });\n      setState(element, 'inactive');\n      setState(cloned, 'active');\n    }\n  };\n  const brushHandler = brush(root, Object.assign(Object.assign({}, brushStyle), {\n    extent,\n    brushRegion,\n    reverse,\n    selectedHandles,\n    brushended: emit => {\n      const handler = series ? seriesBrushend : brushended;\n      if (emit) {\n        emitter.emit('brush:remove', {\n          nativeEvent: true\n        });\n      }\n      handler();\n    },\n    brushed: (x, y, x1, y1, emit) => {\n      const selection = selectionOf(x, y, x1, y1, scale, coordinate);\n      if (emit) {\n        emitter.emit('brush:highlight', {\n          nativeEvent: true,\n          data: {\n            selection\n          }\n        });\n      }\n      const handler = series ? seriesBrushed : brushed;\n      handler(x, y, x1, y1);\n    },\n    brushcreated: (x, y, x1, y1, event) => {\n      const selection = selectionOf(x, y, x1, y1, scale, coordinate);\n      emitter.emit('brush:end', Object.assign(Object.assign({}, event), {\n        nativeEvent: true,\n        data: {\n          selection\n        }\n      }));\n    },\n    brushupdated: (x, y, x1, y1, event) => {\n      const selection = selectionOf(x, y, x1, y1, scale, coordinate);\n      emitter.emit('brush:end', Object.assign(Object.assign({}, event), {\n        nativeEvent: true,\n        data: {\n          selection\n        }\n      }));\n    },\n    brushstarted: e => {\n      emitter.emit('brush:start', e);\n    }\n  }));\n  // Move brush and highlight data.\n  const onHighlight = _ref => {\n    let {\n      nativeEvent,\n      data\n    } = _ref;\n    if (nativeEvent) return;\n    const {\n      selection\n    } = data;\n    const [x, y, x1, y1] = pixelsOf(selection, scale, coordinate);\n    brushHandler.move(x, y, x1, y1, false);\n  };\n  emitter.on('brush:highlight', onHighlight);\n  // Remove brush and reset data.\n  const onRemove = function () {\n    let {\n      nativeEvent\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (nativeEvent) return;\n    brushHandler.remove(false);\n  };\n  emitter.on('brush:remove', onRemove);\n  // Remove event handlers.\n  const preBrushDestroy = brushHandler.destroy.bind(brushHandler);\n  brushHandler.destroy = () => {\n    emitter.off('brush:highlight', onHighlight);\n    emitter.off('brush:remove', onRemove);\n    preBrushDestroy();\n  };\n  return brushHandler;\n}\nexport function BrushHighlight(_a) {\n  var {\n      facet,\n      brushKey\n    } = _a,\n    rest = __rest(_a, [\"facet\", \"brushKey\"]);\n  return (target, viewInstances, emitter) => {\n    const {\n      container,\n      view,\n      options\n    } = target;\n    const plotArea = selectPlotArea(container);\n    const defaultOptions = {\n      maskFill: '#777',\n      maskFillOpacity: '0.3',\n      maskStroke: '#fff',\n      reverse: false\n    };\n    const defaultStates = ['active', ['inactive', {\n      opacity: 0.5\n    }]];\n    const {\n      scale,\n      coordinate\n    } = view;\n    if (facet) {\n      const bbox = plotArea.getBounds();\n      const x = bbox.min[0];\n      const y = bbox.min[1];\n      const x1 = bbox.max[0];\n      const y1 = bbox.max[1];\n      return brushHighlight(plotArea.parentNode.parentNode, Object.assign(Object.assign({\n        elements: () => selectFacetG2Elements(target, viewInstances),\n        datum: createDatumof(selectFacetViews(target, viewInstances).map(d => d.view)),\n        brushRegion: (x, y, x1, y1) => [x, y, x1, y1],\n        extent: [x, y, x1, y1],\n        state: mergeState(selectFacetViews(target, viewInstances).map(d => d.options), defaultStates),\n        emitter,\n        scale,\n        coordinate,\n        selectedHandles: undefined\n      }, defaultOptions), rest));\n    }\n    const brush = brushHighlight(plotArea, Object.assign(Object.assign({\n      elements: selectG2Elements,\n      key: element => element.__data__.key,\n      siblings: () => selectSiblingContainers(target, viewInstances, brushKey),\n      datum: createDatumof([view, ...selectSiblingViews(target, viewInstances, brushKey).map(d => d.view)]),\n      brushRegion: (x, y, x1, y1) => [x, y, x1, y1],\n      extent: undefined,\n      state: mergeState([options, ...selectSiblingOptions(target, viewInstances, brushKey)], defaultStates),\n      emitter,\n      scale,\n      coordinate,\n      selectedHandles: undefined\n    }, defaultOptions), rest));\n    // Bind brush to the view it belongs to.\n    //@ts-ignore\n    plotArea.brush = brush;\n    return () => brush.destroy();\n  };\n}","map":{"version":3,"names":["Rect","Path","subObject","omitPrefixObject","selectionOf","pixelsOf","createElement","select","selectG2Elements","selectPlotArea","createDatumof","useState","createValueof","setCursor","brushMousePosition","selectFacetG2Elements","mergeState","selectFacetViews","intersect","bbox1","bbox2","minX1","minY1","maxX1","maxY1","minX2","minY2","maxX2","maxY2","normalizeBounds","x","y","x1","y1","extent","minX","minY","maxX","maxY","Math","max","min","bboxOf","root","width","height","getBBox","applyStyle","selection","style","key","value","Object","entries","ResizableMask","g","_a","attributes","class","className","renders","handleSize","size","document","__rest","undefined","half","renderRect","options","handle","append","attr","_b","render","handleNRender","handleNStyle","_c","handleERender","handleEStyle","_d","handleSRender","handleSStyle","_e","handleWRender","handleWStyle","_f","handleNWRender","handleNWStyle","_g","handleNERender","handleNEStyle","_h","handleSERender","handleSEStyle","_j","handleSWRender","handleSWStyle","renderHandle","renderNode","id","assign","draggable","appendHandle","handleRender","Node","container","maybeAppend","call","brush","brushed","brushended","brushcreated","brushstarted","brushupdated","brushRegion","reverse","fill","fillOpacity","stroke","selectedHandles","start","end","moveStart","mask","background","creating","originX","originY","initMask","event","remove","initReverseMask","initNormalMask","pointerEvents","ownerDocument","appendChild","removeMask","emit","arguments","length","updateMask","fx","fy","fx1","fy1","updateReverseMask","updateNormalMask","d","concat","moveMask","current","clip","dt","dx","dy","dx1","dy1","currentStart","currentEnd","handles","vector","cursor","isMask","target","isSelection","isHandle","indexOf","Set","keys","has","getElementById","dragstart","offsetX","offsetY","drag","mouse","sx","sy","ex","ey","dragend","click","pointermove","pointerleave","addEventListener","move","destroy","removeEventListener","selectSiblingViews","viewInstances","brushKey","filter","interaction","values","find","selectSiblingContainers","map","selectSiblingOptions","brushHighlight","elements","elementof","siblings","siblingsof","datum","optionalExtent","scale","coordinate","series","state","emitter","rest","siblingElements","flatMap","valueof","brushStyle","setState","removeState","clonedElement","Map","rootWidth","rootHeight","ordinalX","ordinalY","element","sibling","getLocalBounds","ex1","ey1","add","seriesBrushend","cloned","clear","seriesBrushed","clone","cloneNode","__data__","parentNode","set","get","clipPath","brushHandler","handler","nativeEvent","data","e","onHighlight","_ref","on","onRemove","preBrushDestroy","bind","off","BrushHighlight","facet","view","plotArea","defaultOptions","maskFill","maskFillOpacity","maskStroke","defaultStates","opacity","bbox","getBounds"],"sources":["src/interaction/brushHighlight.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module"}