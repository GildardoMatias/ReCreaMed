{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Form,Input,Button,InputNumber,Modal,ColorPicker}from'antd';import{updateData,pre_colors}from'../../resources';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AddService(_ref){let{isOpen,handleClose,service,profileData,getProfileData}=_ref;const[initialService,setinitialService]=useState(null);useEffect(()=>{console.log('before',profileData);setinitialService(service);},[service]);const onFinish=async values=>{if(values.color.metaColor)values.color='#'+values.color.metaColor.originalInput;console.log(values);const newData=profileData.configuracion?{configuracion:{tratamientos_ofrecidos:[...profileData.configuracion.tratamientos_ofrecidos,values]}}:{configuracion:{tratamientos_ofrecidos:values}};await updateData(\"/users/updateUser/\".concat(profileData._id),newData).then(rs=>{console.log(rs);getProfileData();handleClose();});};const onFinishEdit=async values=>{if(values.color.metaColor)values.color='#'+values.color.metaColor.originalInput;console.log(values);const{configuracion:{tratamientos_ofrecidos}}=profileData;const foundIndex=tratamientos_ofrecidos.findIndex(svc=>svc._id===service._id);tratamientos_ofrecidos[foundIndex]=values;profileData.configuracion.tratamientos_ofrecidos=tratamientos_ofrecidos;console.log(\"after: \",profileData);await updateData(\"/users/updateUser/\".concat(profileData._id),profileData).then(rs=>{console.log(rs);getProfileData();handleClose();});};useEffect(()=>{return()=>{setinitialService(null);};},[]);return/*#__PURE__*/_jsx(Modal,{title:service?\"Editar Servicio\":\"Agregar Servicio\",open:isOpen,onCancel:handleClose,destroyOnClose:true,footer:[/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",form:\"add_tratamiento_medic\",children:service?\"Guardar\":\"Agregar\"}),/*#__PURE__*/_jsx(Button,{onClick:handleClose,children:\"Cerrar\"})],children:/*#__PURE__*/_jsxs(Form,{name:\"add_tratamiento_medic\",onFinish:service?onFinishEdit:onFinish,labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600},initialValues:service?service:{color:'#3174ad'},children:[/*#__PURE__*/_jsx(Form.Item,{name:\"tratamiento\",label:\"Tratamiento\",rules:[{required:true}],children:/*#__PURE__*/_jsx(Input,{placeholder:\"Ingresa Descripcion\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"observaciones\",label:\"Observaciones\",rules:[{required:false}],children:/*#__PURE__*/_jsx(Input,{placeholder:\"Ingresa Observaciones\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"costo\",label:\"Costo\",rules:[{required:true}],children:/*#__PURE__*/_jsx(InputNumber,{placeholder:\"Costo\",style:{width:'100%'}})}),/*#__PURE__*/_jsx(Form.Item,{name:\"color\",label:\"Color en calendario\",rules:[{required:false}],children:/*#__PURE__*/_jsx(ColorPicker,{presets:[{label:'Colores recomendados',colors:pre_colors},{label:'Recientes',colors:[]}]})})]})});}","map":{"version":3,"names":["React","useEffect","useState","Form","Input","Button","InputNumber","Modal","ColorPicker","updateData","pre_colors","jsx","_jsx","jsxs","_jsxs","AddService","_ref","isOpen","handleClose","service","profileData","getProfileData","initialService","setinitialService","console","log","onFinish","values","color","metaColor","originalInput","newData","configuracion","tratamientos_ofrecidos","concat","_id","then","rs","onFinishEdit","foundIndex","findIndex","svc","title","open","onCancel","destroyOnClose","footer","type","htmlType","form","children","onClick","name","labelCol","span","wrapperCol","style","maxWidth","initialValues","Item","label","rules","required","placeholder","width","presets","colors"],"sources":["C:/Users/Gil/Documents/ReCreaMed/src/doctorViews/perfil/service.add.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { Form, Input, Button, InputNumber, Modal, ColorPicker } from 'antd';\r\nimport { updateData, pre_colors } from '../../resources';\r\n\r\nexport default function AddService({ isOpen, handleClose, service, profileData, getProfileData }) {\r\n\r\n    const [initialService, setinitialService] = useState(null)\r\n\r\n    useEffect(() => {\r\n        console.log('before', profileData)\r\n        setinitialService(service)\r\n    }, [service])\r\n\r\n    const onFinish = async (values) => {\r\n        if (values.color.metaColor) values.color = '#' + values.color.metaColor.originalInput;\r\n        console.log(values)\r\n        const newData = profileData.configuracion ? { configuracion: { tratamientos_ofrecidos: [...profileData.configuracion.tratamientos_ofrecidos, values] } } : { configuracion: { tratamientos_ofrecidos: values } }\r\n        await updateData(`/users/updateUser/${profileData._id}`, newData).then((rs) => { console.log(rs); getProfileData(); handleClose() })\r\n    };\r\n\r\n    const onFinishEdit = async (values) => {\r\n        if (values.color.metaColor) values.color = '#' + values.color.metaColor.originalInput;\r\n        console.log(values)\r\n        const { configuracion: { tratamientos_ofrecidos } } = profileData;\r\n        const foundIndex = tratamientos_ofrecidos.findIndex((svc => svc._id === service._id));\r\n        tratamientos_ofrecidos[foundIndex] = values;\r\n        profileData.configuracion.tratamientos_ofrecidos = tratamientos_ofrecidos;\r\n        console.log(\"after: \", profileData)\r\n        await updateData(`/users/updateUser/${profileData._id}`, profileData).then((rs) => { console.log(rs); getProfileData(); handleClose() })\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            setinitialService(null)\r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <Modal title={service ? \"Editar Servicio\" : \"Agregar Servicio\"} open={isOpen} onCancel={handleClose} destroyOnClose\r\n            footer={[\r\n                <Button type=\"primary\" htmlType=\"submit\" form='add_tratamiento_medic'>\r\n                    {service ? \"Guardar\" : \"Agregar\"}\r\n                </Button>,\r\n                <Button onClick={handleClose}>Cerrar</Button>\r\n            ]}\r\n        >\r\n            <Form\r\n                name=\"add_tratamiento_medic\"\r\n                onFinish={service ? onFinishEdit : onFinish}\r\n                labelCol={{ span: 8 }} wrapperCol={{ span: 16 }} style={{ maxWidth: 600 }}\r\n                initialValues={service ? service : { color: '#3174ad' }}\r\n            >\r\n\r\n                {/* {JSON.stringify(service)} */}\r\n\r\n                <Form.Item name=\"tratamiento\" label=\"Tratamiento\" rules={[{ required: true }]}  >\r\n                    <Input placeholder=\"Ingresa Descripcion\" />\r\n                </Form.Item>\r\n\r\n                <Form.Item name=\"observaciones\" label=\"Observaciones\" rules={[{ required: false }]}  >\r\n                    <Input placeholder=\"Ingresa Observaciones\" />\r\n                </Form.Item>\r\n\r\n                <Form.Item name=\"costo\" label=\"Costo\" rules={[{ required: true }]}  >\r\n                    <InputNumber placeholder=\"Costo\" style={{ width: '100%' }} />\r\n                </Form.Item>\r\n\r\n                <Form.Item name=\"color\" label=\"Color en calendario\" rules={[{ required: false }]}  >\r\n                    <ColorPicker\r\n                        presets={[\r\n                            {\r\n                                label: 'Colores recomendados',\r\n                                colors: pre_colors,\r\n                            },\r\n                            {\r\n                                label: 'Recientes',\r\n                                colors: [],\r\n                            },\r\n                        ]}\r\n                    />\r\n                </Form.Item>\r\n\r\n            </Form>\r\n        </Modal>\r\n\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}