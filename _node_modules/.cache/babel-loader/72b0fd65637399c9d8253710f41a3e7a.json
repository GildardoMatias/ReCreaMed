{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getData,usuario}from'../../resources';import getAllEscalas from'../getEscalas';import{Button,Table,Modal}from'antd';import EscalasCreateGeneralLink from'../escalasCreateGeneralLink';import ThiDetails from'./thi.details';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ThiResults(){const[encuestasData,setEncuestasData]=useState([]);const[loading,setLoading]=useState(true);// For Creating Modal\nconst[isModalOpen,setIsModalOpen]=useState(false);const showModal=()=>{setIsModalOpen(true);};const handleOk=()=>{setIsModalOpen(false);};const handleCancel=()=>{setIsModalOpen(false);};// Modal for details\nconst[escalaForDetails,setEscalaForDetails]=useState(\"\");const[isDetailsModalOpen,setIsDetailsModalOpen]=useState(false);const showDetailsModal=()=>{setIsDetailsModalOpen(true);};const handleDetailsOk=()=>{setIsDetailsModalOpen(false);};const handleDetailsCancel=()=>{setIsDetailsModalOpen(false);};useEffect(()=>{usuario.rol==='Administrador'||usuario.rol==='Recepcion'||usuario.rol==='Enfermero'?getAllEscalas('thi',setEncuestasData,setLoading):getEncuestasData(usuario._id);},[]);const getEncuestasData=medico=>{getData(\"encuestas/byDoctorAndTipo/\".concat(medico,\"/thi\")).then(rs=>{console.log(rs);setEncuestasData(rs);});};const detailsColumns=[{title:'Usuario',key:'usuario',dataIndex:'usuario',render:(_,_ref)=>{let{usuario}=_ref;return/*#__PURE__*/_jsx(_Fragment,{children:usuario?usuario.name:\"usuario no existente\"});},sorter:true},{title:'Acciones',key:'actions',dataIndex:'actions',render:(_,_ref2)=>{let{thi}=_ref2;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Button,{onClick:()=>{setEscalaForDetails(thi);showDetailsModal();},children:\"Ver detalles\"})});}}];return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"spacedTitle\",children:\"Resultados de encuestas THI\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:showModal,children:\"Crear Link Encuesta THI\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h4\",{children:\"Detalles de encuestas\"}),/*#__PURE__*/_jsx(Table,{columns:detailsColumns,dataSource:encuestasData,bordered:true}),/*#__PURE__*/_jsx(Modal,{title:\"Crear Encuesta THI\",open:isModalOpen,onOk:handleOk,onCancel:handleCancel,footer:[/*#__PURE__*/_jsx(Button,{onClick:handleCancel,children:\"Cerrar\"})],children:/*#__PURE__*/_jsx(EscalasCreateGeneralLink,{tipo:\"thi\"})}),/*#__PURE__*/_jsx(ThiDetails,{escalaDetails:escalaForDetails,handleCancel:handleDetailsCancel,handleOk:handleDetailsOk,isModalOpen:isDetailsModalOpen})]});}","map":{"version":3,"names":["React","useState","useEffect","getData","usuario","getAllEscalas","Button","Table","Modal","EscalasCreateGeneralLink","ThiDetails","Fragment","_Fragment","jsx","_jsx","jsxs","_jsxs","ThiResults","encuestasData","setEncuestasData","loading","setLoading","isModalOpen","setIsModalOpen","showModal","handleOk","handleCancel","escalaForDetails","setEscalaForDetails","isDetailsModalOpen","setIsDetailsModalOpen","showDetailsModal","handleDetailsOk","handleDetailsCancel","rol","getEncuestasData","_id","medico","concat","then","rs","console","log","detailsColumns","title","key","dataIndex","render","_","_ref","children","name","sorter","_ref2","thi","onClick","className","type","columns","dataSource","bordered","open","onOk","onCancel","footer","tipo","escalaDetails"],"sources":["C:/Users/Gil/Documents/ReCreaMed/src/escalas/thi/thi.results.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { getData, usuario } from '../../resources'\r\nimport getAllEscalas from '../getEscalas'\r\nimport { Button, Table, Modal } from 'antd'\r\nimport EscalasCreateGeneralLink from '../escalasCreateGeneralLink'\r\nimport ThiDetails from './thi.details'\r\n\r\n\r\nexport default function ThiResults() {\r\n\r\n    const [encuestasData, setEncuestasData] = useState([])\r\n    const [loading, setLoading] = useState(true)\r\n\r\n    // For Creating Modal\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const showModal = () => { setIsModalOpen(true) };\r\n    const handleOk = () => { setIsModalOpen(false) };\r\n    const handleCancel = () => { setIsModalOpen(false) };\r\n\r\n    // Modal for details\r\n    const [escalaForDetails, setEscalaForDetails] = useState(\"\")\r\n    const [isDetailsModalOpen, setIsDetailsModalOpen] = useState(false);\r\n    const showDetailsModal = () => { setIsDetailsModalOpen(true) };\r\n    const handleDetailsOk = () => { setIsDetailsModalOpen(false) };\r\n    const handleDetailsCancel = () => { setIsDetailsModalOpen(false) };\r\n\r\n    useEffect(() => {\r\n        (usuario.rol === 'Administrador' || usuario.rol === 'Recepcion' || usuario.rol === 'Enfermero') ? getAllEscalas('thi', setEncuestasData, setLoading) : getEncuestasData(usuario._id)\r\n    }, [])\r\n\r\n    const getEncuestasData = (medico) => {\r\n        getData(`encuestas/byDoctorAndTipo/${medico}/thi`).then((rs) => {\r\n            console.log(rs);\r\n            setEncuestasData(rs)\r\n        })\r\n    }\r\n\r\n    const detailsColumns = [\r\n        {\r\n            title: 'Usuario',\r\n            key: 'usuario',\r\n            dataIndex: 'usuario',\r\n            render: (_, { usuario }) => (<>{usuario ? usuario.name : \"usuario no existente\"}</>),\r\n            sorter: true\r\n        },\r\n        {\r\n            title: 'Acciones',\r\n            key: 'actions',\r\n            dataIndex: 'actions',\r\n            render: (_, { thi }) => (<>\r\n                <Button onClick={() => { setEscalaForDetails(thi); showDetailsModal() }}>Ver detalles</Button>\r\n            </>),\r\n        },\r\n    ]\r\n\r\n    return (\r\n        <div>\r\n            <h4 className='spacedTitle'>Resultados de encuestas THI</h4>\r\n            <Button type=\"primary\" onClick={showModal}>\r\n                Crear Link Encuesta THI\r\n            </Button>\r\n\r\n            <br /><br />\r\n\r\n            <h4>Detalles de encuestas</h4>\r\n            <Table columns={detailsColumns} dataSource={encuestasData} bordered />\r\n\r\n            <Modal title=\"Crear Encuesta THI\" open={isModalOpen} onOk={handleOk} onCancel={handleCancel}\r\n                footer={[\r\n                    <Button onClick={handleCancel}>Cerrar</Button>\r\n                ]}>\r\n                <EscalasCreateGeneralLink tipo='thi' />\r\n            </Modal>\r\n\r\n            <ThiDetails escalaDetails={escalaForDetails} handleCancel={handleDetailsCancel} handleOk={handleDetailsOk} isModalOpen={isDetailsModalOpen} />\r\n\r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}