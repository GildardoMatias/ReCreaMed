{"ast":null,"code":"import React,{useEffect,useState}from'react';import{EncuestaLoading,ThanksMessage,checkEncuesta,onFinishFailed}from'../utils';import{Form,Input,Button,message,Radio}from'antd';import{sendDataBody}from'../../resources';import{cssrs_catalog}from'./cssrs.catalog';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CssrsEncuesta(_ref){let{idpaciente,idmedico,token}=_ref;const[encuestaNotExists,setEncuestaNotExists]=useState(null);const[checking,setChecking]=useState(true);const[pacienteData,setPacienteData]=useState({});const[medicoData,setMedicoData]=useState({});const[twoEnabled,setTwoEnabled]=useState(false);// Enables 1-5 questions\nuseEffect(()=>{init();},[]);function init(){checkEncuesta(token,idpaciente,setPacienteData,idmedico,setMedicoData,setEncuestaNotExists,setChecking);}const onFinish=values=>{console.log('Orginal values: ',values);const body={usuario:idpaciente,medico:idmedico,cssrs:Object.values(values),tipo:'cssrs',uuid:token};console.log('Body:',body);sendDataBody('encuestas/add',body).then(rs=>{console.log('add enc resp',rs);message.success(rs.message);}).then(()=>init());};const onChange=e=>{console.log('radio checked',e.target.value);};const onEnables=e=>{console.log('radio checked',e.target.value);setTwoEnabled(e.target.value);};const Question=_ref2=>{let{i}=_ref2;return/*#__PURE__*/_jsx(Form.Item,{label:cssrs_catalog[i],name:i,rules:[{required:true,message:'Please input your username!'}],children:/*#__PURE__*/_jsxs(Radio.Group,{onChange:i===1?onEnables:onChange,children:[/*#__PURE__*/_jsx(Radio,{value:true,children:\"Si\"}),/*#__PURE__*/_jsx(Radio,{value:false,children:\"No\"})]})});};if(checking)return/*#__PURE__*/_jsx(EncuestaLoading,{});if(!encuestaNotExists)return/*#__PURE__*/_jsx(ThanksMessage,{});return/*#__PURE__*/_jsxs(\"div\",{className:\"mainContainer\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Encuesta C-SSRS\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"Medico: \",medicoData.name]}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"Paciente: \",pacienteData.name]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Form,{layout:\"vertical\",name:\"cssrs_enc\"// labelCol={{ span: 24 }}\n// wrapperCol={{ span: 24 }}\n,initialValues:[],onFinish:onFinish,onFinishFailed:onFinishFailed,autoComplete:\"off\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"desc\",children:\"Desde la \\xFAltima visita:\"}),/*#__PURE__*/_jsx(Question,{i:0}),/*#__PURE__*/_jsx(Question,{i:1}),twoEnabled&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Question,{i:2}),/*#__PURE__*/_jsx(Question,{i:3}),/*#__PURE__*/_jsx(Question,{i:4})]}),/*#__PURE__*/_jsx(Question,{i:5}),/*#__PURE__*/_jsx(Form.Item,{wrapperCol:{offset:8,span:16},children:/*#__PURE__*/_jsx(Button,{form:\"cssrs_enc\",type:\"primary\",htmlType:\"submit\",children:\"Guardar\"})})]})]});}","map":{"version":3,"names":["React","useEffect","useState","EncuestaLoading","ThanksMessage","checkEncuesta","onFinishFailed","Form","Input","Button","message","Radio","sendDataBody","cssrs_catalog","jsx","_jsx","jsxs","_jsxs","CssrsEncuesta","_ref","idpaciente","idmedico","token","encuestaNotExists","setEncuestaNotExists","checking","setChecking","pacienteData","setPacienteData","medicoData","setMedicoData","twoEnabled","setTwoEnabled","init","onFinish","values","console","log","body","usuario","medico","cssrs","Object","tipo","uuid","then","rs","success","onChange","e","target","value","onEnables","Question","_ref2","i","Item","label","name","rules","required","children","Group","className","layout","initialValues","autoComplete","wrapperCol","offset","span","form","type","htmlType"],"sources":["C:/Users/Gil/Documents/ReCreaMed/src/escalas/cssrs/cssrs.encuesta.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { EncuestaLoading, ThanksMessage, checkEncuesta, onFinishFailed } from '../utils'\r\nimport { Form, Input, Button, message, Radio } from 'antd'\r\nimport { sendDataBody } from '../../resources'\r\nimport { cssrs_catalog } from './cssrs.catalog'\r\nexport default function CssrsEncuesta({ idpaciente, idmedico, token }) {\r\n\r\n    const [encuestaNotExists, setEncuestaNotExists] = useState(null)\r\n    const [checking, setChecking] = useState(true)\r\n    const [pacienteData, setPacienteData] = useState({})\r\n    const [medicoData, setMedicoData] = useState({})\r\n\r\n    const [twoEnabled, setTwoEnabled] = useState(false) // Enables 1-5 questions\r\n\r\n    useEffect(() => {\r\n        init()\r\n    }, [])\r\n\r\n    function init() {\r\n        checkEncuesta(token, idpaciente, setPacienteData, idmedico, setMedicoData, setEncuestaNotExists, setChecking)\r\n    }\r\n\r\n    const onFinish = (values) => {\r\n        console.log('Orginal values: ', values)\r\n        const body = {\r\n            usuario: idpaciente,\r\n            medico: idmedico,\r\n            cssrs: Object.values(values),\r\n            tipo: 'cssrs',\r\n            uuid: token\r\n        }\r\n        console.log('Body:', body);\r\n        sendDataBody('encuestas/add', body).then((rs) => {\r\n            console.log('add enc resp', rs)\r\n            message.success(rs.message)\r\n        }).then(() => init())\r\n    };\r\n\r\n    const onChange = (e) => {\r\n        console.log('radio checked', e.target.value);\r\n    };\r\n    const onEnables = (e) => {\r\n        console.log('radio checked', e.target.value);\r\n        setTwoEnabled(e.target.value)\r\n    };\r\n\r\n    const Question = ({ i }) => {\r\n        return <Form.Item\r\n            label={cssrs_catalog[i]}\r\n            name={i}\r\n            rules={[\r\n                {\r\n                    required: true,\r\n                    message: 'Please input your username!',\r\n                },\r\n            ]}\r\n        >\r\n            <Radio.Group onChange={i === 1 ? onEnables : onChange} >\r\n                <Radio value={true}>Si</Radio>\r\n                <Radio value={false}>No</Radio>\r\n            </Radio.Group>\r\n        </Form.Item>\r\n    }\r\n\r\n    if (checking) return <EncuestaLoading />\r\n\r\n    if (!encuestaNotExists) return <ThanksMessage />\r\n\r\n    return (\r\n        <div className='mainContainer'>\r\n            <h4>Encuesta C-SSRS</h4>\r\n            <br />\r\n            <h5>Medico: {medicoData.name}</h5>\r\n            <h5>Paciente: {pacienteData.name}</h5>\r\n            <br />\r\n            <Form\r\n                layout='vertical'\r\n                name=\"cssrs_enc\"\r\n                // labelCol={{ span: 24 }}\r\n                // wrapperCol={{ span: 24 }}\r\n                initialValues={[]}\r\n                onFinish={onFinish}\r\n                onFinishFailed={onFinishFailed}\r\n                autoComplete=\"off\"\r\n            >\r\n\r\n                <p className='desc'>Desde la Ãºltima visita:</p>\r\n\r\n                <Question i={0} />\r\n                <Question i={1} />\r\n\r\n                {\r\n                    twoEnabled && <div>\r\n                        <Question i={2} />\r\n                        <Question i={3} />\r\n                        <Question i={4} />\r\n                    </div>\r\n                }\r\n\r\n                <Question i={5} />\r\n\r\n\r\n\r\n                <Form.Item\r\n                    wrapperCol={{\r\n                        offset: 8,\r\n                        span: 16,\r\n                    }}\r\n                >\r\n                    <Button form='cssrs_enc' type=\"primary\" htmlType=\"submit\">\r\n                        Guardar\r\n                    </Button>\r\n                </Form.Item>\r\n            </Form>\r\n        </div>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}