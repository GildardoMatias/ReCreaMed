{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Gil\\\\Documents\\\\ReCreaMed\\\\src\\\\admHospitalViews\\\\ingresos\\\\ingresos.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Table, Tag, Button, Typography, Modal, Card, Row, Col, Switch, Select } from 'antd';\nimport { CheckCircleTwoTone } from '@ant-design/icons';\nimport moment from 'moment/moment';\nimport { getData, usuario, sendDataBody, ids_hospitales } from '../../resources';\nimport CreateBalance from './create-ingreso';\nimport Loading from '../../loading';\nimport Ticket from './ticket-for-print';\nimport IngersosHosptal from './ingresos.hospital';\nimport PatientsChart from './patients-chart';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Text\n} = Typography;\nexport default function Ingresos() {\n  _s();\n  const [loading, setLoading] = useState(true);\n  const [medicosData, setMedicosData] = useState({}); // Populate the main select component\n  const [medico, setMedico] = useState(null);\n  const [ingresosData, setIngresosData] = useState([]);\n  const [ingresoForEdit, setIngresoForEdit] = useState({});\n  const [ingresoForPrint, setIngresoForPrint] = useState([]);\n  // const [medicos, setMedicos] = useState({})\n\n  // Modal For Add/Edit Inreso\n  const [isIngresoModalOpen, setIsIngresoModalOpen] = useState(false);\n  const showIngresoModal = () => {\n    setIsIngresoModalOpen(true);\n  };\n  // Modal For Add/Edit Enreso\n  const [isEgresoModalOpen, setIsEgresoModalOpen] = useState(false);\n  const showEgresoModal = () => {\n    setIsEgresoModalOpen(true);\n  };\n\n  // Select logo for print in receta. Switches the modal view into select logo hospital/pdf recipe for print\n  const [logoHospital, setLogoHospital] = useState(null);\n  const [nombreHospital, setNombreHospital] = useState(null);\n  const [isLogoSelected, setIsLogoSelected] = useState(false);\n  const [idHospital, setIdHospital] = useState({});\n\n  // Modal For Ticket\n  const [isTicketModalOpen, setIsTicketModalOpen] = useState(false);\n  const showTicketModal = () => {\n    setIsTicketModalOpen(true);\n  };\n  const handleTicketOk = () => {\n    setIsTicketModalOpen(false);\n    setIsLogoSelected(false);\n  };\n  const handleTicketCancel = () => {\n    setIsTicketModalOpen(false);\n    ;\n    setIsLogoSelected(false);\n  };\n  const [lastFecha, setLastFecha] = useState(\"\");\n  const [firstFecha, setFirstFecha] = useState(\"\");\n\n  // Toggles between for medic/for hospital\n  const [viewTipeMedics, setViewTipeMedics] = useState(false);\n  useEffect(() => {\n    getLastFechaCierre();\n  }, []);\n  useEffect(() => {\n    getIngresos();\n  }, [lastFecha]);\n  function subtractMonths(date, months) {\n    date.setMonth(date.getMonth() - months);\n    return date;\n  }\n  const getLastFechaCierre = async () => {\n    await getData(`cortes/${usuario._id}`).then(rs => {\n      setFirstFecha(rs.at(0).fecha_cierre);\n      setLastFecha(rs.length > 1 ? rs.at(-1).fecha_cierre : subtractMonths(new Date(), 3));\n    });\n  };\n  const getIngresos = async () => {\n    // First get List of medics\n    const medicos = await sendDataBody('users/getMany/hospitals', {\n      ids_hospitales: ids_hospitales\n    });\n    medicos.forEach(m => {\n      m.label = m.name;\n      m.value = m._id;\n    }); // to pass to create modal\n    setMedicosData(medicos); // to pass to create modal and select\n\n    // const lastFechaCierre = await getData(`cortes/${usuario._id}`).then((rs) => {\n    //     setFirstFecha(rs.at(0).fecha_cierre)\n    //     setLastFecha(rs.length > 1 ? rs.at(-1).fecha_cierre : subtractMonths(new Date(), 3))\n    //     return rs.length > 1 ? rs.at(-1).fecha_cierre : subtractMonths(new Date(), 3)\n    // })\n\n    const ids = medicos.map(doc => {\n      return doc._id;\n    });\n    getBalancesData(ids);\n\n    // setMedicos(medicos); // Used to get the percents to create the pie chart\n  };\n  const getBalancesData = medicos => {\n    const body = {\n      fecha_inicio: lastFecha,\n      medico: medicos\n    };\n    // console.log('Balances body',body)\n    sendDataBody('balances', body).then(rs => {\n      console.log('alances', rs);\n      rs.forEach(i => {\n        i.doctor = i.medico;\n        i.medico = i.medico._id;\n        if (i.paciente) {\n          i.usuario = i.paciente;\n          i.paciente = i.paciente._id;\n        }\n      });\n      setIngresosData(rs);\n    }).finally(() => setLoading(false));\n  };\n  const handleEditIngreso = record => {\n    record.fecha_hora = moment.utc(record.fecha_hora);\n    setIngresoForEdit(record);\n    showIngresoModal();\n  };\n  const columns = [{\n    title: 'MÃ©dico',\n    dataIndex: 'medico',\n    key: 'createdAt',\n    render: (_, {\n      doctor\n    }) => {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: doctor.name\n      }, void 0, false);\n    }\n  },\n  // {\n  //     title: 'Concepto',\n  //     dataIndex: 'concepto',\n  //     key: 'concepto',\n  // },\n  {\n    title: 'Tipo',\n    dataIndex: 'tipo',\n    key: 'tipo',\n    render: (_, {\n      tipo\n    }) => {\n      let color = tipo && tipo === 'ingreso' ? 'geekblue' : 'volcano';\n      return tipo ? /*#__PURE__*/_jsxDEV(Tag, {\n        color: color,\n        children: tipo.toUpperCase()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 31\n      }, this) : /*#__PURE__*/_jsxDEV(Tag, {\n        color: color,\n        children: \"Indefinido\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 80\n      }, this);\n    }\n  }, {\n    title: 'Fecha',\n    dataIndex: 'fecha_hora',\n    key: 'fecha_hora',\n    render: (_, {\n      fecha_hora\n    }) => {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: new Date(fecha_hora).toLocaleString()\n      }, void 0, false);\n    },\n    defaultSortOrder: 'descend'\n    // sorter: (a, b) => a.fecha_hora > b.fecha_hora,\n  }, {\n    title: 'Monto',\n    dataIndex: 'monto',\n    key: 'monto',\n    render: (_, {\n      monto\n    }) => {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [\"$\", monto]\n      }, void 0, true);\n    }\n  }, {\n    title: 'Abono',\n    dataIndex: 'abono',\n    key: 'abono',\n    render: (_, {\n      abono\n    }) => {\n      return abono && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [\"$\", abono]\n      }, void 0, true);\n    }\n  }, {\n    title: 'Adeudo',\n    dataIndex: 'adeudo',\n    key: 'adeudo',\n    render: (_, record) => {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [\"$\", record.monto - record.abono]\n      }, void 0, true);\n    }\n  }, {\n    title: 'Forma de pago',\n    key: 'forma_de_pago',\n    dataIndex: 'forma_de_pago',\n    render: (_, {\n      forma_de_pago\n    }) => {\n      let color = forma_de_pago === 'efectivo' ? 'geekblue' : 'green';\n      return /*#__PURE__*/_jsxDEV(Tag, {\n        color: color,\n        children: forma_de_pago.toUpperCase()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 24\n      }, this);\n    }\n  }, {\n    title: 'Paciente',\n    key: 'usuario',\n    dataIndex: 'usuario',\n    render: (_, record) => {\n      // if (record.cita) return <>{record.cita.usuario}</>\n      if (record.cita) return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column'\n        },\n        children: [record.cita.usuario.name, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontSize: 9\n          },\n          children: \"Tomado de la cita\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 126\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 41\n      }, this); //when populate is ready\n      else if (record.usuario) return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: record.usuario.name\n      }, void 0, false);else return /*#__PURE__*/_jsxDEV(Text, {\n        type: \"secondary\",\n        children: \" Sin Paciente\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 29\n      }, this);\n    }\n  }, {\n    title: 'Factura',\n    key: 'Factura',\n    dataIndex: 'factura',\n    render: (_, {\n      factura\n    }) => {\n      return factura && /*#__PURE__*/_jsxDEV(CheckCircleTwoTone, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 61\n      }, this);\n    }\n  }, {\n    title: 'Estado',\n    key: 'Estado',\n    dataIndex: 'estado',\n    // render: (_, { estado }) => {\n    //     let color = estado === 'pagado' ? 'green' : 'geekblue';\n    //     if (estado === 'pendiente' || estado === 'sin pagar') color = 'volcano';\n    //     return <Tag color={color}> {estado.toUpperCase()} </Tag>\n    // }\n    render: (_, {\n      abono,\n      monto\n    }) => {\n      const pagado = abono === monto;\n      let color = pagado ? 'green' : 'volcano';\n      return /*#__PURE__*/_jsxDEV(Tag, {\n        color: color,\n        children: [\" \", pagado ? 'PAGADO' : 'PENDIENTE', \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 24\n      }, this);\n    }\n  }, {\n    title: 'Acciones',\n    key: 'Editar',\n    render: (_, record) => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: 2,\n        flexDirection: 'column'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        size: \"small\",\n        onClick: () => handleEditIngreso(record),\n        children: \"Editar Monto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        size: \"small\",\n        onClick: () => {\n          setIngresoForPrint([record]);\n          showTicketModal();\n        },\n        children: \"Imprimir Nota\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 36\n    }, this)\n  }];\n\n  // Toggle View Tipe medic/for all\n  const onSwitchChange = checked => {\n    setViewTipeMedics(checked);\n    console.log(`switch to ${checked}`);\n    if (!checked) getIngresos();\n  };\n  const handleDoctorChange = value => {\n    setMedico(value);\n    getBalancesData([value]);\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 219,\n    columnNumber: 25\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mainContainer\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'row',\n        gap: 12,\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: [\"Ingresos de\", viewTipeMedics ? 'l mÃ©dico' : ' todos los medicos']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        ghost: true,\n        size: \"small\",\n        onClick: showIngresoModal,\n        type: \"primary\",\n        children: \"Agregar Nuevo Ingreso\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        ghost: true,\n        size: \"small\",\n        onClick: showEgresoModal,\n        type: \"primary\",\n        children: \"Agregar Nuevo Gasto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Hospital \", /*#__PURE__*/_jsxDEV(Switch, {\n        onChange: onSwitchChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 26\n      }, this), \" Medico\", viewTipeMedics && /*#__PURE__*/_jsxDEV(Select, {\n        options: medicosData,\n        onChange: handleDoctorChange,\n        style: {\n          width: 240,\n          marginLeft: 16\n        },\n        placeholder: \"Seleccione medico\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 39\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      columns: columns,\n      dataSource: ingresosData,\n      size: \"small\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(PatientsChart, {\n      ids_medicos: medicosData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(IngersosHosptal, {\n      ids_hospitales: ids_hospitales\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CreateBalance, {\n      tipo: \"ingreso\",\n      balanceForEdit: ingresoForEdit,\n      setBalanceForEdit: setIngresoForEdit,\n      setIsModalOpen: setIsIngresoModalOpen,\n      isModalOpen: isIngresoModalOpen,\n      getIngresos: getIngresos,\n      medico: medico,\n      medicosData: medicosData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CreateBalance, {\n      tipo: \"egreso\",\n      balanceForEdit: ingresoForEdit,\n      setBalanceForEdit: setIngresoForEdit,\n      setIsModalOpen: setIsEgresoModalOpen,\n      isModalOpen: isEgresoModalOpen,\n      getIngresos: getIngresos,\n      medico: medico,\n      medicosData: medicosData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Imprimir Nota de Venta\",\n      open: isTicketModalOpen,\n      onOk: handleTicketOk,\n      onCancel: handleTicketCancel,\n      width: 600,\n      children: isLogoSelected ?\n      /*#__PURE__*/\n      // Si ya hay logo seleccionado, se pasa a la receta y se muestra en pdf\n      _jsxDEV(Ticket, {\n        ingresos: ingresoForPrint,\n        logo: 'https://api.recreamed.com/images/' + logoHospital,\n        hospital: nombreHospital,\n        seller: \"M\\xE9dico: \",\n        buyer: \"Paciente: \",\n        idHospital: idHospital\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          title: \"Selecciona un hospital\",\n          bordered: false,\n          children: usuario.horarios.map(h => {\n            return /*#__PURE__*/_jsxDEV(Card.Grid, {\n              style: {\n                width: '100%'\n              },\n              onClick: () => {\n                console.log(h.sucursal);\n                setIdHospital(h.sucursal._id);\n                setLogoHospital(h.sucursal.logo);\n                setNombreHospital(h.sucursal.nombre);\n                setIsLogoSelected(true);\n              },\n              children: /*#__PURE__*/_jsxDEV(Row, {\n                align: \"middle\",\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  span: 6,\n                  offset: 4,\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    width: 64,\n                    src: 'https://api.recreamed.com/images/' + h.sucursal.logo,\n                    alt: \"Logo\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 266,\n                    columnNumber: 74\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  span: 10,\n                  children: [h.sucursal.nombre, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 267,\n                    columnNumber: 84\n                  }, this), \" \", h.horario]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 45\n              }, this)\n            }, h._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 48\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 222,\n    columnNumber: 9\n  }, this);\n}\n_s(Ingresos, \"qk7mIYnN7zcB0rlbSwTeO8Ss6Yw=\");\n_c = Ingresos;\nvar _c;\n$RefreshReg$(_c, \"Ingresos\");","map":{"version":3,"names":["React","useState","useEffect","Table","Tag","Button","Typography","Modal","Card","Row","Col","Switch","Select","CheckCircleTwoTone","moment","getData","usuario","sendDataBody","ids_hospitales","CreateBalance","Loading","Ticket","IngersosHosptal","PatientsChart","Fragment","_Fragment","jsxDEV","_jsxDEV","Text","Ingresos","_s","loading","setLoading","medicosData","setMedicosData","medico","setMedico","ingresosData","setIngresosData","ingresoForEdit","setIngresoForEdit","ingresoForPrint","setIngresoForPrint","isIngresoModalOpen","setIsIngresoModalOpen","showIngresoModal","isEgresoModalOpen","setIsEgresoModalOpen","showEgresoModal","logoHospital","setLogoHospital","nombreHospital","setNombreHospital","isLogoSelected","setIsLogoSelected","idHospital","setIdHospital","isTicketModalOpen","setIsTicketModalOpen","showTicketModal","handleTicketOk","handleTicketCancel","lastFecha","setLastFecha","firstFecha","setFirstFecha","viewTipeMedics","setViewTipeMedics","getLastFechaCierre","getIngresos","subtractMonths","date","months","setMonth","getMonth","_id","then","rs","at","fecha_cierre","length","Date","medicos","forEach","m","label","name","value","ids","map","doc","getBalancesData","body","fecha_inicio","console","log","i","doctor","paciente","finally","handleEditIngreso","record","fecha_hora","utc","columns","title","dataIndex","key","render","_","children","tipo","color","toUpperCase","fileName","_jsxFileName","lineNumber","columnNumber","toLocaleString","defaultSortOrder","monto","abono","forma_de_pago","cita","style","display","flexDirection","fontSize","type","factura","pagado","gap","size","onClick","onSwitchChange","checked","handleDoctorChange","className","alignItems","ghost","onChange","options","width","marginLeft","placeholder","dataSource","ids_medicos","balanceForEdit","setBalanceForEdit","setIsModalOpen","isModalOpen","open","onOk","onCancel","ingresos","logo","hospital","seller","buyer","bordered","horarios","h","Grid","sucursal","nombre","align","span","offset","src","alt","horario","_c","$RefreshReg$"],"sources":["C:/Users/Gil/Documents/ReCreaMed/src/admHospitalViews/ingresos/ingresos.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Table, Tag, Button, Typography, Modal, Card, Row, Col, Switch, Select } from 'antd';\r\nimport { CheckCircleTwoTone } from '@ant-design/icons'\r\nimport moment from 'moment/moment';\r\n\r\nimport { getData, usuario, sendDataBody, ids_hospitales } from '../../resources';\r\nimport CreateBalance from './create-ingreso';\r\nimport Loading from '../../loading';\r\nimport Ticket from './ticket-for-print';\r\nimport IngersosHosptal from './ingresos.hospital';\r\nimport PatientsChart from './patients-chart';\r\n\r\nconst { Text } = Typography;\r\n\r\nexport default function Ingresos() {\r\n    const [loading, setLoading] = useState(true)\r\n    const [medicosData, setMedicosData] = useState({}) // Populate the main select component\r\n    const [medico, setMedico] = useState(null)\r\n    const [ingresosData, setIngresosData] = useState([])\r\n    const [ingresoForEdit, setIngresoForEdit] = useState({})\r\n    const [ingresoForPrint, setIngresoForPrint] = useState([])\r\n    // const [medicos, setMedicos] = useState({})\r\n\r\n    // Modal For Add/Edit Inreso\r\n    const [isIngresoModalOpen, setIsIngresoModalOpen] = useState(false);\r\n    const showIngresoModal = () => { setIsIngresoModalOpen(true) };\r\n    // Modal For Add/Edit Enreso\r\n    const [isEgresoModalOpen, setIsEgresoModalOpen] = useState(false)\r\n    const showEgresoModal = () => { setIsEgresoModalOpen(true) };\r\n\r\n    // Select logo for print in receta. Switches the modal view into select logo hospital/pdf recipe for print\r\n    const [logoHospital, setLogoHospital] = useState(null)\r\n    const [nombreHospital, setNombreHospital] = useState(null)\r\n    const [isLogoSelected, setIsLogoSelected] = useState(false)\r\n    const [idHospital, setIdHospital] = useState({})\r\n\r\n    // Modal For Ticket\r\n    const [isTicketModalOpen, setIsTicketModalOpen] = useState(false);\r\n    const showTicketModal = () => { setIsTicketModalOpen(true); };\r\n    const handleTicketOk = () => { setIsTicketModalOpen(false); setIsLogoSelected(false) };\r\n    const handleTicketCancel = () => { setIsTicketModalOpen(false);; setIsLogoSelected(false) };\r\n\r\n    const [lastFecha, setLastFecha] = useState(\"\")\r\n    const [firstFecha, setFirstFecha] = useState(\"\")\r\n\r\n    // Toggles between for medic/for hospital\r\n    const [viewTipeMedics, setViewTipeMedics] = useState(false)\r\n\r\n    useEffect(() => {\r\n        getLastFechaCierre()\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        getIngresos()\r\n    }, [lastFecha])\r\n\r\n    function subtractMonths(date, months) { date.setMonth(date.getMonth() - months); return date; }\r\n\r\n    const getLastFechaCierre = async () => {\r\n        await getData(`cortes/${usuario._id}`).then((rs) => {\r\n            setFirstFecha(rs.at(0).fecha_cierre)\r\n            setLastFecha(rs.length > 1 ? rs.at(-1).fecha_cierre : subtractMonths(new Date(), 3))\r\n        })\r\n    }\r\n\r\n    const getIngresos = async () => {\r\n        // First get List of medics\r\n        const medicos = await sendDataBody('users/getMany/hospitals', { ids_hospitales: ids_hospitales })\r\n\r\n        medicos.forEach(m => { m.label = m.name; m.value = m._id; })// to pass to create modal\r\n        setMedicosData(medicos) // to pass to create modal and select\r\n\r\n        // const lastFechaCierre = await getData(`cortes/${usuario._id}`).then((rs) => {\r\n        //     setFirstFecha(rs.at(0).fecha_cierre)\r\n        //     setLastFecha(rs.length > 1 ? rs.at(-1).fecha_cierre : subtractMonths(new Date(), 3))\r\n        //     return rs.length > 1 ? rs.at(-1).fecha_cierre : subtractMonths(new Date(), 3)\r\n        // })\r\n\r\n        const ids = medicos.map(doc => {\r\n            return doc._id\r\n        });\r\n\r\n        getBalancesData(ids)\r\n\r\n        // setMedicos(medicos); // Used to get the percents to create the pie chart\r\n    }\r\n\r\n    const getBalancesData = (medicos) => {\r\n        const body = {\r\n            fecha_inicio: lastFecha,\r\n            medico: medicos\r\n        }\r\n        // console.log('Balances body',body)\r\n        sendDataBody('balances', body).then((rs) => {\r\n            console.log('alances', rs)\r\n            rs.forEach((i) => { i.doctor = i.medico; i.medico = i.medico._id; if (i.paciente) { i.usuario = i.paciente; i.paciente = i.paciente._id; } })\r\n            setIngresosData(rs)\r\n        }).finally(() => setLoading(false))\r\n    }\r\n\r\n    const handleEditIngreso = (record) => {\r\n        record.fecha_hora = moment.utc(record.fecha_hora)\r\n        setIngresoForEdit(record);\r\n        showIngresoModal()\r\n    }\r\n\r\n    const columns = [\r\n        {\r\n            title: 'MÃ©dico',\r\n            dataIndex: 'medico',\r\n            key: 'createdAt',\r\n            render: (_, { doctor }) => { return <>{doctor.name}</> }\r\n        },\r\n        // {\r\n        //     title: 'Concepto',\r\n        //     dataIndex: 'concepto',\r\n        //     key: 'concepto',\r\n        // },\r\n        {\r\n            title: 'Tipo',\r\n            dataIndex: 'tipo',\r\n            key: 'tipo',\r\n            render: (_, { tipo }) => {\r\n                let color = (tipo && tipo === 'ingreso') ? 'geekblue' : 'volcano';\r\n                return tipo ? <Tag color={color} >{tipo.toUpperCase()}</Tag> : <Tag color={color}>Indefinido</Tag>\r\n            },\r\n        },\r\n        {\r\n            title: 'Fecha',\r\n            dataIndex: 'fecha_hora',\r\n            key: 'fecha_hora',\r\n            render: (_, { fecha_hora }) => { return <>{new Date(fecha_hora).toLocaleString()}</> },\r\n            defaultSortOrder: 'descend',\r\n            // sorter: (a, b) => a.fecha_hora > b.fecha_hora,\r\n        },\r\n        {\r\n            title: 'Monto',\r\n            dataIndex: 'monto',\r\n            key: 'monto',\r\n            render: (_, { monto }) => { return <>${monto}</> }\r\n        },\r\n        {\r\n            title: 'Abono',\r\n            dataIndex: 'abono',\r\n            key: 'abono',\r\n            render: (_, { abono }) => { return abono && <>${abono}</> }\r\n        },\r\n        {\r\n            title: 'Adeudo',\r\n            dataIndex: 'adeudo',\r\n            key: 'adeudo',\r\n            render: (_, record) => { return <>${record.monto - record.abono}</> }\r\n\r\n        },\r\n        {\r\n            title: 'Forma de pago',\r\n            key: 'forma_de_pago',\r\n            dataIndex: 'forma_de_pago',\r\n            render: (_, { forma_de_pago }) => {\r\n                let color = forma_de_pago === 'efectivo' ? 'geekblue' : 'green';\r\n                return <Tag color={color} >{forma_de_pago.toUpperCase()}</Tag>\r\n            },\r\n        },\r\n        {\r\n            title: 'Paciente',\r\n            key: 'usuario',\r\n            dataIndex: 'usuario',\r\n            render: (_, record) => {\r\n                // if (record.cita) return <>{record.cita.usuario}</>\r\n                if (record.cita) return <div style={{ display: 'flex', flexDirection: 'column' }}>{record.cita.usuario.name} <span style={{ fontSize: 9 }}>Tomado de la cita</span></div> //when populate is ready\r\n                else if (record.usuario) return <>{record.usuario.name}</>\r\n                else return <Text type=\"secondary\"> Sin Paciente</Text>\r\n            },\r\n        },\r\n        {\r\n            title: 'Factura',\r\n            key: 'Factura',\r\n            dataIndex: 'factura',\r\n            render: (_, { factura }) => { return factura && <CheckCircleTwoTone /> }\r\n\r\n        },\r\n        {\r\n            title: 'Estado',\r\n            key: 'Estado',\r\n            dataIndex: 'estado',\r\n            // render: (_, { estado }) => {\r\n            //     let color = estado === 'pagado' ? 'green' : 'geekblue';\r\n            //     if (estado === 'pendiente' || estado === 'sin pagar') color = 'volcano';\r\n            //     return <Tag color={color}> {estado.toUpperCase()} </Tag>\r\n            // }\r\n            render: (_, { abono, monto }) => {\r\n                const pagado = abono === monto;\r\n                let color = pagado ? 'green' : 'volcano';\r\n                return <Tag color={color}> {pagado ? 'PAGADO' : 'PENDIENTE'} </Tag>\r\n            }\r\n\r\n        },\r\n        {\r\n            title: 'Acciones',\r\n            key: 'Editar',\r\n            render: (_, record) => <div style={{ display: 'flex', gap: 2, flexDirection: 'column' }}>\r\n                {/* <Button onClick={() => { deleteData(`balances/remove/${record._id}`).then(()=>getIngresos()) }}>Eliminar</Button> */}\r\n                <Button size='small' onClick={() => handleEditIngreso(record)}>Editar Monto</Button>\r\n                <Button size='small' onClick={() => { setIngresoForPrint([record]); showTicketModal() }}>Imprimir Nota</Button>\r\n            </div>\r\n        },\r\n    ];\r\n\r\n    // Toggle View Tipe medic/for all\r\n    const onSwitchChange = (checked) => {\r\n        setViewTipeMedics(checked)\r\n        console.log(`switch to ${checked}`);\r\n        if (!checked) getIngresos()\r\n    };\r\n\r\n    const handleDoctorChange = (value) => { setMedico(value); getBalancesData([value]); };\r\n\r\n\r\n    if (loading) return <Loading />\r\n\r\n    return (\r\n        <div className='mainContainer'>\r\n            {/* <div>first fecha cierre {firstFecha} </div>\r\n            <div>last fecha cierre {lastFecha} </div> */}\r\n\r\n            <div style={{ display: 'flex', flexDirection: 'row', gap: 12, alignItems: 'center' }}>\r\n                <h4>Ingresos de{viewTipeMedics ? 'l mÃ©dico' : ' todos los medicos'}</h4>\r\n                <Button ghost size='small' onClick={showIngresoModal} type='primary'  >Agregar Nuevo Ingreso</Button>\r\n                <Button ghost size='small' onClick={showEgresoModal} type='primary'  >Agregar Nuevo Gasto</Button>\r\n            </div>\r\n\r\n            <br />\r\n\r\n            <div>\r\n                Hospital <Switch onChange={onSwitchChange} /> Medico\r\n                {\r\n                    viewTipeMedics && <Select options={medicosData} onChange={handleDoctorChange} style={{ width: 240, marginLeft: 16 }} placeholder='Seleccione medico' />\r\n                }\r\n            </div>\r\n\r\n            <br />\r\n\r\n            <Table columns={columns} dataSource={ingresosData} size='small' />\r\n\r\n            <PatientsChart ids_medicos={medicosData}/>\r\n\r\n            <IngersosHosptal ids_hospitales={ids_hospitales} />\r\n\r\n            {/* Ingreso */}\r\n            <CreateBalance tipo='ingreso' balanceForEdit={ingresoForEdit} setBalanceForEdit={setIngresoForEdit} setIsModalOpen={setIsIngresoModalOpen} isModalOpen={isIngresoModalOpen} getIngresos={getIngresos} medico={medico} medicosData={medicosData} />\r\n\r\n            {/* Gasto */}\r\n            <CreateBalance tipo='egreso' balanceForEdit={ingresoForEdit} setBalanceForEdit={setIngresoForEdit} setIsModalOpen={setIsEgresoModalOpen} isModalOpen={isEgresoModalOpen} getIngresos={getIngresos} medico={medico} medicosData={medicosData} />\r\n\r\n            <Modal title=\"Imprimir Nota de Venta\" open={isTicketModalOpen} onOk={handleTicketOk} onCancel={handleTicketCancel} width={600}>\r\n                {\r\n                    isLogoSelected ? // Si ya hay logo seleccionado, se pasa a la receta y se muestra en pdf\r\n                        <Ticket ingresos={ingresoForPrint} logo={'https://api.recreamed.com/images/' + logoHospital} hospital={nombreHospital} seller='MÃ©dico: ' buyer='Paciente: ' idHospital={idHospital} />\r\n                        :\r\n                        <div>\r\n                            <Card title='Selecciona un hospital' bordered={false}>\r\n                                {\r\n                                    usuario.horarios.map((h) => {\r\n                                        return <Card.Grid style={{ width: '100%' }} onClick={() => { console.log(h.sucursal); setIdHospital(h.sucursal._id); setLogoHospital(h.sucursal.logo); setNombreHospital(h.sucursal.nombre); setIsLogoSelected(true) }} key={h._id}>\r\n                                            <Row align=\"middle\">\r\n                                                <Col span={6} offset={4}><img width={64} src={'https://api.recreamed.com/images/' + h.sucursal.logo} alt=\"Logo\" /></Col>\r\n                                                <Col span={10}>{h.sucursal.nombre} <br /> {h.horario}</Col>\r\n                                            </Row>\r\n                                        </Card.Grid>\r\n                                    })\r\n                                }\r\n                            </Card>\r\n                        </div>\r\n                }\r\n\r\n            </Modal>\r\n        </div >\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}