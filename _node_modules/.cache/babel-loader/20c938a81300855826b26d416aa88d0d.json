{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Button,Select,List,Row,Col}from'antd';import{API}from'../../resources';import Loading from'../../loading';import{usuario}from'../../resources';import Expedientes from'../expedientes/expedientes';// import DetallesPaciente from './detalles.paciente_old'\nimport DetallesPaciente from'./detalles.paciente';import Register from'./register.patient';import{PlusOutlined,MobileOutlined,UserOutlined}from'@ant-design/icons';import dayjs from'dayjs';import ExpedienteFisio from'../expedieteFisio/expediente';import RegisterFisio from'./register.patent.fisio';import CodeGenerate from'./code.generate';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const{Option}=Select;export default function MainPacientes(){var _pacientesData$;const TIPO=usuario.tipo||\"PSIQ\";const[pacientesData,setPacientesData]=useState([]);const[isLoading,setIsLoading]=useState(true);const[activePatient,setActivePatient]=useState((_pacientesData$=pacientesData[0])===null||_pacientesData$===void 0?void 0:_pacientesData$._id);const[isRegisterModalOpen,setIsRegisterModalOpen]=useState(false);// PSIQ\nconst[isEditModalOpen,setIsEditModalOpen]=useState(false);const[isRegisterFisioModal,setIsRegisterFisioModal]=useState(false);// FISIO\nconst[isEditFisioModalOpen,setIsEditFisioModalOpen]=useState(false);useEffect(()=>{getPacientesData();},[]);useEffect(()=>{getPacientesData();},[isRegisterModalOpen,isRegisterFisioModal,isEditFisioModalOpen]);const getPacientesData=()=>{fetch(API+\"mispacientes/\".concat(usuario._id)).then(response=>response.json()).then(data=>{data.forEach(paciente=>{if(paciente.responsable){paciente.res_name=paciente.responsable.nombre;paciente.res_phone=paciente.responsable.telefono;}paciente.fecha_nacimiento=dayjs(paciente.fecha_nacimiento);});// console.log(data); \nsetPacientesData(data);if(data&&data.length>0)setActivePatient(data[0]);}).finally(()=>setIsLoading(false));};const onChange=data=>{const found=pacientesData.find(p=>p._id===data);setActivePatient(found);console.log('active patient',found);};const onSearch=value=>{console.log('search:',value);};if(isLoading)return/*#__PURE__*/_jsx(Loading,{});return/*#__PURE__*/_jsxs(\"div\",{className:\"mainContainer\",style:{backgroundColor:'#f5f6f8'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Pacientes\"}),/*#__PURE__*/_jsxs(Row,{justify:\"start\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"div\",{className:\"my-select-container\",children:/*#__PURE__*/_jsx(Select// Widget para buscar pacientes\n,{style:{borderRadius:8,width:320},dropdownStyle:{borderRadius:8},showSearch:true,placeholder:\"Buscar paciente\",optionFilterProp:\"children\",onChange:onChange,onSearch:onSearch,filterOption:(input,option)=>option.children.toLowerCase().includes(input.toLowerCase()),children:pacientesData.map(p=>/*#__PURE__*/_jsx(Option,{value:p._id,children:p.name},p._id))})})}),/*#__PURE__*/_jsx(Col,{style:{marginLeft:12},children:TIPO==='FISIO'?/*#__PURE__*/_jsxs(\"div\",{className:\"fila\",children:[/*#__PURE__*/_jsx(Button,{className:\"btnIconCentered\",style:{height:30},onClick:()=>setIsRegisterFisioModal(!isRegisterFisioModal),size:\"small\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),shape:\"round\",type:\"primary\",children:\"Agregar Paciente\"}),/*#__PURE__*/_jsx(CodeGenerate,{})]}):/*#__PURE__*/_jsx(Button,{className:\"btnIconCentered\",style:{height:30},onClick:()=>setIsRegisterModalOpen(!isRegisterModalOpen),size:\"small\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),shape:\"round\",type:\"primary\",title:\"Agregar paciente\",children:\"Agregar Paciente\"})})]}),\" \",/*#__PURE__*/_jsx(\"div\",{style:{height:'16px'}}),TIPO==='FISIO'?/*#__PURE__*/_jsx(ExpedienteFisio,{paciente:activePatient,setIsEditModalOpen:setIsEditFisioModalOpen}):/*#__PURE__*/_jsx(Expedientes,{paciente:activePatient,setIsEditModalOpen:setIsEditModalOpen}),/*#__PURE__*/_jsx(Register,{setIsModalOpen:setIsRegisterModalOpen,isModalOpen:isRegisterModalOpen,getPacientesData:getPacientesData}),/*#__PURE__*/_jsx(Register,{setIsModalOpen:setIsEditModalOpen,isModalOpen:isEditModalOpen,paciente:activePatient,getPacientesData:getPacientesData}),/*#__PURE__*/_jsx(RegisterFisio,{setIsModalOpen:setIsRegisterFisioModal,isModalOpen:isRegisterFisioModal,getPacientesData:getPacientesData}),/*#__PURE__*/_jsx(RegisterFisio,{setIsModalOpen:setIsEditFisioModalOpen,isModalOpen:isEditFisioModalOpen,getPacientesData:getPacientesData,paciente:activePatient})]});}","map":{"version":3,"names":["React","useState","useEffect","Button","Select","List","Row","Col","API","Loading","usuario","Expedientes","DetallesPaciente","Register","PlusOutlined","MobileOutlined","UserOutlined","dayjs","ExpedienteFisio","RegisterFisio","CodeGenerate","jsx","_jsx","jsxs","_jsxs","Option","MainPacientes","_pacientesData$","TIPO","tipo","pacientesData","setPacientesData","isLoading","setIsLoading","activePatient","setActivePatient","_id","isRegisterModalOpen","setIsRegisterModalOpen","isEditModalOpen","setIsEditModalOpen","isRegisterFisioModal","setIsRegisterFisioModal","isEditFisioModalOpen","setIsEditFisioModalOpen","getPacientesData","fetch","concat","then","response","json","data","forEach","paciente","responsable","res_name","nombre","res_phone","telefono","fecha_nacimiento","length","finally","onChange","found","find","p","console","log","onSearch","value","className","style","backgroundColor","children","justify","borderRadius","width","dropdownStyle","showSearch","placeholder","optionFilterProp","filterOption","input","option","toLowerCase","includes","map","name","marginLeft","height","onClick","size","icon","shape","type","title","setIsModalOpen","isModalOpen"],"sources":["C:/Users/Gil/Documents/ReCreaMed/src/doctorViews/pacientes/main.pacientes.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { Button, Select, List, Row, Col } from 'antd'\r\nimport { API } from '../../resources'\r\nimport Loading from '../../loading'\r\nimport { usuario } from '../../resources'\r\nimport Expedientes from '../expedientes/expedientes'\r\n// import DetallesPaciente from './detalles.paciente_old'\r\nimport DetallesPaciente from './detalles.paciente'\r\nimport Register from './register.patient'\r\nimport { PlusOutlined, MobileOutlined, UserOutlined } from '@ant-design/icons';\r\nimport dayjs from 'dayjs'\r\nimport ExpedienteFisio from '../expedieteFisio/expediente'\r\nimport RegisterFisio from './register.patent.fisio'\r\nimport CodeGenerate from './code.generate'\r\nconst { Option } = Select;\r\n\r\nexport default function MainPacientes() {\r\n\r\n  const TIPO = usuario.tipo || \"PSIQ\"\r\n\r\n  const [pacientesData, setPacientesData] = useState([])\r\n  const [isLoading, setIsLoading] = useState(true)\r\n\r\n  const [activePatient, setActivePatient] = useState(pacientesData[0]?._id)\r\n\r\n  const [isRegisterModalOpen, setIsRegisterModalOpen] = useState(false) // PSIQ\r\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false)\r\n  const [isRegisterFisioModal, setIsRegisterFisioModal] = useState(false) // FISIO\r\n  const [isEditFisioModalOpen, setIsEditFisioModalOpen] = useState(false)\r\n\r\n  useEffect(() => {\r\n    getPacientesData()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    getPacientesData()\r\n  }, [isRegisterModalOpen,isRegisterFisioModal,isEditFisioModalOpen])\r\n\r\n  const getPacientesData = () => {\r\n    fetch(API + `mispacientes/${usuario._id}`)\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        data.forEach(paciente => {\r\n          if (paciente.responsable) {\r\n            paciente.res_name = paciente.responsable.nombre;\r\n            paciente.res_phone = paciente.responsable.telefono;\r\n          }\r\n          paciente.fecha_nacimiento = dayjs(paciente.fecha_nacimiento);\r\n        });\r\n        // console.log(data); \r\n        setPacientesData(data);\r\n        if (data && data.length > 0) setActivePatient(data[0])\r\n      })\r\n      .finally(() => setIsLoading(false))\r\n  }\r\n\r\n\r\n\r\n\r\n  const onChange = (data) => {\r\n    const found = pacientesData.find(p => p._id === data)\r\n    setActivePatient(found)\r\n    console.log('active patient', found)\r\n  };\r\n\r\n  const onSearch = (value) => {\r\n    console.log('search:', value);\r\n  };\r\n\r\n  if (isLoading) return <Loading />\r\n\r\n  return (\r\n    <div className='mainContainer' style={{ backgroundColor: '#f5f6f8' }}>\r\n      {/* <Col ></Col> */}\r\n      <h3 >Pacientes</h3>\r\n      <Row justify=\"start\">\r\n        <Col>\r\n          <div className=\"my-select-container\">\r\n            <Select\r\n              // Widget para buscar pacientes\r\n              style={{ borderRadius: 8, width: 320 }}\r\n              dropdownStyle={{ borderRadius: 8 }}\r\n              showSearch\r\n              placeholder=\"Buscar paciente\"\r\n              optionFilterProp=\"children\"\r\n              onChange={onChange}\r\n              onSearch={onSearch}\r\n              filterOption={(input, option) => option.children.toLowerCase().includes(input.toLowerCase())}\r\n            >\r\n              {\r\n                pacientesData.map((p) => <Option key={p._id} value={p._id}>{p.name}</Option>)\r\n              }\r\n            </Select>\r\n          </div>\r\n        </Col>\r\n        <Col style={{ marginLeft: 12 }}>\r\n          {TIPO === 'FISIO' ?\r\n            <div className='fila'>\r\n              <Button className='btnIconCentered' style={{ height: 30 }} onClick={() => setIsRegisterFisioModal(!isRegisterFisioModal)} size='small' icon={<PlusOutlined />} shape='round' type=\"primary\"  >Agregar Paciente</Button>\r\n              <CodeGenerate />\r\n            </div>\r\n            :\r\n            <Button className='btnIconCentered' style={{ height: 30 }} onClick={() => setIsRegisterModalOpen(!isRegisterModalOpen)} size='small' icon={<PlusOutlined />} shape='round' type=\"primary\" title='Agregar paciente' >Agregar Paciente</Button>\r\n          }\r\n        </Col>\r\n      </Row> <div style={{ height: '16px' }}></div>\r\n\r\n\r\n      {\r\n        TIPO === 'FISIO' ?\r\n          <ExpedienteFisio paciente={activePatient} setIsEditModalOpen={setIsEditFisioModalOpen} /> :\r\n          <Expedientes paciente={activePatient} setIsEditModalOpen={setIsEditModalOpen} />\r\n      }\r\n\r\n      {/* Modal For Register */}\r\n      <Register setIsModalOpen={setIsRegisterModalOpen} isModalOpen={isRegisterModalOpen} getPacientesData={getPacientesData} />\r\n\r\n      {/* Modal For Edit */}\r\n      <Register setIsModalOpen={setIsEditModalOpen} isModalOpen={isEditModalOpen} paciente={activePatient} getPacientesData={getPacientesData} />\r\n\r\n      {/* Modal For Register FISIO*/}\r\n      <RegisterFisio setIsModalOpen={setIsRegisterFisioModal} isModalOpen={isRegisterFisioModal} getPacientesData={getPacientesData} />\r\n\r\n      {/* Modal For Edit FISIO*/}\r\n      <RegisterFisio setIsModalOpen={setIsEditFisioModalOpen} isModalOpen={isEditFisioModalOpen} getPacientesData={getPacientesData} paciente={activePatient} />\r\n\r\n    </div >\r\n  )\r\n\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}