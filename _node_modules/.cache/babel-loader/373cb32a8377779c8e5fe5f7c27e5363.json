{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Gil\\\\Documents\\\\ReCreaMed\\\\src\\\\escalas\\\\results\\\\patients.results.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Select, Form, message } from 'antd';\nimport { getData, ids_hospitales, sendDataBody } from '../../resources';\nimport Loading from '../../loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PatientsResults() {\n  _s();\n  const [loading, setLoading] = useState(true);\n  const [allPacientes, setAllPacientes] = useState([]);\n  const [selectedPatient, setSelectedPatient] = useState(null);\n  const [patientScalas, setPatientScalas] = useState(null);\n  const [medicos, setMedicos] = useState([]); // List of medicos able to select\n\n  useEffect(() => {\n    const getAllMedicos = async () => {\n      await getData(`users/hospital/${ids_hospitales[0]}`).then(rs => {\n        getAllPacientes(rs);\n      });\n    };\n    getAllMedicos();\n    // usuario.rol === 'Medico' ? getPacientesOfDoctor(usuario._id) : getAllMedicos()\n  }, []);\n  const getAllPacientes = async medicos => {\n    const medicosFormatted = medicos.map(m => m._id);\n    await sendDataBody('pacientes/medicos', {\n      medicos: medicosFormatted\n    }).then(rs => {\n      setAllPacientes(rs);\n      setLoading(false);\n    });\n  };\n\n  // Form Methods\n  const handlePatientChange = value => {\n    // setSelectedPatient(value)\n    // const found = allPacientes.find((p) => p._id === value);\n    // if (found) {\n\n    //     let { medicos_asignados } = found\n    //     medicos_asignados.forEach((m) => {\n    //         m.label = m.name; m.value = m._id\n    //     });\n\n    //     setMedicos(medicos_asignados);\n\n    // } else {\n    //     message.error('Paciente no encontrado')\n    // }\n    getPatientScalas(value);\n  };\n  const getPatientScalas = id => {\n    getData(`encuestas/paciente/${id}`).then(rs => {\n      console.log(rs);\n      setPatientScalas(rs);\n    });\n  };\n  const filterOption = (input, option) => {\n    var _option$label;\n    return ((_option$label = option === null || option === void 0 ? void 0 : option.label) !== null && _option$label !== void 0 ? _option$label : '').toLowerCase().includes(input.toLowerCase());\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 25\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mainContainer\",\n    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n      children: \"Resultados de escalas de los diferentes pacientes\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      label: \"Paciente\",\n      name: \"usuario\",\n      rules: [{\n        required: true,\n        message: 'Selecciona el paciente'\n      }],\n      style: {\n        alignItems: 'center',\n        paddingTop: 20\n      },\n      labelCol: {\n        span: 6\n      },\n      wrapperCol: {\n        span: 18\n      },\n      children: /*#__PURE__*/_jsxDEV(Select, {\n        showSearch: true,\n        filterOption: filterOption,\n        onChange: handlePatientChange,\n        placeholder: \"Selecciona un paciente\",\n        value: selectedPatient,\n        options: allPacientes.map(p => ({\n          ...p,\n          key: p._id,\n          value: p._id,\n          label: p.name\n        }))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this), patientScalas ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: JSON.stringify(patientScalas)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 33\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Seleccione un paciente de la lista de arriba\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 74\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n}\n_s(PatientsResults, \"podKqHieLwHLTE6r9HdRiecXZ/Q=\");\n_c = PatientsResults;\nvar _c;\n$RefreshReg$(_c, \"PatientsResults\");","map":{"version":3,"names":["React","useEffect","useState","Select","Form","message","getData","ids_hospitales","sendDataBody","Loading","jsxDEV","_jsxDEV","PatientsResults","_s","loading","setLoading","allPacientes","setAllPacientes","selectedPatient","setSelectedPatient","patientScalas","setPatientScalas","medicos","setMedicos","getAllMedicos","then","rs","getAllPacientes","medicosFormatted","map","m","_id","handlePatientChange","value","getPatientScalas","id","console","log","filterOption","input","option","_option$label","label","toLowerCase","includes","fileName","_jsxFileName","lineNumber","columnNumber","className","children","Item","name","rules","required","style","alignItems","paddingTop","labelCol","span","wrapperCol","showSearch","onChange","placeholder","options","p","key","JSON","stringify","_c","$RefreshReg$"],"sources":["C:/Users/Gil/Documents/ReCreaMed/src/escalas/results/patients.results.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { Select, Form, message } from 'antd'\r\nimport { getData, ids_hospitales, sendDataBody } from '../../resources'\r\nimport Loading from '../../loading'\r\n\r\nexport default function PatientsResults() {\r\n\r\n    const [loading, setLoading] = useState(true)\r\n    const [allPacientes, setAllPacientes] = useState([])\r\n    const [selectedPatient, setSelectedPatient] = useState(null)\r\n    const [patientScalas, setPatientScalas] = useState(null)\r\n    const [medicos, setMedicos] = useState([]) // List of medicos able to select\r\n\r\n\r\n    useEffect(() => {\r\n        const getAllMedicos = async () => {\r\n            await getData(`users/hospital/${ids_hospitales[0]}`).then(rs => { getAllPacientes(rs) })\r\n        }\r\n\r\n        getAllMedicos()\r\n        // usuario.rol === 'Medico' ? getPacientesOfDoctor(usuario._id) : getAllMedicos()\r\n\r\n    }, [])\r\n\r\n    const getAllPacientes = async (medicos) => {\r\n        const medicosFormatted = medicos.map(m => m._id)\r\n        await sendDataBody('pacientes/medicos', { medicos: medicosFormatted }).then(rs => { setAllPacientes(rs); setLoading(false) })\r\n    }\r\n\r\n\r\n    // Form Methods\r\n    const handlePatientChange = (value) => {\r\n\r\n        // setSelectedPatient(value)\r\n        // const found = allPacientes.find((p) => p._id === value);\r\n        // if (found) {\r\n\r\n        //     let { medicos_asignados } = found\r\n        //     medicos_asignados.forEach((m) => {\r\n        //         m.label = m.name; m.value = m._id\r\n        //     });\r\n\r\n        //     setMedicos(medicos_asignados);\r\n\r\n        // } else {\r\n        //     message.error('Paciente no encontrado')\r\n        // }\r\n        getPatientScalas(value)\r\n    };\r\n\r\n\r\n    const getPatientScalas = (id) => {\r\n        getData(`encuestas/paciente/${id}`).then(rs => { console.log(rs); setPatientScalas(rs) })\r\n    }\r\n\r\n    const filterOption = (input, option) =>\r\n        (option?.label ?? '').toLowerCase().includes(input.toLowerCase());\r\n\r\n\r\n    if (loading) return <Loading />;\r\n\r\n    return (\r\n        <div className='mainContainer'>\r\n\r\n            <h5>Resultados de escalas de los diferentes pacientes</h5>\r\n\r\n            <Form.Item label=\"Paciente\" name=\"usuario\" rules={[{ required: true, message: 'Selecciona el paciente' }]}\r\n                style={{ alignItems: 'center', paddingTop: 20 }}\r\n                labelCol={{ span: 6 }} wrapperCol={{ span: 18 }}>\r\n\r\n                <Select\r\n                    showSearch\r\n                    filterOption={filterOption}\r\n                    onChange={handlePatientChange}\r\n                    placeholder='Selecciona un paciente'\r\n                    value={selectedPatient}\r\n                    options={\r\n                        allPacientes.map(p => (\r\n                            {\r\n                                ...p,\r\n                                key: p._id,\r\n                                value: p._id,\r\n                                label: p.name\r\n                            }\r\n                        ))\r\n                    }\r\n                />\r\n            </Form.Item>\r\n\r\n\r\n            {\r\n                patientScalas ? <p>{JSON.stringify(patientScalas)}</p> : <p>Seleccione un paciente de la lista de arriba</p>\r\n            }\r\n\r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}