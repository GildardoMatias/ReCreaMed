{"ast":null,"code":"import React,{useState,useEffect}from'react';import{dolor_catalog,initialDolorValues}from'./dolor_catalog';import{Form,Input,Button,Slider,Checkbox,Radio,message}from'antd';import{getData,sendDataBody}from'../../resources';import logo from\"../../assets/Logo.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function DolorEncuesta(props){// For check if the encuesta existts on db\nconst[encuestaNotExists,setEncuestaNotExists]=useState(null);const[checking,setChecking]=useState(true);const[pacienteData,setPacienteData]=useState({});const[medicoData,setMedicoData]=useState({});useEffect(()=>{checkEncuesta();},[]);const checkEncuesta=()=>{getData('getuser/'+props.idpaciente).then(rs=>{setPacienteData(rs);});getData('getuser/'+props.idmedico).then(rs=>{setMedicoData(rs);});getData(\"encuestas/uuid/\".concat(props.token)).then(rs=>{console.log(rs);setEncuestaNotExists(rs.message==='The survey does not exist');}).then(()=>{setChecking(false);console.log('Not exists: ',encuestaNotExists);});};const onFinish=values=>{const body={usuario:props.idpaciente,medico:props.idmedico,respuestas_dolor:values,tipo:'dolor',uuid:props.token};console.log('Body:',body);sendDataBody('encuestas/add',body).then(rs=>{console.log('add enc resp',rs);message.success(rs.message);}).then(()=>checkEncuesta());};const onFinishFailed=errorInfo=>{console.log('init',initialDolorValues);console.log('Failed:',errorInfo);errorInfo.errorFields.map(p=>{message.error('Conteste la pregunta '+p.name);});};const onChange=checkedValues=>{console.log('checked = ',checkedValues);};const marks={0:'0',10:'10'};// Loading state\nif(checking)return/*#__PURE__*/_jsx(\"div\",{style:{paddingTop:180},children:/*#__PURE__*/_jsx(\"div\",{style:{margin:'auto',width:'40%',textAlign:'center'},children:/*#__PURE__*/_jsx(\"h3\",{children:\"Cargando\"})})});if(!encuestaNotExists)return/*#__PURE__*/_jsx(\"div\",{style:{paddingTop:180},children:/*#__PURE__*/_jsxs(\"div\",{style:{margin:'auto',width:'40%',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Gracias por contestar la encuesta\"}),/*#__PURE__*/_jsx(\"img\",{width:256,src:logo,alt:\"recreamedLogo\",style:{margin:'auto'}})]})});return/*#__PURE__*/_jsxs(\"div\",{className:\"mainContainer\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Encuesta de Dolor\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"Medico: \",medicoData.name]}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"Paciente: \",pacienteData.name]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Form,{layout:\"vertical\",name:\"basic\"// labelCol={{ span: 24 }}\n// wrapperCol={{ span: 24 }}\n,initialValues:initialDolorValues,onFinish:onFinish,onFinishFailed:onFinishFailed,autoComplete:\"off\",children:[dolor_catalog.map(p=>{let input;switch(p.tipo){case'metrica':input=/*#__PURE__*/_jsx(Slider,{defaultValue:0,min:0,max:10,marks:marks});break;case'multiple':input=/*#__PURE__*/_jsx(Checkbox.Group,{options:p.respuestas,defaultValue:['Apple'],onChange:onChange});break;case'seleccion':input=/*#__PURE__*/_jsx(Radio.Group,{children:p.respuestas.map((r,i)=>{return/*#__PURE__*/_jsx(Radio,{value:i,children:r});})});break;case'texto':input=/*#__PURE__*/_jsx(Input,{});break;default:input=/*#__PURE__*/_jsx(Input,{});}return p.tipo!=='titulo'?/*#__PURE__*/_jsx(Form.Item,{label:p.pregunta,name:p.n,rules:[{required:true,message:'Conteste correctamente'}],children:input},p.n):/*#__PURE__*/_jsx(\"h5\",{children:\"\".concat(p.n,\".  \").concat(p.pregunta)});}),/*#__PURE__*/_jsx(Form.Item,{wrapperCol:{offset:8,span:16},children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",children:\"Guardar\"})})]})]});}","map":{"version":3,"names":["React","useState","useEffect","dolor_catalog","initialDolorValues","Form","Input","Button","Slider","Checkbox","Radio","message","getData","sendDataBody","logo","jsx","_jsx","jsxs","_jsxs","DolorEncuesta","props","encuestaNotExists","setEncuestaNotExists","checking","setChecking","pacienteData","setPacienteData","medicoData","setMedicoData","checkEncuesta","idpaciente","then","rs","idmedico","concat","token","console","log","onFinish","values","body","usuario","medico","respuestas_dolor","tipo","uuid","success","onFinishFailed","errorInfo","errorFields","map","p","error","name","onChange","checkedValues","marks","style","paddingTop","children","margin","width","textAlign","src","alt","className","layout","initialValues","autoComplete","input","defaultValue","min","max","Group","options","respuestas","r","i","value","Item","label","pregunta","n","rules","required","wrapperCol","offset","span","type","htmlType"],"sources":["C:/Users/Gil/Documents/ReCreaMed/src/escalas/dolor/dolorEncuesta.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { dolor_catalog, initialDolorValues } from './dolor_catalog';\r\nimport { Form, Input, Button, Slider, Checkbox, Radio, message } from 'antd';\r\nimport { getData, sendDataBody } from '../../resources';\r\nimport logo from \"../../assets/Logo.png\";\r\n\r\nexport default function DolorEncuesta(props) {\r\n    // For check if the encuesta existts on db\r\n    const [encuestaNotExists, setEncuestaNotExists] = useState(null)\r\n    const [checking, setChecking] = useState(true)\r\n    const [pacienteData, setPacienteData] = useState({})\r\n    const [medicoData, setMedicoData] = useState({})\r\n\r\n    useEffect(() => {\r\n        checkEncuesta()\r\n    }, [])\r\n\r\n\r\n    const checkEncuesta = () => {\r\n\r\n        getData('getuser/' + props.idpaciente).then((rs) => { setPacienteData(rs) })\r\n        getData('getuser/' + props.idmedico).then((rs) => { setMedicoData(rs) })\r\n\r\n\r\n        getData(`encuestas/uuid/${props.token}`).then(rs => {\r\n            console.log(rs);\r\n            setEncuestaNotExists(rs.message === 'The survey does not exist')\r\n        }).then(() => { setChecking(false); console.log('Not exists: ', encuestaNotExists); })\r\n    }\r\n\r\n    const onFinish = (values) => {\r\n        const body = {\r\n            usuario: props.idpaciente,\r\n            medico: props.idmedico,\r\n            respuestas_dolor: values,\r\n            tipo: 'dolor',\r\n            uuid: props.token\r\n        }\r\n        console.log('Body:', body);\r\n        sendDataBody('encuestas/add', body).then((rs) => {\r\n            console.log('add enc resp', rs)\r\n            message.success(rs.message)\r\n        }).then(() => checkEncuesta())\r\n    };\r\n    const onFinishFailed = (errorInfo) => {\r\n        console.log('init', initialDolorValues)\r\n        console.log('Failed:', errorInfo);\r\n        errorInfo.errorFields.map((p) => {\r\n            message.error('Conteste la pregunta ' + p.name)\r\n        })\r\n    };\r\n    const onChange = (checkedValues) => {\r\n        console.log('checked = ', checkedValues);\r\n    };\r\n\r\n    const marks = { 0: '0', 10: '10' };\r\n\r\n    // Loading state\r\n    if (checking) return <div style={{ paddingTop: 180 }}>\r\n        <div style={{ margin: 'auto', width: '40%', textAlign: 'center' }}>\r\n            <h3 >Cargando</h3>\r\n        </div>\r\n    </div>\r\n\r\n    if (!encuestaNotExists) return <div style={{ paddingTop: 180 }}>\r\n        <div style={{ margin: 'auto', width: '40%', textAlign: 'center' }}>\r\n            <h3 >Gracias por contestar la encuesta</h3>\r\n            <img width={256} src={logo} alt=\"recreamedLogo\" style={{ margin: 'auto' }} />\r\n        </div>\r\n    </div>\r\n    return (\r\n        <div className='mainContainer'>\r\n            <h4>Encuesta de Dolor</h4>\r\n            <br />\r\n            <h5>Medico: {medicoData.name}</h5>\r\n            <h5>Paciente: {pacienteData.name}</h5>\r\n            <br />\r\n            <Form\r\n                layout='vertical'\r\n                name=\"basic\"\r\n                // labelCol={{ span: 24 }}\r\n                // wrapperCol={{ span: 24 }}\r\n                initialValues={initialDolorValues}\r\n                onFinish={onFinish}\r\n                onFinishFailed={onFinishFailed}\r\n                autoComplete=\"off\"\r\n            >\r\n                {\r\n                    dolor_catalog.map((p) => {\r\n                        let input;\r\n                        switch (p.tipo) {\r\n                            case 'metrica':\r\n                                input = <Slider defaultValue={0} min={0} max={10} marks={marks} />\r\n                                break;\r\n                            case 'multiple':\r\n                                input = <Checkbox.Group options={p.respuestas} defaultValue={['Apple']} onChange={onChange} />\r\n                                break;\r\n                            case 'seleccion':\r\n                                input = <Radio.Group>\r\n                                    {p.respuestas.map((r, i) => { return <Radio value={i}>{r}</Radio> })}\r\n                                </Radio.Group>;\r\n                                break;\r\n                            case 'texto':\r\n                                input = < Input />;\r\n                                break;\r\n                            default:\r\n                                input = < Input />;\r\n                        }\r\n\r\n                        return p.tipo !== 'titulo' ? <Form.Item\r\n                            key={p.n}\r\n                            label={p.pregunta}\r\n                            name={p.n}\r\n                            rules={[{ required: true, message: 'Conteste correctamente' }]}\r\n                        >\r\n                            {input}\r\n                        </Form.Item> : <h5>{`${p.n}.  ${p.pregunta}`}</h5>\r\n                    })\r\n                }\r\n\r\n\r\n                <Form.Item\r\n                    wrapperCol={{\r\n                        offset: 8,\r\n                        span: 16,\r\n                    }}\r\n                >\r\n                    <Button type=\"primary\" htmlType=\"submit\">\r\n                        Guardar\r\n                    </Button>\r\n                </Form.Item>\r\n            </Form>\r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}